require("source-map-support").install();
module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 103);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_n7qeehgwAXbv7rlmm8esuA = Function('return this')();
if (!__cov_n7qeehgwAXbv7rlmm8esuA.__coverage__) {
   __cov_n7qeehgwAXbv7rlmm8esuA.__coverage__ = {};
}
__cov_n7qeehgwAXbv7rlmm8esuA = __cov_n7qeehgwAXbv7rlmm8esuA.__coverage__;
if (!__cov_n7qeehgwAXbv7rlmm8esuA['/home/travis/build/mozilla/web-ext/src/util/logger.js']) {
   __cov_n7qeehgwAXbv7rlmm8esuA['/home/travis/build/mozilla/web-ext/src/util/logger.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/logger.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 1, "11": 0, "12": 0, "13": 1, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 1, "53": 0, "54": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0], "21": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "(anonymous_2)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "ConsoleStream", "line": 47, "loc": { "start": { "line": 47, "column": 59 }, "end": { "line": 47, "column": 59 } } }, "4": { "name": "format", "line": 53, "loc": { "start": { "line": 53, "column": 53 }, "end": { "line": 53, "column": 53 } } }, "5": { "name": "makeVerbose", "line": 58, "loc": { "start": { "line": 58, "column": 16 }, "end": { "line": 58, "column": 16 } } }, "6": { "name": "write", "line": 63, "loc": { "start": { "line": 63, "column": 4 }, "end": { "line": 65, "column": 10 } } }, "7": { "name": "startCapturing", "line": 77, "loc": { "start": { "line": 77, "column": 19 }, "end": { "line": 77, "column": 19 } } }, "8": { "name": "stopCapturing", "line": 81, "loc": { "start": { "line": 81, "column": 18 }, "end": { "line": 81, "column": 18 } } }, "9": { "name": "flushCapturedLogs", "line": 86, "loc": { "start": { "line": 86, "column": 67 }, "end": { "line": 86, "column": 67 } } }, "10": { "name": "createLogger", "line": 116, "loc": { "start": { "line": 116, "column": 7 }, "end": { "line": 119, "column": 10 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 116, "column": 16 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 42, "column": 13 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 47, "column": 59 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 47, "column": 55 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 48, "column": 9 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 49, "column": 9 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 50, "column": 9 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 53, "column": 10 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 54, "column": 10 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 55, "column": 14 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 59, "column": 9 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 64, "column": 47 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 66, "column": 10 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 67, "column": 8 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 68, "column": 12 }, "end": { "line": null, "column": null } }, "28": { "start": { "line": 69, "column": 10 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 70, "column": 13 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 72, "column": 21 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 78, "column": 9 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 82, "column": 9 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 83, "column": 9 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 86, "column": 63 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "39": { "start": { "line": 87, "column": 22 }, "end": { "line": null, "column": null } }, "40": { "start": { "line": 87, "column": 15 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 88, "column": 19 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 90, "column": 9 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 94, "column": 7 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 116, "column": 7 }, "end": { "line": null, "column": null } }, "53": { "start": { "line": 118, "column": 63 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 120, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 47, "type": "cond-expr", "locations": [{ "start": { "line": 47, "column": 55 }, "end": { "line": 47, "column": 55 } }, { "start": { "line": 47, "column": 55 }, "end": { "line": 47, "column": 59 } }] }, "4": { "line": 47, "type": "binary-expr", "locations": [{ "start": { "line": 47, "column": 55 }, "end": { "line": 47, "column": 55 } }, { "start": { "line": 47, "column": 55 }, "end": { "line": 47, "column": 55 } }] }, "5": { "line": 47, "type": "cond-expr", "locations": [{ "start": { "line": 47, "column": 25 }, "end": { "line": 47, "column": 59 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 54, "type": "cond-expr", "locations": [{ "start": { "line": 54, "column": 38 }, "end": { "line": 54, "column": 74 } }, { "start": { "line": 54, "column": 74 }, "end": { "line": 54, "column": 4 } }] }, "7": { "line": 64, "type": "cond-expr", "locations": [{ "start": { "line": 64, "column": 47 }, "end": { "line": 64, "column": 47 } }, { "start": { "line": 64, "column": 47 }, "end": { "line": 65, "column": 10 } }] }, "8": { "line": 64, "type": "binary-expr", "locations": [{ "start": { "line": 64, "column": 47 }, "end": { "line": 64, "column": 47 } }, { "start": { "line": 64, "column": 47 }, "end": { "line": 64, "column": 47 } }] }, "9": { "line": 64, "type": "cond-expr", "locations": [{ "start": { "line": 64, "column": 20 }, "end": { "line": 65, "column": 10 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 66, "type": "cond-expr", "locations": [{ "start": { "line": 66, "column": 53 }, "end": { "line": 66, "column": 38 } }, { "start": { "line": 66, "column": 68 }, "end": { "line": 66, "column": 4 } }] }, "11": { "line": 67, "type": "if", "locations": [{ "start": { "line": 67, "column": 8 }, "end": { "line": 67, "column": 8 } }, { "start": { "line": 67, "column": 8 }, "end": { "line": 67, "column": 8 } }] }, "12": { "line": 69, "type": "if", "locations": [{ "start": { "line": 69, "column": 10 }, "end": { "line": 69, "column": 10 } }, { "start": { "line": 69, "column": 10 }, "end": { "line": 69, "column": 10 } }] }, "13": { "line": 86, "type": "cond-expr", "locations": [{ "start": { "line": 86, "column": 63 }, "end": { "line": 86, "column": 63 } }, { "start": { "line": 86, "column": 63 }, "end": { "line": 86, "column": 67 } }] }, "14": { "line": 86, "type": "binary-expr", "locations": [{ "start": { "line": 86, "column": 63 }, "end": { "line": 86, "column": 63 } }, { "start": { "line": 86, "column": 63 }, "end": { "line": 86, "column": 63 } }] }, "15": { "line": 86, "type": "cond-expr", "locations": [{ "start": { "line": 86, "column": 36 }, "end": { "line": 86, "column": 67 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 118, "type": "cond-expr", "locations": [{ "start": { "line": 118, "column": 63 }, "end": { "line": 118, "column": 63 } }, { "start": { "line": 118, "column": 63 }, "end": { "line": 119, "column": 10 } }] }, "20": { "line": 118, "type": "binary-expr", "locations": [{ "start": { "line": 118, "column": 63 }, "end": { "line": 118, "column": 63 } }, { "start": { "line": 118, "column": 63 }, "end": { "line": 118, "column": 63 } }] }, "21": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import bunyan, {nameFromLevel, createLogger as defaultLogCreator}", "  from 'bunyan';", "", "", "// Bunyan-related Flow types", "", "export type TRACE = 10;", "export type DEBUG = 20;", "export type INFO = 30;", "export type WARN = 40;", "export type ERROR = 50;", "export type FATAL = 60;", "", "export type BunyanLogLevel =", "  TRACE | DEBUG | INFO | WARN | ERROR | FATAL;", "", "export type BunyanLogEntry = {|", "  name: string,", "  msg: string,", "  level: BunyanLogLevel,", "|};", "", "export type Logger = {", "  debug: (msg: string, ...args: any) => void,", "  error: (msg: string, ...args: any) => void,", "  info: (msg: string, ...args: any) => void,", "  warn: (msg: string, ...args: any) => void,", "};", "", "", "// ConsoleStream types and implementation.", "", "export type ConsoleStreamParams = {|", "  verbose?: boolean,", "|};", "", "export type ConsoleOptions = {|", "  localProcess?: typeof process,", "|};", "", "export class ConsoleStream {", "  verbose: boolean;", "  isCapturing: boolean;", "  capturedMessages: Array<string>;", "", "  constructor({verbose = false}: ConsoleStreamParams = {}) {", "    this.verbose = verbose;", "    this.isCapturing = false;", "    this.capturedMessages = [];", "  }", "", "  format({name, msg, level}: BunyanLogEntry): string {", "    const prefix = this.verbose ? `[${name}][${nameFromLevel[level]}] ` : '';", "    return `${prefix}${msg}\\n`;", "  }", "", "  makeVerbose() {", "    this.verbose = true;", "  }", "", "  write(", "    packet: BunyanLogEntry,", "    {localProcess = process}: ConsoleOptions = {}", "  ): void {", "    const thisLevel: BunyanLogLevel = this.verbose ? bunyan.TRACE : bunyan.INFO;", "    if (packet.level >= thisLevel) {", "      const msg = this.format(packet);", "      if (this.isCapturing) {", "        this.capturedMessages.push(msg);", "      } else {", "        localProcess.stdout.write(msg);", "      }", "    }", "  }", "", "  startCapturing() {", "    this.isCapturing = true;", "  }", "", "  stopCapturing() {", "    this.isCapturing = false;", "    this.capturedMessages = [];", "  }", "", "  flushCapturedLogs({localProcess = process}: ConsoleOptions = {}) {", "    for (const msg of this.capturedMessages) {", "      localProcess.stdout.write(msg);", "    }", "    this.capturedMessages = [];", "  }", "}", "", "export const consoleStream = new ConsoleStream();", "", "", "// createLogger types and implementation.", "", "export type BunyanStreamConfig = {|", "  type: string,", "  stream: ConsoleStream,", "|};", "", "export type CreateBunyanLogParams = {|", "  name: string,", "  level: BunyanLogLevel,", "  streams: Array<BunyanStreamConfig>,", "|};", "", "export type CreateBunyanLogFn = (params: CreateBunyanLogParams) => Logger;", "", "export type CreateLoggerOptions = {|", "  createBunyanLog: CreateBunyanLogFn,", "|};", "", "export function createLogger(", "  filename: string,", "  {createBunyanLog = defaultLogCreator}: CreateLoggerOptions = {}", "): Logger {", "  return createBunyanLog({", "    // Strip the leading src/ from file names (which is in all file names) to", "    // make the name less redundant.", "    name: filename.replace(/^src\\//, ''),", "    // Capture all log levels and let the stream filter them.", "    level: bunyan.TRACE,", "    streams: [{", "      type: 'raw',", "      stream: consoleStream,", "    }],", "  });", "}", ""] };
}
__cov_n7qeehgwAXbv7rlmm8esuA = __cov_n7qeehgwAXbv7rlmm8esuA['/home/travis/build/mozilla/web-ext/src/util/logger.js'];
__cov_n7qeehgwAXbv7rlmm8esuA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_n7qeehgwAXbv7rlmm8esuA.s['2']++;exports.consoleStream = exports.ConsoleStream = undefined;__cov_n7qeehgwAXbv7rlmm8esuA.s['3']++;var _classCallCheck2 = __webpack_require__(14);__cov_n7qeehgwAXbv7rlmm8esuA.s['4']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_n7qeehgwAXbv7rlmm8esuA.s['5']++;var _createClass2 = __webpack_require__(16);__cov_n7qeehgwAXbv7rlmm8esuA.s['6']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_n7qeehgwAXbv7rlmm8esuA.s['7']++;exports.createLogger = createLogger;__cov_n7qeehgwAXbv7rlmm8esuA.s['8']++;var _bunyan = __webpack_require__(93);__cov_n7qeehgwAXbv7rlmm8esuA.s['9']++;var _bunyan2 = _interopRequireDefault(_bunyan);function _interopRequireDefault(obj) {
   __cov_n7qeehgwAXbv7rlmm8esuA.f['1']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['11']++;return (__cov_n7qeehgwAXbv7rlmm8esuA.b['2'][0]++, obj) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['2'][1]++, obj.__esModule) ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['1'][0]++, obj) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['1'][1]++, { default: obj });
}__cov_n7qeehgwAXbv7rlmm8esuA.s['12']++;var ConsoleStream = exports.ConsoleStream = function () {
   __cov_n7qeehgwAXbv7rlmm8esuA.f['2']++;function ConsoleStream() {
      __cov_n7qeehgwAXbv7rlmm8esuA.f['3']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['14']++;var _ref = (__cov_n7qeehgwAXbv7rlmm8esuA.b['4'][0]++, arguments.length > 0) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['4'][1]++, arguments[0] !== undefined) ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['3'][0]++, arguments[0]) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['3'][1]++, {}),
          _ref$verbose = _ref.verbose,
          verbose = _ref$verbose === undefined ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['5'][0]++, false) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['5'][1]++, _ref$verbose);__cov_n7qeehgwAXbv7rlmm8esuA.s['15']++;(0, _classCallCheck3.default)(this, ConsoleStream);__cov_n7qeehgwAXbv7rlmm8esuA.s['16']++;this.verbose = verbose;__cov_n7qeehgwAXbv7rlmm8esuA.s['17']++;this.isCapturing = false;__cov_n7qeehgwAXbv7rlmm8esuA.s['18']++;this.capturedMessages = [];
   }__cov_n7qeehgwAXbv7rlmm8esuA.s['19']++;(0, _createClass3.default)(ConsoleStream, [{ key: 'format', value: function format(_ref2) {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['4']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['20']++;var name = _ref2.name,
             msg = _ref2.msg,
             level = _ref2.level;__cov_n7qeehgwAXbv7rlmm8esuA.s['21']++;var prefix = this.verbose ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['6'][0]++, '[' + name + '][' + _bunyan.nameFromLevel[level] + '] ') : (__cov_n7qeehgwAXbv7rlmm8esuA.b['6'][1]++, '');__cov_n7qeehgwAXbv7rlmm8esuA.s['22']++;return '' + prefix + msg + '\n';
      } }, { key: 'makeVerbose', value: function makeVerbose() {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['5']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['23']++;this.verbose = true;
      } }, { key: 'write', value: function write(packet) {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['6']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['24']++;var _ref3 = (__cov_n7qeehgwAXbv7rlmm8esuA.b['8'][0]++, arguments.length > 1) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['8'][1]++, arguments[1] !== undefined) ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['7'][0]++, arguments[1]) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['7'][1]++, {}),
             _ref3$localProcess = _ref3.localProcess,
             localProcess = _ref3$localProcess === undefined ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['9'][0]++, process) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['9'][1]++, _ref3$localProcess);__cov_n7qeehgwAXbv7rlmm8esuA.s['25']++;var thisLevel = this.verbose ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['10'][0]++, _bunyan2.default.TRACE) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['10'][1]++, _bunyan2.default.INFO);__cov_n7qeehgwAXbv7rlmm8esuA.s['26']++;if (packet.level >= thisLevel) {
            __cov_n7qeehgwAXbv7rlmm8esuA.b['11'][0]++;__cov_n7qeehgwAXbv7rlmm8esuA.s['27']++;var _msg = this.format(packet);__cov_n7qeehgwAXbv7rlmm8esuA.s['28']++;if (this.isCapturing) {
               __cov_n7qeehgwAXbv7rlmm8esuA.b['12'][0]++;__cov_n7qeehgwAXbv7rlmm8esuA.s['29']++;this.capturedMessages.push(_msg);
            } else {
               __cov_n7qeehgwAXbv7rlmm8esuA.b['12'][1]++;__cov_n7qeehgwAXbv7rlmm8esuA.s['30']++;localProcess.stdout.write(_msg);
            }
         } else {
            __cov_n7qeehgwAXbv7rlmm8esuA.b['11'][1]++;
         }
      } }, { key: 'startCapturing', value: function startCapturing() {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['7']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['31']++;this.isCapturing = true;
      } }, { key: 'stopCapturing', value: function stopCapturing() {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['8']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['32']++;this.isCapturing = false;__cov_n7qeehgwAXbv7rlmm8esuA.s['33']++;this.capturedMessages = [];
      } }, { key: 'flushCapturedLogs', value: function flushCapturedLogs() {
         __cov_n7qeehgwAXbv7rlmm8esuA.f['9']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['34']++;var _ref4 = (__cov_n7qeehgwAXbv7rlmm8esuA.b['14'][0]++, arguments.length > 0) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['14'][1]++, arguments[0] !== undefined) ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['13'][0]++, arguments[0]) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['13'][1]++, {}),
             _ref4$localProcess = _ref4.localProcess,
             localProcess = _ref4$localProcess === undefined ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['15'][0]++, process) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['15'][1]++, _ref4$localProcess);__cov_n7qeehgwAXbv7rlmm8esuA.s['35']++;var _iteratorNormalCompletion = true;__cov_n7qeehgwAXbv7rlmm8esuA.s['36']++;var _didIteratorError = false;__cov_n7qeehgwAXbv7rlmm8esuA.s['37']++;var _iteratorError = undefined;__cov_n7qeehgwAXbv7rlmm8esuA.s['38']++;try {
            __cov_n7qeehgwAXbv7rlmm8esuA.s['39']++;for (var _iterator = this.capturedMessages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
               __cov_n7qeehgwAXbv7rlmm8esuA.s['40']++;var _msg2 = _step.value;__cov_n7qeehgwAXbv7rlmm8esuA.s['41']++;localProcess.stdout.write(_msg2);
            }
         } catch (err) {
            __cov_n7qeehgwAXbv7rlmm8esuA.s['42']++;_didIteratorError = true;__cov_n7qeehgwAXbv7rlmm8esuA.s['43']++;_iteratorError = err;
         } finally {
            __cov_n7qeehgwAXbv7rlmm8esuA.s['44']++;try {
               __cov_n7qeehgwAXbv7rlmm8esuA.s['45']++;if ((__cov_n7qeehgwAXbv7rlmm8esuA.b['17'][0]++, !_iteratorNormalCompletion) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['17'][1]++, _iterator.return)) {
                  __cov_n7qeehgwAXbv7rlmm8esuA.b['16'][0]++;__cov_n7qeehgwAXbv7rlmm8esuA.s['46']++;_iterator.return();
               } else {
                  __cov_n7qeehgwAXbv7rlmm8esuA.b['16'][1]++;
               }
            } finally {
               __cov_n7qeehgwAXbv7rlmm8esuA.s['47']++;if (_didIteratorError) {
                  __cov_n7qeehgwAXbv7rlmm8esuA.b['18'][0]++;__cov_n7qeehgwAXbv7rlmm8esuA.s['48']++;throw _iteratorError;
               } else {
                  __cov_n7qeehgwAXbv7rlmm8esuA.b['18'][1]++;
               }
            }
         }__cov_n7qeehgwAXbv7rlmm8esuA.s['49']++;this.capturedMessages = [];
      } }]);__cov_n7qeehgwAXbv7rlmm8esuA.s['50']++;return ConsoleStream;
}();__cov_n7qeehgwAXbv7rlmm8esuA.s['51']++;var consoleStream = exports.consoleStream = new ConsoleStream();function createLogger(filename) {
   __cov_n7qeehgwAXbv7rlmm8esuA.f['10']++;__cov_n7qeehgwAXbv7rlmm8esuA.s['53']++;var _ref5 = (__cov_n7qeehgwAXbv7rlmm8esuA.b['20'][0]++, arguments.length > 1) && (__cov_n7qeehgwAXbv7rlmm8esuA.b['20'][1]++, arguments[1] !== undefined) ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['19'][0]++, arguments[1]) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['19'][1]++, {}),
       _ref5$createBunyanLog = _ref5.createBunyanLog,
       createBunyanLog = _ref5$createBunyanLog === undefined ? (__cov_n7qeehgwAXbv7rlmm8esuA.b['21'][0]++, _bunyan.createLogger) : (__cov_n7qeehgwAXbv7rlmm8esuA.b['21'][1]++, _ref5$createBunyanLog);__cov_n7qeehgwAXbv7rlmm8esuA.s['54']++;return createBunyanLog({ name: filename.replace(/^src\//, ''), level: _bunyan2.default.TRACE, streams: [{ type: 'raw', stream: consoleStream }] });
}

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("mocha");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_G2sjO74yNFDSsiyH2pUYRw = Function('return this')();
if (!__cov_G2sjO74yNFDSsiyH2pUYRw.__coverage__) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.__coverage__ = {};
}
__cov_G2sjO74yNFDSsiyH2pUYRw = __cov_G2sjO74yNFDSsiyH2pUYRw.__coverage__;
if (!__cov_G2sjO74yNFDSsiyH2pUYRw['/home/travis/build/mozilla/web-ext/src/errors.js']) {
   __cov_G2sjO74yNFDSsiyH2pUYRw['/home/travis/build/mozilla/web-ext/src/errors.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/errors.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 1, "17": 0, "18": 0, "19": 0, "20": 1, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 1, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 1, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 1, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 1, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 1, "68": 0, "69": 0, "70": 0, "71": 0, "72": 1, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 1, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "(anonymous_2)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "WebExtError", "line": 9, "loc": { "start": { "line": 9, "column": 14 }, "end": { "line": 9, "column": 31 } } }, "4": { "name": "(anonymous_4)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "5": { "name": "UsageError", "line": 19, "loc": { "start": { "line": 19, "column": 14 }, "end": { "line": 19, "column": 31 } } }, "6": { "name": "(anonymous_6)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "7": { "name": "InvalidManifest", "line": 29, "loc": { "start": { "line": 29, "column": 14 }, "end": { "line": 29, "column": 31 } } }, "8": { "name": "(anonymous_8)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "RemoteTempInstallNotSupported", "line": 39, "loc": { "start": { "line": 39, "column": 14 }, "end": { "line": 39, "column": 31 } } }, "10": { "name": "(anonymous_10)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "11": { "name": "MultiExtensionsReloadError", "line": 49, "loc": { "start": { "line": 49, "column": 14 }, "end": { "line": 49, "column": 45 } } }, "12": { "name": "onlyInstancesOf", "line": 75, "loc": { "start": { "line": 75, "column": 7 }, "end": { "line": 77, "column": 12 } } }, "13": { "name": "(anonymous_13)", "line": 78, "loc": { "start": { "line": 78, "column": 9 }, "end": { "line": 78, "column": 20 } } }, "14": { "name": "onlyErrorsWithCode", "line": 108, "loc": { "start": { "line": 108, "column": 7 }, "end": { "line": 111, "column": 12 } } }, "15": { "name": "(anonymous_15)", "line": 112, "loc": { "start": { "line": 112, "column": 9 }, "end": { "line": 112, "column": 20 } } }, "16": { "name": "isErrorWithCode", "line": 132, "loc": { "start": { "line": 132, "column": 7 }, "end": { "line": 135, "column": 11 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 75, "column": 16 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 108, "column": 16 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 132, "column": 16 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 8, "column": 13 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 9, "column": 14 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 10, "column": 10 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 18, "column": 13 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 19, "column": 14 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 20, "column": 10 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 28, "column": 13 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 29, "column": 14 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 30, "column": 10 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "36": { "start": { "line": 38, "column": 13 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 39, "column": 14 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 40, "column": 10 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 48, "column": 13 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 49, "column": 14 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 50, "column": 8 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 51, "column": 37 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 52, "column": 12 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 53, "column": 52 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "60": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 55, "column": 10 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 57, "column": 10 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 58, "column": 9 }, "end": { "line": null, "column": null } }, "65": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 75, "column": 7 }, "end": { "line": null, "column": null } }, "68": { "start": { "line": 78, "column": 9 }, "end": { "line": null, "column": null } }, "69": { "start": { "line": 79, "column": 8 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 80, "column": 13 }, "end": { "line": null, "column": null } }, "71": { "start": { "line": 82, "column": 12 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 108, "column": 7 }, "end": { "line": null, "column": null } }, "73": { "start": { "line": 112, "column": 9 }, "end": { "line": null, "column": null } }, "74": { "start": { "line": 113, "column": 8 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 115, "column": 8 }, "end": { "line": null, "column": null } }, "76": { "start": { "line": 116, "column": 10 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 118, "column": 21 }, "end": { "line": null, "column": null } }, "78": { "start": { "line": 120, "column": 11 }, "end": { "line": null, "column": null } }, "79": { "start": { "line": 121, "column": 19 }, "end": { "line": null, "column": null } }, "80": { "start": { "line": 124, "column": 8 }, "end": { "line": null, "column": null } }, "81": { "start": { "line": 125, "column": 12 }, "end": { "line": null, "column": null } }, "82": { "start": { "line": 128, "column": 11 }, "end": { "line": null, "column": null } }, "83": { "start": { "line": 132, "column": 7 }, "end": { "line": null, "column": null } }, "84": { "start": { "line": 136, "column": 6 }, "end": { "line": null, "column": null } }, "85": { "start": { "line": 137, "column": 11 }, "end": { "line": null, "column": null } }, "86": { "start": { "line": 138, "column": 9 }, "end": { "line": null, "column": null } }, "87": { "start": { "line": 139, "column": 11 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 142, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 10, "type": "binary-expr", "locations": [{ "start": { "line": 10, "column": 10 }, "end": { "line": 10, "column": 10 } }, { "start": { "line": 10, "column": 10 }, "end": { "line": 10, "column": 10 } }] }, "4": { "line": 20, "type": "binary-expr", "locations": [{ "start": { "line": 20, "column": 10 }, "end": { "line": 20, "column": 10 } }, { "start": { "line": 20, "column": 10 }, "end": { "line": 20, "column": 10 } }] }, "5": { "line": 30, "type": "binary-expr", "locations": [{ "start": { "line": 30, "column": 10 }, "end": { "line": 30, "column": 10 } }, { "start": { "line": 30, "column": 10 }, "end": { "line": 30, "column": 10 } }] }, "6": { "line": 40, "type": "binary-expr", "locations": [{ "start": { "line": 40, "column": 10 }, "end": { "line": 40, "column": 10 } }, { "start": { "line": 40, "column": 10 }, "end": { "line": 40, "column": 10 } }] }, "7": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 57, "type": "binary-expr", "locations": [{ "start": { "line": 57, "column": 10 }, "end": { "line": 57, "column": 10 } }, { "start": { "line": 57, "column": 10 }, "end": { "line": 57, "column": 10 } }] }, "11": { "line": 79, "type": "if", "locations": [{ "start": { "line": 79, "column": 8 }, "end": { "line": 79, "column": 8 } }, { "start": { "line": 79, "column": 8 }, "end": { "line": 79, "column": 8 } }] }, "12": { "line": 115, "type": "if", "locations": [{ "start": { "line": 115, "column": 8 }, "end": { "line": 115, "column": 8 } }, { "start": { "line": 115, "column": 8 }, "end": { "line": 115, "column": 8 } }] }, "13": { "line": 116, "type": "if", "locations": [{ "start": { "line": 116, "column": 10 }, "end": { "line": 116, "column": 10 } }, { "start": { "line": 116, "column": 10 }, "end": { "line": 116, "column": 10 } }] }, "14": { "line": 116, "type": "binary-expr", "locations": [{ "start": { "line": 116, "column": 10 }, "end": { "line": 116, "column": 10 } }, { "start": { "line": 117, "column": 10 }, "end": { "line": 116, "column": 6 } }] }, "15": { "line": 120, "type": "if", "locations": [{ "start": { "line": 120, "column": 11 }, "end": { "line": 120, "column": 11 } }, { "start": { "line": 120, "column": 11 }, "end": { "line": 120, "column": 11 } }] }, "16": { "line": 120, "type": "binary-expr", "locations": [{ "start": { "line": 120, "column": 15 }, "end": { "line": 120, "column": 15 } }, { "start": { "line": 120, "column": 44 }, "end": { "line": 120, "column": 11 } }] }, "17": { "line": 124, "type": "if", "locations": [{ "start": { "line": 124, "column": 8 }, "end": { "line": 124, "column": 8 } }, { "start": { "line": 124, "column": 8 }, "end": { "line": 124, "column": 8 } }] }, "18": { "line": 136, "type": "if", "locations": [{ "start": { "line": 136, "column": 6 }, "end": { "line": 136, "column": 6 } }, { "start": { "line": 136, "column": 6 }, "end": { "line": 136, "column": 6 } }] }, "19": { "line": 136, "type": "binary-expr", "locations": [{ "start": { "line": 136, "column": 6 }, "end": { "line": 136, "column": 35 } }, { "start": { "line": 136, "column": 35 }, "end": { "line": 136, "column": 2 } }] }, "20": { "line": 138, "type": "if", "locations": [{ "start": { "line": 138, "column": 9 }, "end": { "line": 138, "column": 9 } }, { "start": { "line": 138, "column": 9 }, "end": { "line": 138, "column": 9 } }] } }, "code": ["/* @flow */", "import ExtendableError from 'es6-error';", "", "", "/*", " * Base error for all custom web-ext errors.", " */", "export class WebExtError extends ExtendableError {", "  constructor(message: string) {", "    super(message);", "  }", "}", "", "", "/*", " * The class for errors that can be fixed by the developer.", " */", "export class UsageError extends WebExtError {", "  constructor(message: string) {", "    super(message);", "  }", "}", "", "", "/*", " * The manifest for the extension is invalid (or missing).", " */", "export class InvalidManifest extends UsageError {", "  constructor(message: string) {", "    super(message);", "  }", "}", "", "", "/*", " * The remote Firefox does not support temporary add-on installation.", " */", "export class RemoteTempInstallNotSupported extends WebExtError {", "  constructor(message: string) {", "    super(message);", "  }", "}", "", "/*", " * The errors collected when reloading all extensions at once", " * (initialized from a map of errors by extensionSourceDir string).", " */", "export class MultiExtensionsReloadError extends WebExtError {", "  constructor(errorsMap: Map<string, Error>) {", "    let errors = '';", "    for (const [sourceDir, error] of errorsMap) {", "      const msg = String(error);", "      errors += `\\nError on extension loaded from ${sourceDir}: ${msg}\\n`;", "    }", "    const message = `Reload errors: ${errors}`;", "", "    super(message);", "    this.errorsBySourceDir = errorsMap;", "  }", "}", "", "/*", " * Sugar-y way to catch only instances of a certain error.", " *", " * Usage:", " *", " *  Promise.reject(SyntaxError)", " *    .catch(onlyInstancesOf(SyntaxError, (error) => {", " *      // error is guaranteed to be an instance of SyntaxError", " *    }))", " *", " * All other errors will be re-thrown.", " *", " */", "export function onlyInstancesOf(", "  predicate: Function, errorHandler: Function", "): Function {", "  return (error) => {", "    if (error instanceof predicate) {", "      return errorHandler(error);", "    } else {", "      throw error;", "    }", "  };", "}", "", "", "/*", " * Sugar-y way to catch only errors having certain code(s).", " *", " * Usage:", " *", " *  Promise.resolve()", " *    .catch(onlyErrorsWithCode('ENOENT', (error) => {", " *      // error.code is guaranteed to be ENOENT", " *    }))", " *", " *  or:", " *", " *  Promise.resolve()", " *    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], (error) => {", " *      // ...", " *    }))", " *", " * All other errors will be re-thrown.", " *", " */", "export function onlyErrorsWithCode(", "  codeWanted: (string | number) | Array<string | number>,", "  errorHandler: Function", "): Function {", "  return (error) => {", "    let throwError = true;", "", "    if (Array.isArray(codeWanted)) {", "      if (codeWanted.indexOf(error.code) !== -1 ||", "          codeWanted.indexOf(error.errno) !== -1) {", "        throwError = false;", "      }", "    } else if (error.code === codeWanted || error.errno === codeWanted) {", "      throwError = false;", "    }", "", "    if (throwError) {", "      throw error;", "    }", "", "    return errorHandler(error);", "  };", "}", "", "export function isErrorWithCode(", "  codeWanted: string | Array<string>,", "  error: Object,", "): boolean {", "  if (Array.isArray(codeWanted) && codeWanted.indexOf(error.code) !== -1) {", "    return true;", "  } else if (error.code === codeWanted) {", "    return true;", "  }", "", "  return false;", "}", ""] };
}
__cov_G2sjO74yNFDSsiyH2pUYRw = __cov_G2sjO74yNFDSsiyH2pUYRw['/home/travis/build/mozilla/web-ext/src/errors.js'];
__cov_G2sjO74yNFDSsiyH2pUYRw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_G2sjO74yNFDSsiyH2pUYRw.s['2']++;exports.MultiExtensionsReloadError = exports.RemoteTempInstallNotSupported = exports.InvalidManifest = exports.UsageError = exports.WebExtError = undefined;__cov_G2sjO74yNFDSsiyH2pUYRw.s['3']++;var _slicedToArray2 = __webpack_require__(30);__cov_G2sjO74yNFDSsiyH2pUYRw.s['4']++;var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);__cov_G2sjO74yNFDSsiyH2pUYRw.s['5']++;var _classCallCheck2 = __webpack_require__(14);__cov_G2sjO74yNFDSsiyH2pUYRw.s['6']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_G2sjO74yNFDSsiyH2pUYRw.s['7']++;var _possibleConstructorReturn2 = __webpack_require__(38);__cov_G2sjO74yNFDSsiyH2pUYRw.s['8']++;var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);__cov_G2sjO74yNFDSsiyH2pUYRw.s['9']++;var _inherits2 = __webpack_require__(37);__cov_G2sjO74yNFDSsiyH2pUYRw.s['10']++;var _inherits3 = _interopRequireDefault(_inherits2);__cov_G2sjO74yNFDSsiyH2pUYRw.s['11']++;exports.onlyInstancesOf = onlyInstancesOf;__cov_G2sjO74yNFDSsiyH2pUYRw.s['12']++;exports.onlyErrorsWithCode = onlyErrorsWithCode;__cov_G2sjO74yNFDSsiyH2pUYRw.s['13']++;exports.isErrorWithCode = isErrorWithCode;__cov_G2sjO74yNFDSsiyH2pUYRw.s['14']++;var _es6Error = __webpack_require__(95);__cov_G2sjO74yNFDSsiyH2pUYRw.s['15']++;var _es6Error2 = _interopRequireDefault(_es6Error);function _interopRequireDefault(obj) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['1']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['17']++;return (__cov_G2sjO74yNFDSsiyH2pUYRw.b['2'][0]++, obj) && (__cov_G2sjO74yNFDSsiyH2pUYRw.b['2'][1]++, obj.__esModule) ? (__cov_G2sjO74yNFDSsiyH2pUYRw.b['1'][0]++, obj) : (__cov_G2sjO74yNFDSsiyH2pUYRw.b['1'][1]++, { default: obj });
}__cov_G2sjO74yNFDSsiyH2pUYRw.s['18']++;var WebExtError = exports.WebExtError = function (_ExtendableError) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['2']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['19']++;(0, _inherits3.default)(WebExtError, _ExtendableError);function WebExtError(message) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['3']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['21']++;(0, _classCallCheck3.default)(this, WebExtError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['22']++;return (0, _possibleConstructorReturn3.default)(this, ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['3'][0]++, WebExtError.__proto__) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['3'][1]++, Object.getPrototypeOf(WebExtError))).call(this, message));
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['23']++;return WebExtError;
}(_es6Error2.default);__cov_G2sjO74yNFDSsiyH2pUYRw.s['24']++;var UsageError = exports.UsageError = function (_WebExtError) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['4']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['25']++;(0, _inherits3.default)(UsageError, _WebExtError);function UsageError(message) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['5']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['27']++;(0, _classCallCheck3.default)(this, UsageError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['28']++;return (0, _possibleConstructorReturn3.default)(this, ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['4'][0]++, UsageError.__proto__) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['4'][1]++, Object.getPrototypeOf(UsageError))).call(this, message));
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['29']++;return UsageError;
}(WebExtError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['30']++;var InvalidManifest = exports.InvalidManifest = function (_UsageError) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['6']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['31']++;(0, _inherits3.default)(InvalidManifest, _UsageError);function InvalidManifest(message) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['7']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['33']++;(0, _classCallCheck3.default)(this, InvalidManifest);__cov_G2sjO74yNFDSsiyH2pUYRw.s['34']++;return (0, _possibleConstructorReturn3.default)(this, ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['5'][0]++, InvalidManifest.__proto__) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['5'][1]++, Object.getPrototypeOf(InvalidManifest))).call(this, message));
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['35']++;return InvalidManifest;
}(UsageError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['36']++;var RemoteTempInstallNotSupported = exports.RemoteTempInstallNotSupported = function (_WebExtError2) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['8']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['37']++;(0, _inherits3.default)(RemoteTempInstallNotSupported, _WebExtError2);function RemoteTempInstallNotSupported(message) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['9']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['39']++;(0, _classCallCheck3.default)(this, RemoteTempInstallNotSupported);__cov_G2sjO74yNFDSsiyH2pUYRw.s['40']++;return (0, _possibleConstructorReturn3.default)(this, ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['6'][0]++, RemoteTempInstallNotSupported.__proto__) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['6'][1]++, Object.getPrototypeOf(RemoteTempInstallNotSupported))).call(this, message));
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['41']++;return RemoteTempInstallNotSupported;
}(WebExtError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['42']++;var MultiExtensionsReloadError = exports.MultiExtensionsReloadError = function (_WebExtError3) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['10']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['43']++;(0, _inherits3.default)(MultiExtensionsReloadError, _WebExtError3);function MultiExtensionsReloadError(errorsMap) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['11']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['45']++;(0, _classCallCheck3.default)(this, MultiExtensionsReloadError);__cov_G2sjO74yNFDSsiyH2pUYRw.s['46']++;var errors = '';__cov_G2sjO74yNFDSsiyH2pUYRw.s['47']++;var _iteratorNormalCompletion = true;__cov_G2sjO74yNFDSsiyH2pUYRw.s['48']++;var _didIteratorError = false;__cov_G2sjO74yNFDSsiyH2pUYRw.s['49']++;var _iteratorError = undefined;__cov_G2sjO74yNFDSsiyH2pUYRw.s['50']++;try {
         __cov_G2sjO74yNFDSsiyH2pUYRw.s['51']++;for (var _iterator = errorsMap[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            __cov_G2sjO74yNFDSsiyH2pUYRw.s['52']++;var _step$value = (0, _slicedToArray3.default)(_step.value, 2),
                sourceDir = _step$value[0],
                error = _step$value[1];__cov_G2sjO74yNFDSsiyH2pUYRw.s['53']++;var msg = String(error);__cov_G2sjO74yNFDSsiyH2pUYRw.s['54']++;errors += '\nError on extension loaded from ' + sourceDir + ': ' + msg + '\n';
         }
      } catch (err) {
         __cov_G2sjO74yNFDSsiyH2pUYRw.s['55']++;_didIteratorError = true;__cov_G2sjO74yNFDSsiyH2pUYRw.s['56']++;_iteratorError = err;
      } finally {
         __cov_G2sjO74yNFDSsiyH2pUYRw.s['57']++;try {
            __cov_G2sjO74yNFDSsiyH2pUYRw.s['58']++;if ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['8'][0]++, !_iteratorNormalCompletion) && (__cov_G2sjO74yNFDSsiyH2pUYRw.b['8'][1]++, _iterator.return)) {
               __cov_G2sjO74yNFDSsiyH2pUYRw.b['7'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['59']++;_iterator.return();
            } else {
               __cov_G2sjO74yNFDSsiyH2pUYRw.b['7'][1]++;
            }
         } finally {
            __cov_G2sjO74yNFDSsiyH2pUYRw.s['60']++;if (_didIteratorError) {
               __cov_G2sjO74yNFDSsiyH2pUYRw.b['9'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['61']++;throw _iteratorError;
            } else {
               __cov_G2sjO74yNFDSsiyH2pUYRw.b['9'][1]++;
            }
         }
      }__cov_G2sjO74yNFDSsiyH2pUYRw.s['62']++;var message = 'Reload errors: ' + errors;__cov_G2sjO74yNFDSsiyH2pUYRw.s['63']++;var _this5 = (0, _possibleConstructorReturn3.default)(this, ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['10'][0]++, MultiExtensionsReloadError.__proto__) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['10'][1]++, Object.getPrototypeOf(MultiExtensionsReloadError))).call(this, message));__cov_G2sjO74yNFDSsiyH2pUYRw.s['64']++;_this5.errorsBySourceDir = errorsMap;__cov_G2sjO74yNFDSsiyH2pUYRw.s['65']++;return _this5;
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['66']++;return MultiExtensionsReloadError;
}(WebExtError);function onlyInstancesOf(predicate, errorHandler) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['12']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['68']++;return function (error) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['13']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['69']++;if (error instanceof predicate) {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['11'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['70']++;return errorHandler(error);
      } else {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['11'][1]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['71']++;throw error;
      }
   };
}function onlyErrorsWithCode(codeWanted, errorHandler) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['14']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['73']++;return function (error) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.f['15']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['74']++;var throwError = true;__cov_G2sjO74yNFDSsiyH2pUYRw.s['75']++;if (Array.isArray(codeWanted)) {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['12'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['76']++;if ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['14'][0]++, codeWanted.indexOf(error.code) !== -1) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['14'][1]++, codeWanted.indexOf(error.errno) !== -1)) {
            __cov_G2sjO74yNFDSsiyH2pUYRw.b['13'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['77']++;throwError = false;
         } else {
            __cov_G2sjO74yNFDSsiyH2pUYRw.b['13'][1]++;
         }
      } else {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['12'][1]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['78']++;if ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['16'][0]++, error.code === codeWanted) || (__cov_G2sjO74yNFDSsiyH2pUYRw.b['16'][1]++, error.errno === codeWanted)) {
            __cov_G2sjO74yNFDSsiyH2pUYRw.b['15'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['79']++;throwError = false;
         } else {
            __cov_G2sjO74yNFDSsiyH2pUYRw.b['15'][1]++;
         }
      }__cov_G2sjO74yNFDSsiyH2pUYRw.s['80']++;if (throwError) {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['17'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['81']++;throw error;
      } else {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['17'][1]++;
      }__cov_G2sjO74yNFDSsiyH2pUYRw.s['82']++;return errorHandler(error);
   };
}function isErrorWithCode(codeWanted, error) {
   __cov_G2sjO74yNFDSsiyH2pUYRw.f['16']++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['84']++;if ((__cov_G2sjO74yNFDSsiyH2pUYRw.b['19'][0]++, Array.isArray(codeWanted)) && (__cov_G2sjO74yNFDSsiyH2pUYRw.b['19'][1]++, codeWanted.indexOf(error.code) !== -1)) {
      __cov_G2sjO74yNFDSsiyH2pUYRw.b['18'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['85']++;return true;
   } else {
      __cov_G2sjO74yNFDSsiyH2pUYRw.b['18'][1]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['86']++;if (error.code === codeWanted) {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['20'][0]++;__cov_G2sjO74yNFDSsiyH2pUYRw.s['87']++;return true;
      } else {
         __cov_G2sjO74yNFDSsiyH2pUYRw.b['20'][1]++;
      }
   }__cov_G2sjO74yNFDSsiyH2pUYRw.s['88']++;return false;
}

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = require("chai");

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("path");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _assign = __webpack_require__(128);

var _assign2 = _interopRequireDefault(_assign);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _assign2.default || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};

/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = require("sinon");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _promise = __webpack_require__(132);

var _promise2 = _interopRequireDefault(_promise);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (fn) {
  return function () {
    var gen = fn.apply(this, arguments);
    return new _promise2.default(function (resolve, reject) {
      function step(key, arg) {
        try {
          var info = gen[key](arg);
          var value = info.value;
        } catch (error) {
          reject(error);
          return;
        }

        if (info.done) {
          resolve(value);
        } else {
          return _promise2.default.resolve(value).then(function (value) {
            step("next", value);
          }, function (err) {
            step("throw", err);
          });
        }
      }

      return step("next");
    });
  };
};

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(192);


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("mz");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename, __dirname) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FakeExtensionRunner = exports.basicManifest = exports.ErrorWithCode = exports.TCPConnectError = exports.StubChildProcess = exports.ZipFile = undefined;

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _typeof2 = __webpack_require__(52);

var _typeof3 = _interopRequireDefault(_typeof2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(37);

var _inherits3 = _interopRequireDefault(_inherits2);

var _classCallCheck2 = __webpack_require__(14);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(16);

var _createClass3 = _interopRequireDefault(_createClass2);

exports.fixturePath = fixturePath;
exports.makeSureItFails = makeSureItFails;
exports.fake = fake;
exports.createFakeProcess = createFakeProcess;
exports.fakeFirefoxClient = fakeFirefoxClient;
exports.getFakeFirefox = getFakeFirefox;
exports.getFakeRemoteFirefox = getFakeRemoteFirefox;

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _events = __webpack_require__(184);

var _events2 = _interopRequireDefault(_events);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _yauzl = __webpack_require__(200);

var _yauzl2 = _interopRequireDefault(_yauzl);

var _es6Error = __webpack_require__(95);

var _es6Error2 = _interopRequireDefault(_es6Error);

var _es6Promisify = __webpack_require__(28);

var _es6Promisify2 = _interopRequireDefault(_es6Promisify);

var _logger = __webpack_require__(0);

var _firefox = __webpack_require__(35);

var defaultFirefoxApp = _interopRequireWildcard(_firefox);

var _remote = __webpack_require__(24);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var log = (0, _logger.createLogger)(__filename);

/*
 * A way to read zip files using promises for all the things.
 */

var ZipFile = exports.ZipFile = function () {
  function ZipFile() {
    (0, _classCallCheck3.default)(this, ZipFile);

    this._zip = null;
    this._close = null;
  }

  /*
   * Open a zip file and return a promise that resolves to a yauzl
   * zipfile object.
   */


  (0, _createClass3.default)(ZipFile, [{
    key: 'open',
    value: function open() {
      var _this = this;

      return (0, _es6Promisify2.default)(_yauzl2.default.open).apply(undefined, arguments).then(function (zip) {
        _this._zip = zip;
        _this._close = new Promise(function (resolve) {
          zip.once('close', resolve);
        });
      });
    }

    /**
     * Close the zip file and wait fd to release.
     */

  }, {
    key: 'close',
    value: function close() {
      this._zip.close();
      return this._close;
    }

    /*
     * After open(), readEach(onRead) will return a promise that resolves
     * when all entries have been read.
     *
     * The onRead callback receives a single argument, a yauzl Entry object.
     */

  }, {
    key: 'readEach',
    value: function readEach(onRead) {
      var _this2 = this;

      return new Promise(function (resolve, reject) {

        if (!_this2._zip) {
          throw new Error('Cannot operate on a falsey zip file. Call open() first.');
        }

        _this2._zip.on('entry', function (entry) {
          onRead(entry);
        });

        _this2._zip.once('error', function (error) {
          reject(error);
        });

        _this2._zip.once('end', function () {
          resolve();
        });
      });
    }

    /*
     * Resolve a promise with an array of all file names in the zip archive.
     */

  }, {
    key: 'extractFilenames',
    value: function extractFilenames() {
      var _this3 = this;

      return new Promise(function (resolve, reject) {
        var fileNames = [];
        _this3.readEach(function (entry) {
          fileNames.push(entry.fileName);
        }).then(function () {
          resolve(fileNames);
        }).catch(function (error) {
          reject(error);
        });
      });
    }
  }]);
  return ZipFile;
}();

/*
 * Returns a path to a test fixture file. Invoke it the same as path.join().
 */


function fixturePath() {
  for (var _len = arguments.length, pathParts = Array(_len), _key = 0; _key < _len; _key++) {
    pathParts[_key] = arguments[_key];
  }

  return _path2.default.join.apply(_path2.default, [__dirname, '..', 'fixtures'].concat(pathParts));
}

/*
 * Test helper to make sure a promise chain really fails.
 *
 * Usage:
 *
 *  Promise.resolve()
 *    .then(makeSureItFails())
 *    .catch((error) => {
 *      // Safely make assertions about the error...
 *    });
 */
function makeSureItFails() {
  return function () {
    throw new Error('This test unexpectedly succeeded without an error');
  };
}

/*
 * Return a fake version of an object for testing.
 *
 * The fake object will contain stub implementations of
 * all original methods. Each method will be wrapped in
 * a sinon.spy() for inspection.
 *
 * You can optionally provide implementations for one or
 * more methods.
 *
 * Unlike similar sinon helpers, this *does not* touch the
 * original object so there is no need to tear down any
 * patches afterwards.
 *
 * Usage:
 *
 * let fakeProcess = fake(process, {
 *   cwd: () => '/some/directory',
 * });
 *
 * // Use the object in real code:
 * fakeProcess.cwd();
 *
 * // Make assertions about methods that
 * // were on the original object:
 * assert.equal(fakeProcess.exit.called, true);
 *
 */
// $FLOW_IGNORE: fake can return any kind of object and fake a defined set of methods for testing.
function fake(original) {
  var methods = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var skipProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

  var stub = {};

  // Provide stubs for all original members:
  var props = [];
  var obj = original;
  while (obj) {
    props = props.concat(Object.getOwnPropertyNames(obj));
    obj = Object.getPrototypeOf(obj);
  }

  var proto = Object.getPrototypeOf(original);
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    var _loop = function _loop() {
      var key = _step.value;

      if (skipProperties.indexOf(key) >= 0 || !original.hasOwnProperty(key) && !proto.hasOwnProperty(key)) {
        return 'continue';
      }
      var definition = original[key] || proto[key];
      if (typeof definition === 'function') {
        stub[key] = function () {
          log.warn('Running stubbed function ' + key + ' (default implementation)');
        };
      }
    };

    for (var _iterator = props[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var _ret = _loop();

      if (_ret === 'continue') continue;
    }

    // Provide custom implementations, if necessary.
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  Object.keys(methods).forEach(function (key) {
    if (!original[key]) {
      throw new Error('Cannot define method "' + key + '"; it does not exist on the original');
    }
    stub[key] = methods[key];
  });

  // Wrap all implementations in spies.
  Object.keys(stub).forEach(function (key) {
    stub[key] = _sinon2.default.spy(stub[key]);
  });

  return stub;
}

function createFakeProcess() {
  return fake(process, {}, ['EventEmitter', 'stdin']);
}

var StubChildProcess = exports.StubChildProcess = function (_EventEmitter) {
  (0, _inherits3.default)(StubChildProcess, _EventEmitter);

  function StubChildProcess() {
    var _ref;

    var _temp, _this4, _ret2;

    (0, _classCallCheck3.default)(this, StubChildProcess);

    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    return _ret2 = (_temp = (_this4 = (0, _possibleConstructorReturn3.default)(this, (_ref = StubChildProcess.__proto__ || Object.getPrototypeOf(StubChildProcess)).call.apply(_ref, [this].concat(args))), _this4), _this4.stderr = new _events2.default(), _this4.stdout = new _events2.default(), _this4.kill = _sinon2.default.spy(function () {}), _temp), (0, _possibleConstructorReturn3.default)(_this4, _ret2);
  }

  return StubChildProcess;
}(_events2.default);

/*
 * Returns a fake Firefox client as would be returned by
 * connect() of 'node-firefox-connect'
 */

function fakeFirefoxClient() {
  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref2$requestResult = _ref2.requestResult,
      requestResult = _ref2$requestResult === undefined ? {} : _ref2$requestResult,
      requestError = _ref2.requestError,
      _ref2$makeRequestResu = _ref2.makeRequestResult,
      makeRequestResult = _ref2$makeRequestResu === undefined ? {} : _ref2$makeRequestResu,
      makeRequestError = _ref2.makeRequestError;

  return {
    disconnect: _sinon2.default.spy(function () {}),
    request: _sinon2.default.spy(function (request, callback) {
      return callback(requestError, requestResult);
    }),
    // This is client.client, the actual underlying connection.
    client: {
      on: function on() {},
      makeRequest: _sinon2.default.spy(function (request, callback) {
        //
        // The real function returns a response object that you
        // use like this:
        // if (response.error) {
        //   ...
        // } else {
        //   response.something; // ...
        // }
        //
        if (makeRequestError) {
          var error = void 0;
          if ((typeof makeRequestError === 'undefined' ? 'undefined' : (0, _typeof3.default)(makeRequestError)) === 'object') {
            error = makeRequestError;
          } else {
            error = { error: makeRequestError };
          }
          callback(error);
        } else {
          callback(makeRequestResult);
        }
      })
    }
  };
}

/*
 * A simulated TCP connection error.
 *
 * By default, the error code will be ECONNREFUSED.
 */

var TCPConnectError = exports.TCPConnectError = function (_ExtendableError) {
  (0, _inherits3.default)(TCPConnectError, _ExtendableError);

  function TCPConnectError() {
    var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'simulated connection error';
    (0, _classCallCheck3.default)(this, TCPConnectError);

    var _this5 = (0, _possibleConstructorReturn3.default)(this, (TCPConnectError.__proto__ || Object.getPrototypeOf(TCPConnectError)).call(this, msg));

    _this5.code = 'ECONNREFUSED';
    return _this5;
  }

  return TCPConnectError;
}(_es6Error2.default);

var ErrorWithCode = exports.ErrorWithCode = function (_Error) {
  (0, _inherits3.default)(ErrorWithCode, _Error);

  function ErrorWithCode(code, message) {
    (0, _classCallCheck3.default)(this, ErrorWithCode);

    var _this6 = (0, _possibleConstructorReturn3.default)(this, (ErrorWithCode.__proto__ || Object.getPrototypeOf(ErrorWithCode)).call(this, message || 'pretend this is a system error'));

    _this6.code = code || 'SOME_CODE';
    return _this6;
  }

  return ErrorWithCode;
}(Error);

/*
 * A basic manifest fixture using in unit tests.
 */


var basicManifest = exports.basicManifest = {
  name: 'the extension',
  version: '0.0.1',
  applications: {
    gecko: {
      id: 'basic-manifest@web-ext-test-suite'
    }
  }
};

/*
 * A class that implements an empty IExtensionRunner interface.
 */

var FakeExtensionRunner = exports.FakeExtensionRunner = function () {
  function FakeExtensionRunner(params) {
    (0, _classCallCheck3.default)(this, FakeExtensionRunner);

    this.params = params;
  }

  (0, _createClass3.default)(FakeExtensionRunner, [{
    key: 'getName',
    value: function getName() {
      return 'Fake Extension Runner';
    }
  }, {
    key: 'run',
    value: function () {
      var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function run() {
        return _ref3.apply(this, arguments);
      }

      return run;
    }()
  }, {
    key: 'exit',
    value: function () {
      var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
        return _regenerator2.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
              case 'end':
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function exit() {
        return _ref4.apply(this, arguments);
      }

      return exit;
    }()
  }, {
    key: 'reloadAllExtensions',
    value: function () {
      var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
        return _regenerator2.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt('return', []);

              case 1:
              case 'end':
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function reloadAllExtensions() {
        return _ref5.apply(this, arguments);
      }

      return reloadAllExtensions;
    }()
  }, {
    key: 'reloadExtensionBySourceDir',
    value: function () {
      var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(sourceDir) {
        var runnerName;
        return _regenerator2.default.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                runnerName = this.getName();
                return _context4.abrupt('return', [{ runnerName: runnerName, sourceDir: sourceDir }]);

              case 2:
              case 'end':
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function reloadExtensionBySourceDir(_x5) {
        return _ref6.apply(this, arguments);
      }

      return reloadExtensionBySourceDir;
    }()
  }, {
    key: 'registerCleanup',
    value: function registerCleanup(fn) {} // eslint-disable-line no-unused-vars

  }]);
  return FakeExtensionRunner;
}();

function getFakeFirefox() {
  var implementations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 6005;

  var profile = {}; // empty object just to avoid errors.
  var firefox = function firefox() {
    return Promise.resolve();
  };
  var allImplementations = (0, _extends3.default)({
    createProfile: function createProfile() {
      return Promise.resolve(profile);
    },
    copyProfile: function copyProfile() {
      return Promise.resolve(profile);
    },
    useProfile: function useProfile() {
      return Promise.resolve(profile);
    },
    installExtension: function installExtension() {
      return Promise.resolve();
    },
    run: function run() {
      return Promise.resolve({ firefox: firefox, debuggerPort: port });
    }
  }, implementations);
  return fake(defaultFirefoxApp, allImplementations);
}

function getFakeRemoteFirefox() {
  var implementations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  return fake(_remote.RemoteFirefox.prototype, implementations);
}
/* WEBPACK VAR INJECTION */}.call(exports, "tests/unit/helpers.js", "tests/unit"))

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

var store      = __webpack_require__(61)('wks')
  , uid        = __webpack_require__(43)
  , Symbol     = __webpack_require__(13).Symbol
  , USE_SYMBOL = typeof Symbol == 'function';

var $exports = module.exports = function(name){
  return store[name] || (store[name] =
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};

$exports.store = store;

/***/ }),
/* 12 */
/***/ (function(module, exports) {

var core = module.exports = {version: '2.4.0'};
if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ }),
/* 13 */
/***/ (function(module, exports) {

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

exports.default = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_gZh52Conz4U1gHL8isd$cQ = Function('return this')();
if (!__cov_gZh52Conz4U1gHL8isd$cQ.__coverage__) {
   __cov_gZh52Conz4U1gHL8isd$cQ.__coverage__ = {};
}
__cov_gZh52Conz4U1gHL8isd$cQ = __cov_gZh52Conz4U1gHL8isd$cQ.__coverage__;
if (!__cov_gZh52Conz4U1gHL8isd$cQ['/home/travis/build/mozilla/web-ext/src/util/temp-dir.js']) {
   __cov_gZh52Conz4U1gHL8isd$cQ['/home/travis/build/mozilla/web-ext/src/util/temp-dir.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/temp-dir.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 1, "16": 0, "17": 0, "18": 1, "19": 0, "20": 0, "21": 0, "22": 0, "23": 1, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "withTempDir", "line": 25, "loc": { "start": { "line": 25, "column": 7 }, "end": { "line": 25, "column": 65 } } }, "3": { "name": "(anonymous_3)", "line": 28, "loc": { "start": { "line": 28, "column": 10 }, "end": { "line": 28, "column": 16 } } }, "4": { "name": "(anonymous_4)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "5": { "name": "TempDir", "line": 55, "loc": { "start": { "line": 55, "column": 16 }, "end": { "line": 55, "column": 16 } } }, "6": { "name": "create", "line": 64, "loc": { "start": { "line": 64, "column": 29 }, "end": { "line": 64, "column": 29 } } }, "7": { "name": "(anonymous_7)", "line": 72, "loc": { "start": { "line": 72, "column": 12 }, "end": { "line": 72, "column": 22 } } }, "8": { "name": "path", "line": 84, "loc": { "start": { "line": 84, "column": 17 }, "end": { "line": 84, "column": 17 } } }, "9": { "name": "errorHandler", "line": 98, "loc": { "start": { "line": 98, "column": 27 }, "end": { "line": 98, "column": 27 } } }, "10": { "name": "(anonymous_10)", "line": 99, "loc": { "start": { "line": 99, "column": 11 }, "end": { "line": 99, "column": 22 } } }, "11": { "name": "successHandler", "line": 111, "loc": { "start": { "line": 111, "column": 29 }, "end": { "line": 111, "column": 29 } } }, "12": { "name": "(anonymous_12)", "line": 112, "loc": { "start": { "line": 112, "column": 11 }, "end": { "line": 112, "column": 30 } } }, "13": { "name": "remove", "line": 121, "loc": { "start": { "line": 121, "column": 11 }, "end": { "line": 121, "column": 11 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 25, "column": 16 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 25, "column": 7 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 26, "column": 8 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 27, "column": 9 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 29, "column": 13 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 51, "column": 13 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 55, "column": 16 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "25": { "start": { "line": 56, "column": 9 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 57, "column": 9 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 65, "column": 10 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 66, "column": 11 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 73, "column": 41 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 74, "column": 13 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 75, "column": 13 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 76, "column": 12 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "36": { "start": { "line": 85, "column": 8 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 86, "column": 12 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 88, "column": 11 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 99, "column": 11 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 100, "column": 11 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 101, "column": 12 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 112, "column": 11 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 113, "column": 11 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 114, "column": 13 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 122, "column": 8 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 125, "column": 8 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 126, "column": 9 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 85, "type": "if", "locations": [{ "start": { "line": 85, "column": 8 }, "end": { "line": 85, "column": 8 } }, { "start": { "line": 85, "column": 8 }, "end": { "line": 85, "column": 8 } }] }, "4": { "line": 122, "type": "if", "locations": [{ "start": { "line": 122, "column": 8 }, "end": { "line": 122, "column": 8 } }, { "start": { "line": 122, "column": 8 }, "end": { "line": 122, "column": 8 } }] }, "5": { "line": 126, "type": "binary-expr", "locations": [{ "start": { "line": 126, "column": 9 }, "end": { "line": 126, "column": 4 } }, { "start": { "line": 126, "column": 27 }, "end": { "line": 126, "column": 4 } }] } }, "code": ["/* @flow */", "import tmp from 'tmp';", "import promisify from 'es6-promisify';", "", "import {createLogger} from './logger';", "", "const log = createLogger(__filename);", "", "", "/*", " * Work with a self-destructing temporary directory in a promise chain.", " *", " * The directory will be destroyed when the promise chain is finished", " * (whether there was an error or not).", " *", " * Usage:", " *", " * withTempDir(", " *   (tmpDir) =>", " *     doSomething(tmpDir.path())", " *     .then(...)", " * );", " *", " */", "export function withTempDir(makePromise: Function): Promise<any> {", "  const tmpDir = new TempDir();", "  return tmpDir.create()", "    .then(() => {", "      return makePromise(tmpDir);", "    })", "    .catch(tmpDir.errorHandler())", "    .then(tmpDir.successHandler());", "}", "", "", "/*", " * Work with a self-destructing temporary directory object.", " *", " * It is safer to use withTempDir() instead but if you know", " * what you're doing you can use it directly like:", " *", " * let tmpDir = new TempDir();", " * tmpDir.create()", " *   .then(() => {", " *     // work with tmpDir.path()", " *   })", " *   .catch(tmpDir.errorHandler())", " *   .then(tmpDir.successHandler());", " *", " */", "export class TempDir {", "  _path: string | void;", "  _removeTempDir: Function | void;", "", "  constructor() {", "    this._path = undefined;", "    this._removeTempDir = undefined;", "  }", "", "  /*", "   * Returns a promise that is fulfilled when the temp directory has", "   * been created.", "   */", "  create(): Promise<TempDir> {", "    const createTempDir = promisify(tmp.dir, {multiArgs: true});", "    return createTempDir(", "      {", "        prefix: 'tmp-web-ext-',", "        // This allows us to remove a non-empty tmp dir.", "        unsafeCleanup: true,", "      })", "      .then((args) => {", "        const [tmpPath, removeTempDir] = args;", "        this._path = tmpPath;", "        this._removeTempDir = removeTempDir;", "        log.debug(`Created temporary directory: ${this.path()}`);", "        return this;", "      });", "  }", "", "  /*", "   * Get the absolute path of the temp directory.", "   */", "  path(): string {", "    if (!this._path) {", "      throw new Error('You cannot access path() before calling create()');", "    }", "    return this._path;", "  }", "", "  /*", "   * Returns a callback that will catch an error, remove", "   * the temporary directory, and throw the error.", "   *", "   * This is intended for use in a promise like", "   * Promise().catch(tmp.errorHandler())", "   */", "  errorHandler(): Function {", "    return (error) => {", "      this.remove();", "      throw error;", "    };", "  }", "", "  /*", "   * Returns a callback that will remove the temporary direcotry.", "   *", "   * This is intended for use in a promise like", "   * Promise().then(tmp.successHandler())", "   */", "  successHandler(): Function {", "    return (promiseResult) => {", "      this.remove();", "      return promiseResult;", "    };", "  }", "", "  /*", "   * Remove the temp directory.", "   */", "  remove() {", "    if (!this._removeTempDir) {", "      return;", "    }", "    log.debug(`Removing temporary directory: ${this.path()}`);", "    this._removeTempDir && this._removeTempDir();", "  }", "", "}", ""] };
}
__cov_gZh52Conz4U1gHL8isd$cQ = __cov_gZh52Conz4U1gHL8isd$cQ['/home/travis/build/mozilla/web-ext/src/util/temp-dir.js'];
__cov_gZh52Conz4U1gHL8isd$cQ.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_gZh52Conz4U1gHL8isd$cQ.s['2']++;exports.TempDir = undefined;__cov_gZh52Conz4U1gHL8isd$cQ.s['3']++;var _slicedToArray2 = __webpack_require__(30);__cov_gZh52Conz4U1gHL8isd$cQ.s['4']++;var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);__cov_gZh52Conz4U1gHL8isd$cQ.s['5']++;var _classCallCheck2 = __webpack_require__(14);__cov_gZh52Conz4U1gHL8isd$cQ.s['6']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_gZh52Conz4U1gHL8isd$cQ.s['7']++;var _createClass2 = __webpack_require__(16);__cov_gZh52Conz4U1gHL8isd$cQ.s['8']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_gZh52Conz4U1gHL8isd$cQ.s['9']++;exports.withTempDir = withTempDir;__cov_gZh52Conz4U1gHL8isd$cQ.s['10']++;var _tmp = __webpack_require__(196);__cov_gZh52Conz4U1gHL8isd$cQ.s['11']++;var _tmp2 = _interopRequireDefault(_tmp);__cov_gZh52Conz4U1gHL8isd$cQ.s['12']++;var _es6Promisify = __webpack_require__(28);__cov_gZh52Conz4U1gHL8isd$cQ.s['13']++;var _es6Promisify2 = _interopRequireDefault(_es6Promisify);__cov_gZh52Conz4U1gHL8isd$cQ.s['14']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_gZh52Conz4U1gHL8isd$cQ.f['1']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['16']++;return (__cov_gZh52Conz4U1gHL8isd$cQ.b['2'][0]++, obj) && (__cov_gZh52Conz4U1gHL8isd$cQ.b['2'][1]++, obj.__esModule) ? (__cov_gZh52Conz4U1gHL8isd$cQ.b['1'][0]++, obj) : (__cov_gZh52Conz4U1gHL8isd$cQ.b['1'][1]++, { default: obj });
}__cov_gZh52Conz4U1gHL8isd$cQ.s['17']++;var log = (0, _logger.createLogger)(__filename);function withTempDir(makePromise) {
   __cov_gZh52Conz4U1gHL8isd$cQ.f['2']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['19']++;var tmpDir = new TempDir();__cov_gZh52Conz4U1gHL8isd$cQ.s['20']++;return tmpDir.create().then(function () {
      __cov_gZh52Conz4U1gHL8isd$cQ.f['3']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['21']++;return makePromise(tmpDir);
   }).catch(tmpDir.errorHandler()).then(tmpDir.successHandler());
}__cov_gZh52Conz4U1gHL8isd$cQ.s['22']++;var TempDir = exports.TempDir = function () {
   __cov_gZh52Conz4U1gHL8isd$cQ.f['4']++;function TempDir() {
      __cov_gZh52Conz4U1gHL8isd$cQ.f['5']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['24']++;(0, _classCallCheck3.default)(this, TempDir);__cov_gZh52Conz4U1gHL8isd$cQ.s['25']++;this._path = undefined;__cov_gZh52Conz4U1gHL8isd$cQ.s['26']++;this._removeTempDir = undefined;
   }__cov_gZh52Conz4U1gHL8isd$cQ.s['27']++;(0, _createClass3.default)(TempDir, [{ key: 'create', value: function create() {
         __cov_gZh52Conz4U1gHL8isd$cQ.f['6']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['28']++;var _this = this;__cov_gZh52Conz4U1gHL8isd$cQ.s['29']++;var createTempDir = (0, _es6Promisify2.default)(_tmp2.default.dir, { multiArgs: true });__cov_gZh52Conz4U1gHL8isd$cQ.s['30']++;return createTempDir({ prefix: 'tmp-web-ext-', unsafeCleanup: true }).then(function (args) {
            __cov_gZh52Conz4U1gHL8isd$cQ.f['7']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['31']++;var _args = (0, _slicedToArray3.default)(args, 2),
                tmpPath = _args[0],
                removeTempDir = _args[1];__cov_gZh52Conz4U1gHL8isd$cQ.s['32']++;_this._path = tmpPath;__cov_gZh52Conz4U1gHL8isd$cQ.s['33']++;_this._removeTempDir = removeTempDir;__cov_gZh52Conz4U1gHL8isd$cQ.s['34']++;log.debug('Created temporary directory: ' + _this.path());__cov_gZh52Conz4U1gHL8isd$cQ.s['35']++;return _this;
         });
      } }, { key: 'path', value: function path() {
         __cov_gZh52Conz4U1gHL8isd$cQ.f['8']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['36']++;if (!this._path) {
            __cov_gZh52Conz4U1gHL8isd$cQ.b['3'][0]++;__cov_gZh52Conz4U1gHL8isd$cQ.s['37']++;throw new Error('You cannot access path() before calling create()');
         } else {
            __cov_gZh52Conz4U1gHL8isd$cQ.b['3'][1]++;
         }__cov_gZh52Conz4U1gHL8isd$cQ.s['38']++;return this._path;
      } }, { key: 'errorHandler', value: function errorHandler() {
         __cov_gZh52Conz4U1gHL8isd$cQ.f['9']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['39']++;var _this2 = this;__cov_gZh52Conz4U1gHL8isd$cQ.s['40']++;return function (error) {
            __cov_gZh52Conz4U1gHL8isd$cQ.f['10']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['41']++;_this2.remove();__cov_gZh52Conz4U1gHL8isd$cQ.s['42']++;throw error;
         };
      } }, { key: 'successHandler', value: function successHandler() {
         __cov_gZh52Conz4U1gHL8isd$cQ.f['11']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['43']++;var _this3 = this;__cov_gZh52Conz4U1gHL8isd$cQ.s['44']++;return function (promiseResult) {
            __cov_gZh52Conz4U1gHL8isd$cQ.f['12']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['45']++;_this3.remove();__cov_gZh52Conz4U1gHL8isd$cQ.s['46']++;return promiseResult;
         };
      } }, { key: 'remove', value: function remove() {
         __cov_gZh52Conz4U1gHL8isd$cQ.f['13']++;__cov_gZh52Conz4U1gHL8isd$cQ.s['47']++;if (!this._removeTempDir) {
            __cov_gZh52Conz4U1gHL8isd$cQ.b['4'][0]++;__cov_gZh52Conz4U1gHL8isd$cQ.s['48']++;return;
         } else {
            __cov_gZh52Conz4U1gHL8isd$cQ.b['4'][1]++;
         }__cov_gZh52Conz4U1gHL8isd$cQ.s['49']++;log.debug('Removing temporary directory: ' + this.path());__cov_gZh52Conz4U1gHL8isd$cQ.s['50']++;(__cov_gZh52Conz4U1gHL8isd$cQ.b['5'][0]++, this._removeTempDir) && (__cov_gZh52Conz4U1gHL8isd$cQ.b['5'][1]++, this._removeTempDir());
      } }]);__cov_gZh52Conz4U1gHL8isd$cQ.s['51']++;return TempDir;
}();
/* WEBPACK VAR INJECTION */}.call(exports, "src/util/temp-dir.js"))

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _defineProperty = __webpack_require__(130);

var _defineProperty2 = _interopRequireDefault(_defineProperty);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      (0, _defineProperty2.default)(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(26);
module.exports = function(it){
  if(!isObject(it))throw TypeError(it + ' is not an object!');
  return it;
};

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

// Thank's IE8 for his funny defineProperty
module.exports = !__webpack_require__(33)(function(){
  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;
});

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

var anObject       = __webpack_require__(17)
  , IE8_DOM_DEFINE = __webpack_require__(81)
  , toPrimitive    = __webpack_require__(63)
  , dP             = Object.defineProperty;

exports.f = __webpack_require__(18) ? Object.defineProperty : function defineProperty(O, P, Attributes){
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if(IE8_DOM_DEFINE)try {
    return dP(O, P, Attributes);
  } catch(e){ /* empty */ }
  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');
  if('value' in Attributes)O[P] = Attributes.value;
  return O;
};

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

var global    = __webpack_require__(13)
  , core      = __webpack_require__(12)
  , ctx       = __webpack_require__(32)
  , hide      = __webpack_require__(22)
  , PROTOTYPE = 'prototype';

var $export = function(type, name, source){
  var IS_FORCED = type & $export.F
    , IS_GLOBAL = type & $export.G
    , IS_STATIC = type & $export.S
    , IS_PROTO  = type & $export.P
    , IS_BIND   = type & $export.B
    , IS_WRAP   = type & $export.W
    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})
    , expProto  = exports[PROTOTYPE]
    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]
    , key, own, out;
  if(IS_GLOBAL)source = name;
  for(key in source){
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    if(own && key in exports)continue;
    // export native or passed
    out = own ? target[key] : source[key];
    // prevent global pollution for namespaces
    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]
    // bind timers to global for call from export context
    : IS_BIND && own ? ctx(out, global)
    // wrap global constructors for prevent change them in library
    : IS_WRAP && target[key] == out ? (function(C){
      var F = function(a, b, c){
        if(this instanceof C){
          switch(arguments.length){
            case 0: return new C;
            case 1: return new C(a);
            case 2: return new C(a, b);
          } return new C(a, b, c);
        } return C.apply(this, arguments);
      };
      F[PROTOTYPE] = C[PROTOTYPE];
      return F;
    // make static versions for prototype methods
    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%
    if(IS_PROTO){
      (exports.virtual || (exports.virtual = {}))[key] = out;
      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%
      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);
    }
  }
};
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library` 
module.exports = $export;

/***/ }),
/* 21 */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;
module.exports = function(it, key){
  return hasOwnProperty.call(it, key);
};

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

var dP         = __webpack_require__(19)
  , createDesc = __webpack_require__(41);
module.exports = __webpack_require__(18) ? function(object, key, value){
  return dP.f(object, key, createDesc(1, value));
} : function(object, key, value){
  object[key] = value;
  return object;
};

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject = __webpack_require__(82)
  , defined = __webpack_require__(55);
module.exports = function(it){
  return IObject(defined(it));
};

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_lYjlshRrObBKsiLdbldr_w = Function('return this')();
if (!__cov_lYjlshRrObBKsiLdbldr_w.__coverage__) {
   __cov_lYjlshRrObBKsiLdbldr_w.__coverage__ = {};
}
__cov_lYjlshRrObBKsiLdbldr_w = __cov_lYjlshRrObBKsiLdbldr_w.__coverage__;
if (!__cov_lYjlshRrObBKsiLdbldr_w['/home/travis/build/mozilla/web-ext/src/firefox/remote.js']) {
   __cov_lYjlshRrObBKsiLdbldr_w['/home/travis/build/mozilla/web-ext/src/firefox/remote.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/firefox/remote.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 1, "81": 0, "82": 0, "83": 0, "84": 0, "85": 1, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 0, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "148": 0, "149": 0, "150": 0, "151": 0, "152": 0, "153": 0, "154": 0, "155": 0, "156": 0, "157": 0, "158": 0, "159": 0, "160": 0, "161": 0, "162": 0, "163": 0, "164": 1, "165": 0, "166": 0, "167": 0, "168": 0, "169": 0, "170": 0, "171": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "177": 0, "178": 0, "179": 0, "180": 0, "181": 0, "182": 1, "183": 0, "184": 0, "185": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0, 0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0], "27": [0, 0, 0, 0, 0, 0], "28": [0, 0], "29": [0, 0], "30": [0, 0, 0, 0, 0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_callee3", "line": 194, "loc": { "start": { "line": 194, "column": 7 }, "end": { "line": null, "column": null } } }, "3": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "connect", "line": 194, "loc": { "start": { "line": 194, "column": 22 }, "end": { "line": null, "column": null } } }, "5": { "name": "(anonymous_5)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "6": { "name": "_callee5", "line": 217, "loc": { "start": { "line": 217, "column": 7 }, "end": { "line": null, "column": null } } }, "7": { "name": "(anonymous_7)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "8": { "name": "_callee4", "line": 222, "loc": { "start": { "line": 222, "column": 2 }, "end": { "line": null, "column": null } } }, "9": { "name": "_callee4$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "10": { "name": "(anonymous_10)", "line": 231, "loc": { "start": { "line": 231, "column": 28 }, "end": { "line": 231, "column": 41 } } }, "11": { "name": "establishConnection", "line": 222, "loc": { "start": { "line": 222, "column": 17 }, "end": { "line": null, "column": null } } }, "12": { "name": "_callee5$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "13": { "name": "connectWithMaxRetries", "line": 217, "loc": { "start": { "line": 217, "column": 22 }, "end": { "line": null, "column": null } } }, "14": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "15": { "name": "(anonymous_15)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "16": { "name": "RemoteFirefox", "line": 52, "loc": { "start": { "line": 52, "column": 14 }, "end": { "line": 52, "column": 37 } } }, "17": { "name": "(anonymous_17)", "line": 56, "loc": { "start": { "line": 56, "column": 35 }, "end": { "line": 56, "column": 41 } } }, "18": { "name": "(anonymous_18)", "line": 59, "loc": { "start": { "line": 59, "column": 28 }, "end": { "line": 59, "column": 34 } } }, "19": { "name": "(anonymous_19)", "line": 62, "loc": { "start": { "line": 62, "column": 32 }, "end": { "line": 62, "column": 42 } } }, "20": { "name": "disconnect", "line": 68, "loc": { "start": { "line": 68, "column": 15 }, "end": { "line": 68, "column": 15 } } }, "21": { "name": "addonRequest", "line": 73, "loc": { "start": { "line": 73, "column": 4 }, "end": { "line": 75, "column": 38 } } }, "22": { "name": "(anonymous_22)", "line": 76, "loc": { "start": { "line": 76, "column": 23 }, "end": { "line": 76, "column": 44 } } }, "23": { "name": "(anonymous_23)", "line": 78, "loc": { "start": { "line": 78, "column": 42 }, "end": { "line": 78, "column": 56 } } }, "24": { "name": "installTemporaryAddon", "line": 92, "loc": { "start": { "line": 92, "column": 4 }, "end": { "line": 93, "column": 38 } } }, "25": { "name": "(anonymous_25)", "line": 94, "loc": { "start": { "line": 94, "column": 23 }, "end": { "line": 94, "column": 44 } } }, "26": { "name": "(anonymous_26)", "line": 95, "loc": { "start": { "line": 95, "column": 38 }, "end": { "line": 95, "column": 63 } } }, "27": { "name": "(anonymous_27)", "line": 114, "loc": { "start": { "line": 114, "column": 11 }, "end": { "line": 114, "column": 32 } } }, "28": { "name": "getInstalledAddon", "line": 129, "loc": { "start": { "line": 129, "column": 20 }, "end": { "line": 129, "column": 68 } } }, "29": { "name": "(anonymous_29)", "line": 131, "loc": { "start": { "line": 131, "column": 6 }, "end": { "line": 131, "column": 27 } } }, "30": { "name": "(anonymous_30)", "line": 132, "loc": { "start": { "line": 132, "column": 42 }, "end": { "line": 132, "column": 63 } } }, "31": { "name": "(anonymous_31)", "line": 141, "loc": { "start": { "line": 141, "column": 12 }, "end": { "line": 141, "column": 24 } } }, "32": { "name": "(anonymous_32)", "line": 148, "loc": { "start": { "line": 148, "column": 57 }, "end": { "line": null, "column": null } } }, "33": { "name": "(anonymous_33)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "34": { "name": "_callee", "line": 155, "loc": { "start": { "line": 155, "column": 4 }, "end": { "line": null, "column": null } } }, "35": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "36": { "name": "checkForAddonReloading", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "37": { "name": "(anonymous_37)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "38": { "name": "_callee2", "line": 177, "loc": { "start": { "line": 177, "column": 20 }, "end": { "line": null, "column": null } } }, "39": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "40": { "name": "reloadAddon", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 194, "column": 7 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 195, "column": 2 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 196, "column": 65 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "19": { "start": { "line": 198, "column": 6 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 199, "column": 23 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 194, "column": 7 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 200, "column": 6 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 201, "column": 9 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 194, "column": 22 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 217, "column": 7 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 219, "column": 3 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 222, "column": 2 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "35": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 222, "column": 2 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 225, "column": 26 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 227, "column": 21 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 229, "column": 12 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 231, "column": 16 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 232, "column": 23 }, "end": { "line": null, "column": null } }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 236, "column": 14 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 239, "column": 14 }, "end": { "line": null, "column": null } }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 222, "column": 2 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 245, "column": 8 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 246, "column": 10 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 222, "column": 17 }, "end": { "line": null, "column": null } }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 220, "column": 60 }, "end": { "line": null, "column": null } }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "70": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "71": { "start": { "line": 249, "column": 6 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 250, "column": 9 }, "end": { "line": null, "column": null } }, "73": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "74": { "start": { "line": 217, "column": 22 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "76": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "78": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "79": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "80": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "81": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "82": { "start": { "line": 14, "column": 0 }, "end": { "line": null, "column": null } }, "83": { "start": { "line": 18, "column": 7 }, "end": { "line": null, "column": null } }, "84": { "start": { "line": 48, "column": 13 }, "end": { "line": null, "column": null } }, "85": { "start": { "line": 52, "column": 14 }, "end": { "line": null, "column": null } }, "86": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "87": { "start": { "line": 53, "column": 9 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 54, "column": 9 }, "end": { "line": null, "column": null } }, "89": { "start": { "line": 56, "column": 11 }, "end": { "line": null, "column": null } }, "90": { "start": { "line": 57, "column": 10 }, "end": { "line": null, "column": null } }, "91": { "start": { "line": 59, "column": 11 }, "end": { "line": null, "column": null } }, "92": { "start": { "line": 60, "column": 10 }, "end": { "line": null, "column": null } }, "93": { "start": { "line": 62, "column": 11 }, "end": { "line": null, "column": null } }, "94": { "start": { "line": 64, "column": 10 }, "end": { "line": null, "column": null } }, "95": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "96": { "start": { "line": 69, "column": 9 }, "end": { "line": null, "column": null } }, "97": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "98": { "start": { "line": 76, "column": 11 }, "end": { "line": null, "column": null } }, "99": { "start": { "line": 77, "column": 11 }, "end": { "line": null, "column": null } }, "100": { "start": { "line": 79, "column": 14 }, "end": { "line": null, "column": null } }, "101": { "start": { "line": 80, "column": 18 }, "end": { "line": null, "column": null } }, "102": { "start": { "line": 81, "column": 16 }, "end": { "line": null, "column": null } }, "103": { "start": { "line": 83, "column": 19 }, "end": { "line": null, "column": null } }, "104": { "start": { "line": 85, "column": 20 }, "end": { "line": null, "column": null } }, "105": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "106": { "start": { "line": 94, "column": 11 }, "end": { "line": null, "column": null } }, "107": { "start": { "line": 95, "column": 11 }, "end": { "line": null, "column": null } }, "108": { "start": { "line": 96, "column": 12 }, "end": { "line": null, "column": null } }, "109": { "start": { "line": 97, "column": 17 }, "end": { "line": null, "column": null } }, "110": { "start": { "line": 100, "column": 12 }, "end": { "line": null, "column": null } }, "111": { "start": { "line": 101, "column": 14 }, "end": { "line": null, "column": null } }, "112": { "start": { "line": 104, "column": 17 }, "end": { "line": null, "column": null } }, "113": { "start": { "line": 110, "column": 13 }, "end": { "line": null, "column": null } }, "114": { "start": { "line": 115, "column": 14 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 116, "column": 19 }, "end": { "line": null, "column": null } }, "116": { "start": { "line": 120, "column": 14 }, "end": { "line": null, "column": null } }, "117": { "start": { "line": 122, "column": 14 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 123, "column": 18 }, "end": { "line": null, "column": null } }, "119": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "120": { "start": { "line": 130, "column": 11 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 132, "column": 13 }, "end": { "line": null, "column": null } }, "122": { "start": { "line": 133, "column": 14 }, "end": { "line": null, "column": null } }, "123": { "start": { "line": 134, "column": 19 }, "end": { "line": null, "column": null } }, "124": { "start": { "line": 137, "column": 20 }, "end": { "line": null, "column": null } }, "125": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "126": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "127": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "128": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "129": { "start": { "line": 142, "column": 28 }, "end": { "line": null, "column": null } }, "130": { "start": { "line": 142, "column": 19 }, "end": { "line": null, "column": null } }, "131": { "start": { "line": 143, "column": 14 }, "end": { "line": null, "column": null } }, "132": { "start": { "line": 144, "column": 19 }, "end": { "line": null, "column": null } }, "133": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "134": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "135": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "136": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "137": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "138": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "139": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "140": { "start": { "line": 147, "column": 12 }, "end": { "line": null, "column": null } }, "141": { "start": { "line": 148, "column": 64 }, "end": { "line": null, "column": null } }, "142": { "start": { "line": 149, "column": 14 }, "end": { "line": null, "column": null } }, "143": { "start": { "line": 155, "column": 4 }, "end": { "line": null, "column": null } }, "144": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "145": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "146": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "147": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "148": { "start": { "line": 157, "column": 8 }, "end": { "line": null, "column": null } }, "149": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "150": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "151": { "start": { "line": 159, "column": 13 }, "end": { "line": null, "column": null } }, "152": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "153": { "start": { "line": 161, "column": 29 }, "end": { "line": null, "column": null } }, "154": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "155": { "start": { "line": 163, "column": 10 }, "end": { "line": null, "column": null } }, "156": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "157": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "158": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "159": { "start": { "line": 165, "column": 12 }, "end": { "line": null, "column": null } }, "160": { "start": { "line": 167, "column": 14 }, "end": { "line": null, "column": null } }, "161": { "start": { "line": 171, "column": 13 }, "end": { "line": null, "column": null } }, "162": { "start": { "line": 172, "column": 15 }, "end": { "line": null, "column": null } }, "163": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "164": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "165": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "166": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "167": { "start": { "line": 177, "column": 20 }, "end": { "line": null, "column": null } }, "168": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "169": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "170": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "171": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "172": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "173": { "start": { "line": 178, "column": 24 }, "end": { "line": null, "column": null } }, "174": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "175": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "176": { "start": { "line": 179, "column": 10 }, "end": { "line": null, "column": null } }, "177": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "178": { "start": { "line": 180, "column": 10 }, "end": { "line": null, "column": null } }, "179": { "start": { "line": 181, "column": 12 }, "end": { "line": null, "column": null } }, "180": { "start": { "line": 183, "column": 8 }, "end": { "line": null, "column": null } }, "181": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "182": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "183": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "184": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "185": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 195, "type": "cond-expr", "locations": [{ "start": { "line": 195, "column": 17 }, "end": { "line": 195, "column": 17 } }, { "start": { "line": 195, "column": 17 }, "end": { "line": 194, "column": 7 } }] }, "2": { "line": 195, "type": "binary-expr", "locations": [{ "start": { "line": 195, "column": 17 }, "end": { "line": 195, "column": 17 } }, { "start": { "line": 195, "column": 17 }, "end": { "line": 195, "column": 17 } }] }, "3": { "line": 196, "type": "cond-expr", "locations": [{ "start": { "line": 196, "column": 65 }, "end": { "line": 196, "column": 65 } }, { "start": { "line": 196, "column": 65 }, "end": { "line": 194, "column": 7 } }] }, "4": { "line": 196, "type": "binary-expr", "locations": [{ "start": { "line": 196, "column": 65 }, "end": { "line": 196, "column": 65 } }, { "start": { "line": 196, "column": 65 }, "end": { "line": 196, "column": 65 } }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 219, "type": "cond-expr", "locations": [{ "start": { "line": 219, "column": 16 }, "end": { "line": 217, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 219, "type": "cond-expr", "locations": [{ "start": { "line": 219, "column": 37 }, "end": { "line": 217, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 225, "type": "if", "locations": [{ "start": { "line": 225, "column": 26 }, "end": { "line": 225, "column": 26 } }, { "start": { "line": 225, "column": 26 }, "end": { "line": 225, "column": 26 } }] }, "11": { "line": 229, "type": "if", "locations": [{ "start": { "line": 229, "column": 12 }, "end": { "line": 229, "column": 12 } }, { "start": { "line": 229, "column": 12 }, "end": { "line": 229, "column": 12 } }] }, "12": { "line": 220, "type": "cond-expr", "locations": [{ "start": { "line": 220, "column": 60 }, "end": { "line": 220, "column": 60 } }, { "start": { "line": 220, "column": 60 }, "end": { "line": 217, "column": 7 } }] }, "13": { "line": 220, "type": "binary-expr", "locations": [{ "start": { "line": 220, "column": 60 }, "end": { "line": 220, "column": 60 } }, { "start": { "line": 220, "column": 60 }, "end": { "line": 220, "column": 60 } }] }, "14": { "line": 220, "type": "cond-expr", "locations": [{ "start": { "line": 220, "column": 22 }, "end": { "line": 217, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 79, "type": "if", "locations": [{ "start": { "line": 79, "column": 14 }, "end": { "line": 79, "column": 14 } }, { "start": { "line": 79, "column": 14 }, "end": { "line": 79, "column": 14 } }] }, "19": { "line": 96, "type": "if", "locations": [{ "start": { "line": 96, "column": 12 }, "end": { "line": 96, "column": 12 } }, { "start": { "line": 96, "column": 12 }, "end": { "line": 96, "column": 12 } }] }, "20": { "line": 100, "type": "if", "locations": [{ "start": { "line": 100, "column": 12 }, "end": { "line": 100, "column": 12 } }, { "start": { "line": 100, "column": 12 }, "end": { "line": 100, "column": 12 } }] }, "21": { "line": 115, "type": "if", "locations": [{ "start": { "line": 115, "column": 14 }, "end": { "line": 115, "column": 14 } }, { "start": { "line": 115, "column": 14 }, "end": { "line": 115, "column": 14 } }] }, "22": { "line": 133, "type": "if", "locations": [{ "start": { "line": 133, "column": 14 }, "end": { "line": 133, "column": 14 } }, { "start": { "line": 133, "column": 14 }, "end": { "line": 133, "column": 14 } }] }, "23": { "line": 143, "type": "if", "locations": [{ "start": { "line": 143, "column": 14 }, "end": { "line": 143, "column": 14 } }, { "start": { "line": 143, "column": 14 }, "end": { "line": 143, "column": 14 } }] }, "24": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "25": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "26": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "27": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "28": { "line": 157, "type": "if", "locations": [{ "start": { "line": 157, "column": 8 }, "end": { "line": 157, "column": 8 } }, { "start": { "line": 157, "column": 8 }, "end": { "line": 157, "column": 8 } }] }, "29": { "line": 163, "type": "if", "locations": [{ "start": { "line": 163, "column": 10 }, "end": { "line": 163, "column": 10 } }, { "start": { "line": 163, "column": 10 }, "end": { "line": 163, "column": 10 } }] }, "30": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import defaultFirefoxConnector from 'node-firefox-connect';", "// RemoteFirefox types and implementation", "import type FirefoxClient from 'firefox-client'; //eslint-disable-line import/no-extraneous-dependencies", "", "import {createLogger} from '../util/logger';", "import {", "  isErrorWithCode,", "  RemoteTempInstallNotSupported,", "  UsageError,", "  WebExtError,", "} from '../errors';", "", "const log = createLogger(__filename);", "", "// The default port that Firefox's remote debugger will listen on and the", "// client will connect to.", "export const REMOTE_PORT = 6005;", "", "export type FirefoxConnectorFn =", "  (port?: number) => Promise<FirefoxClient>;", "", "export type FirefoxRDPAddonActor = {|", "  id: string,", "  actor: string,", "|};", "", "export type FirefoxRDPResponseError = {|", "  error: {", "    message: string,", "  },", "|};", "", "export type FirefoxRDPResponseAddon = {|", "  addon: FirefoxRDPAddonActor,", "|};", "", "export type FirefoxRDPResponseRequestTypes = {|", "  requestTypes: Array<string>,", "|};", "", "// NOTE: this type aliases Object to catch any other possible response.", "export type FirefoxRDPResponseAny = Object;", "", "export type FirefoxRDPResponseMaybe =", "  FirefoxRDPResponseRequestTypes | FirefoxRDPResponseAny;", "", "export class RemoteFirefox {", "  client: Object;", "  checkedForAddonReloading: boolean;", "", "  constructor(client: FirefoxClient) {", "    this.client = client;", "    this.checkedForAddonReloading = false;", "", "    client.client.on('disconnect', () => {", "      log.debug('Received \"disconnect\" from Firefox client');", "    });", "    client.client.on('end', () => {", "      log.debug('Received \"end\" from Firefox client');", "    });", "    client.client.on('message', (info) => {", "      // These are arbitrary messages that the client library ignores.", "      log.debug(`Received message from client: ${JSON.stringify(info)}`);", "    });", "  }", "", "  disconnect() {", "    this.client.disconnect();", "  }", "", "  addonRequest(", "    addon: FirefoxRDPAddonActor,", "    request: string", "  ): Promise<FirefoxRDPResponseMaybe> {", "    return new Promise((resolve, reject) => {", "      this.client.client.makeRequest(", "        {to: addon.actor, type: request}, (response) => {", "          if (response.error) {", "            const error = `${response.error}: ${response.message}`;", "            log.debug(", "              `Client responded to '${request}' request with error:`, error);", "            reject(new WebExtError(error));", "          } else {", "            resolve(response);", "          }", "        });", "    });", "  }", "", "  installTemporaryAddon(", "    addonPath: string", "  ): Promise<FirefoxRDPResponseAddon> {", "    return new Promise((resolve, reject) => {", "      this.client.request('listTabs', (error, tabsResponse) => {", "        if (error) {", "          return reject(new WebExtError(", "            `Remote Firefox: listTabs() error: ${error}`));", "        }", "        if (!tabsResponse.addonsActor) {", "          log.debug(", "            'listTabs returned a falsey addonsActor: ' +", "            `${tabsResponse.addonsActor}`);", "          return reject(new RemoteTempInstallNotSupported(", "            'This is an older version of Firefox that does not provide an ' +", "            'add-ons actor for remote installation. Try Firefox 49 or ' +", "            'higher.'));", "        }", "", "        this.client.client.makeRequest({", "          to: tabsResponse.addonsActor,", "          type: 'installTemporaryAddon',", "          addonPath,", "        }, (installResponse) => {", "          if (installResponse.error) {", "            return reject(new WebExtError(", "              'installTemporaryAddon: Error: ' +", "              `${installResponse.error}: ${installResponse.message}`));", "          }", "          log.debug(", "            `installTemporaryAddon: ${JSON.stringify(installResponse)}`);", "          log.info(`Installed ${addonPath} as a temporary add-on`);", "          resolve(installResponse);", "        });", "      });", "    });", "  }", "", "  getInstalledAddon(addonId: string): Promise<FirefoxRDPAddonActor> {", "    return new Promise(", "      (resolve, reject) => {", "        this.client.request('listAddons', (error, response) => {", "          if (error) {", "            reject(new WebExtError(", "              `Remote Firefox: listAddons() error: ${error}`));", "          } else {", "            resolve(response.addons);", "          }", "        });", "      })", "      .then((addons) => {", "        for (const addon of addons) {", "          if (addon.id === addonId) {", "            return addon;", "          }", "        }", "        log.debug(", "          `Remote Firefox has these addons: ${addons.map((a) => a.id)}`);", "        throw new WebExtError(", "          'The remote Firefox does not have your extension installed');", "      });", "  }", "", "  async checkForAddonReloading(", "    addon: FirefoxRDPAddonActor", "  ): Promise<FirefoxRDPAddonActor> {", "    if (this.checkedForAddonReloading) {", "      // We only need to check once if reload() is supported.", "      return addon;", "    } else {", "      const response = await this.addonRequest(addon, 'requestTypes');", "", "      if (response.requestTypes.indexOf('reload') === -1) {", "        const supportedRequestTypes = JSON.stringify(response.requestTypes);", "        log.debug(", "          `Remote Firefox only supports: ${supportedRequestTypes}`);", "        throw new UsageError(", "          'This Firefox version does not support add-on reloading. ' +", "          'Re-run with --no-reload');", "      } else {", "        this.checkedForAddonReloading = true;", "        return addon;", "      }", "    }", "  }", "", "  async reloadAddon(addonId: string): Promise<void> {", "    const addon = await this.getInstalledAddon(addonId);", "    await this.checkForAddonReloading(addon);", "    await this.addonRequest(addon, 'reload');", "    process.stdout.write(", "      `\\rLast extension reload: ${(new Date()).toTimeString()}`);", "    log.debug('\\n');", "  }", "}", "", "", "// Connect types and implementation", "", "export type ConnectOptions = {|", "  connectToFirefox: FirefoxConnectorFn,", "|};", "", "export async function connect(", "  port: number = REMOTE_PORT,", "  {connectToFirefox = defaultFirefoxConnector}: ConnectOptions = {}", "): Promise<RemoteFirefox> {", "  log.debug(`Connecting to Firefox on port ${port}`);", "  const client = await connectToFirefox(port);", "  log.debug(`Connected to the remote Firefox debugger on port ${port}`);", "  return new RemoteFirefox(client);", "}", "", "", "// ConnectWithMaxRetries types and implementation", "", "export type ConnectWithMaxRetriesParams = {|", "  maxRetries?: number,", "  retryInterval?: number,", "  port: number,", "|};", "", "export type ConnectWithMaxRetriesDeps = {|", "  connectToFirefox: typeof connect,", "|};", "", "export async function connectWithMaxRetries(", "  // A max of 250 will try connecting for 30 seconds.", "  {maxRetries = 250, retryInterval = 120, port}: ConnectWithMaxRetriesParams,", "  {connectToFirefox = connect}: ConnectWithMaxRetriesDeps = {}", "): Promise<RemoteFirefox> {", "  async function establishConnection() {", "    var lastError;", "", "    for (let retries = 0; retries <= maxRetries; retries++) {", "      try {", "        return await connectToFirefox(port);", "      } catch (error) {", "        if (isErrorWithCode('ECONNREFUSED', error)) {", "          // Wait for `retryInterval` ms.", "          await new Promise((resolve) => {", "            setTimeout(resolve, retryInterval);", "          });", "", "          lastError = error;", "          log.debug(", "            `Retrying Firefox (${retries}); connection error: ${error}`);", "        } else {", "          log.error(error.stack);", "          throw error;", "        }", "      }", "    }", "", "    log.debug('Connect to Firefox debugger: too many retries');", "    throw lastError;", "  }", "", "  log.debug('Connecting to the remote Firefox debugger');", "  return establishConnection();", "}", ""] };
}
__cov_lYjlshRrObBKsiLdbldr_w = __cov_lYjlshRrObBKsiLdbldr_w['/home/travis/build/mozilla/web-ext/src/firefox/remote.js'];
__cov_lYjlshRrObBKsiLdbldr_w.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_lYjlshRrObBKsiLdbldr_w.s['2']++;exports.connectWithMaxRetries = exports.connect = exports.RemoteFirefox = exports.REMOTE_PORT = undefined;__cov_lYjlshRrObBKsiLdbldr_w.s['3']++;var _regenerator = __webpack_require__(8);__cov_lYjlshRrObBKsiLdbldr_w.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_lYjlshRrObBKsiLdbldr_w.s['5']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_lYjlshRrObBKsiLdbldr_w.s['6']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_lYjlshRrObBKsiLdbldr_w.s['7']++;var _classCallCheck2 = __webpack_require__(14);__cov_lYjlshRrObBKsiLdbldr_w.s['8']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_lYjlshRrObBKsiLdbldr_w.s['9']++;var _createClass2 = __webpack_require__(16);__cov_lYjlshRrObBKsiLdbldr_w.s['10']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_lYjlshRrObBKsiLdbldr_w.s['11']++;var connect = exports.connect = function () {
   __cov_lYjlshRrObBKsiLdbldr_w.f['1']++;__cov_lYjlshRrObBKsiLdbldr_w.s['12']++;var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
      __cov_lYjlshRrObBKsiLdbldr_w.f['2']++;__cov_lYjlshRrObBKsiLdbldr_w.s['13']++;var port = (__cov_lYjlshRrObBKsiLdbldr_w.b['2'][0]++, arguments.length > 0) && (__cov_lYjlshRrObBKsiLdbldr_w.b['2'][1]++, arguments[0] !== undefined) ? (__cov_lYjlshRrObBKsiLdbldr_w.b['1'][0]++, arguments[0]) : (__cov_lYjlshRrObBKsiLdbldr_w.b['1'][1]++, REMOTE_PORT);__cov_lYjlshRrObBKsiLdbldr_w.s['14']++;var _ref4 = (__cov_lYjlshRrObBKsiLdbldr_w.b['4'][0]++, arguments.length > 1) && (__cov_lYjlshRrObBKsiLdbldr_w.b['4'][1]++, arguments[1] !== undefined) ? (__cov_lYjlshRrObBKsiLdbldr_w.b['3'][0]++, arguments[1]) : (__cov_lYjlshRrObBKsiLdbldr_w.b['3'][1]++, {}),
          _ref4$connectToFirefo = _ref4.connectToFirefox,
          connectToFirefox = _ref4$connectToFirefo === undefined ? (__cov_lYjlshRrObBKsiLdbldr_w.b['5'][0]++, _nodeFirefoxConnect2.default) : (__cov_lYjlshRrObBKsiLdbldr_w.b['5'][1]++, _ref4$connectToFirefo);__cov_lYjlshRrObBKsiLdbldr_w.s['15']++;var client;__cov_lYjlshRrObBKsiLdbldr_w.s['16']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['3']++;__cov_lYjlshRrObBKsiLdbldr_w.s['17']++;while (1) {
            __cov_lYjlshRrObBKsiLdbldr_w.s['18']++;switch (_context3.prev = _context3.next) {case 0:
                  __cov_lYjlshRrObBKsiLdbldr_w.b['6'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['19']++;log.debug('Connecting to Firefox on port ' + port);__cov_lYjlshRrObBKsiLdbldr_w.s['20']++;_context3.next = 3;__cov_lYjlshRrObBKsiLdbldr_w.s['21']++;return connectToFirefox(port);case 3:
                  __cov_lYjlshRrObBKsiLdbldr_w.b['6'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['22']++;client = _context3.sent;__cov_lYjlshRrObBKsiLdbldr_w.s['23']++;log.debug('Connected to the remote Firefox debugger on port ' + port);__cov_lYjlshRrObBKsiLdbldr_w.s['24']++;return _context3.abrupt('return', new RemoteFirefox(client));case 6:
                  __cov_lYjlshRrObBKsiLdbldr_w.b['6'][2]++;case 'end':
                  __cov_lYjlshRrObBKsiLdbldr_w.b['6'][3]++;__cov_lYjlshRrObBKsiLdbldr_w.s['25']++;return _context3.stop();}
         }
      }, _callee3, this);
   }));__cov_lYjlshRrObBKsiLdbldr_w.s['26']++;return function connect() {
      __cov_lYjlshRrObBKsiLdbldr_w.f['4']++;__cov_lYjlshRrObBKsiLdbldr_w.s['27']++;return _ref3.apply(this, arguments);
   };
}();__cov_lYjlshRrObBKsiLdbldr_w.s['28']++;var connectWithMaxRetries = exports.connectWithMaxRetries = function () {
   __cov_lYjlshRrObBKsiLdbldr_w.f['5']++;__cov_lYjlshRrObBKsiLdbldr_w.s['29']++;var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(_ref6) {
      __cov_lYjlshRrObBKsiLdbldr_w.f['6']++;__cov_lYjlshRrObBKsiLdbldr_w.s['30']++;var _ref6$maxRetries = _ref6.maxRetries,
          maxRetries = _ref6$maxRetries === undefined ? (__cov_lYjlshRrObBKsiLdbldr_w.b['7'][0]++, 250) : (__cov_lYjlshRrObBKsiLdbldr_w.b['7'][1]++, _ref6$maxRetries),
          _ref6$retryInterval = _ref6.retryInterval,
          retryInterval = _ref6$retryInterval === undefined ? (__cov_lYjlshRrObBKsiLdbldr_w.b['8'][0]++, 120) : (__cov_lYjlshRrObBKsiLdbldr_w.b['8'][1]++, _ref6$retryInterval),
          port = _ref6.port;__cov_lYjlshRrObBKsiLdbldr_w.s['31']++;var establishConnection = function () {
         __cov_lYjlshRrObBKsiLdbldr_w.f['7']++;__cov_lYjlshRrObBKsiLdbldr_w.s['32']++;var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
            __cov_lYjlshRrObBKsiLdbldr_w.f['8']++;__cov_lYjlshRrObBKsiLdbldr_w.s['33']++;var lastError, retries;__cov_lYjlshRrObBKsiLdbldr_w.s['34']++;return _regenerator2.default.wrap(function _callee4$(_context4) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['9']++;__cov_lYjlshRrObBKsiLdbldr_w.s['35']++;while (1) {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['36']++;switch (_context4.prev = _context4.next) {case 0:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['37']++;retries = 0;case 1:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['38']++;if (!(retries <= maxRetries)) {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['10'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['39']++;_context4.next = 22;__cov_lYjlshRrObBKsiLdbldr_w.s['40']++;break;
                        } else {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['10'][1]++;
                        }__cov_lYjlshRrObBKsiLdbldr_w.s['41']++;_context4.prev = 2;__cov_lYjlshRrObBKsiLdbldr_w.s['42']++;_context4.next = 5;__cov_lYjlshRrObBKsiLdbldr_w.s['43']++;return connectToFirefox(port);case 5:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][2]++;__cov_lYjlshRrObBKsiLdbldr_w.s['44']++;return _context4.abrupt('return', _context4.sent);case 8:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][3]++;__cov_lYjlshRrObBKsiLdbldr_w.s['45']++;_context4.prev = 8;__cov_lYjlshRrObBKsiLdbldr_w.s['46']++;_context4.t0 = _context4['catch'](2);__cov_lYjlshRrObBKsiLdbldr_w.s['47']++;if (!(0, _errors.isErrorWithCode)('ECONNREFUSED', _context4.t0)) {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['11'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['48']++;_context4.next = 17;__cov_lYjlshRrObBKsiLdbldr_w.s['49']++;break;
                        } else {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['11'][1]++;
                        }__cov_lYjlshRrObBKsiLdbldr_w.s['50']++;_context4.next = 13;__cov_lYjlshRrObBKsiLdbldr_w.s['51']++;return new Promise(function (resolve) {
                           __cov_lYjlshRrObBKsiLdbldr_w.f['10']++;__cov_lYjlshRrObBKsiLdbldr_w.s['52']++;setTimeout(resolve, retryInterval);
                        });case 13:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][4]++;__cov_lYjlshRrObBKsiLdbldr_w.s['53']++;lastError = _context4.t0;__cov_lYjlshRrObBKsiLdbldr_w.s['54']++;log.debug('Retrying Firefox (' + retries + '); connection error: ' + _context4.t0);__cov_lYjlshRrObBKsiLdbldr_w.s['55']++;_context4.next = 19;__cov_lYjlshRrObBKsiLdbldr_w.s['56']++;break;case 17:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][5]++;__cov_lYjlshRrObBKsiLdbldr_w.s['57']++;log.error(_context4.t0.stack);__cov_lYjlshRrObBKsiLdbldr_w.s['58']++;throw _context4.t0;case 19:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][6]++;__cov_lYjlshRrObBKsiLdbldr_w.s['59']++;retries++;__cov_lYjlshRrObBKsiLdbldr_w.s['60']++;_context4.next = 1;__cov_lYjlshRrObBKsiLdbldr_w.s['61']++;break;case 22:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][7]++;__cov_lYjlshRrObBKsiLdbldr_w.s['62']++;log.debug('Connect to Firefox debugger: too many retries');__cov_lYjlshRrObBKsiLdbldr_w.s['63']++;throw lastError;case 24:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][8]++;case 'end':
                        __cov_lYjlshRrObBKsiLdbldr_w.b['9'][9]++;__cov_lYjlshRrObBKsiLdbldr_w.s['64']++;return _context4.stop();}
               }
            }, _callee4, this, [[2, 8]]);
         }));__cov_lYjlshRrObBKsiLdbldr_w.s['65']++;return function establishConnection() {
            __cov_lYjlshRrObBKsiLdbldr_w.f['11']++;__cov_lYjlshRrObBKsiLdbldr_w.s['66']++;return _ref8.apply(this, arguments);
         };
      }();__cov_lYjlshRrObBKsiLdbldr_w.s['67']++;var _ref7 = (__cov_lYjlshRrObBKsiLdbldr_w.b['13'][0]++, arguments.length > 1) && (__cov_lYjlshRrObBKsiLdbldr_w.b['13'][1]++, arguments[1] !== undefined) ? (__cov_lYjlshRrObBKsiLdbldr_w.b['12'][0]++, arguments[1]) : (__cov_lYjlshRrObBKsiLdbldr_w.b['12'][1]++, {}),
          _ref7$connectToFirefo = _ref7.connectToFirefox,
          connectToFirefox = _ref7$connectToFirefo === undefined ? (__cov_lYjlshRrObBKsiLdbldr_w.b['14'][0]++, connect) : (__cov_lYjlshRrObBKsiLdbldr_w.b['14'][1]++, _ref7$connectToFirefo);__cov_lYjlshRrObBKsiLdbldr_w.s['68']++;return _regenerator2.default.wrap(function _callee5$(_context5) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['12']++;__cov_lYjlshRrObBKsiLdbldr_w.s['69']++;while (1) {
            __cov_lYjlshRrObBKsiLdbldr_w.s['70']++;switch (_context5.prev = _context5.next) {case 0:
                  __cov_lYjlshRrObBKsiLdbldr_w.b['15'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['71']++;log.debug('Connecting to the remote Firefox debugger');__cov_lYjlshRrObBKsiLdbldr_w.s['72']++;return _context5.abrupt('return', establishConnection());case 2:
                  __cov_lYjlshRrObBKsiLdbldr_w.b['15'][1]++;case 'end':
                  __cov_lYjlshRrObBKsiLdbldr_w.b['15'][2]++;__cov_lYjlshRrObBKsiLdbldr_w.s['73']++;return _context5.stop();}
         }
      }, _callee5, this);
   }));__cov_lYjlshRrObBKsiLdbldr_w.s['74']++;return function connectWithMaxRetries(_x5) {
      __cov_lYjlshRrObBKsiLdbldr_w.f['13']++;__cov_lYjlshRrObBKsiLdbldr_w.s['75']++;return _ref5.apply(this, arguments);
   };
}();__cov_lYjlshRrObBKsiLdbldr_w.s['76']++;var _nodeFirefoxConnect = __webpack_require__(188);__cov_lYjlshRrObBKsiLdbldr_w.s['77']++;var _nodeFirefoxConnect2 = _interopRequireDefault(_nodeFirefoxConnect);__cov_lYjlshRrObBKsiLdbldr_w.s['78']++;var _logger = __webpack_require__(0);__cov_lYjlshRrObBKsiLdbldr_w.s['79']++;var _errors = __webpack_require__(2);function _interopRequireDefault(obj) {
   __cov_lYjlshRrObBKsiLdbldr_w.f['14']++;__cov_lYjlshRrObBKsiLdbldr_w.s['81']++;return (__cov_lYjlshRrObBKsiLdbldr_w.b['17'][0]++, obj) && (__cov_lYjlshRrObBKsiLdbldr_w.b['17'][1]++, obj.__esModule) ? (__cov_lYjlshRrObBKsiLdbldr_w.b['16'][0]++, obj) : (__cov_lYjlshRrObBKsiLdbldr_w.b['16'][1]++, { default: obj });
}__cov_lYjlshRrObBKsiLdbldr_w.s['82']++;var log = (0, _logger.createLogger)(__filename);__cov_lYjlshRrObBKsiLdbldr_w.s['83']++;var REMOTE_PORT = exports.REMOTE_PORT = 6005;__cov_lYjlshRrObBKsiLdbldr_w.s['84']++;var RemoteFirefox = exports.RemoteFirefox = function () {
   __cov_lYjlshRrObBKsiLdbldr_w.f['15']++;function RemoteFirefox(client) {
      __cov_lYjlshRrObBKsiLdbldr_w.f['16']++;__cov_lYjlshRrObBKsiLdbldr_w.s['86']++;(0, _classCallCheck3.default)(this, RemoteFirefox);__cov_lYjlshRrObBKsiLdbldr_w.s['87']++;this.client = client;__cov_lYjlshRrObBKsiLdbldr_w.s['88']++;this.checkedForAddonReloading = false;__cov_lYjlshRrObBKsiLdbldr_w.s['89']++;client.client.on('disconnect', function () {
         __cov_lYjlshRrObBKsiLdbldr_w.f['17']++;__cov_lYjlshRrObBKsiLdbldr_w.s['90']++;log.debug('Received "disconnect" from Firefox client');
      });__cov_lYjlshRrObBKsiLdbldr_w.s['91']++;client.client.on('end', function () {
         __cov_lYjlshRrObBKsiLdbldr_w.f['18']++;__cov_lYjlshRrObBKsiLdbldr_w.s['92']++;log.debug('Received "end" from Firefox client');
      });__cov_lYjlshRrObBKsiLdbldr_w.s['93']++;client.client.on('message', function (info) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['19']++;__cov_lYjlshRrObBKsiLdbldr_w.s['94']++;log.debug('Received message from client: ' + JSON.stringify(info));
      });
   }__cov_lYjlshRrObBKsiLdbldr_w.s['95']++;(0, _createClass3.default)(RemoteFirefox, [{ key: 'disconnect', value: function disconnect() {
         __cov_lYjlshRrObBKsiLdbldr_w.f['20']++;__cov_lYjlshRrObBKsiLdbldr_w.s['96']++;this.client.disconnect();
      } }, { key: 'addonRequest', value: function addonRequest(addon, request) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['21']++;__cov_lYjlshRrObBKsiLdbldr_w.s['97']++;var _this = this;__cov_lYjlshRrObBKsiLdbldr_w.s['98']++;return new Promise(function (resolve, reject) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['22']++;__cov_lYjlshRrObBKsiLdbldr_w.s['99']++;_this.client.client.makeRequest({ to: addon.actor, type: request }, function (response) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['23']++;__cov_lYjlshRrObBKsiLdbldr_w.s['100']++;if (response.error) {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['18'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['101']++;var _error = response.error + ': ' + response.message;__cov_lYjlshRrObBKsiLdbldr_w.s['102']++;log.debug('Client responded to \'' + request + '\' request with error:', _error);__cov_lYjlshRrObBKsiLdbldr_w.s['103']++;reject(new _errors.WebExtError(_error));
               } else {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['18'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['104']++;resolve(response);
               }
            });
         });
      } }, { key: 'installTemporaryAddon', value: function installTemporaryAddon(addonPath) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['24']++;__cov_lYjlshRrObBKsiLdbldr_w.s['105']++;var _this2 = this;__cov_lYjlshRrObBKsiLdbldr_w.s['106']++;return new Promise(function (resolve, reject) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['25']++;__cov_lYjlshRrObBKsiLdbldr_w.s['107']++;_this2.client.request('listTabs', function (error, tabsResponse) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['26']++;__cov_lYjlshRrObBKsiLdbldr_w.s['108']++;if (error) {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['19'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['109']++;return reject(new _errors.WebExtError('Remote Firefox: listTabs() error: ' + error));
               } else {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['19'][1]++;
               }__cov_lYjlshRrObBKsiLdbldr_w.s['110']++;if (!tabsResponse.addonsActor) {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['20'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['111']++;log.debug('listTabs returned a falsey addonsActor: ' + ('' + tabsResponse.addonsActor));__cov_lYjlshRrObBKsiLdbldr_w.s['112']++;return reject(new _errors.RemoteTempInstallNotSupported('This is an older version of Firefox that does not provide an ' + 'add-ons actor for remote installation. Try Firefox 49 or ' + 'higher.'));
               } else {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['20'][1]++;
               }__cov_lYjlshRrObBKsiLdbldr_w.s['113']++;_this2.client.client.makeRequest({ to: tabsResponse.addonsActor, type: 'installTemporaryAddon', addonPath: addonPath }, function (installResponse) {
                  __cov_lYjlshRrObBKsiLdbldr_w.f['27']++;__cov_lYjlshRrObBKsiLdbldr_w.s['114']++;if (installResponse.error) {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['21'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['115']++;return reject(new _errors.WebExtError('installTemporaryAddon: Error: ' + (installResponse.error + ': ' + installResponse.message)));
                  } else {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['21'][1]++;
                  }__cov_lYjlshRrObBKsiLdbldr_w.s['116']++;log.debug('installTemporaryAddon: ' + JSON.stringify(installResponse));__cov_lYjlshRrObBKsiLdbldr_w.s['117']++;log.info('Installed ' + addonPath + ' as a temporary add-on');__cov_lYjlshRrObBKsiLdbldr_w.s['118']++;resolve(installResponse);
               });
            });
         });
      } }, { key: 'getInstalledAddon', value: function getInstalledAddon(addonId) {
         __cov_lYjlshRrObBKsiLdbldr_w.f['28']++;__cov_lYjlshRrObBKsiLdbldr_w.s['119']++;var _this3 = this;__cov_lYjlshRrObBKsiLdbldr_w.s['120']++;return new Promise(function (resolve, reject) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['29']++;__cov_lYjlshRrObBKsiLdbldr_w.s['121']++;_this3.client.request('listAddons', function (error, response) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['30']++;__cov_lYjlshRrObBKsiLdbldr_w.s['122']++;if (error) {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['22'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['123']++;reject(new _errors.WebExtError('Remote Firefox: listAddons() error: ' + error));
               } else {
                  __cov_lYjlshRrObBKsiLdbldr_w.b['22'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['124']++;resolve(response.addons);
               }
            });
         }).then(function (addons) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['31']++;__cov_lYjlshRrObBKsiLdbldr_w.s['125']++;var _iteratorNormalCompletion = true;__cov_lYjlshRrObBKsiLdbldr_w.s['126']++;var _didIteratorError = false;__cov_lYjlshRrObBKsiLdbldr_w.s['127']++;var _iteratorError = undefined;__cov_lYjlshRrObBKsiLdbldr_w.s['128']++;try {
               __cov_lYjlshRrObBKsiLdbldr_w.s['129']++;for (var _iterator = addons[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['130']++;var _addon = _step.value;__cov_lYjlshRrObBKsiLdbldr_w.s['131']++;if (_addon.id === addonId) {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['23'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['132']++;return _addon;
                  } else {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['23'][1]++;
                  }
               }
            } catch (err) {
               __cov_lYjlshRrObBKsiLdbldr_w.s['133']++;_didIteratorError = true;__cov_lYjlshRrObBKsiLdbldr_w.s['134']++;_iteratorError = err;
            } finally {
               __cov_lYjlshRrObBKsiLdbldr_w.s['135']++;try {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['136']++;if ((__cov_lYjlshRrObBKsiLdbldr_w.b['25'][0]++, !_iteratorNormalCompletion) && (__cov_lYjlshRrObBKsiLdbldr_w.b['25'][1]++, _iterator.return)) {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['24'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['137']++;_iterator.return();
                  } else {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['24'][1]++;
                  }
               } finally {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['138']++;if (_didIteratorError) {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['26'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['139']++;throw _iteratorError;
                  } else {
                     __cov_lYjlshRrObBKsiLdbldr_w.b['26'][1]++;
                  }
               }
            }__cov_lYjlshRrObBKsiLdbldr_w.s['140']++;log.debug('Remote Firefox has these addons: ' + addons.map(function (a) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['32']++;__cov_lYjlshRrObBKsiLdbldr_w.s['141']++;return a.id;
            }));__cov_lYjlshRrObBKsiLdbldr_w.s['142']++;throw new _errors.WebExtError('The remote Firefox does not have your extension installed');
         });
      } }, { key: 'checkForAddonReloading', value: function () {
         __cov_lYjlshRrObBKsiLdbldr_w.f['33']++;__cov_lYjlshRrObBKsiLdbldr_w.s['143']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(addon) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['34']++;__cov_lYjlshRrObBKsiLdbldr_w.s['144']++;var response, supportedRequestTypes;__cov_lYjlshRrObBKsiLdbldr_w.s['145']++;return _regenerator2.default.wrap(function _callee$(_context) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['35']++;__cov_lYjlshRrObBKsiLdbldr_w.s['146']++;while (1) {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['147']++;switch (_context.prev = _context.next) {case 0:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['148']++;if (!this.checkedForAddonReloading) {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['28'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['149']++;_context.next = 4;__cov_lYjlshRrObBKsiLdbldr_w.s['150']++;break;
                        } else {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['28'][1]++;
                        }__cov_lYjlshRrObBKsiLdbldr_w.s['151']++;return _context.abrupt('return', addon);case 4:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['152']++;_context.next = 6;__cov_lYjlshRrObBKsiLdbldr_w.s['153']++;return this.addonRequest(addon, 'requestTypes');case 6:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][2]++;__cov_lYjlshRrObBKsiLdbldr_w.s['154']++;response = _context.sent;__cov_lYjlshRrObBKsiLdbldr_w.s['155']++;if (!(response.requestTypes.indexOf('reload') === -1)) {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['29'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['156']++;_context.next = 13;__cov_lYjlshRrObBKsiLdbldr_w.s['157']++;break;
                        } else {
                           __cov_lYjlshRrObBKsiLdbldr_w.b['29'][1]++;
                        }__cov_lYjlshRrObBKsiLdbldr_w.s['158']++;supportedRequestTypes = JSON.stringify(response.requestTypes);__cov_lYjlshRrObBKsiLdbldr_w.s['159']++;log.debug('Remote Firefox only supports: ' + supportedRequestTypes);__cov_lYjlshRrObBKsiLdbldr_w.s['160']++;throw new _errors.UsageError('This Firefox version does not support add-on reloading. ' + 'Re-run with --no-reload');case 13:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][3]++;__cov_lYjlshRrObBKsiLdbldr_w.s['161']++;this.checkedForAddonReloading = true;__cov_lYjlshRrObBKsiLdbldr_w.s['162']++;return _context.abrupt('return', addon);case 15:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][4]++;case 'end':
                        __cov_lYjlshRrObBKsiLdbldr_w.b['27'][5]++;__cov_lYjlshRrObBKsiLdbldr_w.s['163']++;return _context.stop();}
               }
            }, _callee, this);
         }));function checkForAddonReloading(_x) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['36']++;__cov_lYjlshRrObBKsiLdbldr_w.s['165']++;return _ref.apply(this, arguments);
         }__cov_lYjlshRrObBKsiLdbldr_w.s['166']++;return checkForAddonReloading;
      }() }, { key: 'reloadAddon', value: function () {
         __cov_lYjlshRrObBKsiLdbldr_w.f['37']++;__cov_lYjlshRrObBKsiLdbldr_w.s['167']++;var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(addonId) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['38']++;__cov_lYjlshRrObBKsiLdbldr_w.s['168']++;var addon;__cov_lYjlshRrObBKsiLdbldr_w.s['169']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
               __cov_lYjlshRrObBKsiLdbldr_w.f['39']++;__cov_lYjlshRrObBKsiLdbldr_w.s['170']++;while (1) {
                  __cov_lYjlshRrObBKsiLdbldr_w.s['171']++;switch (_context2.prev = _context2.next) {case 0:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][0]++;__cov_lYjlshRrObBKsiLdbldr_w.s['172']++;_context2.next = 2;__cov_lYjlshRrObBKsiLdbldr_w.s['173']++;return this.getInstalledAddon(addonId);case 2:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][1]++;__cov_lYjlshRrObBKsiLdbldr_w.s['174']++;addon = _context2.sent;__cov_lYjlshRrObBKsiLdbldr_w.s['175']++;_context2.next = 5;__cov_lYjlshRrObBKsiLdbldr_w.s['176']++;return this.checkForAddonReloading(addon);case 5:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][2]++;__cov_lYjlshRrObBKsiLdbldr_w.s['177']++;_context2.next = 7;__cov_lYjlshRrObBKsiLdbldr_w.s['178']++;return this.addonRequest(addon, 'reload');case 7:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][3]++;__cov_lYjlshRrObBKsiLdbldr_w.s['179']++;process.stdout.write('\rLast extension reload: ' + new Date().toTimeString());__cov_lYjlshRrObBKsiLdbldr_w.s['180']++;log.debug('\n');case 9:
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][4]++;case 'end':
                        __cov_lYjlshRrObBKsiLdbldr_w.b['30'][5]++;__cov_lYjlshRrObBKsiLdbldr_w.s['181']++;return _context2.stop();}
               }
            }, _callee2, this);
         }));function reloadAddon(_x2) {
            __cov_lYjlshRrObBKsiLdbldr_w.f['40']++;__cov_lYjlshRrObBKsiLdbldr_w.s['183']++;return _ref2.apply(this, arguments);
         }__cov_lYjlshRrObBKsiLdbldr_w.s['184']++;return reloadAddon;
      }() }]);__cov_lYjlshRrObBKsiLdbldr_w.s['185']++;return RemoteFirefox;
}();
/* WEBPACK VAR INJECTION */}.call(exports, "src/firefox/remote.js"))

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_S_ACNbbw6$oEED_d9QnydA = Function('return this')();
if (!__cov_S_ACNbbw6$oEED_d9QnydA.__coverage__) {
   __cov_S_ACNbbw6$oEED_d9QnydA.__coverage__ = {};
}
__cov_S_ACNbbw6$oEED_d9QnydA = __cov_S_ACNbbw6$oEED_d9QnydA.__coverage__;
if (!__cov_S_ACNbbw6$oEED_d9QnydA['/home/travis/build/mozilla/web-ext/src/util/manifest.js']) {
   __cov_S_ACNbbw6$oEED_d9QnydA['/home/travis/build/mozilla/web-ext/src/util/manifest.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/manifest.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 1, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 1, "57": 0, "58": 0, "59": 1, "60": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0, 0, 0, 0, 0, 0, 0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "(anonymous_2)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "_callee", "line": 31, "loc": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } } }, "4": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "5": { "name": "getValidatedManifest", "line": 31, "loc": { "start": { "line": 31, "column": 30 }, "end": { "line": null, "column": null } } }, "6": { "name": "getManifestId", "line": 82, "loc": { "start": { "line": 82, "column": 7 }, "end": { "line": 82, "column": 78 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 82, "column": 16 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 35, "column": 6 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 40, "column": 29 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 42, "column": 10 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 49, "column": 19 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 51, "column": 10 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 31, "column": 15 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 59, "column": 6 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 60, "column": 11 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 62, "column": 6 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 63, "column": 11 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 66, "column": 6 }, "end": { "line": null, "column": null } }, "49": { "start": { "line": 70, "column": 11 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 73, "column": 6 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 74, "column": 10 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 78, "column": 9 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 31, "column": 30 }, "end": { "line": null, "column": null } }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 31, "column": 30 }, "end": { "line": null, "column": null } }, "59": { "start": { "line": 82, "column": 7 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 83, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 59, "type": "if", "locations": [{ "start": { "line": 59, "column": 6 }, "end": { "line": 59, "column": 6 } }, { "start": { "line": 59, "column": 6 }, "end": { "line": 59, "column": 6 } }] }, "5": { "line": 62, "type": "if", "locations": [{ "start": { "line": 62, "column": 6 }, "end": { "line": 62, "column": 6 } }, { "start": { "line": 62, "column": 6 }, "end": { "line": 62, "column": 6 } }] }, "6": { "line": 66, "type": "if", "locations": [{ "start": { "line": 66, "column": 6 }, "end": { "line": 66, "column": 6 } }, { "start": { "line": 66, "column": 6 }, "end": { "line": 66, "column": 6 } }] }, "7": { "line": 66, "type": "binary-expr", "locations": [{ "start": { "line": 66, "column": 6 }, "end": { "line": 66, "column": 6 } }, { "start": { "line": 66, "column": 35 }, "end": { "line": 66, "column": 2 } }] }, "8": { "line": 73, "type": "if", "locations": [{ "start": { "line": 73, "column": 6 }, "end": { "line": 73, "column": 6 } }, { "start": { "line": 73, "column": 6 }, "end": { "line": 73, "column": 6 } }] }, "9": { "line": 84, "type": "cond-expr", "locations": [{ "start": { "line": 84, "column": 4 }, "end": { "line": 83, "column": 9 } }, { "start": { "line": 84, "column": 41 }, "end": { "line": 83, "column": 2 } }] } }, "code": ["/* @flow */", "import path from 'path';", "", "import {fs} from 'mz';", "import parseJSON from 'parse-json';", "", "import {InvalidManifest} from '../errors';", "import {createLogger} from './logger';", "", "const log = createLogger(__filename);", "", "", "// getValidatedManifest helper types and implementation", "", "export type ExtensionManifestApplications = {|", "  gecko: {|", "    id?: string,", "    strict_min_version?: string,", "    strict_max_version?: string,", "    update_url?: string,", "  |},", "|};", "", "export type ExtensionManifest = {|", "  name: string,", "  version: string,", "  default_locale?: string,", "  applications?: ExtensionManifestApplications,", "|};", "", "export default async function getValidatedManifest(", "  sourceDir: string", "): Promise<ExtensionManifest> {", "  const manifestFile = path.join(sourceDir, 'manifest.json');", "  log.debug(`Validating manifest at ${manifestFile}`);", "", "  let manifestContents;", "", "  try {", "    manifestContents = await fs.readFile(manifestFile);", "  } catch (error) {", "    throw new InvalidManifest(", "      `Could not read manifest.json file at ${manifestFile}: ${error}`);", "  }", "", "  let manifestData;", "", "  try {", "    manifestData = parseJSON(manifestContents, manifestFile);", "  } catch (error) {", "    throw new InvalidManifest(", "      `Error parsing manifest.json at ${manifestFile}: ${error}`);", "  }", "", "  const errors = [];", "  // This is just some basic validation of what web-ext needs, not", "  // what Firefox will need to run the extension.", "  // TODO: integrate with the addons-linter for actual validation.", "  if (!manifestData.name) {", "    errors.push('missing \"name\" property');", "  }", "  if (!manifestData.version) {", "    errors.push('missing \"version\" property');", "  }", "", "  if (manifestData.applications && !manifestData.applications.gecko) {", "    // Since the applications property only applies to gecko, make", "    // sure 'gecko' exists when 'applications' is defined. This should", "    // make introspection of gecko properties easier.", "    errors.push('missing \"applications.gecko\" property');", "  }", "", "  if (errors.length) {", "    throw new InvalidManifest(", "      `Manifest at ${manifestFile} is invalid: ${errors.join('; ')}`);", "  }", "", "  return manifestData;", "}", "", "", "export function getManifestId(manifestData: ExtensionManifest): string | void {", "  return manifestData.applications ?", "    manifestData.applications.gecko.id : undefined;", "}", ""] };
}
__cov_S_ACNbbw6$oEED_d9QnydA = __cov_S_ACNbbw6$oEED_d9QnydA['/home/travis/build/mozilla/web-ext/src/util/manifest.js'];
__cov_S_ACNbbw6$oEED_d9QnydA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_S_ACNbbw6$oEED_d9QnydA.s['2']++;var _regenerator = __webpack_require__(8);__cov_S_ACNbbw6$oEED_d9QnydA.s['3']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_S_ACNbbw6$oEED_d9QnydA.s['4']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_S_ACNbbw6$oEED_d9QnydA.s['5']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_S_ACNbbw6$oEED_d9QnydA.s['6']++;exports.getManifestId = getManifestId;__cov_S_ACNbbw6$oEED_d9QnydA.s['7']++;var _path = __webpack_require__(4);__cov_S_ACNbbw6$oEED_d9QnydA.s['8']++;var _path2 = _interopRequireDefault(_path);__cov_S_ACNbbw6$oEED_d9QnydA.s['9']++;var _mz = __webpack_require__(9);__cov_S_ACNbbw6$oEED_d9QnydA.s['10']++;var _parseJson = __webpack_require__(98);__cov_S_ACNbbw6$oEED_d9QnydA.s['11']++;var _parseJson2 = _interopRequireDefault(_parseJson);__cov_S_ACNbbw6$oEED_d9QnydA.s['12']++;var _errors = __webpack_require__(2);__cov_S_ACNbbw6$oEED_d9QnydA.s['13']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_S_ACNbbw6$oEED_d9QnydA.f['1']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['15']++;return (__cov_S_ACNbbw6$oEED_d9QnydA.b['2'][0]++, obj) && (__cov_S_ACNbbw6$oEED_d9QnydA.b['2'][1]++, obj.__esModule) ? (__cov_S_ACNbbw6$oEED_d9QnydA.b['1'][0]++, obj) : (__cov_S_ACNbbw6$oEED_d9QnydA.b['1'][1]++, { default: obj });
}__cov_S_ACNbbw6$oEED_d9QnydA.s['16']++;var log = (0, _logger.createLogger)(__filename);__cov_S_ACNbbw6$oEED_d9QnydA.s['17']++;exports.default = function () {
   __cov_S_ACNbbw6$oEED_d9QnydA.f['2']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['18']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(sourceDir) {
      __cov_S_ACNbbw6$oEED_d9QnydA.f['3']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['19']++;var manifestFile, manifestContents, manifestData, errors;__cov_S_ACNbbw6$oEED_d9QnydA.s['20']++;return _regenerator2.default.wrap(function _callee$(_context) {
         __cov_S_ACNbbw6$oEED_d9QnydA.f['4']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['21']++;while (1) {
            __cov_S_ACNbbw6$oEED_d9QnydA.s['22']++;switch (_context.prev = _context.next) {case 0:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][0]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['23']++;manifestFile = _path2.default.join(sourceDir, 'manifest.json');__cov_S_ACNbbw6$oEED_d9QnydA.s['24']++;log.debug('Validating manifest at ' + manifestFile);__cov_S_ACNbbw6$oEED_d9QnydA.s['25']++;manifestContents = void 0;__cov_S_ACNbbw6$oEED_d9QnydA.s['26']++;_context.prev = 3;__cov_S_ACNbbw6$oEED_d9QnydA.s['27']++;_context.next = 6;__cov_S_ACNbbw6$oEED_d9QnydA.s['28']++;return _mz.fs.readFile(manifestFile);case 6:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][1]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['29']++;manifestContents = _context.sent;__cov_S_ACNbbw6$oEED_d9QnydA.s['30']++;_context.next = 12;__cov_S_ACNbbw6$oEED_d9QnydA.s['31']++;break;case 9:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][2]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['32']++;_context.prev = 9;__cov_S_ACNbbw6$oEED_d9QnydA.s['33']++;_context.t0 = _context['catch'](3);__cov_S_ACNbbw6$oEED_d9QnydA.s['34']++;throw new _errors.InvalidManifest('Could not read manifest.json file at ' + manifestFile + ': ' + _context.t0);case 12:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][3]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['35']++;manifestData = void 0;__cov_S_ACNbbw6$oEED_d9QnydA.s['36']++;_context.prev = 13;__cov_S_ACNbbw6$oEED_d9QnydA.s['37']++;manifestData = (0, _parseJson2.default)(manifestContents, manifestFile);__cov_S_ACNbbw6$oEED_d9QnydA.s['38']++;_context.next = 20;__cov_S_ACNbbw6$oEED_d9QnydA.s['39']++;break;case 17:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][4]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['40']++;_context.prev = 17;__cov_S_ACNbbw6$oEED_d9QnydA.s['41']++;_context.t1 = _context['catch'](13);__cov_S_ACNbbw6$oEED_d9QnydA.s['42']++;throw new _errors.InvalidManifest('Error parsing manifest.json at ' + manifestFile + ': ' + _context.t1);case 20:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][5]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['43']++;errors = [];__cov_S_ACNbbw6$oEED_d9QnydA.s['44']++;if (!manifestData.name) {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['4'][0]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['45']++;errors.push('missing "name" property');
                  } else {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['4'][1]++;
                  }__cov_S_ACNbbw6$oEED_d9QnydA.s['46']++;if (!manifestData.version) {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['5'][0]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['47']++;errors.push('missing "version" property');
                  } else {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['5'][1]++;
                  }__cov_S_ACNbbw6$oEED_d9QnydA.s['48']++;if ((__cov_S_ACNbbw6$oEED_d9QnydA.b['7'][0]++, manifestData.applications) && (__cov_S_ACNbbw6$oEED_d9QnydA.b['7'][1]++, !manifestData.applications.gecko)) {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['6'][0]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['49']++;errors.push('missing "applications.gecko" property');
                  } else {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['6'][1]++;
                  }__cov_S_ACNbbw6$oEED_d9QnydA.s['50']++;if (!errors.length) {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['8'][0]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['51']++;_context.next = 26;__cov_S_ACNbbw6$oEED_d9QnydA.s['52']++;break;
                  } else {
                     __cov_S_ACNbbw6$oEED_d9QnydA.b['8'][1]++;
                  }__cov_S_ACNbbw6$oEED_d9QnydA.s['53']++;throw new _errors.InvalidManifest('Manifest at ' + manifestFile + ' is invalid: ' + errors.join('; '));case 26:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][6]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['54']++;return _context.abrupt('return', manifestData);case 27:
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][7]++;case 'end':
                  __cov_S_ACNbbw6$oEED_d9QnydA.b['3'][8]++;__cov_S_ACNbbw6$oEED_d9QnydA.s['55']++;return _context.stop();}
         }
      }, _callee, this, [[3, 9], [13, 17]]);
   }));function getValidatedManifest(_x) {
      __cov_S_ACNbbw6$oEED_d9QnydA.f['5']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['57']++;return _ref.apply(this, arguments);
   }__cov_S_ACNbbw6$oEED_d9QnydA.s['58']++;return getValidatedManifest;
}();function getManifestId(manifestData) {
   __cov_S_ACNbbw6$oEED_d9QnydA.f['6']++;__cov_S_ACNbbw6$oEED_d9QnydA.s['60']++;return manifestData.applications ? (__cov_S_ACNbbw6$oEED_d9QnydA.b['9'][0]++, manifestData.applications.gecko.id) : (__cov_S_ACNbbw6$oEED_d9QnydA.b['9'][1]++, undefined);
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/util/manifest.js"))

/***/ }),
/* 26 */
/***/ (function(module, exports) {

module.exports = function(it){
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};

/***/ }),
/* 27 */
/***/ (function(module, exports) {

module.exports = {};

/***/ }),
/* 28 */
/***/ (function(module, exports) {

module.exports = require("es6-promisify");

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_8xLTZ5bcCAe1pnYlUe$twA = Function('return this')();
if (!__cov_8xLTZ5bcCAe1pnYlUe$twA.__coverage__) {
   __cov_8xLTZ5bcCAe1pnYlUe$twA.__coverage__ = {};
}
__cov_8xLTZ5bcCAe1pnYlUe$twA = __cov_8xLTZ5bcCAe1pnYlUe$twA.__coverage__;
if (!__cov_8xLTZ5bcCAe1pnYlUe$twA['/home/travis/build/mozilla/web-ext/src/util/file-filter.js']) {
   __cov_8xLTZ5bcCAe1pnYlUe$twA['/home/travis/build/mozilla/web-ext/src/util/file-filter.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/file-filter.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 1, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 1, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "isSubPath", "line": 11, "loc": { "start": { "line": 11, "column": 25 }, "end": { "line": 11, "column": 67 } } }, "3": { "name": "(anonymous_3)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "FileFilter", "line": 51, "loc": { "start": { "line": 51, "column": 29 }, "end": { "line": 51, "column": 29 } } }, "5": { "name": "resolveWithSourceDir", "line": 77, "loc": { "start": { "line": 77, "column": 23 }, "end": { "line": 77, "column": 45 } } }, "6": { "name": "addToIgnoreList", "line": 89, "loc": { "start": { "line": 89, "column": 18 }, "end": { "line": 89, "column": 40 } } }, "7": { "name": "wantFile", "line": 105, "loc": { "start": { "line": 105, "column": 11 }, "end": { "line": 105, "column": 38 } } }, "8": { "name": "createFileFilter", "line": 121, "loc": { "start": { "line": 121, "column": 2 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 11, "column": 7 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 12, "column": 8 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 14, "column": 6 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 15, "column": 11 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 17, "column": 6 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 18, "column": 11 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 20, "column": 9 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 35, "column": 13 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 51, "column": 29 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 51, "column": 25 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 52, "column": 16 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 54, "column": 9 }, "end": { "line": null, "column": null } }, "28": { "start": { "line": 55, "column": 9 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 57, "column": 9 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 58, "column": 8 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 59, "column": 11 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 61, "column": 8 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 62, "column": 21 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 63, "column": 10 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 67, "column": 11 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 78, "column": 10 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 79, "column": 8 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 83, "column": 11 }, "end": { "line": null, "column": null } }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 90, "column": 23 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 90, "column": 15 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 91, "column": 11 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 106, "column": 10 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 107, "column": 23 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 107, "column": 15 }, "end": { "line": null, "column": null } }, "61": { "start": { "line": 108, "column": 10 }, "end": { "line": null, "column": null } }, "62": { "start": { "line": 109, "column": 12 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 111, "column": 15 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "70": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "71": { "start": { "line": 114, "column": 11 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "73": { "start": { "line": 120, "column": 7 }, "end": { "line": null, "column": null } }, "74": { "start": { "line": 121, "column": 45 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 14, "type": "if", "locations": [{ "start": { "line": 14, "column": 6 }, "end": { "line": 14, "column": 6 } }, { "start": { "line": 14, "column": 6 }, "end": { "line": 14, "column": 6 } }] }, "4": { "line": 17, "type": "if", "locations": [{ "start": { "line": 17, "column": 6 }, "end": { "line": 17, "column": 6 } }, { "start": { "line": 17, "column": 6 }, "end": { "line": 17, "column": 6 } }] }, "5": { "line": 51, "type": "cond-expr", "locations": [{ "start": { "line": 51, "column": 25 }, "end": { "line": 51, "column": 25 } }, { "start": { "line": 51, "column": 25 }, "end": { "line": 51, "column": 29 } }] }, "6": { "line": 51, "type": "binary-expr", "locations": [{ "start": { "line": 51, "column": 25 }, "end": { "line": 51, "column": 25 } }, { "start": { "line": 51, "column": 25 }, "end": { "line": 51, "column": 25 } }] }, "7": { "line": 40, "type": "cond-expr", "locations": [{ "start": { "line": 40, "column": 26 }, "end": { "line": 51, "column": 29 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 48, "type": "cond-expr", "locations": [{ "start": { "line": 48, "column": 18 }, "end": { "line": 51, "column": 29 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 58, "type": "if", "locations": [{ "start": { "line": 58, "column": 8 }, "end": { "line": 58, "column": 8 } }, { "start": { "line": 58, "column": 8 }, "end": { "line": 58, "column": 8 } }] }, "10": { "line": 61, "type": "if", "locations": [{ "start": { "line": 61, "column": 8 }, "end": { "line": 61, "column": 8 } }, { "start": { "line": 61, "column": 8 }, "end": { "line": 61, "column": 8 } }] }, "11": { "line": 61, "type": "binary-expr", "locations": [{ "start": { "line": 61, "column": 8 }, "end": { "line": 61, "column": 24 } }, { "start": { "line": 61, "column": 24 }, "end": { "line": 61, "column": 4 } }] }, "12": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "13": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 108, "type": "if", "locations": [{ "start": { "line": 108, "column": 10 }, "end": { "line": 108, "column": 10 } }, { "start": { "line": 108, "column": 10 }, "end": { "line": 108, "column": 10 } }] }, "16": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import path from 'path';", "", "import minimatch from 'minimatch';", "", "import {createLogger} from './logger';", "", "const log = createLogger(__filename);", "", "// check if target is a sub directory of src", "export const isSubPath = (src: string, target: string): boolean => {", "  const relate = path.relative(src, target);", "  // same dir", "  if (!relate) {", "    return false;", "  }", "  if (relate === '..') {", "    return false;", "  }", "  return !relate.startsWith(`..${path.sep}`);", "};", "", "// FileFilter types and implementation.", "", "export type FileFilterOptions = {|", "  baseIgnoredPatterns?: Array<string>,", "  ignoreFiles?: Array<string>,", "  sourceDir: string,", "  artifactsDir?: string,", "|};", "", "/*", " * Allows or ignores files.", " */", "export class FileFilter {", "  filesToIgnore: Array<string>;", "  sourceDir: string;", "", "  constructor({", "    baseIgnoredPatterns = [", "      '**/*.xpi',", "      '**/*.zip',", "      '**/.*', // any hidden file and folder", "      '**/.*/**/*', // and the content inside hidden folder", "      '**/node_modules',", "      '**/node_modules/**/*',", "    ],", "    ignoreFiles = [],", "    sourceDir,", "    artifactsDir,", "  }: FileFilterOptions = {}) {", "    sourceDir = path.resolve(sourceDir);", "", "    this.filesToIgnore = [];", "    this.sourceDir = sourceDir;", "", "    this.addToIgnoreList(baseIgnoredPatterns);", "    if (ignoreFiles) {", "      this.addToIgnoreList(ignoreFiles);", "    }", "    if (artifactsDir && isSubPath(sourceDir, artifactsDir)) {", "      artifactsDir = path.resolve(artifactsDir);", "      log.debug(", "        `Ignoring artifacts directory \"${artifactsDir}\" ` +", "        'and all its subdirectories'", "      );", "      this.addToIgnoreList([", "        artifactsDir,", "        path.join(artifactsDir, '**', '*'),", "      ]);", "    }", "  }", "", "  /**", "   *  Resolve relative path to absolute path with sourceDir.", "   */", "  resolveWithSourceDir(file: string): string {", "    const resolvedPath = path.resolve(this.sourceDir, file);", "    log.debug(", "      `Resolved path ${file} with sourceDir ${this.sourceDir} ` +", "      `to ${resolvedPath}`", "    );", "    return resolvedPath;", "  }", "", "  /**", "   *  Insert more files into filesToIgnore array.", "   */", "  addToIgnoreList(files: Array<string>) {", "    for (const file of files) {", "      this.filesToIgnore.push(this.resolveWithSourceDir(file));", "    }", "  }", "", "  /*", "   * Returns true if the file is wanted.", "   *", "   * If filePath does not start with a slash, it will be treated as a path", "   * relative to sourceDir when matching it against all configured", "   * ignore-patterns.", "   *", "   * Example: this is called by zipdir as wantFile(filePath) for each", "   * file in the folder that is being archived.", "   */", "  wantFile(filePath: string): boolean {", "    const resolvedPath = this.resolveWithSourceDir(filePath);", "    for (const test of this.filesToIgnore) {", "      if (minimatch(resolvedPath, test)) {", "        log.debug(", "          `FileFilter: ignoring file ${resolvedPath} (it matched ${test})`);", "        return false;", "      }", "    }", "    return true;", "  }", "}", "", "// a helper function to make mocking easier", "", "export const createFileFilter = (", "  (params: FileFilterOptions): FileFilter => new FileFilter(params)", ");", "", "export type FileFilterCreatorFn = typeof createFileFilter;", ""] };
}
__cov_8xLTZ5bcCAe1pnYlUe$twA = __cov_8xLTZ5bcCAe1pnYlUe$twA['/home/travis/build/mozilla/web-ext/src/util/file-filter.js'];
__cov_8xLTZ5bcCAe1pnYlUe$twA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_8xLTZ5bcCAe1pnYlUe$twA.s['2']++;exports.createFileFilter = exports.FileFilter = exports.isSubPath = undefined;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['3']++;var _classCallCheck2 = __webpack_require__(14);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['4']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['5']++;var _createClass2 = __webpack_require__(16);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['6']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['7']++;var _path = __webpack_require__(4);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['8']++;var _path2 = _interopRequireDefault(_path);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['9']++;var _minimatch = __webpack_require__(186);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['10']++;var _minimatch2 = _interopRequireDefault(_minimatch);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['11']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_8xLTZ5bcCAe1pnYlUe$twA.f['1']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['13']++;return (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['2'][0]++, obj) && (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['2'][1]++, obj.__esModule) ? (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['1'][0]++, obj) : (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['1'][1]++, { default: obj });
}__cov_8xLTZ5bcCAe1pnYlUe$twA.s['14']++;var log = (0, _logger.createLogger)(__filename);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['15']++;var isSubPath = exports.isSubPath = function isSubPath(src, target) {
   __cov_8xLTZ5bcCAe1pnYlUe$twA.f['2']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['16']++;var relate = _path2.default.relative(src, target);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['17']++;if (!relate) {
      __cov_8xLTZ5bcCAe1pnYlUe$twA.b['3'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['18']++;return false;
   } else {
      __cov_8xLTZ5bcCAe1pnYlUe$twA.b['3'][1]++;
   }__cov_8xLTZ5bcCAe1pnYlUe$twA.s['19']++;if (relate === '..') {
      __cov_8xLTZ5bcCAe1pnYlUe$twA.b['4'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['20']++;return false;
   } else {
      __cov_8xLTZ5bcCAe1pnYlUe$twA.b['4'][1]++;
   }__cov_8xLTZ5bcCAe1pnYlUe$twA.s['21']++;return !relate.startsWith('..' + _path2.default.sep);
};__cov_8xLTZ5bcCAe1pnYlUe$twA.s['22']++;var FileFilter = exports.FileFilter = function () {
   __cov_8xLTZ5bcCAe1pnYlUe$twA.f['3']++;function FileFilter() {
      __cov_8xLTZ5bcCAe1pnYlUe$twA.f['4']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['24']++;var _ref = (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['6'][0]++, arguments.length > 0) && (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['6'][1]++, arguments[0] !== undefined) ? (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['5'][0]++, arguments[0]) : (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['5'][1]++, {}),
          _ref$baseIgnoredPatte = _ref.baseIgnoredPatterns,
          baseIgnoredPatterns = _ref$baseIgnoredPatte === undefined ? (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['7'][0]++, ['**/*.xpi', '**/*.zip', '**/.*', '**/.*/**/*', '**/node_modules', '**/node_modules/**/*']) : (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['7'][1]++, _ref$baseIgnoredPatte),
          _ref$ignoreFiles = _ref.ignoreFiles,
          ignoreFiles = _ref$ignoreFiles === undefined ? (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['8'][0]++, []) : (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['8'][1]++, _ref$ignoreFiles),
          sourceDir = _ref.sourceDir,
          artifactsDir = _ref.artifactsDir;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['25']++;(0, _classCallCheck3.default)(this, FileFilter);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['26']++;sourceDir = _path2.default.resolve(sourceDir);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['27']++;this.filesToIgnore = [];__cov_8xLTZ5bcCAe1pnYlUe$twA.s['28']++;this.sourceDir = sourceDir;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['29']++;this.addToIgnoreList(baseIgnoredPatterns);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['30']++;if (ignoreFiles) {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.b['9'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['31']++;this.addToIgnoreList(ignoreFiles);
      } else {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.b['9'][1]++;
      }__cov_8xLTZ5bcCAe1pnYlUe$twA.s['32']++;if ((__cov_8xLTZ5bcCAe1pnYlUe$twA.b['11'][0]++, artifactsDir) && (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['11'][1]++, isSubPath(sourceDir, artifactsDir))) {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.b['10'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['33']++;artifactsDir = _path2.default.resolve(artifactsDir);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['34']++;log.debug('Ignoring artifacts directory "' + artifactsDir + '" ' + 'and all its subdirectories');__cov_8xLTZ5bcCAe1pnYlUe$twA.s['35']++;this.addToIgnoreList([artifactsDir, _path2.default.join(artifactsDir, '**', '*')]);
      } else {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.b['10'][1]++;
      }
   }__cov_8xLTZ5bcCAe1pnYlUe$twA.s['36']++;(0, _createClass3.default)(FileFilter, [{ key: 'resolveWithSourceDir', value: function resolveWithSourceDir(file) {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.f['5']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['37']++;var resolvedPath = _path2.default.resolve(this.sourceDir, file);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['38']++;log.debug('Resolved path ' + file + ' with sourceDir ' + this.sourceDir + ' ' + ('to ' + resolvedPath));__cov_8xLTZ5bcCAe1pnYlUe$twA.s['39']++;return resolvedPath;
      } }, { key: 'addToIgnoreList', value: function addToIgnoreList(files) {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.f['6']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['40']++;var _iteratorNormalCompletion = true;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['41']++;var _didIteratorError = false;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['42']++;var _iteratorError = undefined;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['43']++;try {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['44']++;for (var _iterator = files[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['45']++;var file = _step.value;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['46']++;this.filesToIgnore.push(this.resolveWithSourceDir(file));
            }
         } catch (err) {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['47']++;_didIteratorError = true;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['48']++;_iteratorError = err;
         } finally {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['49']++;try {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['50']++;if ((__cov_8xLTZ5bcCAe1pnYlUe$twA.b['13'][0]++, !_iteratorNormalCompletion) && (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['13'][1]++, _iterator.return)) {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['12'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['51']++;_iterator.return();
               } else {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['12'][1]++;
               }
            } finally {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['52']++;if (_didIteratorError) {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['14'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['53']++;throw _iteratorError;
               } else {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['14'][1]++;
               }
            }
         }
      } }, { key: 'wantFile', value: function wantFile(filePath) {
         __cov_8xLTZ5bcCAe1pnYlUe$twA.f['7']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['54']++;var resolvedPath = this.resolveWithSourceDir(filePath);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['55']++;var _iteratorNormalCompletion2 = true;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['56']++;var _didIteratorError2 = false;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['57']++;var _iteratorError2 = undefined;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['58']++;try {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['59']++;for (var _iterator2 = this.filesToIgnore[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['60']++;var test = _step2.value;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['61']++;if ((0, _minimatch2.default)(resolvedPath, test)) {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['15'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['62']++;log.debug('FileFilter: ignoring file ' + resolvedPath + ' (it matched ' + test + ')');__cov_8xLTZ5bcCAe1pnYlUe$twA.s['63']++;return false;
               } else {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['15'][1]++;
               }
            }
         } catch (err) {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['64']++;_didIteratorError2 = true;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['65']++;_iteratorError2 = err;
         } finally {
            __cov_8xLTZ5bcCAe1pnYlUe$twA.s['66']++;try {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['67']++;if ((__cov_8xLTZ5bcCAe1pnYlUe$twA.b['17'][0]++, !_iteratorNormalCompletion2) && (__cov_8xLTZ5bcCAe1pnYlUe$twA.b['17'][1]++, _iterator2.return)) {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['16'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['68']++;_iterator2.return();
               } else {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['16'][1]++;
               }
            } finally {
               __cov_8xLTZ5bcCAe1pnYlUe$twA.s['69']++;if (_didIteratorError2) {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['18'][0]++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['70']++;throw _iteratorError2;
               } else {
                  __cov_8xLTZ5bcCAe1pnYlUe$twA.b['18'][1]++;
               }
            }
         }__cov_8xLTZ5bcCAe1pnYlUe$twA.s['71']++;return true;
      } }]);__cov_8xLTZ5bcCAe1pnYlUe$twA.s['72']++;return FileFilter;
}();__cov_8xLTZ5bcCAe1pnYlUe$twA.s['73']++;var createFileFilter = exports.createFileFilter = function createFileFilter(params) {
   __cov_8xLTZ5bcCAe1pnYlUe$twA.f['8']++;__cov_8xLTZ5bcCAe1pnYlUe$twA.s['74']++;return new FileFilter(params);
};
/* WEBPACK VAR INJECTION */}.call(exports, "src/util/file-filter.js"))

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _isIterable2 = __webpack_require__(127);

var _isIterable3 = _interopRequireDefault(_isIterable2);

var _getIterator2 = __webpack_require__(126);

var _getIterator3 = _interopRequireDefault(_getIterator2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if ((0, _isIterable3.default)(Object(arr))) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();

/***/ }),
/* 31 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function(it){
  return toString.call(it).slice(8, -1);
};

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

// optional / simple context binding
var aFunction = __webpack_require__(53);
module.exports = function(fn, that, length){
  aFunction(fn);
  if(that === undefined)return fn;
  switch(length){
    case 1: return function(a){
      return fn.call(that, a);
    };
    case 2: return function(a, b){
      return fn.call(that, a, b);
    };
    case 3: return function(a, b, c){
      return fn.call(that, a, b, c);
    };
  }
  return function(/* ...args */){
    return fn.apply(that, arguments);
  };
};

/***/ }),
/* 33 */
/***/ (function(module, exports) {

module.exports = function(exec){
  try {
    return !!exec();
  } catch(e){
    return true;
  }
};

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys       = __webpack_require__(86)
  , enumBugKeys = __webpack_require__(57);

module.exports = Object.keys || function keys(O){
  return $keys(O, enumBugKeys);
};

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_iuv9Yit4uiCnIPHCNuNZgg = Function('return this')();
if (!__cov_iuv9Yit4uiCnIPHCNuNZgg.__coverage__) {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.__coverage__ = {};
}
__cov_iuv9Yit4uiCnIPHCNuNZgg = __cov_iuv9Yit4uiCnIPHCNuNZgg.__coverage__;
if (!__cov_iuv9Yit4uiCnIPHCNuNZgg['/home/travis/build/mozilla/web-ext/src/firefox/index.js']) {
   __cov_iuv9Yit4uiCnIPHCNuNZgg['/home/travis/build/mozilla/web-ext/src/firefox/index.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/firefox/index.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 0, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "148": 0, "149": 0, "150": 0, "151": 0, "152": 0, "153": 0, "154": 0, "155": 0, "156": 0, "157": 0, "158": 0, "159": 0, "160": 0, "161": 0, "162": 0, "163": 0, "164": 0, "165": 0, "166": 0, "167": 0, "168": 0, "169": 0, "170": 0, "171": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "177": 0, "178": 0, "179": 0, "180": 0, "181": 0, "182": 0, "183": 0, "184": 0, "185": 0, "186": 0, "187": 0, "188": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "194": 0, "195": 0, "196": 0, "197": 0, "198": 0, "199": 0, "200": 0, "201": 0, "202": 0, "203": 0, "204": 0, "205": 0, "206": 0, "207": 0, "208": 0, "209": 0, "210": 0, "211": 0, "212": 0, "213": 0, "214": 0, "215": 0, "216": 0, "217": 0, "218": 0, "219": 1, "220": 0, "221": 0, "222": 0, "223": 1, "224": 0, "225": 0, "226": 0, "227": 0, "228": 0, "229": 0, "230": 0, "231": 0, "232": 0, "233": 0, "234": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0, 0, 0, 0, 0, 0, 0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0, 0, 0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0, 0, 0], "19": [0, 0], "20": [0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0, 0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0], "27": [0, 0], "28": [0, 0], "29": [0, 0, 0, 0, 0, 0, 0, 0, 0], "30": [0, 0], "31": [0, 0], "32": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "33": [0, 0], "34": [0, 0], "35": [0, 0], "36": [0, 0], "37": [0, 0], "38": [0, 0], "39": [0, 0], "40": [0, 0], "41": [0, 0], "42": [0, 0], "43": [0, 0], "44": [0, 0], "45": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_callee", "line": 46, "loc": { "start": { "line": 46, "column": 7 }, "end": { "line": null, "column": null } } }, "3": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "defaultRemotePortFinder", "line": 46, "loc": { "start": { "line": 46, "column": 22 }, "end": { "line": null, "column": null } } }, "5": { "name": "(anonymous_5)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "6": { "name": "_callee2", "line": 130, "loc": { "start": { "line": 130, "column": 7 }, "end": { "line": null, "column": null } } }, "7": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "8": { "name": "(anonymous_8)", "line": 165, "loc": { "start": { "line": 165, "column": 22 }, "end": { "line": 165, "column": 33 } } }, "9": { "name": "(anonymous_9)", "line": 176, "loc": { "start": { "line": 176, "column": 28 }, "end": { "line": 176, "column": 38 } } }, "10": { "name": "(anonymous_10)", "line": 180, "loc": { "start": { "line": 180, "column": 28 }, "end": { "line": 180, "column": 38 } } }, "11": { "name": "(anonymous_11)", "line": 184, "loc": { "start": { "line": 184, "column": 22 }, "end": { "line": 184, "column": 28 } } }, "12": { "name": "run", "line": 130, "loc": { "start": { "line": 130, "column": 22 }, "end": { "line": null, "column": null } } }, "13": { "name": "(anonymous_13)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "14": { "name": "_callee3", "line": 246, "loc": { "start": { "line": 246, "column": 7 }, "end": { "line": null, "column": null } } }, "15": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "16": { "name": "useProfile", "line": 246, "loc": { "start": { "line": 246, "column": 22 }, "end": { "line": null, "column": null } } }, "17": { "name": "(anonymous_17)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "18": { "name": "_callee4", "line": 272, "loc": { "start": { "line": 272, "column": 7 }, "end": { "line": null, "column": null } } }, "19": { "name": "_callee4$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "20": { "name": "createProfile", "line": 272, "loc": { "start": { "line": 272, "column": 22 }, "end": { "line": null, "column": null } } }, "21": { "name": "(anonymous_21)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "22": { "name": "_callee5", "line": 305, "loc": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } } }, "23": { "name": "_callee5$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "24": { "name": "copyProfile", "line": 305, "loc": { "start": { "line": 305, "column": 22 }, "end": { "line": null, "column": null } } }, "25": { "name": "(anonymous_25)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "26": { "name": "_callee6", "line": 359, "loc": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } } }, "27": { "name": "_callee6$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "28": { "name": "installExtension", "line": 359, "loc": { "start": { "line": 359, "column": 22 }, "end": { "line": null, "column": null } } }, "29": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "30": { "name": "configureProfile", "line": 211, "loc": { "start": { "line": 211, "column": 7 }, "end": { "line": 218, "column": 27 } } }, "31": { "name": "(anonymous_31)", "line": 222, "loc": { "start": { "line": 222, "column": 29 }, "end": { "line": 222, "column": 39 } } }, "32": { "name": "(anonymous_32)", "line": 228, "loc": { "start": { "line": 228, "column": 37 }, "end": { "line": 228, "column": 49 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 46, "column": 7 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 51, "column": 30 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 53, "column": 6 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 46, "column": 7 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 57, "column": 9 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 59, "column": 21 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 46, "column": 7 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 60, "column": 10 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 63, "column": 10 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "33": { "start": { "line": 65, "column": 15 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "35": { "start": { "line": 71, "column": 11 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 76, "column": 8 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 46, "column": 22 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "45": { "start": { "line": 130, "column": 7 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 136, "column": 25 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 139, "column": 6 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 141, "column": 27 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 130, "column": 7 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 143, "column": 24 }, "end": { "line": null, "column": null } }, "57": { "start": { "line": 130, "column": 7 }, "end": { "line": null, "column": null } }, "58": { "start": { "line": 130, "column": 7 }, "end": { "line": null, "column": null } }, "59": { "start": { "line": 162, "column": 6 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 163, "column": 6 }, "end": { "line": null, "column": null } }, "61": { "start": { "line": 165, "column": 10 }, "end": { "line": null, "column": null } }, "62": { "start": { "line": 168, "column": 8 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 169, "column": 10 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 172, "column": 6 }, "end": { "line": null, "column": null } }, "65": { "start": { "line": 176, "column": 10 }, "end": { "line": null, "column": null } }, "66": { "start": { "line": 177, "column": 8 }, "end": { "line": null, "column": null } }, "67": { "start": { "line": 180, "column": 10 }, "end": { "line": null, "column": null } }, "68": { "start": { "line": 181, "column": 8 }, "end": { "line": null, "column": null } }, "69": { "start": { "line": 184, "column": 10 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 185, "column": 8 }, "end": { "line": null, "column": null } }, "71": { "start": { "line": 188, "column": 9 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "73": { "start": { "line": 130, "column": 22 }, "end": { "line": null, "column": null } }, "74": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "75": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "76": { "start": { "line": 246, "column": 7 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 252, "column": 24 }, "end": { "line": null, "column": null } }, "78": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "79": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "80": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "81": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "82": { "start": { "line": 246, "column": 7 }, "end": { "line": null, "column": null } }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 255, "column": 15 }, "end": { "line": null, "column": null } }, "85": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "86": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "87": { "start": { "line": 246, "column": 22 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "89": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "90": { "start": { "line": 272, "column": 7 }, "end": { "line": null, "column": null } }, "91": { "start": { "line": 277, "column": 27 }, "end": { "line": null, "column": null } }, "92": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "93": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "94": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "95": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "96": { "start": { "line": 272, "column": 7 }, "end": { "line": null, "column": null } }, "97": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "98": { "start": { "line": 280, "column": 15 }, "end": { "line": null, "column": null } }, "99": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "100": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "101": { "start": { "line": 272, "column": 22 }, "end": { "line": null, "column": null } }, "102": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "103": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "104": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "105": { "start": { "line": 312, "column": 26 }, "end": { "line": null, "column": null } }, "106": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "107": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "108": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "109": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "110": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "111": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "112": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "113": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "114": { "start": { "line": 319, "column": 28 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "116": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "117": { "start": { "line": 323, "column": 8 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "119": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "120": { "start": { "line": 324, "column": 10 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "122": { "start": { "line": 325, "column": 22 }, "end": { "line": null, "column": null } }, "123": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "124": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "125": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "126": { "start": { "line": 327, "column": 10 }, "end": { "line": null, "column": null } }, "127": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "128": { "start": { "line": 328, "column": 22 }, "end": { "line": null, "column": null } }, "129": { "start": { "line": 305, "column": 7 }, "end": { "line": null, "column": null } }, "130": { "start": { "line": 331, "column": 11 }, "end": { "line": null, "column": null } }, "131": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "132": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "133": { "start": { "line": 333, "column": 10 }, "end": { "line": null, "column": null } }, "134": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "135": { "start": { "line": 305, "column": 22 }, "end": { "line": null, "column": null } }, "136": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "137": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "138": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "139": { "start": { "line": 361, "column": 4 }, "end": { "line": null, "column": null } }, "140": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "141": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "142": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "143": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "144": { "start": { "line": 371, "column": 7 }, "end": { "line": null, "column": null } }, "145": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "146": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "147": { "start": { "line": 372, "column": 10 }, "end": { "line": null, "column": null } }, "148": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "149": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "150": { "start": { "line": 376, "column": 10 }, "end": { "line": null, "column": null } }, "151": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "152": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "153": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "154": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "155": { "start": { "line": 378, "column": 8 }, "end": { "line": null, "column": null } }, "156": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "157": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "158": { "start": { "line": 379, "column": 10 }, "end": { "line": null, "column": null } }, "159": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "160": { "start": { "line": 380, "column": 12 }, "end": { "line": null, "column": null } }, "161": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "162": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "163": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "164": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "165": { "start": { "line": 387, "column": 7 }, "end": { "line": null, "column": null } }, "166": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "167": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "168": { "start": { "line": 388, "column": 10 }, "end": { "line": null, "column": null } }, "169": { "start": { "line": 393, "column": 6 }, "end": { "line": null, "column": null } }, "170": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "171": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "172": { "start": { "line": 394, "column": 8 }, "end": { "line": null, "column": null } }, "173": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "174": { "start": { "line": 396, "column": 24 }, "end": { "line": null, "column": null } }, "175": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "176": { "start": { "line": 397, "column": 9 }, "end": { "line": null, "column": null } }, "177": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "178": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "179": { "start": { "line": 398, "column": 12 }, "end": { "line": null, "column": null } }, "180": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "181": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "182": { "start": { "line": 408, "column": 16 }, "end": { "line": null, "column": null } }, "183": { "start": { "line": 409, "column": 16 }, "end": { "line": null, "column": null } }, "184": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "185": { "start": { "line": 410, "column": 17 }, "end": { "line": null, "column": null } }, "186": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "187": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "188": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "189": { "start": { "line": 359, "column": 7 }, "end": { "line": null, "column": null } }, "190": { "start": { "line": 417, "column": 8 }, "end": { "line": null, "column": null } }, "191": { "start": { "line": 418, "column": 15 }, "end": { "line": null, "column": null } }, "192": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "193": { "start": { "line": 420, "column": 17 }, "end": { "line": null, "column": null } }, "194": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "195": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "196": { "start": { "line": 359, "column": 22 }, "end": { "line": null, "column": null } }, "197": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "198": { "start": { "line": 211, "column": 16 }, "end": { "line": null, "column": null } }, "199": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "200": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "201": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "202": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "203": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "204": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "205": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "206": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "207": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "208": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "209": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "210": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "211": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "212": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "213": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "214": { "start": { "line": 13, "column": 0 }, "end": { "line": null, "column": null } }, "215": { "start": { "line": 14, "column": 0 }, "end": { "line": null, "column": null } }, "216": { "start": { "line": 15, "column": 0 }, "end": { "line": null, "column": null } }, "217": { "start": { "line": 16, "column": 0 }, "end": { "line": null, "column": null } }, "218": { "start": { "line": 17, "column": 0 }, "end": { "line": null, "column": null } }, "219": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "220": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "221": { "start": { "line": 28, "column": 0 }, "end": { "line": null, "column": null } }, "222": { "start": { "line": 30, "column": 7 }, "end": { "line": null, "column": null } }, "223": { "start": { "line": 211, "column": 7 }, "end": { "line": null, "column": null } }, "224": { "start": { "line": 217, "column": 31 }, "end": { "line": null, "column": null } }, "225": { "start": { "line": 221, "column": 8 }, "end": { "line": null, "column": null } }, "226": { "start": { "line": 222, "column": 9 }, "end": { "line": null, "column": null } }, "227": { "start": { "line": 223, "column": 12 }, "end": { "line": null, "column": null } }, "228": { "start": { "line": 225, "column": 6 }, "end": { "line": null, "column": null } }, "229": { "start": { "line": 226, "column": 10 }, "end": { "line": null, "column": null } }, "230": { "start": { "line": 227, "column": 8 }, "end": { "line": null, "column": null } }, "231": { "start": { "line": 228, "column": 11 }, "end": { "line": null, "column": null } }, "232": { "start": { "line": 229, "column": 14 }, "end": { "line": null, "column": null } }, "233": { "start": { "line": 232, "column": 10 }, "end": { "line": null, "column": null } }, "234": { "start": { "line": 233, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 51, "type": "cond-expr", "locations": [{ "start": { "line": 51, "column": 30 }, "end": { "line": 51, "column": 30 } }, { "start": { "line": 51, "column": 30 }, "end": { "line": 46, "column": 7 } }] }, "2": { "line": 51, "type": "binary-expr", "locations": [{ "start": { "line": 51, "column": 30 }, "end": { "line": 51, "column": 30 } }, { "start": { "line": 51, "column": 30 }, "end": { "line": 51, "column": 30 } }] }, "3": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 49, "type": "cond-expr", "locations": [{ "start": { "line": 49, "column": 18 }, "end": { "line": 46, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 57, "type": "if", "locations": [{ "start": { "line": 57, "column": 9 }, "end": { "line": 57, "column": 9 } }, { "start": { "line": 57, "column": 9 }, "end": { "line": 57, "column": 9 } }] }, "8": { "line": 63, "type": "if", "locations": [{ "start": { "line": 63, "column": 10 }, "end": { "line": 63, "column": 10 } }, { "start": { "line": 63, "column": 10 }, "end": { "line": 63, "column": 10 } }] }, "9": { "line": 136, "type": "cond-expr", "locations": [{ "start": { "line": 136, "column": 25 }, "end": { "line": 136, "column": 25 } }, { "start": { "line": 136, "column": 25 }, "end": { "line": 130, "column": 7 } }] }, "10": { "line": 136, "type": "binary-expr", "locations": [{ "start": { "line": 136, "column": 25 }, "end": { "line": 136, "column": 25 } }, { "start": { "line": 136, "column": 25 }, "end": { "line": 136, "column": 25 } }] }, "11": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "12": { "line": 134, "type": "cond-expr", "locations": [{ "start": { "line": 134, "column": 21 }, "end": { "line": 130, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "13": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 252, "type": "cond-expr", "locations": [{ "start": { "line": 252, "column": 24 }, "end": { "line": 252, "column": 24 } }, { "start": { "line": 252, "column": 24 }, "end": { "line": 246, "column": 7 } }] }, "15": { "line": 252, "type": "binary-expr", "locations": [{ "start": { "line": 252, "column": 24 }, "end": { "line": 252, "column": 24 } }, { "start": { "line": 252, "column": 24 }, "end": { "line": 252, "column": 24 } }] }, "16": { "line": 250, "type": "cond-expr", "locations": [{ "start": { "line": 250, "column": 27 }, "end": { "line": 246, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 251, "type": "cond-expr", "locations": [{ "start": { "line": 251, "column": 18 }, "end": { "line": 246, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 277, "type": "cond-expr", "locations": [{ "start": { "line": 277, "column": 27 }, "end": { "line": 277, "column": 27 } }, { "start": { "line": 277, "column": 27 }, "end": { "line": 272, "column": 7 } }] }, "20": { "line": 277, "type": "binary-expr", "locations": [{ "start": { "line": 277, "column": 27 }, "end": { "line": 277, "column": 27 } }, { "start": { "line": 277, "column": 27 }, "end": { "line": 277, "column": 27 } }] }, "21": { "line": 275, "type": "cond-expr", "locations": [{ "start": { "line": 275, "column": 27 }, "end": { "line": 272, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "22": { "line": 276, "type": "cond-expr", "locations": [{ "start": { "line": 276, "column": 18 }, "end": { "line": 272, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "23": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "24": { "line": 312, "type": "cond-expr", "locations": [{ "start": { "line": 312, "column": 26 }, "end": { "line": 312, "column": 26 } }, { "start": { "line": 312, "column": 26 }, "end": { "line": 305, "column": 7 } }] }, "25": { "line": 312, "type": "binary-expr", "locations": [{ "start": { "line": 312, "column": 26 }, "end": { "line": 312, "column": 26 } }, { "start": { "line": 312, "column": 26 }, "end": { "line": 312, "column": 26 } }] }, "26": { "line": 309, "type": "cond-expr", "locations": [{ "start": { "line": 309, "column": 27 }, "end": { "line": 305, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "27": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "28": { "line": 311, "type": "cond-expr", "locations": [{ "start": { "line": 311, "column": 18 }, "end": { "line": 305, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "29": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "30": { "line": 323, "type": "if", "locations": [{ "start": { "line": 323, "column": 8 }, "end": { "line": 323, "column": 8 } }, { "start": { "line": 323, "column": 8 }, "end": { "line": 323, "column": 8 } }] }, "31": { "line": 361, "type": "cond-expr", "locations": [{ "start": { "line": 361, "column": 14 }, "end": { "line": 359, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "32": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "33": { "line": 371, "type": "if", "locations": [{ "start": { "line": 371, "column": 7 }, "end": { "line": 371, "column": 7 } }, { "start": { "line": 371, "column": 7 }, "end": { "line": 371, "column": 7 } }] }, "34": { "line": 378, "type": "if", "locations": [{ "start": { "line": 378, "column": 8 }, "end": { "line": 378, "column": 8 } }, { "start": { "line": 378, "column": 8 }, "end": { "line": 378, "column": 8 } }] }, "35": { "line": 387, "type": "if", "locations": [{ "start": { "line": 387, "column": 7 }, "end": { "line": 387, "column": 7 } }, { "start": { "line": 387, "column": 7 }, "end": { "line": 387, "column": 7 } }] }, "36": { "line": 393, "type": "if", "locations": [{ "start": { "line": 393, "column": 6 }, "end": { "line": 393, "column": 6 } }, { "start": { "line": 393, "column": 6 }, "end": { "line": 393, "column": 6 } }] }, "37": { "line": 397, "type": "if", "locations": [{ "start": { "line": 397, "column": 9 }, "end": { "line": 397, "column": 9 } }, { "start": { "line": 397, "column": 9 }, "end": { "line": 397, "column": 9 } }] }, "38": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "39": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "40": { "line": 217, "type": "cond-expr", "locations": [{ "start": { "line": 217, "column": 31 }, "end": { "line": 217, "column": 31 } }, { "start": { "line": 217, "column": 31 }, "end": { "line": 218, "column": 27 } }] }, "41": { "line": 217, "type": "binary-expr", "locations": [{ "start": { "line": 217, "column": 31 }, "end": { "line": 217, "column": 31 } }, { "start": { "line": 217, "column": 31 }, "end": { "line": 217, "column": 31 } }] }, "42": { "line": 214, "type": "cond-expr", "locations": [{ "start": { "line": 214, "column": 10 }, "end": { "line": 218, "column": 27 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "43": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "44": { "line": 216, "type": "cond-expr", "locations": [{ "start": { "line": 216, "column": 18 }, "end": { "line": 218, "column": 27 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "45": { "line": 225, "type": "if", "locations": [{ "start": { "line": 225, "column": 6 }, "end": { "line": 225, "column": 6 } }, { "start": { "line": 225, "column": 6 }, "end": { "line": 225, "column": 6 } }] } }, "code": ["/* @flow */", "import nodeFs from 'fs';", "import path from 'path';", "", "import {default as defaultFxRunner} from 'fx-runner';", "import FirefoxProfile, {copyFromUserProfile as defaultUserProfileCopier}", "  from 'firefox-profile';", "import {fs} from 'mz';", "import promisify from 'es6-promisify';", "import eventToPromise from 'event-to-promise';", "", "import isDirectory from '../util/is-directory';", "import {isErrorWithCode, UsageError, WebExtError} from '../errors';", "import {getPrefs as defaultPrefGetter} from './preferences';", "import {getManifestId} from '../util/manifest';", "import {createLogger} from '../util/logger';", "import {connect as defaultFirefoxConnector, REMOTE_PORT} from './remote';", "// Import flow types", "import type {FirefoxConnectorFn} from './remote';", "import type {", "  PreferencesAppName,", "  PreferencesGetterFn,", "  FirefoxPreferences,", "} from './preferences';", "import type {ExtensionManifest} from '../util/manifest';", "", "", "const log = createLogger(__filename);", "", "export const defaultFirefoxEnv = {", "  XPCOM_DEBUG_BREAK: 'stack',", "  NS_TRACE_MALLOC_DISABLE_STACKS: '1',", "};", "", "// defaultRemotePortFinder types and implementation.", "", "export type RemotePortFinderParams = {|", "  portToTry?: number,", "  retriesLeft?: number,", "  connectToFirefox?: FirefoxConnectorFn,", "|};", "", "export type RemotePortFinderFn =", "  (params?: RemotePortFinderParams) => Promise<number>;", "", "export async function defaultRemotePortFinder(", "  {", "    portToTry = REMOTE_PORT,", "    retriesLeft = 10,", "    connectToFirefox = defaultFirefoxConnector,", "  }: RemotePortFinderParams = {}", "): Promise<number> {", "  log.debug(`Checking if remote Firefox port ${portToTry} is available`);", "", "  let client;", "", "  while (retriesLeft >= 0) {", "    try {", "      client = await connectToFirefox(portToTry);", "      log.debug(`Remote Firefox port ${portToTry} is in use ` +", "                `(retries remaining: ${retriesLeft})`);", "    } catch (error) {", "      if (isErrorWithCode('ECONNREFUSED', error)) {", "        // The connection was refused so this port is good to use.", "        return portToTry;", "      }", "", "      throw error;", "    }", "", "    client.disconnect();", "    portToTry++;", "    retriesLeft--;", "  }", "", "  throw new WebExtError('Too many retries on port search');", "}", "", "", "// Declare the needed 'fx-runner' module flow types.", "", "export type FirefoxRunnerParams = {|", "  binary: ?string,", "  profile?: string,", "  'new-instance'?: boolean,", "  'no-remote'?: boolean,", "  'foreground'?: boolean,", "  'listen': number,", "  'binary-args'?: Array<string> | string,", "  'env'?: {", "    [key: string]: string", "  },", "  'verbose'?: boolean,", "|};", "", "export interface FirefoxProcess extends events$EventEmitter {", "  stderr: events$EventEmitter;", "  stdout: events$EventEmitter;", "  kill: Function;", "}", "", "export type FirefoxRunnerResults = {|", "  process: FirefoxProcess,", "  binary: string,", "  args: Array<string>,", "|}", "", "export type FirefoxRunnerFn =", "  (params: FirefoxRunnerParams) => Promise<FirefoxRunnerResults>;", "", "", "export type FirefoxInfo = {|", "  firefox: FirefoxProcess,", "  debuggerPort: number,", "|}", "", "// Run command types and implementaion.", "", "export type FirefoxRunOptions = {|", "  fxRunner?: FirefoxRunnerFn,", "  findRemotePort?: RemotePortFinderFn,", "  firefoxBinary?: string,", "  binaryArgs?: Array<string>,", "  args?: Array<any>,", "|};", "", "/*", " * Runs Firefox with the given profile object and resolves a promise on exit.", " */", "export async function run(", "  profile: FirefoxProfile,", "  {", "    fxRunner = defaultFxRunner,", "    findRemotePort = defaultRemotePortFinder,", "    firefoxBinary, binaryArgs,", "  }: FirefoxRunOptions = {}", "): Promise<FirefoxInfo> {", "", "  log.debug(`Running Firefox with profile at ${profile.path()}`);", "", "  const remotePort = await findRemotePort();", "", "  const results = await fxRunner({", "    // if this is falsey, fxRunner tries to find the default one.", "    'binary': firefoxBinary,", "    'binary-args': binaryArgs,", "    // This ensures a new instance of Firefox is created. It has nothing", "    // to do with the devtools remote debugger.", "    'no-remote': true,", "    'listen': remotePort,", "    'foreground': true,", "    'profile': profile.path(),", "    'env': {", "      ...process.env,", "      ...defaultFirefoxEnv,", "    },", "    'verbose': true,", "  });", "", "  const firefox = results.process;", "", "  log.debug(`Executing Firefox binary: ${results.binary}`);", "  log.debug(`Firefox args: ${results.args.join(' ')}`);", "", "  firefox.on('error', (error) => {", "    // TODO: show a nice error when it can't find Firefox.", "    // if (/No such file/.test(err) || err.code === 'ENOENT') {", "    log.error(`Firefox error: ${error}`);", "    throw error;", "  });", "", "  log.info(", "    'Use --verbose or open Tools > Web Developer > Browser Console ' +", "    'to see logging');", "", "  firefox.stderr.on('data', (data) => {", "    log.debug(`Firefox stderr: ${data.toString().trim()}`);", "  });", "", "  firefox.stdout.on('data', (data) => {", "    log.debug(`Firefox stdout: ${data.toString().trim()}`);", "  });", "", "  firefox.on('close', () => {", "    log.debug('Firefox closed');", "  });", "", "  return { firefox, debuggerPort: remotePort };", "}", "", "", "// configureProfile types and implementation.", "", "export type ConfigureProfileOptions = {|", "  app?: PreferencesAppName,", "  getPrefs?: PreferencesGetterFn,", "  customPrefs?: FirefoxPreferences,", "|};", "", "export type ConfigureProfileFn = (", "  profile: FirefoxProfile,", "  options?: ConfigureProfileOptions", ") => Promise<FirefoxProfile>;", "", "/*", " * Configures a profile with common preferences that are required to", " * activate extension development.", " *", " * Returns a promise that resolves with the original profile object.", " */", "export function configureProfile(", "  profile: FirefoxProfile,", "  {", "    app = 'firefox',", "    getPrefs = defaultPrefGetter,", "    customPrefs = {},", "  }: ConfigureProfileOptions = {},", "): Promise<FirefoxProfile> {", "  // Set default preferences. Some of these are required for the add-on to", "  // operate, such as disabling signatures.", "  const prefs = getPrefs(app);", "  Object.keys(prefs).forEach((pref) => {", "    profile.setPreference(pref, prefs[pref]);", "  });", "  if (Object.keys(customPrefs).length > 0) {", "    const customPrefsStr = JSON.stringify(customPrefs, null, 2);", "    log.info(`Setting custom Firefox preferences: ${customPrefsStr}`);", "    Object.keys(customPrefs).forEach((custom) => {", "      profile.setPreference(custom, customPrefs[custom]);", "    });", "  }", "  profile.updatePreferences();", "  return Promise.resolve(profile);", "}", "", "// useProfile types and implementation.", "", "export type UseProfileParams = {", "  app?: PreferencesAppName,", "  configureThisProfile?: ConfigureProfileFn,", "  customPrefs?: FirefoxPreferences,", "};", "", "// Use the target path as a Firefox profile without cloning it", "", "export async function useProfile(", "  profilePath: string,", "  {", "    app,", "    configureThisProfile = configureProfile,", "    customPrefs = {},", "  }: UseProfileParams = {},", "): Promise<FirefoxProfile> {", "  const profile = new FirefoxProfile({destinationDirectory: profilePath});", "  return await configureThisProfile(profile, {app, customPrefs});", "}", "", "", "// createProfile types and implementation.", "", "export type CreateProfileParams = {", "  app?: PreferencesAppName,", "  configureThisProfile?: ConfigureProfileFn,", "  customPrefs?: FirefoxPreferences,", "};", "", "/*", " * Creates a new temporary profile and resolves with the profile object.", " *", " * The profile will be deleted when the system process exits.", " */", "export async function createProfile(", "  {", "    app,", "    configureThisProfile = configureProfile,", "    customPrefs = {},", "  }: CreateProfileParams = {},", "): Promise<FirefoxProfile> {", "  const profile = new FirefoxProfile();", "  return await configureThisProfile(profile, {app, customPrefs});", "}", "", "", "// copyProfile types and implementation.", "", "export type CopyProfileOptions = {|", "  app?: PreferencesAppName,", "  configureThisProfile?: ConfigureProfileFn,", "  copyFromUserProfile?: Function,", "  customPrefs?: FirefoxPreferences,", "|};", "", "/*", " * Copies an existing Firefox profile and creates a new temporary profile.", " * The new profile will be configured with some preferences required to", " * activate extension development.", " *", " * It resolves with the new profile object.", " *", " * The temporary profile will be deleted when the system process exits.", " *", " * The existing profile can be specified as a directory path or a name of", " * one that exists in the current user's Firefox directory.", " */", "export async function copyProfile(", "  profileDirectory: string,", "  {", "    app,", "    configureThisProfile = configureProfile,", "    copyFromUserProfile = defaultUserProfileCopier,", "    customPrefs = {},", "  }: CopyProfileOptions = {},", "): Promise<FirefoxProfile> {", "", "  const copy = promisify(FirefoxProfile.copy);", "  const copyByName = promisify(copyFromUserProfile);", "", "  try {", "    const dirExists = await isDirectory(profileDirectory);", "", "    let profile;", "", "    if (dirExists) {", "      log.debug(`Copying profile directory from \"${profileDirectory}\"`);", "      profile = await copy({profileDirectory});", "    } else {", "      log.debug(`Assuming ${profileDirectory} is a named profile`);", "      profile = await copyByName({name: profileDirectory});", "    }", "", "    return configureThisProfile(profile, {app, customPrefs});", "  } catch (error) {", "    throw new WebExtError(", "      `Could not copy Firefox profile from ${profileDirectory}: ${error}`);", "  }", "}", "", "", "// installExtension types and implementation.", "", "export type InstallExtensionParams = {|", "  asProxy?: boolean,", "  manifestData: ExtensionManifest,", "  profile: FirefoxProfile,", "  extensionPath: string,", "|};", "", "/*", " * Installs an extension into the given Firefox profile object.", " * Resolves when complete.", " *", " * The extension is copied into a special location and you need to turn", " * on some preferences to allow this. See extensions.autoDisableScopes in", " * ./preferences.js.", " *", " * When asProxy is true, a special proxy file will be installed. This is a", " * text file that contains the path to the extension source.", " */", "export async function installExtension(", "  {", "    asProxy = false,", "    manifestData,", "    profile,", "    extensionPath,", "  }: InstallExtensionParams): Promise<any> {", "  // This more or less follows", "  // https://github.com/saadtazi/firefox-profile-js/blob/master/lib/firefox_profile.js#L531", "  // (which is broken for web extensions).", "  // TODO: maybe uplift a patch that supports web extensions instead?", "", "  if (!profile.extensionsDir) {", "    throw new WebExtError('profile.extensionsDir was unexpectedly empty');", "  }", "", "  try {", "    await fs.stat(profile.extensionsDir);", "  } catch (error) {", "    if (isErrorWithCode('ENOENT', error)) {", "      log.debug(`Creating extensions directory: ${profile.extensionsDir}`);", "      await fs.mkdir(profile.extensionsDir);", "    } else {", "      throw error;", "    }", "  }", "", "  const id = getManifestId(manifestData);", "  if (!id) {", "    throw new UsageError(", "      'An explicit extension ID is required when installing to ' +", "      'a profile (applications.gecko.id not found in manifest.json)');", "  }", "", "  if (asProxy) {", "    log.debug(`Installing as an extension proxy; source: ${extensionPath}`);", "", "    const isDir = await isDirectory(extensionPath);", "    if (!isDir) {", "      throw new WebExtError(", "        'proxy install: extensionPath must be the extension source ' +", "        `directory; got: ${extensionPath}`);", "    }", "", "    // Write a special extension proxy file containing the source", "    // directory. See:", "    // https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment#Firefox_extension_proxy_file", "    const destPath = path.join(profile.extensionsDir, `${id}`);", "    const writeStream = nodeFs.createWriteStream(destPath);", "    writeStream.write(extensionPath);", "    writeStream.end();", "    return await eventToPromise(writeStream, 'close');", "  } else {", "    // Write the XPI file to the profile.", "    const readStream = nodeFs.createReadStream(extensionPath);", "    const destPath = path.join(profile.extensionsDir, `${id}.xpi`);", "    const writeStream = nodeFs.createWriteStream(destPath);", "", "    log.debug(`Installing extension from ${extensionPath} to ${destPath}`);", "    readStream.pipe(writeStream);", "", "    return await Promise.all([", "      eventToPromise(readStream, 'close'),", "      eventToPromise(writeStream, 'close'),", "    ]);", "  }", "}", ""] };
}
__cov_iuv9Yit4uiCnIPHCNuNZgg = __cov_iuv9Yit4uiCnIPHCNuNZgg['/home/travis/build/mozilla/web-ext/src/firefox/index.js'];
__cov_iuv9Yit4uiCnIPHCNuNZgg.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['2']++;exports.installExtension = exports.copyProfile = exports.createProfile = exports.useProfile = exports.run = exports.defaultRemotePortFinder = exports.defaultFirefoxEnv = undefined;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['3']++;var _extends2 = __webpack_require__(5);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['4']++;var _extends3 = _interopRequireDefault(_extends2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['5']++;var _regenerator = __webpack_require__(8);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['6']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['7']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['8']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['9']++;var defaultRemotePortFinder = exports.defaultRemotePortFinder = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['1']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['10']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['2']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['11']++;var _ref2 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['2'][0]++, arguments.length > 0) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['2'][1]++, arguments[0] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['1'][0]++, arguments[0]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['1'][1]++, {}),
          _ref2$portToTry = _ref2.portToTry,
          portToTry = _ref2$portToTry === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['3'][0]++, _remote.REMOTE_PORT) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['3'][1]++, _ref2$portToTry),
          _ref2$retriesLeft = _ref2.retriesLeft,
          retriesLeft = _ref2$retriesLeft === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['4'][0]++, 10) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['4'][1]++, _ref2$retriesLeft),
          _ref2$connectToFirefo = _ref2.connectToFirefox,
          connectToFirefox = _ref2$connectToFirefo === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['5'][0]++, _remote.connect) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['5'][1]++, _ref2$connectToFirefo);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['12']++;var client;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['13']++;return _regenerator2.default.wrap(function _callee$(_context) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['3']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['14']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['15']++;switch (_context.prev = _context.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['16']++;log.debug('Checking if remote Firefox port ' + portToTry + ' is available');__cov_iuv9Yit4uiCnIPHCNuNZgg.s['17']++;client = void 0;case 2:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['18']++;if (!(retriesLeft >= 0)) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['7'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['19']++;_context.next = 20;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['20']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['7'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['21']++;_context.prev = 3;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['22']++;_context.next = 6;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['23']++;return connectToFirefox(portToTry);case 6:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][2]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['24']++;client = _context.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['25']++;log.debug('Remote Firefox port ' + portToTry + ' is in use ' + ('(retries remaining: ' + retriesLeft + ')'));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['26']++;_context.next = 15;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['27']++;break;case 10:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][3]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['28']++;_context.prev = 10;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['29']++;_context.t0 = _context['catch'](3);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['30']++;if (!(0, _errors.isErrorWithCode)('ECONNREFUSED', _context.t0)) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['8'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['31']++;_context.next = 14;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['32']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['8'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['33']++;return _context.abrupt('return', portToTry);case 14:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][4]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['34']++;throw _context.t0;case 15:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][5]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['35']++;client.disconnect();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['36']++;portToTry++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['37']++;retriesLeft--;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['38']++;_context.next = 2;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['39']++;break;case 20:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][6]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['40']++;throw new _errors.WebExtError('Too many retries on port search');case 21:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][7]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['6'][8]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['41']++;return _context.stop();}
         }
      }, _callee, this, [[3, 10]]);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['42']++;return function defaultRemotePortFinder() {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['4']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['43']++;return _ref.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['44']++;var run = exports.run = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['5']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['45']++;var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(profile) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['6']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['46']++;var _ref4 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['10'][0]++, arguments.length > 1) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['10'][1]++, arguments[1] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['9'][0]++, arguments[1]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['9'][1]++, {}),
          _ref4$fxRunner = _ref4.fxRunner,
          fxRunner = _ref4$fxRunner === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['11'][0]++, _fxRunner2.default) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['11'][1]++, _ref4$fxRunner),
          _ref4$findRemotePort = _ref4.findRemotePort,
          findRemotePort = _ref4$findRemotePort === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['12'][0]++, defaultRemotePortFinder) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['12'][1]++, _ref4$findRemotePort),
          firefoxBinary = _ref4.firefoxBinary,
          binaryArgs = _ref4.binaryArgs;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['47']++;var remotePort, results, firefox;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['48']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['7']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['49']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['50']++;switch (_context2.prev = _context2.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['13'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['51']++;log.debug('Running Firefox with profile at ' + profile.path());__cov_iuv9Yit4uiCnIPHCNuNZgg.s['52']++;_context2.next = 3;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['53']++;return findRemotePort();case 3:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['13'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['54']++;remotePort = _context2.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['55']++;_context2.next = 6;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['56']++;return fxRunner({ 'binary': firefoxBinary, 'binary-args': binaryArgs, 'no-remote': true, 'listen': remotePort, 'foreground': true, 'profile': profile.path(), 'env': (0, _extends3.default)({}, process.env, defaultFirefoxEnv), 'verbose': true });case 6:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['13'][2]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['57']++;results = _context2.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['58']++;firefox = results.process;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['59']++;log.debug('Executing Firefox binary: ' + results.binary);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['60']++;log.debug('Firefox args: ' + results.args.join(' '));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['61']++;firefox.on('error', function (error) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.f['8']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['62']++;log.error('Firefox error: ' + error);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['63']++;throw error;
                  });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['64']++;log.info('Use --verbose or open Tools > Web Developer > Browser Console ' + 'to see logging');__cov_iuv9Yit4uiCnIPHCNuNZgg.s['65']++;firefox.stderr.on('data', function (data) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.f['9']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['66']++;log.debug('Firefox stderr: ' + data.toString().trim());
                  });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['67']++;firefox.stdout.on('data', function (data) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.f['10']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['68']++;log.debug('Firefox stdout: ' + data.toString().trim());
                  });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['69']++;firefox.on('close', function () {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.f['11']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['70']++;log.debug('Firefox closed');
                  });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['71']++;return _context2.abrupt('return', { firefox: firefox, debuggerPort: remotePort });case 16:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['13'][3]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['13'][4]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['72']++;return _context2.stop();}
         }
      }, _callee2, this);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['73']++;return function run(_x2) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['12']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['74']++;return _ref3.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['75']++;var useProfile = exports.useProfile = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['13']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['76']++;var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(profilePath) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['14']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['77']++;var _ref7 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['15'][0]++, arguments.length > 1) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['15'][1]++, arguments[1] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['14'][0]++, arguments[1]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['14'][1]++, {}),
          app = _ref7.app,
          _ref7$configureThisPr = _ref7.configureThisProfile,
          configureThisProfile = _ref7$configureThisPr === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['16'][0]++, configureProfile) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['16'][1]++, _ref7$configureThisPr),
          _ref7$customPrefs = _ref7.customPrefs,
          customPrefs = _ref7$customPrefs === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['17'][0]++, {}) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['17'][1]++, _ref7$customPrefs);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['78']++;var profile;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['79']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['15']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['80']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['81']++;switch (_context3.prev = _context3.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['18'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['82']++;profile = new _firefoxProfile2.default({ destinationDirectory: profilePath });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['83']++;_context3.next = 3;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['84']++;return configureThisProfile(profile, { app: app, customPrefs: customPrefs });case 3:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['18'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['85']++;return _context3.abrupt('return', _context3.sent);case 4:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['18'][2]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['18'][3]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['86']++;return _context3.stop();}
         }
      }, _callee3, this);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['87']++;return function useProfile(_x5) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['16']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['88']++;return _ref6.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['89']++;var createProfile = exports.createProfile = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['17']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['90']++;var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['18']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['91']++;var _ref9 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['20'][0]++, arguments.length > 0) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['20'][1]++, arguments[0] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['19'][0]++, arguments[0]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['19'][1]++, {}),
          app = _ref9.app,
          _ref9$configureThisPr = _ref9.configureThisProfile,
          configureThisProfile = _ref9$configureThisPr === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['21'][0]++, configureProfile) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['21'][1]++, _ref9$configureThisPr),
          _ref9$customPrefs = _ref9.customPrefs,
          customPrefs = _ref9$customPrefs === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['22'][0]++, {}) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['22'][1]++, _ref9$customPrefs);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['92']++;var profile;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['93']++;return _regenerator2.default.wrap(function _callee4$(_context4) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['19']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['94']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['95']++;switch (_context4.prev = _context4.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['23'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['96']++;profile = new _firefoxProfile2.default();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['97']++;_context4.next = 3;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['98']++;return configureThisProfile(profile, { app: app, customPrefs: customPrefs });case 3:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['23'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['99']++;return _context4.abrupt('return', _context4.sent);case 4:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['23'][2]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['23'][3]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['100']++;return _context4.stop();}
         }
      }, _callee4, this);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['101']++;return function createProfile() {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['20']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['102']++;return _ref8.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['103']++;var copyProfile = exports.copyProfile = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['21']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['104']++;var _ref10 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(profileDirectory) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['22']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['105']++;var _ref11 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['25'][0]++, arguments.length > 1) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['25'][1]++, arguments[1] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['24'][0]++, arguments[1]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['24'][1]++, {}),
          app = _ref11.app,
          _ref11$configureThisP = _ref11.configureThisProfile,
          configureThisProfile = _ref11$configureThisP === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['26'][0]++, configureProfile) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['26'][1]++, _ref11$configureThisP),
          _ref11$copyFromUserPr = _ref11.copyFromUserProfile,
          copyFromUserProfile = _ref11$copyFromUserPr === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['27'][0]++, _firefoxProfile.copyFromUserProfile) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['27'][1]++, _ref11$copyFromUserPr),
          _ref11$customPrefs = _ref11.customPrefs,
          customPrefs = _ref11$customPrefs === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['28'][0]++, {}) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['28'][1]++, _ref11$customPrefs);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['106']++;var copy, copyByName, dirExists, _profile;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['107']++;return _regenerator2.default.wrap(function _callee5$(_context5) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['23']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['108']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['109']++;switch (_context5.prev = _context5.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['110']++;copy = (0, _es6Promisify2.default)(_firefoxProfile2.default.copy);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['111']++;copyByName = (0, _es6Promisify2.default)(copyFromUserProfile);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['112']++;_context5.prev = 2;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['113']++;_context5.next = 5;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['114']++;return (0, _isDirectory2.default)(profileDirectory);case 5:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['115']++;dirExists = _context5.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['116']++;_profile = void 0;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['117']++;if (!dirExists) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['30'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['118']++;_context5.next = 14;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['119']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['30'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['120']++;log.debug('Copying profile directory from "' + profileDirectory + '"');__cov_iuv9Yit4uiCnIPHCNuNZgg.s['121']++;_context5.next = 11;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['122']++;return copy({ profileDirectory: profileDirectory });case 11:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][2]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['123']++;_profile = _context5.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['124']++;_context5.next = 18;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['125']++;break;case 14:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][3]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['126']++;log.debug('Assuming ' + profileDirectory + ' is a named profile');__cov_iuv9Yit4uiCnIPHCNuNZgg.s['127']++;_context5.next = 17;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['128']++;return copyByName({ name: profileDirectory });case 17:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][4]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['129']++;_profile = _context5.sent;case 18:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][5]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['130']++;return _context5.abrupt('return', configureThisProfile(_profile, { app: app, customPrefs: customPrefs }));case 21:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][6]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['131']++;_context5.prev = 21;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['132']++;_context5.t0 = _context5['catch'](2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['133']++;throw new _errors.WebExtError('Could not copy Firefox profile from ' + profileDirectory + ': ' + _context5.t0);case 24:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][7]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['29'][8]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['134']++;return _context5.stop();}
         }
      }, _callee5, this, [[2, 21]]);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['135']++;return function copyProfile(_x8) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['24']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['136']++;return _ref10.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['137']++;var installExtension = exports.installExtension = function () {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['25']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['138']++;var _ref12 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(_ref13) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['26']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['139']++;var _ref13$asProxy = _ref13.asProxy,
          asProxy = _ref13$asProxy === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['31'][0]++, false) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['31'][1]++, _ref13$asProxy),
          manifestData = _ref13.manifestData,
          profile = _ref13.profile,
          extensionPath = _ref13.extensionPath;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['140']++;var id, isDir, destPath, writeStream, readStream, _destPath, _writeStream;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['141']++;return _regenerator2.default.wrap(function _callee6$(_context6) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['27']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['142']++;while (1) {
            __cov_iuv9Yit4uiCnIPHCNuNZgg.s['143']++;switch (_context6.prev = _context6.next) {case 0:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['144']++;if (profile.extensionsDir) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['33'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['145']++;_context6.next = 2;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['146']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['33'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['147']++;throw new _errors.WebExtError('profile.extensionsDir was unexpectedly empty');case 2:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][1]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['148']++;_context6.prev = 2;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['149']++;_context6.next = 5;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['150']++;return _mz.fs.stat(profile.extensionsDir);case 5:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][2]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['151']++;_context6.next = 16;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['152']++;break;case 7:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][3]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['153']++;_context6.prev = 7;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['154']++;_context6.t0 = _context6['catch'](2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['155']++;if (!(0, _errors.isErrorWithCode)('ENOENT', _context6.t0)) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['34'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['156']++;_context6.next = 15;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['157']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['34'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['158']++;log.debug('Creating extensions directory: ' + profile.extensionsDir);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['159']++;_context6.next = 13;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['160']++;return _mz.fs.mkdir(profile.extensionsDir);case 13:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][4]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['161']++;_context6.next = 16;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['162']++;break;case 15:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][5]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['163']++;throw _context6.t0;case 16:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][6]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['164']++;id = (0, _manifest.getManifestId)(manifestData);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['165']++;if (id) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['35'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['166']++;_context6.next = 19;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['167']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['35'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['168']++;throw new _errors.UsageError('An explicit extension ID is required when installing to ' + 'a profile (applications.gecko.id not found in manifest.json)');case 19:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][7]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['169']++;if (!asProxy) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['36'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['170']++;_context6.next = 35;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['171']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['36'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['172']++;log.debug('Installing as an extension proxy; source: ' + extensionPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['173']++;_context6.next = 23;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['174']++;return (0, _isDirectory2.default)(extensionPath);case 23:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][8]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['175']++;isDir = _context6.sent;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['176']++;if (isDir) {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['37'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['177']++;_context6.next = 26;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['178']++;break;
                  } else {
                     __cov_iuv9Yit4uiCnIPHCNuNZgg.b['37'][1]++;
                  }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['179']++;throw new _errors.WebExtError('proxy install: extensionPath must be the extension source ' + ('directory; got: ' + extensionPath));case 26:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][9]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['180']++;destPath = _path2.default.join(profile.extensionsDir, '' + id);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['181']++;writeStream = _fs2.default.createWriteStream(destPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['182']++;writeStream.write(extensionPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['183']++;writeStream.end();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['184']++;_context6.next = 32;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['185']++;return (0, _eventToPromise2.default)(writeStream, 'close');case 32:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][10]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['186']++;return _context6.abrupt('return', _context6.sent);case 35:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][11]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['187']++;readStream = _fs2.default.createReadStream(extensionPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['188']++;_destPath = _path2.default.join(profile.extensionsDir, id + '.xpi');__cov_iuv9Yit4uiCnIPHCNuNZgg.s['189']++;_writeStream = _fs2.default.createWriteStream(_destPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['190']++;log.debug('Installing extension from ' + extensionPath + ' to ' + _destPath);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['191']++;readStream.pipe(_writeStream);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['192']++;_context6.next = 42;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['193']++;return Promise.all([(0, _eventToPromise2.default)(readStream, 'close'), (0, _eventToPromise2.default)(_writeStream, 'close')]);case 42:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][12]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['194']++;return _context6.abrupt('return', _context6.sent);case 43:
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][13]++;case 'end':
                  __cov_iuv9Yit4uiCnIPHCNuNZgg.b['32'][14]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['195']++;return _context6.stop();}
         }
      }, _callee6, this, [[2, 7]]);
   }));__cov_iuv9Yit4uiCnIPHCNuNZgg.s['196']++;return function installExtension(_x10) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['28']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['197']++;return _ref12.apply(this, arguments);
   };
}();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['198']++;exports.configureProfile = configureProfile;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['199']++;var _fs = __webpack_require__(68);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['200']++;var _fs2 = _interopRequireDefault(_fs);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['201']++;var _path = __webpack_require__(4);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['202']++;var _path2 = _interopRequireDefault(_path);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['203']++;var _fxRunner = __webpack_require__(185);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['204']++;var _fxRunner2 = _interopRequireDefault(_fxRunner);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['205']++;var _firefoxProfile = __webpack_require__(96);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['206']++;var _firefoxProfile2 = _interopRequireDefault(_firefoxProfile);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['207']++;var _mz = __webpack_require__(9);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['208']++;var _es6Promisify = __webpack_require__(28);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['209']++;var _es6Promisify2 = _interopRequireDefault(_es6Promisify);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['210']++;var _eventToPromise = __webpack_require__(67);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['211']++;var _eventToPromise2 = _interopRequireDefault(_eventToPromise);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['212']++;var _isDirectory = __webpack_require__(78);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['213']++;var _isDirectory2 = _interopRequireDefault(_isDirectory);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['214']++;var _errors = __webpack_require__(2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['215']++;var _preferences = __webpack_require__(47);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['216']++;var _manifest = __webpack_require__(25);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['217']++;var _logger = __webpack_require__(0);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['218']++;var _remote = __webpack_require__(24);function _interopRequireDefault(obj) {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['29']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['220']++;return (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['39'][0]++, obj) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['39'][1]++, obj.__esModule) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['38'][0]++, obj) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['38'][1]++, { default: obj });
}__cov_iuv9Yit4uiCnIPHCNuNZgg.s['221']++;var log = (0, _logger.createLogger)(__filename);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['222']++;var defaultFirefoxEnv = exports.defaultFirefoxEnv = { XPCOM_DEBUG_BREAK: 'stack', NS_TRACE_MALLOC_DISABLE_STACKS: '1' };function configureProfile(profile) {
   __cov_iuv9Yit4uiCnIPHCNuNZgg.f['30']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['224']++;var _ref5 = (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['41'][0]++, arguments.length > 1) && (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['41'][1]++, arguments[1] !== undefined) ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['40'][0]++, arguments[1]) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['40'][1]++, {}),
       _ref5$app = _ref5.app,
       app = _ref5$app === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['42'][0]++, 'firefox') : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['42'][1]++, _ref5$app),
       _ref5$getPrefs = _ref5.getPrefs,
       getPrefs = _ref5$getPrefs === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['43'][0]++, _preferences.getPrefs) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['43'][1]++, _ref5$getPrefs),
       _ref5$customPrefs = _ref5.customPrefs,
       customPrefs = _ref5$customPrefs === undefined ? (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['44'][0]++, {}) : (__cov_iuv9Yit4uiCnIPHCNuNZgg.b['44'][1]++, _ref5$customPrefs);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['225']++;var prefs = getPrefs(app);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['226']++;Object.keys(prefs).forEach(function (pref) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.f['31']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['227']++;profile.setPreference(pref, prefs[pref]);
   });__cov_iuv9Yit4uiCnIPHCNuNZgg.s['228']++;if (Object.keys(customPrefs).length > 0) {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.b['45'][0]++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['229']++;var customPrefsStr = JSON.stringify(customPrefs, null, 2);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['230']++;log.info('Setting custom Firefox preferences: ' + customPrefsStr);__cov_iuv9Yit4uiCnIPHCNuNZgg.s['231']++;Object.keys(customPrefs).forEach(function (custom) {
         __cov_iuv9Yit4uiCnIPHCNuNZgg.f['32']++;__cov_iuv9Yit4uiCnIPHCNuNZgg.s['232']++;profile.setPreference(custom, customPrefs[custom]);
      });
   } else {
      __cov_iuv9Yit4uiCnIPHCNuNZgg.b['45'][1]++;
   }__cov_iuv9Yit4uiCnIPHCNuNZgg.s['233']++;profile.updatePreferences();__cov_iuv9Yit4uiCnIPHCNuNZgg.s['234']++;return Promise.resolve(profile);
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/firefox/index.js"))

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.manifestWithoutApps = undefined;

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _deepcopy = __webpack_require__(66);

var _deepcopy2 = _interopRequireDefault(_deepcopy);

var _mz = __webpack_require__(9);

var _errors = __webpack_require__(2);

var _manifest = __webpack_require__(25);

var _manifest2 = _interopRequireDefault(_manifest);

var _tempDir = __webpack_require__(15);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var manifestWithoutApps = exports.manifestWithoutApps = (0, _deepcopy2.default)(_helpers.basicManifest);

delete manifestWithoutApps.applications;

(0, _mocha.describe)('util/manifest', function () {

  (0, _mocha.describe)('getValidatedManifest', function () {

    (0, _mocha.it)('returns a valid manifest', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        return writeManifest(tmpDir.path(), _helpers.basicManifest).then(function () {
          return (0, _manifest2.default)(tmpDir.path());
        }).then(function (manifestData) {
          _chai.assert.deepEqual(manifestData, _helpers.basicManifest);
        });
      });
    });

    (0, _mocha.it)('allows manifests without an applications property', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        return writeManifest(tmpDir.path(), manifestWithoutApps).then(function () {
          return (0, _manifest2.default)(tmpDir.path());
        }).then(function (manifestData) {
          _chai.assert.deepEqual(manifestData, manifestWithoutApps);
        });
      });
    });

    (0, _mocha.it)('reports an error for a missing manifest file', function () {
      var nonExistentDir = _path2.default.join('dev', 'null', 'nowhere');
      return (0, _manifest2.default)(nonExistentDir).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
        _chai.assert.match(error.message, /Could not read manifest\.json/);
        // Make sure the filename is included in the exception message.
        // This is actually done by default in file system error messages.
        _chai.assert.include(error.message, nonExistentDir);
      }));
    });

    (0, _mocha.it)('reports an error for invalid manifest JSON', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var badManifest = '{\n          "name": "I\'m an invalid JSON Manifest\n          "version": "0.0.0"\n        }';
        var manifestFile = _path2.default.join(tmpDir.path(), 'manifest.json');
        return _mz.fs.writeFile(manifestFile, badManifest).then(function () {
          return (0, _manifest2.default)(tmpDir.path());
        }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
          _chai.assert.match(error.message, /Error parsing manifest\.json at /);
          _chai.assert.include(error.message, 'Unexpected token \' \' at 2:49');
          _chai.assert.include(error.message, manifestFile);
        }));
      });
    });

    (0, _mocha.it)('reports an error when missing a name', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var noNameManifest = (0, _deepcopy2.default)(_helpers.basicManifest);
        delete noNameManifest.name;

        return writeManifest(tmpDir.path(), noNameManifest).then(function (manifestFile) {
          return (0, _manifest2.default)(tmpDir.path()).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
            _chai.assert.match(error.message, /Manifest at .* is invalid: missing "name" property/);
            _chai.assert.include(error.message, manifestFile);
          }));
        });
      });
    });

    (0, _mocha.it)('reports an error when missing version', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var noVersionManifest = (0, _deepcopy2.default)(_helpers.basicManifest);
        delete noVersionManifest.version;

        return writeManifest(tmpDir.path(), noVersionManifest).then(function (manifestFile) {
          return (0, _manifest2.default)(tmpDir.path()).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
            _chai.assert.match(error.message, /Manifest at .* is invalid: missing "version" property/);
            _chai.assert.include(error.message, manifestFile);
          }));
        });
      });
    });

    (0, _mocha.it)('reports an error when missing applications.gecko', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var incompleteManifest = (0, _deepcopy2.default)(_helpers.basicManifest);
        delete incompleteManifest.applications.gecko;

        return writeManifest(tmpDir.path(), incompleteManifest).then(function (manifestFile) {
          return (0, _manifest2.default)(tmpDir.path()).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
            _chai.assert.match(error.message, /Manifest at .* is invalid: missing "applications.gecko".*/);
            _chai.assert.include(error.message, manifestFile);
          }));
        });
      });
    });

    (0, _mocha.it)('allows a missing applications.gecko.id', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var incompleteManifest = (0, _deepcopy2.default)(_helpers.basicManifest);
        delete incompleteManifest.applications.gecko.id;

        return writeManifest(tmpDir.path(), incompleteManifest).then(function () {
          return (0, _manifest2.default)(tmpDir.path());
        }).then(function (manifestData) {
          _chai.assert.strictEqual((0, _manifest.getManifestId)(manifestData), undefined);
        });
      });
    });

    (0, _mocha.it)('concatenates errors in error message', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var manifestWithErrors = (0, _deepcopy2.default)(_helpers.basicManifest);
        delete manifestWithErrors.name;
        delete manifestWithErrors.version;

        return writeManifest(tmpDir.path(), manifestWithErrors).then(function () {
          return (0, _manifest2.default)(tmpDir.path()).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.InvalidManifest, function (error) {
            _chai.assert.match(error.message, /missing "name" property; missing "version" property/);
          }));
        });
      });
    });
  });

  (0, _mocha.describe)('getManifestId', function () {

    (0, _mocha.it)('returns a gecko ID', function () {
      _chai.assert.equal((0, _manifest.getManifestId)(_helpers.basicManifest), 'basic-manifest@web-ext-test-suite');
    });

    (0, _mocha.it)('returns undefined when ID is not specified', function () {
      _chai.assert.strictEqual((0, _manifest.getManifestId)(manifestWithoutApps), undefined);
    });
  });
});

function writeManifest(destDir, manifestData) {
  var manifestFile = _path2.default.join(destDir, 'manifest.json');
  return _mz.fs.writeFile(manifestFile, JSON.stringify(manifestData)).then(function () {
    return manifestFile;
  });
}

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _setPrototypeOf = __webpack_require__(131);

var _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);

var _create = __webpack_require__(129);

var _create2 = _interopRequireDefault(_create);

var _typeof2 = __webpack_require__(52);

var _typeof3 = _interopRequireDefault(_typeof2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : (0, _typeof3.default)(superClass)));
  }

  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;
};

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _typeof2 = __webpack_require__(52);

var _typeof3 = _interopRequireDefault(_typeof2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && ((typeof call === "undefined" ? "undefined" : (0, _typeof3.default)(call)) === "object" || typeof call === "function") ? call : self;
};

/***/ }),
/* 39 */
/***/ (function(module, exports) {

module.exports = true;

/***/ }),
/* 40 */
/***/ (function(module, exports) {

exports.f = {}.propertyIsEnumerable;

/***/ }),
/* 41 */
/***/ (function(module, exports) {

module.exports = function(bitmap, value){
  return {
    enumerable  : !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable    : !(bitmap & 4),
    value       : value
  };
};

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

var def = __webpack_require__(19).f
  , has = __webpack_require__(21)
  , TAG = __webpack_require__(11)('toStringTag');

module.exports = function(it, tag, stat){
  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});
};

/***/ }),
/* 43 */
/***/ (function(module, exports) {

var id = 0
  , px = Math.random();
module.exports = function(key){
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $at  = __webpack_require__(167)(true);

// 21.1.3.27 String.prototype[@@iterator]()
__webpack_require__(83)(String, 'String', function(iterated){
  this._t = String(iterated); // target
  this._i = 0;                // next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
}, function(){
  var O     = this._t
    , index = this._i
    , point;
  if(index >= O.length)return {value: undefined, done: true};
  point = $at(O, index);
  this._i += point.length;
  return {value: point, done: false};
});

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(171);
var global        = __webpack_require__(13)
  , hide          = __webpack_require__(22)
  , Iterators     = __webpack_require__(27)
  , TO_STRING_TAG = __webpack_require__(11)('toStringTag');

for(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){
  var NAME       = collections[i]
    , Collection = global[NAME]
    , proto      = Collection && Collection.prototype;
  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);
  Iterators[NAME] = Iterators.Array;
}

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_f7wgCg4o1oiHYCQOhzlfEA = Function('return this')();
if (!__cov_f7wgCg4o1oiHYCQOhzlfEA.__coverage__) {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.__coverage__ = {};
}
__cov_f7wgCg4o1oiHYCQOhzlfEA = __cov_f7wgCg4o1oiHYCQOhzlfEA.__coverage__;
if (!__cov_f7wgCg4o1oiHYCQOhzlfEA['/home/travis/build/mozilla/web-ext/src/cmd/build.js']) {
   __cov_f7wgCg4o1oiHYCQOhzlfEA['/home/travis/build/mozilla/web-ext/src/cmd/build.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/build.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 1, "125": 0, "126": 0, "127": 1, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 0, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "148": 0, "149": 0, "150": 0, "151": 0, "152": 0, "153": 0, "154": 0, "155": 1, "156": 0, "157": 0 }, "b": { "1": [0, 0, 0, 0, 0, 0, 0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0, 0, 0, 0], "27": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_callee", "line": 65, "loc": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } } }, "3": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "(anonymous_4)", "line": 88, "loc": { "start": { "line": 88, "column": 4 }, "end": { "line": 88, "column": 28 } } }, "5": { "name": "getDefaultLocalizedName", "line": 65, "loc": { "start": { "line": 65, "column": 22 }, "end": { "line": null, "column": null } } }, "6": { "name": "(anonymous_6)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "7": { "name": "_callee2", "line": 105, "loc": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } } }, "8": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "filter", "line": 127, "loc": { "start": { "line": 127, "column": 12 }, "end": { "line": null, "column": null } } }, "10": { "name": "(anonymous_10)", "line": 146, "loc": { "start": { "line": 146, "column": 23 }, "end": { "line": null, "column": null } } }, "11": { "name": "(anonymous_11)", "line": 161, "loc": { "start": { "line": 161, "column": 25 }, "end": { "line": null, "column": null } } }, "12": { "name": "defaultPackageCreator", "line": 105, "loc": { "start": { "line": 105, "column": 22 }, "end": { "line": null, "column": null } } }, "13": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "14": { "name": "safeFileName", "line": 27, "loc": { "start": { "line": 27, "column": 7 }, "end": { "line": 27, "column": 51 } } }, "15": { "name": "(anonymous_15)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "16": { "name": "_callee3", "line": 192, "loc": { "start": { "line": 192, "column": 15 }, "end": { "line": null, "column": null } } }, "17": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "18": { "name": "createPackage", "line": 217, "loc": { "start": { "line": 217, "column": 24 }, "end": { "line": null, "column": null } } }, "19": { "name": "onChange", "line": 234, "loc": { "start": { "line": 234, "column": 16 }, "end": { "line": 234, "column": 22 } } }, "20": { "name": "(anonymous_20)", "line": 235, "loc": { "start": { "line": 235, "column": 37 }, "end": { "line": 235, "column": 48 } } }, "21": { "name": "shouldWatchFile", "line": 240, "loc": { "start": { "line": 240, "column": 23 }, "end": { "line": null, "column": null } } }, "22": { "name": "build", "line": 192, "loc": { "start": { "line": 192, "column": 30 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 66, "column": 3 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "19": { "start": { "line": 74, "column": 28 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 65, "column": 7 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "25": { "start": { "line": 76, "column": 10 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 81, "column": 18 }, "end": { "line": null, "column": null } }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 83, "column": 10 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 87, "column": 18 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 89, "column": 10 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 91, "column": 14 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 94, "column": 14 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 96, "column": 15 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 99, "column": 9 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 65, "column": 22 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 107, "column": 4 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 116, "column": 29 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 119, "column": 6 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 120, "column": 9 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 121, "column": 8 }, "end": { "line": null, "column": null } }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 123, "column": 25 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 126, "column": 23 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 127, "column": 25 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "65": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "66": { "start": { "line": 132, "column": 6 }, "end": { "line": null, "column": null } }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 135, "column": 8 }, "end": { "line": null, "column": null } }, "71": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "72": { "start": { "line": 136, "column": 26 }, "end": { "line": null, "column": null } }, "73": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "74": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "76": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 146, "column": 9 }, "end": { "line": null, "column": null } }, "78": { "start": { "line": 146, "column": 29 }, "end": { "line": null, "column": null } }, "79": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "80": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "81": { "start": { "line": 149, "column": 10 }, "end": { "line": null, "column": null } }, "82": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "85": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "86": { "start": { "line": 151, "column": 9 }, "end": { "line": null, "column": null } }, "87": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "88": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "89": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "90": { "start": { "line": 154, "column": 9 }, "end": { "line": null, "column": null } }, "91": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "92": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "93": { "start": { "line": 155, "column": 12 }, "end": { "line": null, "column": null } }, "94": { "start": { "line": 159, "column": 8 }, "end": { "line": null, "column": null } }, "95": { "start": { "line": 160, "column": 13 }, "end": { "line": null, "column": null } }, "96": { "start": { "line": 161, "column": 11 }, "end": { "line": null, "column": null } }, "97": { "start": { "line": 161, "column": 31 }, "end": { "line": null, "column": null } }, "98": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "99": { "start": { "line": 162, "column": 10 }, "end": { "line": null, "column": null } }, "100": { "start": { "line": 165, "column": 6 }, "end": { "line": null, "column": null } }, "101": { "start": { "line": 166, "column": 8 }, "end": { "line": null, "column": null } }, "102": { "start": { "line": 168, "column": 9 }, "end": { "line": null, "column": null } }, "103": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "104": { "start": { "line": 105, "column": 22 }, "end": { "line": null, "column": null } }, "105": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "106": { "start": { "line": 27, "column": 16 }, "end": { "line": null, "column": null } }, "107": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "108": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "109": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "110": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "111": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "112": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "113": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "114": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "115": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "116": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "117": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "119": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "120": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 13, "column": 0 }, "end": { "line": null, "column": null } }, "122": { "start": { "line": 14, "column": 0 }, "end": { "line": null, "column": null } }, "123": { "start": { "line": 15, "column": 0 }, "end": { "line": null, "column": null } }, "124": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "125": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "126": { "start": { "line": 24, "column": 0 }, "end": { "line": null, "column": null } }, "127": { "start": { "line": 27, "column": 7 }, "end": { "line": null, "column": null } }, "128": { "start": { "line": 28, "column": 9 }, "end": { "line": null, "column": null } }, "129": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "130": { "start": { "line": 192, "column": 15 }, "end": { "line": null, "column": null } }, "131": { "start": { "line": 194, "column": 4 }, "end": { "line": null, "column": null } }, "132": { "start": { "line": 211, "column": 23 }, "end": { "line": null, "column": null } }, "133": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "134": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "135": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "136": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "137": { "start": { "line": 192, "column": 15 }, "end": { "line": 214, "column": 36 } }, "138": { "start": { "line": 215, "column": 6 }, "end": { "line": null, "column": null } }, "139": { "start": { "line": 192, "column": 15 }, "end": { "line": null, "column": null } }, "140": { "start": { "line": 217, "column": 30 }, "end": { "line": null, "column": null } }, "141": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "142": { "start": { "line": 226, "column": 8 }, "end": { "line": null, "column": null } }, "143": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "144": { "start": { "line": 227, "column": 23 }, "end": { "line": null, "column": null } }, "145": { "start": { "line": 192, "column": 15 }, "end": { "line": null, "column": null } }, "146": { "start": { "line": 229, "column": 6 }, "end": { "line": null, "column": null } }, "147": { "start": { "line": 230, "column": 8 }, "end": { "line": null, "column": null } }, "148": { "start": { "line": 231, "column": 19 }, "end": { "line": null, "column": null } }, "149": { "start": { "line": 235, "column": 15 }, "end": { "line": null, "column": null } }, "150": { "start": { "line": 236, "column": 14 }, "end": { "line": null, "column": null } }, "151": { "start": { "line": 237, "column": 16 }, "end": { "line": null, "column": null } }, "152": { "start": { "line": 240, "column": 36 }, "end": { "line": null, "column": null } }, "153": { "start": { "line": 244, "column": 9 }, "end": { "line": null, "column": null } }, "154": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "155": { "start": { "line": 192, "column": 30 }, "end": { "line": null, "column": null } }, "156": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "157": { "start": { "line": 192, "column": 30 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 89, "type": "if", "locations": [{ "start": { "line": 89, "column": 10 }, "end": { "line": 89, "column": 10 } }, { "start": { "line": 89, "column": 10 }, "end": { "line": 89, "column": 10 } }] }, "3": { "line": 89, "type": "binary-expr", "locations": [{ "start": { "line": 89, "column": 12 }, "end": { "line": 90, "column": 15 } }, { "start": { "line": 90, "column": 15 }, "end": { "line": 89, "column": 10 } }] }, "4": { "line": 116, "type": "cond-expr", "locations": [{ "start": { "line": 116, "column": 29 }, "end": { "line": 116, "column": 29 } }, { "start": { "line": 116, "column": 29 }, "end": { "line": 105, "column": 7 } }] }, "5": { "line": 116, "type": "binary-expr", "locations": [{ "start": { "line": 116, "column": 29 }, "end": { "line": 116, "column": 29 } }, { "start": { "line": 116, "column": 29 }, "end": { "line": 116, "column": 29 } }] }, "6": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 119, "type": "if", "locations": [{ "start": { "line": 119, "column": 6 }, "end": { "line": 119, "column": 6 } }, { "start": { "line": 119, "column": 6 }, "end": { "line": 119, "column": 6 } }] }, "9": { "line": 121, "type": "binary-expr", "locations": [{ "start": { "line": 121, "column": 35 }, "end": { "line": 121, "column": 41 } }, { "start": { "line": 121, "column": 41 }, "end": { "line": 121, "column": 4 } }] }, "10": { "line": 132, "type": "if", "locations": [{ "start": { "line": 132, "column": 6 }, "end": { "line": 132, "column": 6 } }, { "start": { "line": 132, "column": 6 }, "end": { "line": 132, "column": 6 } }] }, "11": { "line": 151, "type": "if", "locations": [{ "start": { "line": 151, "column": 9 }, "end": { "line": 151, "column": 9 } }, { "start": { "line": 151, "column": 9 }, "end": { "line": 151, "column": 9 } }] }, "12": { "line": 154, "type": "if", "locations": [{ "start": { "line": 154, "column": 9 }, "end": { "line": 154, "column": 9 } }, { "start": { "line": 154, "column": 9 }, "end": { "line": 154, "column": 9 } }] }, "13": { "line": 165, "type": "if", "locations": [{ "start": { "line": 165, "column": 6 }, "end": { "line": 165, "column": 6 } }, { "start": { "line": 165, "column": 6 }, "end": { "line": 165, "column": 6 } }] }, "14": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 196, "type": "cond-expr", "locations": [{ "start": { "line": 196, "column": 15 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 197, "type": "cond-expr", "locations": [{ "start": { "line": 197, "column": 20 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 198, "type": "cond-expr", "locations": [{ "start": { "line": 198, "column": 18 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 211, "type": "cond-expr", "locations": [{ "start": { "line": 211, "column": 23 }, "end": { "line": 211, "column": 23 } }, { "start": { "line": 211, "column": 23 }, "end": { "line": 192, "column": 15 } }] }, "20": { "line": 211, "type": "binary-expr", "locations": [{ "start": { "line": 211, "column": 23 }, "end": { "line": 211, "column": 23 } }, { "start": { "line": 211, "column": 23 }, "end": { "line": 211, "column": 23 } }] }, "21": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "22": { "line": 203, "type": "cond-expr", "locations": [{ "start": { "line": 203, "column": 17 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "23": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "24": { "line": 209, "type": "cond-expr", "locations": [{ "start": { "line": 209, "column": 21 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "25": { "line": 210, "type": "cond-expr", "locations": [{ "start": { "line": 210, "column": 23 }, "end": { "line": 192, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "26": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "27": { "line": 229, "type": "if", "locations": [{ "start": { "line": 229, "column": 6 }, "end": { "line": 229, "column": 6 } }, { "start": { "line": 229, "column": 6 }, "end": { "line": 229, "column": 6 } }] } }, "code": ["/* @flow */", "import path from 'path';", "import {createWriteStream} from 'fs';", "", "import {fs} from 'mz';", "import parseJSON from 'parse-json';", "import defaultEventToPromise from 'event-to-promise';", "", "import defaultSourceWatcher from '../watcher';", "import {zipDir} from '../util/zip-dir';", "import getValidatedManifest, {getManifestId} from '../util/manifest';", "import {prepareArtifactsDir} from '../util/artifacts';", "import {createLogger} from '../util/logger';", "import {UsageError, isErrorWithCode} from '../errors';", "import {", "  createFileFilter as defaultFileFilterCreator,", "  FileFilter,", "} from '../util/file-filter';", "// Import flow types.", "import type {OnSourceChangeFn} from '../watcher';", "import type {ExtensionManifest} from '../util/manifest';", "import type {FileFilterCreatorFn} from '../util/file-filter';", "", "const log = createLogger(__filename);", "", "", "export function safeFileName(name: string): string {", "  return name.toLowerCase().replace(/[^a-z0-9\\.-]+/g, '_');", "}", "", "", "// defaultPackageCreator types and implementation.", "", "export type ExtensionBuildResult = {|", "  extensionPath: string,", "|};", "", "export type PackageCreatorParams = {|", "  manifestData?: ExtensionManifest,", "  sourceDir: string,", "  fileFilter: FileFilter,", "  artifactsDir: string,", "  overwriteDest: boolean,", "  showReadyMessage: boolean", "|};", "", "export type LocalizedNameParams = {|", "  messageFile: string,", "  manifestData: ExtensionManifest,", "|}", "", "export type PackageCreatorOptions = {|", "  eventToPromise: typeof defaultEventToPromise,", "|};", "", "// This defines the _locales/messages.json type. See:", "// https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization#Providing_localized_strings_in__locales", "type LocalizedMessageData = {|", "  [messageName: string]: {|", "    description: string,", "    message: string,", "  |},", "|}", "", "export async function getDefaultLocalizedName(", "  {messageFile, manifestData}: LocalizedNameParams", "): Promise<string> {", "", "  let messageData: LocalizedMessageData;", "  let messageContents: string | Buffer;", "  let extensionName: string = manifestData.name;", "", "  try {", "    messageContents = await fs.readFile(messageFile);", "  } catch (error) {", "    throw new UsageError(", "      `Error reading messages.json file at ${messageFile}: ${error}`);", "  }", "", "  try {", "    messageData = parseJSON(messageContents, messageFile);", "  } catch (error) {", "    throw new UsageError(", "      `Error parsing messages.json ${error}`);", "  }", "", "  extensionName = manifestData.name.replace(/__MSG_([A-Za-z0-9@_]+?)__/g,", "    (match, messageName) => {", "      if (!(messageData[messageName]", "            && messageData[messageName].message)) {", "        const error = new UsageError(", "          `The locale file ${messageFile} ` +", "            `is missing key: ${messageName}`);", "        throw error;", "      } else {", "        return messageData[messageName].message;", "      }", "    });", "  return Promise.resolve(extensionName);", "}", "", "export type PackageCreatorFn =", "    (params: PackageCreatorParams) => Promise<ExtensionBuildResult>;", "", "export async function defaultPackageCreator(", "  {", "    manifestData,", "    sourceDir,", "    fileFilter,", "    artifactsDir,", "    overwriteDest,", "    showReadyMessage,", "  }: PackageCreatorParams,", "  {", "    eventToPromise = defaultEventToPromise,", "  }: PackageCreatorOptions = {}", "): Promise<ExtensionBuildResult> {", "  let id;", "  if (manifestData) {", "    id = getManifestId(manifestData);", "    log.debug(`Using manifest id=${id || '[not specified]'}`);", "  } else {", "    manifestData = await getValidatedManifest(sourceDir);", "  }", "", "  const buffer = await zipDir(sourceDir, {", "    filter: (...args) => fileFilter.wantFile(...args),", "  });", "", "  let extensionName: string = manifestData.name;", "", "  if (manifestData.default_locale) {", "    const messageFile = path.join(sourceDir, '_locales',", "      manifestData.default_locale, 'messages.json');", "    log.debug('Manifest declared default_locale, localizing extension name');", "    extensionName = await getDefaultLocalizedName(", "      {messageFile, manifestData});", "  }", "  const packageName = safeFileName(", "    `${extensionName}-${manifestData.version}.zip`);", "  const extensionPath = path.join(artifactsDir, packageName);", "", "  // Added 'wx' flags to avoid overwriting of existing package.", "  let stream = createWriteStream(extensionPath, {flags: 'wx'});", "", "  stream.write(buffer, () => stream.end());", "", "  try {", "    await eventToPromise(stream, 'close');", "  } catch (error) {", "    if (!isErrorWithCode('EEXIST', error)) {", "      throw error;", "    }", "    if (!overwriteDest) {", "      throw new UsageError(", "        `Extension exists at the destination path: ${extensionPath}\\n` +", "        'Use --overwrite-dest to enable overwriting.');", "    }", "    log.info(`Destination exists, overwriting: ${extensionPath}`);", "    stream = createWriteStream(extensionPath);", "    stream.write(buffer, () => stream.end());", "    await eventToPromise(stream, 'close');", "  }", "", "  if (showReadyMessage) {", "    log.info(`Your web extension is ready: ${extensionPath}`);", "  }", "  return {extensionPath};", "}", "", "", "// Build command types and implementation.", "", "export type BuildCmdParams = {|", "  sourceDir: string,", "  artifactsDir: string,", "  asNeeded?: boolean,", "  overwriteDest?: boolean,", "  ignoreFiles?: Array<string>,", "|};", "", "export type BuildCmdOptions = {|", "  manifestData?: ExtensionManifest,", "  fileFilter?: FileFilter,", "  onSourceChange?: OnSourceChangeFn,", "  packageCreator?: PackageCreatorFn,", "  showReadyMessage?: boolean,", "  createFileFilter?: FileFilterCreatorFn,", "  shouldExitProgram?: boolean,", "|};", "", "export default async function build(", "  {", "    sourceDir,", "    artifactsDir,", "    asNeeded = false,", "    overwriteDest = false,", "    ignoreFiles = [],", "  }: BuildCmdParams,", "  {", "    manifestData,", "    createFileFilter = defaultFileFilterCreator,", "    fileFilter = createFileFilter({", "      sourceDir,", "      artifactsDir,", "      ignoreFiles,", "    }),", "    onSourceChange = defaultSourceWatcher,", "    packageCreator = defaultPackageCreator,", "    showReadyMessage = true,", "  }: BuildCmdOptions = {}", "): Promise<ExtensionBuildResult> {", "", "  const rebuildAsNeeded = asNeeded; // alias for `build --as-needed`", "  log.info(`Building web extension from ${sourceDir}`);", "", "  const createPackage = () => packageCreator({", "    manifestData,", "    sourceDir,", "    fileFilter,", "    artifactsDir,", "    overwriteDest,", "    showReadyMessage,", "  });", "", "  await prepareArtifactsDir(artifactsDir);", "  const result = await createPackage();", "", "  if (rebuildAsNeeded) {", "    log.info('Rebuilding when files change...');", "    onSourceChange({", "      sourceDir,", "      artifactsDir,", "      onChange: () => {", "        return createPackage().catch((error) => {", "          log.error(error.stack);", "          throw error;", "        });", "      },", "      shouldWatchFile: (...args) => fileFilter.wantFile(...args),", "    });", "  }", "", "  return result;", "}", ""] };
}
__cov_f7wgCg4o1oiHYCQOhzlfEA = __cov_f7wgCg4o1oiHYCQOhzlfEA['/home/travis/build/mozilla/web-ext/src/cmd/build.js'];
__cov_f7wgCg4o1oiHYCQOhzlfEA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_f7wgCg4o1oiHYCQOhzlfEA.s['2']++;exports.defaultPackageCreator = exports.getDefaultLocalizedName = undefined;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['3']++;var _regenerator = __webpack_require__(8);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['5']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['6']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['7']++;var getDefaultLocalizedName = exports.getDefaultLocalizedName = function () {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.f['1']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['8']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(_ref2) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['2']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['9']++;var messageFile = _ref2.messageFile,
          manifestData = _ref2.manifestData;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['10']++;var messageData, messageContents, extensionName;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['11']++;return _regenerator2.default.wrap(function _callee$(_context) {
         __cov_f7wgCg4o1oiHYCQOhzlfEA.f['3']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['12']++;while (1) {
            __cov_f7wgCg4o1oiHYCQOhzlfEA.s['13']++;switch (_context.prev = _context.next) {case 0:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['14']++;messageData = void 0;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['15']++;messageContents = void 0;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['16']++;extensionName = manifestData.name;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['17']++;_context.prev = 3;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['18']++;_context.next = 6;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['19']++;return _mz.fs.readFile(messageFile);case 6:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][1]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['20']++;messageContents = _context.sent;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['21']++;_context.next = 12;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['22']++;break;case 9:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][2]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['23']++;_context.prev = 9;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['24']++;_context.t0 = _context['catch'](3);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['25']++;throw new _errors.UsageError('Error reading messages.json file at ' + messageFile + ': ' + _context.t0);case 12:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][3]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['26']++;_context.prev = 12;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['27']++;messageData = (0, _parseJson2.default)(messageContents, messageFile);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['28']++;_context.next = 19;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['29']++;break;case 16:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][4]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['30']++;_context.prev = 16;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['31']++;_context.t1 = _context['catch'](12);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['32']++;throw new _errors.UsageError('Error parsing messages.json ' + _context.t1);case 19:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][5]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['33']++;extensionName = manifestData.name.replace(/__MSG_([A-Za-z0-9@_]+?)__/g, function (match, messageName) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.f['4']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['34']++;if (!((__cov_f7wgCg4o1oiHYCQOhzlfEA.b['3'][0]++, messageData[messageName]) && (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['3'][1]++, messageData[messageName].message))) {
                        __cov_f7wgCg4o1oiHYCQOhzlfEA.b['2'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['35']++;var error = new _errors.UsageError('The locale file ' + messageFile + ' ' + ('is missing key: ' + messageName));__cov_f7wgCg4o1oiHYCQOhzlfEA.s['36']++;throw error;
                     } else {
                        __cov_f7wgCg4o1oiHYCQOhzlfEA.b['2'][1]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['37']++;return messageData[messageName].message;
                     }
                  });__cov_f7wgCg4o1oiHYCQOhzlfEA.s['38']++;return _context.abrupt('return', Promise.resolve(extensionName));case 21:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][6]++;case 'end':
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['1'][7]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['39']++;return _context.stop();}
         }
      }, _callee, this, [[3, 9], [12, 16]]);
   }));__cov_f7wgCg4o1oiHYCQOhzlfEA.s['40']++;return function getDefaultLocalizedName(_x) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['5']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['41']++;return _ref.apply(this, arguments);
   };
}();__cov_f7wgCg4o1oiHYCQOhzlfEA.s['42']++;var defaultPackageCreator = exports.defaultPackageCreator = function () {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.f['6']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['43']++;var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(_ref4) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['7']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['44']++;var manifestData = _ref4.manifestData,
          sourceDir = _ref4.sourceDir,
          fileFilter = _ref4.fileFilter,
          artifactsDir = _ref4.artifactsDir,
          overwriteDest = _ref4.overwriteDest,
          showReadyMessage = _ref4.showReadyMessage;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['45']++;var _ref5 = (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['5'][0]++, arguments.length > 1) && (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['5'][1]++, arguments[1] !== undefined) ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['4'][0]++, arguments[1]) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['4'][1]++, {}),
          _ref5$eventToPromise = _ref5.eventToPromise,
          eventToPromise = _ref5$eventToPromise === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['6'][0]++, _eventToPromise2.default) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['6'][1]++, _ref5$eventToPromise);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['46']++;var id, buffer, extensionName, _messageFile, packageName, extensionPath, stream;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['47']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
         __cov_f7wgCg4o1oiHYCQOhzlfEA.f['8']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['48']++;while (1) {
            __cov_f7wgCg4o1oiHYCQOhzlfEA.s['49']++;switch (_context2.prev = _context2.next) {case 0:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['50']++;id = void 0;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['51']++;if (!manifestData) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['8'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['52']++;_context2.next = 6;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['53']++;break;
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['8'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['54']++;id = (0, _manifest.getManifestId)(manifestData);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['55']++;log.debug('Using manifest id=' + ((__cov_f7wgCg4o1oiHYCQOhzlfEA.b['9'][0]++, id) || (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['9'][1]++, '[not specified]')));__cov_f7wgCg4o1oiHYCQOhzlfEA.s['56']++;_context2.next = 9;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['57']++;break;case 6:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][1]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['58']++;_context2.next = 8;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['59']++;return (0, _manifest2.default)(sourceDir);case 8:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][2]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['60']++;manifestData = _context2.sent;case 9:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][3]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['61']++;_context2.next = 11;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['62']++;return (0, _zipDir.zipDir)(sourceDir, { filter: function filter() {
                        __cov_f7wgCg4o1oiHYCQOhzlfEA.f['9']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['63']++;return fileFilter.wantFile.apply(fileFilter, arguments);
                     } });case 11:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][4]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['64']++;buffer = _context2.sent;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['65']++;extensionName = manifestData.name;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['66']++;if (!manifestData.default_locale) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['10'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['67']++;_context2.next = 19;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['68']++;break;
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['10'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['69']++;_messageFile = _path2.default.join(sourceDir, '_locales', manifestData.default_locale, 'messages.json');__cov_f7wgCg4o1oiHYCQOhzlfEA.s['70']++;log.debug('Manifest declared default_locale, localizing extension name');__cov_f7wgCg4o1oiHYCQOhzlfEA.s['71']++;_context2.next = 18;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['72']++;return getDefaultLocalizedName({ messageFile: _messageFile, manifestData: manifestData });case 18:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][5]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['73']++;extensionName = _context2.sent;case 19:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][6]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['74']++;packageName = safeFileName(extensionName + '-' + manifestData.version + '.zip');__cov_f7wgCg4o1oiHYCQOhzlfEA.s['75']++;extensionPath = _path2.default.join(artifactsDir, packageName);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['76']++;stream = (0, _fs.createWriteStream)(extensionPath, { flags: 'wx' });__cov_f7wgCg4o1oiHYCQOhzlfEA.s['77']++;stream.write(buffer, function () {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.f['10']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['78']++;return stream.end();
                  });__cov_f7wgCg4o1oiHYCQOhzlfEA.s['79']++;_context2.prev = 23;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['80']++;_context2.next = 26;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['81']++;return eventToPromise(stream, 'close');case 26:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][7]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['82']++;_context2.next = 39;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['83']++;break;case 28:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][8]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['84']++;_context2.prev = 28;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['85']++;_context2.t0 = _context2['catch'](23);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['86']++;if ((0, _errors.isErrorWithCode)('EEXIST', _context2.t0)) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['11'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['87']++;_context2.next = 32;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['88']++;break;
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['11'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['89']++;throw _context2.t0;case 32:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][9]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['90']++;if (overwriteDest) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['12'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['91']++;_context2.next = 34;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['92']++;break;
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['12'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['93']++;throw new _errors.UsageError('Extension exists at the destination path: ' + extensionPath + '\n' + 'Use --overwrite-dest to enable overwriting.');case 34:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][10]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['94']++;log.info('Destination exists, overwriting: ' + extensionPath);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['95']++;stream = (0, _fs.createWriteStream)(extensionPath);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['96']++;stream.write(buffer, function () {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.f['11']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['97']++;return stream.end();
                  });__cov_f7wgCg4o1oiHYCQOhzlfEA.s['98']++;_context2.next = 39;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['99']++;return eventToPromise(stream, 'close');case 39:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][11]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['100']++;if (showReadyMessage) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['13'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['101']++;log.info('Your web extension is ready: ' + extensionPath);
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['13'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['102']++;return _context2.abrupt('return', { extensionPath: extensionPath });case 41:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][12]++;case 'end':
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['7'][13]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['103']++;return _context2.stop();}
         }
      }, _callee2, this, [[23, 28]]);
   }));__cov_f7wgCg4o1oiHYCQOhzlfEA.s['104']++;return function defaultPackageCreator(_x2) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['12']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['105']++;return _ref3.apply(this, arguments);
   };
}();__cov_f7wgCg4o1oiHYCQOhzlfEA.s['106']++;exports.safeFileName = safeFileName;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['107']++;var _path = __webpack_require__(4);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['108']++;var _path2 = _interopRequireDefault(_path);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['109']++;var _fs = __webpack_require__(68);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['110']++;var _mz = __webpack_require__(9);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['111']++;var _parseJson = __webpack_require__(98);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['112']++;var _parseJson2 = _interopRequireDefault(_parseJson);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['113']++;var _eventToPromise = __webpack_require__(67);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['114']++;var _eventToPromise2 = _interopRequireDefault(_eventToPromise);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['115']++;var _watcher = __webpack_require__(50);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['116']++;var _watcher2 = _interopRequireDefault(_watcher);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['117']++;var _zipDir = __webpack_require__(102);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['118']++;var _manifest = __webpack_require__(25);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['119']++;var _manifest2 = _interopRequireDefault(_manifest);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['120']++;var _artifacts = __webpack_require__(48);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['121']++;var _logger = __webpack_require__(0);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['122']++;var _errors = __webpack_require__(2);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['123']++;var _fileFilter = __webpack_require__(29);function _interopRequireDefault(obj) {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.f['13']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['125']++;return (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['15'][0]++, obj) && (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['15'][1]++, obj.__esModule) ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['14'][0]++, obj) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['14'][1]++, { default: obj });
}__cov_f7wgCg4o1oiHYCQOhzlfEA.s['126']++;var log = (0, _logger.createLogger)(__filename);function safeFileName(name) {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.f['14']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['128']++;return name.toLowerCase().replace(/[^a-z0-9\.-]+/g, '_');
}__cov_f7wgCg4o1oiHYCQOhzlfEA.s['129']++;exports.default = function () {
   __cov_f7wgCg4o1oiHYCQOhzlfEA.f['15']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['130']++;var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(_ref7) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['16']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['131']++;var sourceDir = _ref7.sourceDir,
          artifactsDir = _ref7.artifactsDir,
          _ref7$asNeeded = _ref7.asNeeded,
          asNeeded = _ref7$asNeeded === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['16'][0]++, false) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['16'][1]++, _ref7$asNeeded),
          _ref7$overwriteDest = _ref7.overwriteDest,
          overwriteDest = _ref7$overwriteDest === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['17'][0]++, false) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['17'][1]++, _ref7$overwriteDest),
          _ref7$ignoreFiles = _ref7.ignoreFiles,
          ignoreFiles = _ref7$ignoreFiles === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['18'][0]++, []) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['18'][1]++, _ref7$ignoreFiles);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['132']++;var _ref8 = (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['20'][0]++, arguments.length > 1) && (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['20'][1]++, arguments[1] !== undefined) ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['19'][0]++, arguments[1]) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['19'][1]++, {}),
          manifestData = _ref8.manifestData,
          _ref8$createFileFilte = _ref8.createFileFilter,
          createFileFilter = _ref8$createFileFilte === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['21'][0]++, _fileFilter.createFileFilter) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['21'][1]++, _ref8$createFileFilte),
          _ref8$fileFilter = _ref8.fileFilter,
          fileFilter = _ref8$fileFilter === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['22'][0]++, createFileFilter({ sourceDir: sourceDir, artifactsDir: artifactsDir, ignoreFiles: ignoreFiles })) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['22'][1]++, _ref8$fileFilter),
          _ref8$onSourceChange = _ref8.onSourceChange,
          onSourceChange = _ref8$onSourceChange === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['23'][0]++, _watcher2.default) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['23'][1]++, _ref8$onSourceChange),
          _ref8$packageCreator = _ref8.packageCreator,
          packageCreator = _ref8$packageCreator === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['24'][0]++, defaultPackageCreator) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['24'][1]++, _ref8$packageCreator),
          _ref8$showReadyMessag = _ref8.showReadyMessage,
          showReadyMessage = _ref8$showReadyMessag === undefined ? (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['25'][0]++, true) : (__cov_f7wgCg4o1oiHYCQOhzlfEA.b['25'][1]++, _ref8$showReadyMessag);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['133']++;var rebuildAsNeeded, createPackage, result;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['134']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
         __cov_f7wgCg4o1oiHYCQOhzlfEA.f['17']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['135']++;while (1) {
            __cov_f7wgCg4o1oiHYCQOhzlfEA.s['136']++;switch (_context3.prev = _context3.next) {case 0:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['26'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['137']++;rebuildAsNeeded = asNeeded;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['138']++;log.info('Building web extension from ' + sourceDir);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['139']++;createPackage = function createPackage() {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.f['18']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['140']++;return packageCreator({ manifestData: manifestData, sourceDir: sourceDir, fileFilter: fileFilter, artifactsDir: artifactsDir, overwriteDest: overwriteDest, showReadyMessage: showReadyMessage });
                  };__cov_f7wgCg4o1oiHYCQOhzlfEA.s['141']++;_context3.next = 5;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['142']++;return (0, _artifacts.prepareArtifactsDir)(artifactsDir);case 5:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['26'][1]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['143']++;_context3.next = 7;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['144']++;return createPackage();case 7:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['26'][2]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['145']++;result = _context3.sent;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['146']++;if (rebuildAsNeeded) {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['27'][0]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['147']++;log.info('Rebuilding when files change...');__cov_f7wgCg4o1oiHYCQOhzlfEA.s['148']++;onSourceChange({ sourceDir: sourceDir, artifactsDir: artifactsDir, onChange: function onChange() {
                           __cov_f7wgCg4o1oiHYCQOhzlfEA.f['19']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['149']++;return createPackage().catch(function (error) {
                              __cov_f7wgCg4o1oiHYCQOhzlfEA.f['20']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['150']++;log.error(error.stack);__cov_f7wgCg4o1oiHYCQOhzlfEA.s['151']++;throw error;
                           });
                        }, shouldWatchFile: function shouldWatchFile() {
                           __cov_f7wgCg4o1oiHYCQOhzlfEA.f['21']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['152']++;return fileFilter.wantFile.apply(fileFilter, arguments);
                        } });
                  } else {
                     __cov_f7wgCg4o1oiHYCQOhzlfEA.b['27'][1]++;
                  }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['153']++;return _context3.abrupt('return', result);case 10:
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['26'][3]++;case 'end':
                  __cov_f7wgCg4o1oiHYCQOhzlfEA.b['26'][4]++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['154']++;return _context3.stop();}
         }
      }, _callee3, this);
   }));function build(_x4) {
      __cov_f7wgCg4o1oiHYCQOhzlfEA.f['22']++;__cov_f7wgCg4o1oiHYCQOhzlfEA.s['156']++;return _ref6.apply(this, arguments);
   }__cov_f7wgCg4o1oiHYCQOhzlfEA.s['157']++;return build;
}();
/* WEBPACK VAR INJECTION */}.call(exports, "src/cmd/build.js"))

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_7jZiGznItpvingdxB37WRg = Function('return this')();
if (!__cov_7jZiGznItpvingdxB37WRg.__coverage__) {
   __cov_7jZiGznItpvingdxB37WRg.__coverage__ = {};
}
__cov_7jZiGznItpvingdxB37WRg = __cov_7jZiGznItpvingdxB37WRg.__coverage__;
if (!__cov_7jZiGznItpvingdxB37WRg['/home/travis/build/mozilla/web-ext/src/firefox/preferences.js']) {
   __cov_7jZiGznItpvingdxB37WRg['/home/travis/build/mozilla/web-ext/src/firefox/preferences.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/firefox/preferences.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 1, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 1, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 1, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "getPrefs", "line": 105, "loc": { "start": { "line": 105, "column": 7 }, "end": { "line": 107, "column": 22 } } }, "3": { "name": "coerceCLICustomPreference", "line": 118, "loc": { "start": { "line": 118, "column": 7 }, "end": { "line": 120, "column": 22 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 105, "column": 16 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 118, "column": 16 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 6, "column": 7 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 22, "column": 0 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 62, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 68, "column": 0 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 93, "column": 0 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 105, "column": 7 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 106, "column": 2 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 108, "column": 8 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 109, "column": 6 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 110, "column": 10 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 113, "column": 7 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 118, "column": 7 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 121, "column": 8 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 123, "column": 6 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 124, "column": 15 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 128, "column": 21 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 128, "column": 13 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 129, "column": 10 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 131, "column": 8 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 132, "column": 12 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 138, "column": 10 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 139, "column": 8 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 141, "column": 8 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 142, "column": 12 }, "end": { "line": null, "column": null } }, "40": { "start": { "line": 145, "column": 8 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 146, "column": 14 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 147, "column": 11 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 148, "column": 15 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 151, "column": 8 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 152, "column": 10 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 155, "column": 19 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "55": { "start": { "line": 158, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 106, "type": "cond-expr", "locations": [{ "start": { "line": 106, "column": 28 }, "end": { "line": 106, "column": 28 } }, { "start": { "line": 106, "column": 28 }, "end": { "line": 107, "column": 22 } }] }, "4": { "line": 106, "type": "binary-expr", "locations": [{ "start": { "line": 106, "column": 28 }, "end": { "line": 106, "column": 28 } }, { "start": { "line": 106, "column": 28 }, "end": { "line": 106, "column": 28 } }] }, "5": { "line": 109, "type": "if", "locations": [{ "start": { "line": 109, "column": 6 }, "end": { "line": 109, "column": 6 } }, { "start": { "line": 109, "column": 6 }, "end": { "line": 109, "column": 6 } }] }, "6": { "line": 123, "type": "if", "locations": [{ "start": { "line": 123, "column": 6 }, "end": { "line": 123, "column": 6 } }, { "start": { "line": 123, "column": 6 }, "end": { "line": 123, "column": 6 } }] }, "7": { "line": 131, "type": "if", "locations": [{ "start": { "line": 131, "column": 8 }, "end": { "line": 131, "column": 8 } }, { "start": { "line": 131, "column": 8 }, "end": { "line": 131, "column": 8 } }] }, "8": { "line": 141, "type": "if", "locations": [{ "start": { "line": 141, "column": 8 }, "end": { "line": 141, "column": 8 } }, { "start": { "line": 141, "column": 8 }, "end": { "line": 141, "column": 8 } }] }, "9": { "line": 145, "type": "if", "locations": [{ "start": { "line": 145, "column": 8 }, "end": { "line": 145, "column": 8 } }, { "start": { "line": 145, "column": 8 }, "end": { "line": 145, "column": 8 } }] }, "10": { "line": 147, "type": "if", "locations": [{ "start": { "line": 147, "column": 11 }, "end": { "line": 147, "column": 11 } }, { "start": { "line": 147, "column": 11 }, "end": { "line": 147, "column": 11 } }] }, "11": { "line": 147, "type": "binary-expr", "locations": [{ "start": { "line": 147, "column": 15 }, "end": { "line": 147, "column": 15 } }, { "start": { "line": 147, "column": 35 }, "end": { "line": 147, "column": 11 } }] }, "12": { "line": 151, "type": "if", "locations": [{ "start": { "line": 151, "column": 8 }, "end": { "line": 151, "column": 8 } }, { "start": { "line": 151, "column": 8 }, "end": { "line": 151, "column": 8 } }] }, "13": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import {WebExtError, UsageError} from '../errors';", "import {createLogger} from '../util/logger';", "", "const log = createLogger(__filename);", "export const nonOverridablePreferences = [", "  'devtools.debugger.remote-enabled', 'devtools.debugger.prompt-connection',", "  'xpinstall.signatures.required',", "];", "", "// Flow Types", "", "export type FirefoxPreferences = {", "  [key: string]: boolean | string | number,", "};", "", "export type PreferencesAppName = 'firefox' | 'fennec';", "", "", "// Preferences Maps", "", "const prefsCommon: FirefoxPreferences = {", "  // Allow debug output via dump to be printed to the system console", "  'browser.dom.window.dump.enabled': true,", "  // Warn about possibly incorrect code.", "  'javascript.options.strict': true,", "  'javascript.options.showInConsole': true,", "", "  // Allow remote connections to the debugger.", "  'devtools.debugger.remote-enabled': true,", "  // Disable the prompt for allowing connections.", "  'devtools.debugger.prompt-connection': false,", "", "  // Turn off platform logging because it is a lot of info.", "  'extensions.logging.enabled': false,", "", "  // Disable extension updates and notifications.", "  'extensions.checkCompatibility.nightly': false,", "  'extensions.update.enabled': false,", "  'extensions.update.notifyUser': false,", "", "  // From:", "  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l372", "  // Only load extensions from the application and user profile.", "  // AddonManager.SCOPE_PROFILE + AddonManager.SCOPE_APPLICATION", "  'extensions.enabledScopes': 5,", "  // Disable metadata caching for installed add-ons by default.", "  'extensions.getAddons.cache.enabled': false,", "  // Disable intalling any distribution add-ons.", "  'extensions.installDistroAddons': false,", "  // Allow installing extensions dropped into the profile folder.", "  'extensions.autoDisableScopes': 10,", "", "  // Disable app update.", "  'app.update.enabled': false,", "", "  // Allow unsigned add-ons.", "  'xpinstall.signatures.required': false,", "};", "", "// Prefs specific to Firefox for Android.", "const prefsFennec: FirefoxPreferences = {", "  'browser.console.showInPanel': true,", "  'browser.firstrun.show.uidiscovery': false,", "};", "", "// Prefs specific to Firefox for desktop.", "const prefsFirefox: FirefoxPreferences = {", "  'browser.startup.homepage': 'about:blank',", "  'startup.homepage_welcome_url': 'about:blank',", "  'startup.homepage_welcome_url.additional': '',", "  'devtools.errorconsole.enabled': true,", "  'devtools.chrome.enabled': true,", "", "  // From:", "  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l388", "  // Make url-classifier updates so rare that they won't affect tests.", "  'urlclassifier.updateinterval': 172800,", "  // Point the url-classifier to a nonexistent local URL for fast failures.", "  'browser.safebrowsing.provider.0.gethashURL':", "    'http://localhost/safebrowsing-dummy/gethash',", "  'browser.safebrowsing.provider.0.keyURL':", "    'http://localhost/safebrowsing-dummy/newkey',", "  'browser.safebrowsing.provider.0.updateURL':", "    'http://localhost/safebrowsing-dummy/update',", "", "  // Disable self repair/SHIELD", "  'browser.selfsupport.url': 'https://localhost/selfrepair',", "  // Disable Reader Mode UI tour", "  'browser.reader.detectedFirstArticle': true,", "};", "", "const prefs = {", "  common: prefsCommon,", "  fennec: prefsFennec,", "  firefox: prefsFirefox,", "};", "", "", "// Module exports", "", "export type PreferencesGetterFn =", "  (appName: PreferencesAppName) => FirefoxPreferences;", "", "export function getPrefs(", "  app: PreferencesAppName = 'firefox'", "): FirefoxPreferences {", "  const appPrefs = prefs[app];", "  if (!appPrefs) {", "    throw new WebExtError(`Unsupported application: ${app}`);", "  }", "  return {", "    ...prefsCommon,", "    ...appPrefs,", "  };", "}", "", "export function coerceCLICustomPreference(", "  cliPrefs: string | Array<string>", "): FirefoxPreferences {", "  const customPrefs = {};", "", "  if (!Array.isArray(cliPrefs)) {", "    cliPrefs = [cliPrefs];", "  }", "", "", "  for (const pref of cliPrefs) {", "    const prefsAry = pref.split('=');", "", "    if (prefsAry.length < 2) {", "      throw new UsageError(", "        `Incomplete custom preference: \"${pref}\". ` +", "        'Syntax expected: \"prefname=prefvalue\".'", "      );", "    }", "", "    const key = prefsAry[0];", "    let value = prefsAry.slice(1).join('=');", "", "    if (/[^\\w{@}.-]/.test(key)) {", "      throw new UsageError(`Invalid custom preference name: ${key}`);", "    }", "", "    if (value === `${parseInt(value)}`) {", "      value = parseInt(value, 10);", "    } else if (value === 'true' || value === 'false') {", "      value = (value === 'true');", "    }", "", "    if (nonOverridablePreferences.includes(key)) {", "      log.warn(`'${key}' preference cannot be customized.`);", "      continue;", "    }", "    customPrefs[`${key}`] = value;", "  }", "", "  return customPrefs;", "}", ""] };
}
__cov_7jZiGznItpvingdxB37WRg = __cov_7jZiGznItpvingdxB37WRg['/home/travis/build/mozilla/web-ext/src/firefox/preferences.js'];
__cov_7jZiGznItpvingdxB37WRg.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_7jZiGznItpvingdxB37WRg.s['2']++;exports.nonOverridablePreferences = undefined;__cov_7jZiGznItpvingdxB37WRg.s['3']++;var _extends2 = __webpack_require__(5);__cov_7jZiGznItpvingdxB37WRg.s['4']++;var _extends3 = _interopRequireDefault(_extends2);__cov_7jZiGznItpvingdxB37WRg.s['5']++;exports.getPrefs = getPrefs;__cov_7jZiGznItpvingdxB37WRg.s['6']++;exports.coerceCLICustomPreference = coerceCLICustomPreference;__cov_7jZiGznItpvingdxB37WRg.s['7']++;var _errors = __webpack_require__(2);__cov_7jZiGznItpvingdxB37WRg.s['8']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_7jZiGznItpvingdxB37WRg.f['1']++;__cov_7jZiGznItpvingdxB37WRg.s['10']++;return (__cov_7jZiGznItpvingdxB37WRg.b['2'][0]++, obj) && (__cov_7jZiGznItpvingdxB37WRg.b['2'][1]++, obj.__esModule) ? (__cov_7jZiGznItpvingdxB37WRg.b['1'][0]++, obj) : (__cov_7jZiGznItpvingdxB37WRg.b['1'][1]++, { default: obj });
}__cov_7jZiGznItpvingdxB37WRg.s['11']++;var log = (0, _logger.createLogger)(__filename);__cov_7jZiGznItpvingdxB37WRg.s['12']++;var nonOverridablePreferences = exports.nonOverridablePreferences = ['devtools.debugger.remote-enabled', 'devtools.debugger.prompt-connection', 'xpinstall.signatures.required'];__cov_7jZiGznItpvingdxB37WRg.s['13']++;var prefsCommon = { 'browser.dom.window.dump.enabled': true, 'javascript.options.strict': true, 'javascript.options.showInConsole': true, 'devtools.debugger.remote-enabled': true, 'devtools.debugger.prompt-connection': false, 'extensions.logging.enabled': false, 'extensions.checkCompatibility.nightly': false, 'extensions.update.enabled': false, 'extensions.update.notifyUser': false, 'extensions.enabledScopes': 5, 'extensions.getAddons.cache.enabled': false, 'extensions.installDistroAddons': false, 'extensions.autoDisableScopes': 10, 'app.update.enabled': false, 'xpinstall.signatures.required': false };__cov_7jZiGznItpvingdxB37WRg.s['14']++;var prefsFennec = { 'browser.console.showInPanel': true, 'browser.firstrun.show.uidiscovery': false };__cov_7jZiGznItpvingdxB37WRg.s['15']++;var prefsFirefox = { 'browser.startup.homepage': 'about:blank', 'startup.homepage_welcome_url': 'about:blank', 'startup.homepage_welcome_url.additional': '', 'devtools.errorconsole.enabled': true, 'devtools.chrome.enabled': true, 'urlclassifier.updateinterval': 172800, 'browser.safebrowsing.provider.0.gethashURL': 'http://localhost/safebrowsing-dummy/gethash', 'browser.safebrowsing.provider.0.keyURL': 'http://localhost/safebrowsing-dummy/newkey', 'browser.safebrowsing.provider.0.updateURL': 'http://localhost/safebrowsing-dummy/update', 'browser.selfsupport.url': 'https://localhost/selfrepair', 'browser.reader.detectedFirstArticle': true };__cov_7jZiGznItpvingdxB37WRg.s['16']++;var prefs = { common: prefsCommon, fennec: prefsFennec, firefox: prefsFirefox };function getPrefs() {
   __cov_7jZiGznItpvingdxB37WRg.f['2']++;__cov_7jZiGznItpvingdxB37WRg.s['18']++;var app = (__cov_7jZiGznItpvingdxB37WRg.b['4'][0]++, arguments.length > 0) && (__cov_7jZiGznItpvingdxB37WRg.b['4'][1]++, arguments[0] !== undefined) ? (__cov_7jZiGznItpvingdxB37WRg.b['3'][0]++, arguments[0]) : (__cov_7jZiGznItpvingdxB37WRg.b['3'][1]++, 'firefox');__cov_7jZiGznItpvingdxB37WRg.s['19']++;var appPrefs = prefs[app];__cov_7jZiGznItpvingdxB37WRg.s['20']++;if (!appPrefs) {
      __cov_7jZiGznItpvingdxB37WRg.b['5'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['21']++;throw new _errors.WebExtError('Unsupported application: ' + app);
   } else {
      __cov_7jZiGznItpvingdxB37WRg.b['5'][1]++;
   }__cov_7jZiGznItpvingdxB37WRg.s['22']++;return (0, _extends3.default)({}, prefsCommon, appPrefs);
}function coerceCLICustomPreference(cliPrefs) {
   __cov_7jZiGznItpvingdxB37WRg.f['3']++;__cov_7jZiGznItpvingdxB37WRg.s['24']++;var customPrefs = {};__cov_7jZiGznItpvingdxB37WRg.s['25']++;if (!Array.isArray(cliPrefs)) {
      __cov_7jZiGznItpvingdxB37WRg.b['6'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['26']++;cliPrefs = [cliPrefs];
   } else {
      __cov_7jZiGznItpvingdxB37WRg.b['6'][1]++;
   }__cov_7jZiGznItpvingdxB37WRg.s['27']++;var _iteratorNormalCompletion = true;__cov_7jZiGznItpvingdxB37WRg.s['28']++;var _didIteratorError = false;__cov_7jZiGznItpvingdxB37WRg.s['29']++;var _iteratorError = undefined;__cov_7jZiGznItpvingdxB37WRg.s['30']++;try {
      __cov_7jZiGznItpvingdxB37WRg.s['31']++;for (var _iterator = cliPrefs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
         __cov_7jZiGznItpvingdxB37WRg.s['32']++;var pref = _step.value;__cov_7jZiGznItpvingdxB37WRg.s['33']++;var prefsAry = pref.split('=');__cov_7jZiGznItpvingdxB37WRg.s['34']++;if (prefsAry.length < 2) {
            __cov_7jZiGznItpvingdxB37WRg.b['7'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['35']++;throw new _errors.UsageError('Incomplete custom preference: "' + pref + '". ' + 'Syntax expected: "prefname=prefvalue".');
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['7'][1]++;
         }__cov_7jZiGznItpvingdxB37WRg.s['36']++;var _key = prefsAry[0];__cov_7jZiGznItpvingdxB37WRg.s['37']++;var value = prefsAry.slice(1).join('=');__cov_7jZiGznItpvingdxB37WRg.s['38']++;if (/[^\w{@}.-]/.test(_key)) {
            __cov_7jZiGznItpvingdxB37WRg.b['8'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['39']++;throw new _errors.UsageError('Invalid custom preference name: ' + _key);
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['8'][1]++;
         }__cov_7jZiGznItpvingdxB37WRg.s['40']++;if (value === '' + parseInt(value)) {
            __cov_7jZiGznItpvingdxB37WRg.b['9'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['41']++;value = parseInt(value, 10);
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['9'][1]++;__cov_7jZiGznItpvingdxB37WRg.s['42']++;if ((__cov_7jZiGznItpvingdxB37WRg.b['11'][0]++, value === 'true') || (__cov_7jZiGznItpvingdxB37WRg.b['11'][1]++, value === 'false')) {
               __cov_7jZiGznItpvingdxB37WRg.b['10'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['43']++;value = value === 'true';
            } else {
               __cov_7jZiGznItpvingdxB37WRg.b['10'][1]++;
            }
         }__cov_7jZiGznItpvingdxB37WRg.s['44']++;if (nonOverridablePreferences.includes(_key)) {
            __cov_7jZiGznItpvingdxB37WRg.b['12'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['45']++;log.warn('\'' + _key + '\' preference cannot be customized.');__cov_7jZiGznItpvingdxB37WRg.s['46']++;continue;
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['12'][1]++;
         }__cov_7jZiGznItpvingdxB37WRg.s['47']++;customPrefs['' + _key] = value;
      }
   } catch (err) {
      __cov_7jZiGznItpvingdxB37WRg.s['48']++;_didIteratorError = true;__cov_7jZiGznItpvingdxB37WRg.s['49']++;_iteratorError = err;
   } finally {
      __cov_7jZiGznItpvingdxB37WRg.s['50']++;try {
         __cov_7jZiGznItpvingdxB37WRg.s['51']++;if ((__cov_7jZiGznItpvingdxB37WRg.b['14'][0]++, !_iteratorNormalCompletion) && (__cov_7jZiGznItpvingdxB37WRg.b['14'][1]++, _iterator.return)) {
            __cov_7jZiGznItpvingdxB37WRg.b['13'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['52']++;_iterator.return();
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['13'][1]++;
         }
      } finally {
         __cov_7jZiGznItpvingdxB37WRg.s['53']++;if (_didIteratorError) {
            __cov_7jZiGznItpvingdxB37WRg.b['15'][0]++;__cov_7jZiGznItpvingdxB37WRg.s['54']++;throw _iteratorError;
         } else {
            __cov_7jZiGznItpvingdxB37WRg.b['15'][1]++;
         }
      }
   }__cov_7jZiGznItpvingdxB37WRg.s['55']++;return customPrefs;
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/firefox/preferences.js"))

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_ADUazf4OOrA8zV9fdpS1wg = Function('return this')();
if (!__cov_ADUazf4OOrA8zV9fdpS1wg.__coverage__) {
   __cov_ADUazf4OOrA8zV9fdpS1wg.__coverage__ = {};
}
__cov_ADUazf4OOrA8zV9fdpS1wg = __cov_ADUazf4OOrA8zV9fdpS1wg.__coverage__;
if (!__cov_ADUazf4OOrA8zV9fdpS1wg['/home/travis/build/mozilla/web-ext/src/util/artifacts.js']) {
   __cov_ADUazf4OOrA8zV9fdpS1wg['/home/travis/build/mozilla/web-ext/src/util/artifacts.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/artifacts.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 1, "73": 0, "74": 0, "75": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_callee", "line": 16, "loc": { "start": { "line": 16, "column": 7 }, "end": { "line": null, "column": null } } }, "3": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "prepareArtifactsDir", "line": 16, "loc": { "start": { "line": 16, "column": 22 }, "end": { "line": null, "column": null } } }, "5": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 16, "column": 7 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 18, "column": 67 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 21, "column": 24 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 16, "column": 7 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 22, "column": 9 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 23, "column": 12 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 28, "column": 12 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 30, "column": 10 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 31, "column": 14 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "35": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 39, "column": 8 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 41, "column": 12 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 44, "column": 15 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 47, "column": 12 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 48, "column": 14 }, "end": { "line": null, "column": null } }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 50, "column": 12 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 52, "column": 16 }, "end": { "line": null, "column": null } }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "60": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "61": { "start": { "line": 64, "column": 9 }, "end": { "line": null, "column": null } }, "62": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "63": { "start": { "line": 16, "column": 22 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "66": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "69": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "70": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "71": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "73": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "74": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 18, "type": "cond-expr", "locations": [{ "start": { "line": 18, "column": 67 }, "end": { "line": 18, "column": 67 } }, { "start": { "line": 18, "column": 67 }, "end": { "line": 16, "column": 7 } }] }, "2": { "line": 18, "type": "binary-expr", "locations": [{ "start": { "line": 18, "column": 67 }, "end": { "line": 18, "column": 67 } }, { "start": { "line": 18, "column": 67 }, "end": { "line": 18, "column": 67 } }] }, "3": { "line": 18, "type": "cond-expr", "locations": [{ "start": { "line": 18, "column": 17 }, "end": { "line": 16, "column": 7 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 22, "type": "if", "locations": [{ "start": { "line": 22, "column": 9 }, "end": { "line": 22, "column": 9 } }, { "start": { "line": 22, "column": 9 }, "end": { "line": 22, "column": 9 } }] }, "6": { "line": 30, "type": "if", "locations": [{ "start": { "line": 30, "column": 10 }, "end": { "line": 30, "column": 10 } }, { "start": { "line": 30, "column": 10 }, "end": { "line": 30, "column": 10 } }] }, "7": { "line": 39, "type": "if", "locations": [{ "start": { "line": 39, "column": 8 }, "end": { "line": 39, "column": 8 } }, { "start": { "line": 39, "column": 8 }, "end": { "line": 39, "column": 8 } }] }, "8": { "line": 44, "type": "if", "locations": [{ "start": { "line": 44, "column": 15 }, "end": { "line": 44, "column": 15 } }, { "start": { "line": 44, "column": 15 }, "end": { "line": 44, "column": 15 } }] }, "9": { "line": 50, "type": "if", "locations": [{ "start": { "line": 50, "column": 12 }, "end": { "line": 50, "column": 12 } }, { "start": { "line": 50, "column": 12 }, "end": { "line": 50, "column": 12 } }] }, "10": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "11": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import {fs} from 'mz';", "import mkdirp from 'mkdirp';", "import promisify from 'es6-promisify';", "", "import {UsageError, isErrorWithCode} from '../errors';", "import {createLogger} from './logger';", "", "const log = createLogger(__filename);", "const defaultAsyncMkdirp = promisify(mkdirp);", "", "type PrepareArtifactsDirOptions = {", "  asyncMkdirp?: typeof defaultAsyncMkdirp,", "}", "", "export async function prepareArtifactsDir(", "  artifactsDir: string,", "  {asyncMkdirp = defaultAsyncMkdirp}: PrepareArtifactsDirOptions = {},", "): Promise<string> {", "  try {", "    const stats = await fs.stat(artifactsDir);", "    if (!stats.isDirectory()) {", "      throw new UsageError(", "        `--artifacts-dir=\"${artifactsDir}\" exists but it is not a directory.`);", "    }", "    // If the artifactsDir already exists, check that we have the write permissions on it.", "    try {", "      await fs.access(artifactsDir, fs.W_OK);", "    } catch (accessErr) {", "      if (isErrorWithCode('EACCES', accessErr)) {", "        throw new UsageError(", "          `--artifacts-dir=\"${artifactsDir}\" exists but the user lacks ` +", "          'permissions on it.');", "      } else {", "        throw accessErr;", "      }", "    }", "  } catch (error) {", "    if (isErrorWithCode('EACCES', error)) {", "      // Handle errors when the artifactsDir cannot be accessed.", "      throw new UsageError(", "        `Cannot access --artifacts-dir=\"${artifactsDir}\" because the user ` +", "        `lacks permissions: ${error}`);", "    } else if (isErrorWithCode('ENOENT', error)) {", "      // Create the artifact dir if it doesn't exist yet.", "      try {", "        log.debug(`Creating artifacts directory: ${artifactsDir}`);", "        await asyncMkdirp(artifactsDir);", "      } catch (mkdirErr) {", "        if (isErrorWithCode('EACCES', mkdirErr)) {", "          // Handle errors when the artifactsDir cannot be created for lack of permissions.", "          throw new UsageError(", "            `Cannot create --artifacts-dir=\"${artifactsDir}\" because the ` +", "            `user lacks permissions: ${mkdirErr}`);", "        } else {", "          throw mkdirErr;", "        }", "      }", "    } else {", "      throw error;", "    }", "  }", "", "  return artifactsDir;", "}", ""] };
}
__cov_ADUazf4OOrA8zV9fdpS1wg = __cov_ADUazf4OOrA8zV9fdpS1wg['/home/travis/build/mozilla/web-ext/src/util/artifacts.js'];
__cov_ADUazf4OOrA8zV9fdpS1wg.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_ADUazf4OOrA8zV9fdpS1wg.s['2']++;exports.prepareArtifactsDir = undefined;__cov_ADUazf4OOrA8zV9fdpS1wg.s['3']++;var _regenerator = __webpack_require__(8);__cov_ADUazf4OOrA8zV9fdpS1wg.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_ADUazf4OOrA8zV9fdpS1wg.s['5']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_ADUazf4OOrA8zV9fdpS1wg.s['6']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_ADUazf4OOrA8zV9fdpS1wg.s['7']++;var prepareArtifactsDir = exports.prepareArtifactsDir = function () {
   __cov_ADUazf4OOrA8zV9fdpS1wg.f['1']++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['8']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(artifactsDir) {
      __cov_ADUazf4OOrA8zV9fdpS1wg.f['2']++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['9']++;var _ref2 = (__cov_ADUazf4OOrA8zV9fdpS1wg.b['2'][0]++, arguments.length > 1) && (__cov_ADUazf4OOrA8zV9fdpS1wg.b['2'][1]++, arguments[1] !== undefined) ? (__cov_ADUazf4OOrA8zV9fdpS1wg.b['1'][0]++, arguments[1]) : (__cov_ADUazf4OOrA8zV9fdpS1wg.b['1'][1]++, {}),
          _ref2$asyncMkdirp = _ref2.asyncMkdirp,
          asyncMkdirp = _ref2$asyncMkdirp === undefined ? (__cov_ADUazf4OOrA8zV9fdpS1wg.b['3'][0]++, defaultAsyncMkdirp) : (__cov_ADUazf4OOrA8zV9fdpS1wg.b['3'][1]++, _ref2$asyncMkdirp);__cov_ADUazf4OOrA8zV9fdpS1wg.s['10']++;var stats;__cov_ADUazf4OOrA8zV9fdpS1wg.s['11']++;return _regenerator2.default.wrap(function _callee$(_context) {
         __cov_ADUazf4OOrA8zV9fdpS1wg.f['3']++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['12']++;while (1) {
            __cov_ADUazf4OOrA8zV9fdpS1wg.s['13']++;switch (_context.prev = _context.next) {case 0:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['14']++;_context.prev = 0;__cov_ADUazf4OOrA8zV9fdpS1wg.s['15']++;_context.next = 3;__cov_ADUazf4OOrA8zV9fdpS1wg.s['16']++;return _mz.fs.stat(artifactsDir);case 3:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][1]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['17']++;stats = _context.sent;__cov_ADUazf4OOrA8zV9fdpS1wg.s['18']++;if (stats.isDirectory()) {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['5'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['19']++;_context.next = 6;__cov_ADUazf4OOrA8zV9fdpS1wg.s['20']++;break;
                  } else {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['5'][1]++;
                  }__cov_ADUazf4OOrA8zV9fdpS1wg.s['21']++;throw new _errors.UsageError('--artifacts-dir="' + artifactsDir + '" exists but it is not a directory.');case 6:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][2]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['22']++;_context.prev = 6;__cov_ADUazf4OOrA8zV9fdpS1wg.s['23']++;_context.next = 9;__cov_ADUazf4OOrA8zV9fdpS1wg.s['24']++;return _mz.fs.access(artifactsDir, _mz.fs.W_OK);case 9:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][3]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['25']++;_context.next = 18;__cov_ADUazf4OOrA8zV9fdpS1wg.s['26']++;break;case 11:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][4]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['27']++;_context.prev = 11;__cov_ADUazf4OOrA8zV9fdpS1wg.s['28']++;_context.t0 = _context['catch'](6);__cov_ADUazf4OOrA8zV9fdpS1wg.s['29']++;if (!(0, _errors.isErrorWithCode)('EACCES', _context.t0)) {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['6'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['30']++;_context.next = 17;__cov_ADUazf4OOrA8zV9fdpS1wg.s['31']++;break;
                  } else {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['6'][1]++;
                  }__cov_ADUazf4OOrA8zV9fdpS1wg.s['32']++;throw new _errors.UsageError('--artifacts-dir="' + artifactsDir + '" exists but the user lacks ' + 'permissions on it.');case 17:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][5]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['33']++;throw _context.t0;case 18:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][6]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['34']++;_context.next = 43;__cov_ADUazf4OOrA8zV9fdpS1wg.s['35']++;break;case 20:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][7]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['36']++;_context.prev = 20;__cov_ADUazf4OOrA8zV9fdpS1wg.s['37']++;_context.t1 = _context['catch'](0);__cov_ADUazf4OOrA8zV9fdpS1wg.s['38']++;if (!(0, _errors.isErrorWithCode)('EACCES', _context.t1)) {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['7'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['39']++;_context.next = 26;__cov_ADUazf4OOrA8zV9fdpS1wg.s['40']++;break;
                  } else {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['7'][1]++;
                  }__cov_ADUazf4OOrA8zV9fdpS1wg.s['41']++;throw new _errors.UsageError('Cannot access --artifacts-dir="' + artifactsDir + '" because the user ' + ('lacks permissions: ' + _context.t1));case 26:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][8]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['42']++;if (!(0, _errors.isErrorWithCode)('ENOENT', _context.t1)) {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['8'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['43']++;_context.next = 42;__cov_ADUazf4OOrA8zV9fdpS1wg.s['44']++;break;
                  } else {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['8'][1]++;
                  }__cov_ADUazf4OOrA8zV9fdpS1wg.s['45']++;_context.prev = 27;__cov_ADUazf4OOrA8zV9fdpS1wg.s['46']++;log.debug('Creating artifacts directory: ' + artifactsDir);__cov_ADUazf4OOrA8zV9fdpS1wg.s['47']++;_context.next = 31;__cov_ADUazf4OOrA8zV9fdpS1wg.s['48']++;return asyncMkdirp(artifactsDir);case 31:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][9]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['49']++;_context.next = 40;__cov_ADUazf4OOrA8zV9fdpS1wg.s['50']++;break;case 33:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][10]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['51']++;_context.prev = 33;__cov_ADUazf4OOrA8zV9fdpS1wg.s['52']++;_context.t2 = _context['catch'](27);__cov_ADUazf4OOrA8zV9fdpS1wg.s['53']++;if (!(0, _errors.isErrorWithCode)('EACCES', _context.t2)) {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['9'][0]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['54']++;_context.next = 39;__cov_ADUazf4OOrA8zV9fdpS1wg.s['55']++;break;
                  } else {
                     __cov_ADUazf4OOrA8zV9fdpS1wg.b['9'][1]++;
                  }__cov_ADUazf4OOrA8zV9fdpS1wg.s['56']++;throw new _errors.UsageError('Cannot create --artifacts-dir="' + artifactsDir + '" because the ' + ('user lacks permissions: ' + _context.t2));case 39:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][11]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['57']++;throw _context.t2;case 40:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][12]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['58']++;_context.next = 43;__cov_ADUazf4OOrA8zV9fdpS1wg.s['59']++;break;case 42:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][13]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['60']++;throw _context.t1;case 43:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][14]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['61']++;return _context.abrupt('return', artifactsDir);case 44:
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][15]++;case 'end':
                  __cov_ADUazf4OOrA8zV9fdpS1wg.b['4'][16]++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['62']++;return _context.stop();}
         }
      }, _callee, this, [[0, 20], [6, 11], [27, 33]]);
   }));__cov_ADUazf4OOrA8zV9fdpS1wg.s['63']++;return function prepareArtifactsDir(_x) {
      __cov_ADUazf4OOrA8zV9fdpS1wg.f['4']++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['64']++;return _ref.apply(this, arguments);
   };
}();__cov_ADUazf4OOrA8zV9fdpS1wg.s['65']++;var _mz = __webpack_require__(9);__cov_ADUazf4OOrA8zV9fdpS1wg.s['66']++;var _mkdirp = __webpack_require__(187);__cov_ADUazf4OOrA8zV9fdpS1wg.s['67']++;var _mkdirp2 = _interopRequireDefault(_mkdirp);__cov_ADUazf4OOrA8zV9fdpS1wg.s['68']++;var _es6Promisify = __webpack_require__(28);__cov_ADUazf4OOrA8zV9fdpS1wg.s['69']++;var _es6Promisify2 = _interopRequireDefault(_es6Promisify);__cov_ADUazf4OOrA8zV9fdpS1wg.s['70']++;var _errors = __webpack_require__(2);__cov_ADUazf4OOrA8zV9fdpS1wg.s['71']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_ADUazf4OOrA8zV9fdpS1wg.f['5']++;__cov_ADUazf4OOrA8zV9fdpS1wg.s['73']++;return (__cov_ADUazf4OOrA8zV9fdpS1wg.b['11'][0]++, obj) && (__cov_ADUazf4OOrA8zV9fdpS1wg.b['11'][1]++, obj.__esModule) ? (__cov_ADUazf4OOrA8zV9fdpS1wg.b['10'][0]++, obj) : (__cov_ADUazf4OOrA8zV9fdpS1wg.b['10'][1]++, { default: obj });
}__cov_ADUazf4OOrA8zV9fdpS1wg.s['74']++;var log = (0, _logger.createLogger)(__filename);__cov_ADUazf4OOrA8zV9fdpS1wg.s['75']++;var defaultAsyncMkdirp = (0, _es6Promisify2.default)(_mkdirp2.default);
/* WEBPACK VAR INJECTION */}.call(exports, "src/util/artifacts.js"))

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_svSE6mF4bCuFPdf_fUxNYA = Function('return this')();
if (!__cov_svSE6mF4bCuFPdf_fUxNYA.__coverage__) {
   __cov_svSE6mF4bCuFPdf_fUxNYA.__coverage__ = {};
}
__cov_svSE6mF4bCuFPdf_fUxNYA = __cov_svSE6mF4bCuFPdf_fUxNYA.__coverage__;
if (!__cov_svSE6mF4bCuFPdf_fUxNYA['/home/travis/build/mozilla/web-ext/src/util/desktop-notifier.js']) {
   __cov_svSE6mF4bCuFPdf_fUxNYA['/home/travis/build/mozilla/web-ext/src/util/desktop-notifier.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/desktop-notifier.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 1, "7": 0, "8": 0, "9": 1, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "showDesktopNotification", "line": 20, "loc": { "start": { "line": 20, "column": 7 }, "end": { "line": 28, "column": 17 } } }, "3": { "name": "(anonymous_3)", "line": 30, "loc": { "start": { "line": 30, "column": 21 }, "end": { "line": 30, "column": 42 } } }, "4": { "name": "(anonymous_4)", "line": 31, "loc": { "start": { "line": 31, "column": 44 }, "end": { "line": 31, "column": 58 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 20, "column": 16 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 20, "column": 7 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 22, "column": 4 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 27, "column": 35 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 30, "column": 9 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 31, "column": 13 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 32, "column": 10 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 33, "column": 12 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 35, "column": 15 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 27, "type": "cond-expr", "locations": [{ "start": { "line": 27, "column": 35 }, "end": { "line": 27, "column": 35 } }, { "start": { "line": 27, "column": 35 }, "end": { "line": 28, "column": 17 } }] }, "4": { "line": 27, "type": "binary-expr", "locations": [{ "start": { "line": 27, "column": 35 }, "end": { "line": 27, "column": 35 } }, { "start": { "line": 27, "column": 35 }, "end": { "line": 27, "column": 35 } }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 26, "type": "cond-expr", "locations": [{ "start": { "line": 26, "column": 10 }, "end": { "line": 28, "column": 17 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 32, "type": "if", "locations": [{ "start": { "line": 32, "column": 10 }, "end": { "line": 32, "column": 10 } }, { "start": { "line": 32, "column": 10 }, "end": { "line": 32, "column": 10 } }] } }, "code": ["/* @flow */", "import defaultNotifier from 'node-notifier';", "", "import {createLogger} from './logger';", "import type {Logger} from './logger';", "", "const defaultLog = createLogger(__filename);", "", "export type DesktopNotificationsParams = {|", "  title: string,", "  message: string,", "  icon?: string,", "|};", "", "export type DesktopNotificationsOptions = {|", "  notifier?: typeof defaultNotifier,", "  log?: Logger,", "|};", "", "export function showDesktopNotification(", "  {", "    title, message, icon,", "  }: DesktopNotificationsParams,", "  {", "    notifier = defaultNotifier,", "    log = defaultLog,", "  }: DesktopNotificationsOptions = {}", "): Promise<void> {", "", "  return new Promise((resolve, reject) => {", "    notifier.notify({title, message, icon}, (err, res) => {", "      if (err) {", "        log.debug(`Desktop notifier error: ${err.message},` +", "                 ` response: ${res}`);", "        reject(err);", "      } else {", "        resolve();", "      }", "    });", "  });", "}", ""] };
}
__cov_svSE6mF4bCuFPdf_fUxNYA = __cov_svSE6mF4bCuFPdf_fUxNYA['/home/travis/build/mozilla/web-ext/src/util/desktop-notifier.js'];
__cov_svSE6mF4bCuFPdf_fUxNYA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_svSE6mF4bCuFPdf_fUxNYA.s['2']++;exports.showDesktopNotification = showDesktopNotification;__cov_svSE6mF4bCuFPdf_fUxNYA.s['3']++;var _nodeNotifier = __webpack_require__(189);__cov_svSE6mF4bCuFPdf_fUxNYA.s['4']++;var _nodeNotifier2 = _interopRequireDefault(_nodeNotifier);__cov_svSE6mF4bCuFPdf_fUxNYA.s['5']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_svSE6mF4bCuFPdf_fUxNYA.f['1']++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['7']++;return (__cov_svSE6mF4bCuFPdf_fUxNYA.b['2'][0]++, obj) && (__cov_svSE6mF4bCuFPdf_fUxNYA.b['2'][1]++, obj.__esModule) ? (__cov_svSE6mF4bCuFPdf_fUxNYA.b['1'][0]++, obj) : (__cov_svSE6mF4bCuFPdf_fUxNYA.b['1'][1]++, { default: obj });
}__cov_svSE6mF4bCuFPdf_fUxNYA.s['8']++;var defaultLog = (0, _logger.createLogger)(__filename);function showDesktopNotification(_ref) {
   __cov_svSE6mF4bCuFPdf_fUxNYA.f['2']++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['10']++;var title = _ref.title,
       message = _ref.message,
       icon = _ref.icon;__cov_svSE6mF4bCuFPdf_fUxNYA.s['11']++;var _ref2 = (__cov_svSE6mF4bCuFPdf_fUxNYA.b['4'][0]++, arguments.length > 1) && (__cov_svSE6mF4bCuFPdf_fUxNYA.b['4'][1]++, arguments[1] !== undefined) ? (__cov_svSE6mF4bCuFPdf_fUxNYA.b['3'][0]++, arguments[1]) : (__cov_svSE6mF4bCuFPdf_fUxNYA.b['3'][1]++, {}),
       _ref2$notifier = _ref2.notifier,
       notifier = _ref2$notifier === undefined ? (__cov_svSE6mF4bCuFPdf_fUxNYA.b['5'][0]++, _nodeNotifier2.default) : (__cov_svSE6mF4bCuFPdf_fUxNYA.b['5'][1]++, _ref2$notifier),
       _ref2$log = _ref2.log,
       log = _ref2$log === undefined ? (__cov_svSE6mF4bCuFPdf_fUxNYA.b['6'][0]++, defaultLog) : (__cov_svSE6mF4bCuFPdf_fUxNYA.b['6'][1]++, _ref2$log);__cov_svSE6mF4bCuFPdf_fUxNYA.s['12']++;return new Promise(function (resolve, reject) {
      __cov_svSE6mF4bCuFPdf_fUxNYA.f['3']++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['13']++;notifier.notify({ title: title, message: message, icon: icon }, function (err, res) {
         __cov_svSE6mF4bCuFPdf_fUxNYA.f['4']++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['14']++;if (err) {
            __cov_svSE6mF4bCuFPdf_fUxNYA.b['7'][0]++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['15']++;log.debug('Desktop notifier error: ' + err.message + ',' + (' response: ' + res));__cov_svSE6mF4bCuFPdf_fUxNYA.s['16']++;reject(err);
         } else {
            __cov_svSE6mF4bCuFPdf_fUxNYA.b['7'][1]++;__cov_svSE6mF4bCuFPdf_fUxNYA.s['17']++;resolve();
         }
      });
   });
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/util/desktop-notifier.js"))

/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_xmUtNB9dU2JWc5d0RIiHlA = Function('return this')();
if (!__cov_xmUtNB9dU2JWc5d0RIiHlA.__coverage__) {
   __cov_xmUtNB9dU2JWc5d0RIiHlA.__coverage__ = {};
}
__cov_xmUtNB9dU2JWc5d0RIiHlA = __cov_xmUtNB9dU2JWc5d0RIiHlA.__coverage__;
if (!__cov_xmUtNB9dU2JWc5d0RIiHlA['/home/travis/build/mozilla/web-ext/src/watcher.js']) {
   __cov_xmUtNB9dU2JWc5d0RIiHlA['/home/travis/build/mozilla/web-ext/src/watcher.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/watcher.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 1, "10": 0, "11": 0, "12": 1, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 1, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "onSourceChange", "line": 32, "loc": { "start": { "line": 32, "column": 15 }, "end": { "line": 34, "column": 13 } } }, "3": { "name": "(anonymous_3)", "line": 41, "loc": { "start": { "line": 41, "column": 23 }, "end": { "line": 41, "column": 37 } } }, "4": { "name": "(anonymous_4)", "line": 50, "loc": { "start": { "line": 50, "column": 23 }, "end": { "line": null, "column": null } } }, "5": { "name": "proxyFileChanges", "line": 64, "loc": { "start": { "line": 64, "column": 7 }, "end": { "line": 66, "column": 8 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 32, "column": 24 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 64, "column": 16 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 32, "column": 15 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 33, "column": 3 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 36, "column": 8 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 38, "column": 8 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 39, "column": 13 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 41, "column": 10 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 42, "column": 21 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 45, "column": 6 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 46, "column": 10 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 50, "column": 10 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 50, "column": 29 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 51, "column": 9 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 64, "column": 7 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 65, "column": 3 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 67, "column": 6 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 68, "column": 8 }, "end": { "line": null, "column": null } }, "28": { "start": { "line": 70, "column": 8 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 71, "column": 8 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 67, "type": "if", "locations": [{ "start": { "line": 67, "column": 6 }, "end": { "line": 67, "column": 6 } }, { "start": { "line": 67, "column": 6 }, "end": { "line": 67, "column": 6 } }] }, "4": { "line": 67, "type": "binary-expr", "locations": [{ "start": { "line": 67, "column": 6 }, "end": { "line": 67, "column": 6 } }, { "start": { "line": 67, "column": 46 }, "end": { "line": 67, "column": 2 } }] } }, "code": ["/* @flow */", "import Watchpack from 'watchpack';", "import debounce from 'debounce';", "", "import {createLogger} from './util/logger';", "", "", "const log = createLogger(__filename);", "", "", "// onSourceChange types and implementation", "", "export type ShouldWatchFn = (filePath: string) => boolean;", "", "export type OnChangeFn = () => any;", "", "export type OnSourceChangeParams = {|", "  sourceDir: string,", "  artifactsDir: string,", "  onChange: OnChangeFn,", "  shouldWatchFile: ShouldWatchFn,", "|};", "", "// NOTE: this fix an issue with flow and default exports (which currently", "// lose their type signatures) by explicitly declare the default export", "// signature. Reference: https://github.com/facebook/flow/issues/449", "// eslint-disable-next-line no-shadow", "declare function exports(params: OnSourceChangeParams): Watchpack;", "", "export type OnSourceChangeFn = (params: OnSourceChangeParams) => Watchpack;", "", "export default function onSourceChange(", "  {sourceDir, artifactsDir, onChange, shouldWatchFile}: OnSourceChangeParams", "): Watchpack {", "  // TODO: For network disks, we would need to add {poll: true}.", "  const watcher = new Watchpack();", "", "  const executeImmediately = true;", "  onChange = debounce(onChange, 1000, executeImmediately);", "", "  watcher.on('change', (filePath) => {", "    proxyFileChanges({artifactsDir, onChange, filePath, shouldWatchFile});", "  });", "", "  log.debug(`Watching for file changes in ${sourceDir}`);", "  watcher.watch([], [sourceDir], Date.now());", "", "  // TODO: support interrupting the watcher on Windows.", "  // https://github.com/mozilla/web-ext/issues/225", "  process.on('SIGINT', () => watcher.close());", "  return watcher;", "}", "", "", "// proxyFileChanges types and implementation.", "", "export type ProxyFileChangesParams = {|", "  artifactsDir: string,", "  onChange: OnChangeFn,", "  filePath: string,", "  shouldWatchFile: ShouldWatchFn,", "|};", "", "export function proxyFileChanges(", "  {artifactsDir, onChange, filePath, shouldWatchFile}: ProxyFileChangesParams", "): void {", "  if (filePath.indexOf(artifactsDir) === 0 || !shouldWatchFile(filePath)) {", "    log.debug(`Ignoring change to: ${filePath}`);", "  } else {", "    log.debug(`Changed: ${filePath}`);", "    log.debug(`Last change detection: ${(new Date()).toTimeString()}`);", "    onChange();", "  }", "}", ""] };
}
__cov_xmUtNB9dU2JWc5d0RIiHlA = __cov_xmUtNB9dU2JWc5d0RIiHlA['/home/travis/build/mozilla/web-ext/src/watcher.js'];
__cov_xmUtNB9dU2JWc5d0RIiHlA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_xmUtNB9dU2JWc5d0RIiHlA.s['2']++;exports.default = onSourceChange;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['3']++;exports.proxyFileChanges = proxyFileChanges;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['4']++;var _watchpack = __webpack_require__(198);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['5']++;var _watchpack2 = _interopRequireDefault(_watchpack);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['6']++;var _debounce = __webpack_require__(182);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['7']++;var _debounce2 = _interopRequireDefault(_debounce);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['8']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_xmUtNB9dU2JWc5d0RIiHlA.f['1']++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['10']++;return (__cov_xmUtNB9dU2JWc5d0RIiHlA.b['2'][0]++, obj) && (__cov_xmUtNB9dU2JWc5d0RIiHlA.b['2'][1]++, obj.__esModule) ? (__cov_xmUtNB9dU2JWc5d0RIiHlA.b['1'][0]++, obj) : (__cov_xmUtNB9dU2JWc5d0RIiHlA.b['1'][1]++, { default: obj });
}__cov_xmUtNB9dU2JWc5d0RIiHlA.s['11']++;var log = (0, _logger.createLogger)(__filename);function onSourceChange(_ref) {
   __cov_xmUtNB9dU2JWc5d0RIiHlA.f['2']++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['13']++;var sourceDir = _ref.sourceDir,
       artifactsDir = _ref.artifactsDir,
       onChange = _ref.onChange,
       shouldWatchFile = _ref.shouldWatchFile;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['14']++;var watcher = new _watchpack2.default();__cov_xmUtNB9dU2JWc5d0RIiHlA.s['15']++;var executeImmediately = true;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['16']++;onChange = (0, _debounce2.default)(onChange, 1000, executeImmediately);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['17']++;watcher.on('change', function (filePath) {
      __cov_xmUtNB9dU2JWc5d0RIiHlA.f['3']++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['18']++;proxyFileChanges({ artifactsDir: artifactsDir, onChange: onChange, filePath: filePath, shouldWatchFile: shouldWatchFile });
   });__cov_xmUtNB9dU2JWc5d0RIiHlA.s['19']++;log.debug('Watching for file changes in ' + sourceDir);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['20']++;watcher.watch([], [sourceDir], Date.now());__cov_xmUtNB9dU2JWc5d0RIiHlA.s['21']++;process.on('SIGINT', function () {
      __cov_xmUtNB9dU2JWc5d0RIiHlA.f['4']++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['22']++;return watcher.close();
   });__cov_xmUtNB9dU2JWc5d0RIiHlA.s['23']++;return watcher;
}function proxyFileChanges(_ref2) {
   __cov_xmUtNB9dU2JWc5d0RIiHlA.f['5']++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['25']++;var artifactsDir = _ref2.artifactsDir,
       onChange = _ref2.onChange,
       filePath = _ref2.filePath,
       shouldWatchFile = _ref2.shouldWatchFile;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['26']++;if ((__cov_xmUtNB9dU2JWc5d0RIiHlA.b['4'][0]++, filePath.indexOf(artifactsDir) === 0) || (__cov_xmUtNB9dU2JWc5d0RIiHlA.b['4'][1]++, !shouldWatchFile(filePath))) {
      __cov_xmUtNB9dU2JWc5d0RIiHlA.b['3'][0]++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['27']++;log.debug('Ignoring change to: ' + filePath);
   } else {
      __cov_xmUtNB9dU2JWc5d0RIiHlA.b['3'][1]++;__cov_xmUtNB9dU2JWc5d0RIiHlA.s['28']++;log.debug('Changed: ' + filePath);__cov_xmUtNB9dU2JWc5d0RIiHlA.s['29']++;log.debug('Last change detection: ' + new Date().toTimeString());__cov_xmUtNB9dU2JWc5d0RIiHlA.s['30']++;onChange();
   }
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/watcher.js"))

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

exports.default = function (obj, keys) {
  var target = {};

  for (var i in obj) {
    if (keys.indexOf(i) >= 0) continue;
    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;
    target[i] = obj[i];
  }

  return target;
};

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _iterator = __webpack_require__(134);

var _iterator2 = _interopRequireDefault(_iterator);

var _symbol = __webpack_require__(133);

var _symbol2 = _interopRequireDefault(_symbol);

var _typeof = typeof _symbol2.default === "function" && typeof _iterator2.default === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj; };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = typeof _symbol2.default === "function" && _typeof(_iterator2.default) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof(obj);
} : function (obj) {
  return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof(obj);
};

/***/ }),
/* 53 */
/***/ (function(module, exports) {

module.exports = function(it){
  if(typeof it != 'function')throw TypeError(it + ' is not a function!');
  return it;
};

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

// getting tag from 19.1.3.6 Object.prototype.toString()
var cof = __webpack_require__(31)
  , TAG = __webpack_require__(11)('toStringTag')
  // ES3 wrong here
  , ARG = cof(function(){ return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function(it, key){
  try {
    return it[key];
  } catch(e){ /* empty */ }
};

module.exports = function(it){
  var O, T, B;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T
    // builtinTag case
    : ARG ? cof(O)
    // ES3 arguments fallback
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
};

/***/ }),
/* 55 */
/***/ (function(module, exports) {

// 7.2.1 RequireObjectCoercible(argument)
module.exports = function(it){
  if(it == undefined)throw TypeError("Can't call method on  " + it);
  return it;
};

/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(26)
  , document = __webpack_require__(13).document
  // in old IE typeof document.createElement is 'object'
  , is = isObject(document) && isObject(document.createElement);
module.exports = function(it){
  return is ? document.createElement(it) : {};
};

/***/ }),
/* 57 */
/***/ (function(module, exports) {

// IE 8- don't enum bug keys
module.exports = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');

/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject    = __webpack_require__(17)
  , dPs         = __webpack_require__(160)
  , enumBugKeys = __webpack_require__(57)
  , IE_PROTO    = __webpack_require__(60)('IE_PROTO')
  , Empty       = function(){ /* empty */ }
  , PROTOTYPE   = 'prototype';

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function(){
  // Thrash, waste and sodomy: IE GC bug
  var iframe = __webpack_require__(56)('iframe')
    , i      = enumBugKeys.length
    , lt     = '<'
    , gt     = '>'
    , iframeDocument;
  iframe.style.display = 'none';
  __webpack_require__(80).appendChild(iframe);
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url
  // createDict = iframe.contentWindow.Object;
  // html.removeChild(iframe);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];
  return createDict();
};

module.exports = Object.create || function create(O, Properties){
  var result;
  if(O !== null){
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty;
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : dPs(result, Properties);
};


/***/ }),
/* 59 */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;

/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(61)('keys')
  , uid    = __webpack_require__(43);
module.exports = function(key){
  return shared[key] || (shared[key] = uid(key));
};

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(13)
  , SHARED = '__core-js_shared__'
  , store  = global[SHARED] || (global[SHARED] = {});
module.exports = function(key){
  return store[key] || (store[key] = {});
};

/***/ }),
/* 62 */
/***/ (function(module, exports) {

// 7.1.4 ToInteger
var ceil  = Math.ceil
  , floor = Math.floor;
module.exports = function(it){
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject = __webpack_require__(26);
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function(it, S){
  if(!isObject(it))return it;
  var fn, val;
  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;
  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;
  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;
  throw TypeError("Can't convert object to primitive value");
};

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

var global         = __webpack_require__(13)
  , core           = __webpack_require__(12)
  , LIBRARY        = __webpack_require__(39)
  , wksExt         = __webpack_require__(65)
  , defineProperty = __webpack_require__(19).f;
module.exports = function(name){
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});
};

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

exports.f = __webpack_require__(11);

/***/ }),
/* 66 */
/***/ (function(module, exports) {

module.exports = require("deepcopy");

/***/ }),
/* 67 */
/***/ (function(module, exports) {

module.exports = require("event-to-promise");

/***/ }),
/* 68 */
/***/ (function(module, exports) {

module.exports = require("fs");

/***/ }),
/* 69 */
/***/ (function(module, exports) {

module.exports = require("tty");

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_jNs4V$ukatMZ_8qTyByjuw = Function('return this')();
if (!__cov_jNs4V$ukatMZ_8qTyByjuw.__coverage__) {
   __cov_jNs4V$ukatMZ_8qTyByjuw.__coverage__ = {};
}
__cov_jNs4V$ukatMZ_8qTyByjuw = __cov_jNs4V$ukatMZ_8qTyByjuw.__coverage__;
if (!__cov_jNs4V$ukatMZ_8qTyByjuw['/home/travis/build/mozilla/web-ext/src/cmd/docs.js']) {
   __cov_jNs4V$ukatMZ_8qTyByjuw['/home/travis/build/mozilla/web-ext/src/cmd/docs.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/docs.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 1, "8": 0, "9": 0, "10": 0, "11": 1, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "docs", "line": 16, "loc": { "start": { "line": 16, "column": 15 }, "end": { "line": 18, "column": 2 } } }, "3": { "name": "(anonymous_3)", "line": 19, "loc": { "start": { "line": 19, "column": 21 }, "end": { "line": 19, "column": 42 } } }, "4": { "name": "(anonymous_4)", "line": 20, "loc": { "start": { "line": 20, "column": 17 }, "end": { "line": 20, "column": 28 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 16, "column": 24 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 13, "column": 7 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 16, "column": 15 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 17, "column": 62 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 19, "column": 9 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 20, "column": 12 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 21, "column": 10 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 22, "column": 12 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 23, "column": 15 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 17, "type": "cond-expr", "locations": [{ "start": { "line": 17, "column": 62 }, "end": { "line": 17, "column": 62 } }, { "start": { "line": 17, "column": 62 }, "end": { "line": 18, "column": 2 } }] }, "4": { "line": 17, "type": "binary-expr", "locations": [{ "start": { "line": 17, "column": 62 }, "end": { "line": 17, "column": 62 } }, { "start": { "line": 17, "column": 62 }, "end": { "line": 17, "column": 62 } }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 21, "type": "if", "locations": [{ "start": { "line": 21, "column": 10 }, "end": { "line": 21, "column": 10 } }, { "start": { "line": 21, "column": 10 }, "end": { "line": 21, "column": 10 } }] } }, "code": ["/* @flow */", "import defaultUrlOpener from 'open';", "", "import {createLogger} from '../util/logger';", "", "const log = createLogger(__filename);", "", "type DocsOptions = {", "  openUrl?: typeof defaultUrlOpener,", "  shouldExitProgram?: boolean,", "}", "", "export const url = 'https://developer.mozilla.org/en-US/Add-ons' +", "  '/WebExtensions/Getting_started_with_web-ext';", "", "export default function docs(", "  params: Object, {openUrl = defaultUrlOpener}: DocsOptions = {}", ") {", "  return new Promise((resolve, reject) => {", "    openUrl(url, (error) => {", "      if (error) {", "        log.debug(`Encountered an error while opening URL ${url}`, error);", "        reject(error);", "      } else {", "        resolve();", "      }", "    });", "  });", "}", ""] };
}
__cov_jNs4V$ukatMZ_8qTyByjuw = __cov_jNs4V$ukatMZ_8qTyByjuw['/home/travis/build/mozilla/web-ext/src/cmd/docs.js'];
__cov_jNs4V$ukatMZ_8qTyByjuw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_jNs4V$ukatMZ_8qTyByjuw.s['2']++;exports.url = undefined;__cov_jNs4V$ukatMZ_8qTyByjuw.s['3']++;exports.default = docs;__cov_jNs4V$ukatMZ_8qTyByjuw.s['4']++;var _open = __webpack_require__(190);__cov_jNs4V$ukatMZ_8qTyByjuw.s['5']++;var _open2 = _interopRequireDefault(_open);__cov_jNs4V$ukatMZ_8qTyByjuw.s['6']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_jNs4V$ukatMZ_8qTyByjuw.f['1']++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['8']++;return (__cov_jNs4V$ukatMZ_8qTyByjuw.b['2'][0]++, obj) && (__cov_jNs4V$ukatMZ_8qTyByjuw.b['2'][1]++, obj.__esModule) ? (__cov_jNs4V$ukatMZ_8qTyByjuw.b['1'][0]++, obj) : (__cov_jNs4V$ukatMZ_8qTyByjuw.b['1'][1]++, { default: obj });
}__cov_jNs4V$ukatMZ_8qTyByjuw.s['9']++;var log = (0, _logger.createLogger)(__filename);__cov_jNs4V$ukatMZ_8qTyByjuw.s['10']++;var url = exports.url = 'https://developer.mozilla.org/en-US/Add-ons' + '/WebExtensions/Getting_started_with_web-ext';function docs(params) {
   __cov_jNs4V$ukatMZ_8qTyByjuw.f['2']++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['12']++;var _ref = (__cov_jNs4V$ukatMZ_8qTyByjuw.b['4'][0]++, arguments.length > 1) && (__cov_jNs4V$ukatMZ_8qTyByjuw.b['4'][1]++, arguments[1] !== undefined) ? (__cov_jNs4V$ukatMZ_8qTyByjuw.b['3'][0]++, arguments[1]) : (__cov_jNs4V$ukatMZ_8qTyByjuw.b['3'][1]++, {}),
       _ref$openUrl = _ref.openUrl,
       openUrl = _ref$openUrl === undefined ? (__cov_jNs4V$ukatMZ_8qTyByjuw.b['5'][0]++, _open2.default) : (__cov_jNs4V$ukatMZ_8qTyByjuw.b['5'][1]++, _ref$openUrl);__cov_jNs4V$ukatMZ_8qTyByjuw.s['13']++;return new Promise(function (resolve, reject) {
      __cov_jNs4V$ukatMZ_8qTyByjuw.f['3']++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['14']++;openUrl(url, function (error) {
         __cov_jNs4V$ukatMZ_8qTyByjuw.f['4']++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['15']++;if (error) {
            __cov_jNs4V$ukatMZ_8qTyByjuw.b['6'][0]++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['16']++;log.debug('Encountered an error while opening URL ' + url, error);__cov_jNs4V$ukatMZ_8qTyByjuw.s['17']++;reject(error);
         } else {
            __cov_jNs4V$ukatMZ_8qTyByjuw.b['6'][1]++;__cov_jNs4V$ukatMZ_8qTyByjuw.s['18']++;resolve();
         }
      });
   });
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/cmd/docs.js"))

/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_6qdKs5mUaxTgvhRcLJYQMw = Function('return this')();
if (!__cov_6qdKs5mUaxTgvhRcLJYQMw.__coverage__) {
   __cov_6qdKs5mUaxTgvhRcLJYQMw.__coverage__ = {};
}
__cov_6qdKs5mUaxTgvhRcLJYQMw = __cov_6qdKs5mUaxTgvhRcLJYQMw.__coverage__;
if (!__cov_6qdKs5mUaxTgvhRcLJYQMw['/home/travis/build/mozilla/web-ext/src/cmd/index.js']) {
   __cov_6qdKs5mUaxTgvhRcLJYQMw['/home/travis/build/mozilla/web-ext/src/cmd/index.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/index.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 1, "13": 0, "14": 0 }, "b": { "1": [0, 0], "2": [0, 0] }, "f": { "1": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 8, "column": 15 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import build from './build';", "import lint from './lint';", "import run from './run';", "import sign from './sign';", "import docs from './docs';", "", "export default {build, lint, run, sign, docs};", "", ""] };
}
__cov_6qdKs5mUaxTgvhRcLJYQMw = __cov_6qdKs5mUaxTgvhRcLJYQMw['/home/travis/build/mozilla/web-ext/src/cmd/index.js'];
__cov_6qdKs5mUaxTgvhRcLJYQMw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_6qdKs5mUaxTgvhRcLJYQMw.s['2']++;var _build = __webpack_require__(46);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['3']++;var _build2 = _interopRequireDefault(_build);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['4']++;var _lint = __webpack_require__(72);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['5']++;var _lint2 = _interopRequireDefault(_lint);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['6']++;var _run = __webpack_require__(73);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['7']++;var _run2 = _interopRequireDefault(_run);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['8']++;var _sign = __webpack_require__(74);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['9']++;var _sign2 = _interopRequireDefault(_sign);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['10']++;var _docs = __webpack_require__(70);__cov_6qdKs5mUaxTgvhRcLJYQMw.s['11']++;var _docs2 = _interopRequireDefault(_docs);function _interopRequireDefault(obj) {
   __cov_6qdKs5mUaxTgvhRcLJYQMw.f['1']++;__cov_6qdKs5mUaxTgvhRcLJYQMw.s['13']++;return (__cov_6qdKs5mUaxTgvhRcLJYQMw.b['2'][0]++, obj) && (__cov_6qdKs5mUaxTgvhRcLJYQMw.b['2'][1]++, obj.__esModule) ? (__cov_6qdKs5mUaxTgvhRcLJYQMw.b['1'][0]++, obj) : (__cov_6qdKs5mUaxTgvhRcLJYQMw.b['1'][1]++, { default: obj });
}__cov_6qdKs5mUaxTgvhRcLJYQMw.s['14']++;exports.default = { build: _build2.default, lint: _lint2.default, run: _run2.default, sign: _sign2.default, docs: _docs2.default };

/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_pGbnqiysFErgz0Fz$jTpQw = Function('return this')();
if (!__cov_pGbnqiysFErgz0Fz$jTpQw.__coverage__) {
   __cov_pGbnqiysFErgz0Fz$jTpQw.__coverage__ = {};
}
__cov_pGbnqiysFErgz0Fz$jTpQw = __cov_pGbnqiysFErgz0Fz$jTpQw.__coverage__;
if (!__cov_pGbnqiysFErgz0Fz$jTpQw['/home/travis/build/mozilla/web-ext/src/cmd/lint.js']) {
   __cov_pGbnqiysFErgz0Fz$jTpQw['/home/travis/build/mozilla/web-ext/src/cmd/lint.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/lint.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 1, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0] }, "f": { "1": 0, "2": 0 }, "fnMap": { "1": { "name": "lint", "line": 62, "loc": { "start": { "line": 62, "column": 15 }, "end": { "line": 72, "column": 17 } } }, "2": { "name": "shouldScanFile", "line": 86, "loc": { "start": { "line": 86, "column": 22 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 62, "column": 24 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 62, "column": 15 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 64, "column": 4 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 71, "column": 22 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 73, "column": 8 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 75, "column": 6 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 76, "column": 8 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 86, "column": 36 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 93, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 71, "type": "cond-expr", "locations": [{ "start": { "line": 71, "column": 22 }, "end": { "line": 71, "column": 22 } }, { "start": { "line": 71, "column": 22 }, "end": { "line": 72, "column": 17 } }] }, "2": { "line": 71, "type": "binary-expr", "locations": [{ "start": { "line": 71, "column": 22 }, "end": { "line": 71, "column": 22 } }, { "start": { "line": 71, "column": 22 }, "end": { "line": 71, "column": 22 } }] }, "3": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 70, "type": "cond-expr", "locations": [{ "start": { "line": 70, "column": 24 }, "end": { "line": 72, "column": 17 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 78, "type": "cond-expr", "locations": [{ "start": { "line": 78, "column": 26 }, "end": { "line": 78, "column": 16 } }, { "start": { "line": 78, "column": 36 }, "end": { "line": 77, "column": 12 } }] } }, "code": ["/* @flow */", "import {createInstance as defaultLinterCreator} from 'addons-linter';", "", "import {createLogger} from '../util/logger';", "import {", "  createFileFilter as defaultFileFilterCreator,", "} from '../util/file-filter';", "// import flow types", "import type {FileFilterCreatorFn} from '../util/file-filter';", "", "const log = createLogger(__filename);", "", "", "// Define the needed 'addons-linter' module flow types.", "", "export type LinterOutputType = 'text' | 'json';", "", "export type LinterCreatorParams = {|", "  config: {|", "    logLevel: 'debug' | 'fatal',", "    stack: boolean,", "    pretty?: boolean,", "    warningsAsErrors?: boolean,", "    metadata?: boolean,", "    output?: LinterOutputType,", "    boring?: boolean,", "    selfHosted?: boolean,", "    shouldScanFile: (fileName: string) => boolean,", "    _: Array<string>,", "  |},", "  runAsBinary: boolean,", "|};", "", "export type Linter = {|", "  run: () => Promise<void>,", "|};", "", "export type LinterCreatorFn = (params: LinterCreatorParams) => Linter;", "", "", "// Lint command types and implementation.", "", "export type LintCmdParams = {|", "  sourceDir: string,", "  verbose?: boolean,", "  selfHosted?: boolean,", "  boring?: boolean,", "  output?: LinterOutputType,", "  metadata?: boolean,", "  pretty?: boolean,", "  warningsAsErrors?: boolean,", "  ignoreFiles?: Array<string>,", "  artifactsDir?: string,", "|};", "", "export type LintCmdOptions = {|", "  createLinter?: LinterCreatorFn,", "  createFileFilter?: FileFilterCreatorFn,", "  shouldExitProgram?: boolean,", "|};", "", "export default function lint(", "  {", "    verbose, sourceDir, selfHosted, boring, output,", "    metadata, pretty, warningsAsErrors, ignoreFiles, artifactsDir,", "  }: LintCmdParams,", "  {", "    createLinter = defaultLinterCreator,", "    createFileFilter = defaultFileFilterCreator,", "    shouldExitProgram = true,", "  }: LintCmdOptions = {}", "): Promise<void> {", "  const fileFilter = createFileFilter({sourceDir, ignoreFiles, artifactsDir});", "", "  log.debug(`Running addons-linter on ${sourceDir}`);", "  const linter = createLinter({", "    config: {", "      logLevel: verbose ? 'debug' : 'fatal',", "      stack: Boolean(verbose),", "      pretty,", "      warningsAsErrors,", "      metadata,", "      output,", "      boring,", "      selfHosted,", "      shouldScanFile: (fileName) => fileFilter.wantFile(fileName),", "      // This mimics the first command line argument from yargs,", "      // which should be the directory to the extension.", "      _: [sourceDir],", "    },", "    runAsBinary: shouldExitProgram,", "  });", "  return linter.run();", "}", ""] };
}
__cov_pGbnqiysFErgz0Fz$jTpQw = __cov_pGbnqiysFErgz0Fz$jTpQw['/home/travis/build/mozilla/web-ext/src/cmd/lint.js'];
__cov_pGbnqiysFErgz0Fz$jTpQw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_pGbnqiysFErgz0Fz$jTpQw.s['2']++;exports.default = lint;__cov_pGbnqiysFErgz0Fz$jTpQw.s['3']++;var _addonsLinter = __webpack_require__(180);__cov_pGbnqiysFErgz0Fz$jTpQw.s['4']++;var _logger = __webpack_require__(0);__cov_pGbnqiysFErgz0Fz$jTpQw.s['5']++;var _fileFilter = __webpack_require__(29);__cov_pGbnqiysFErgz0Fz$jTpQw.s['6']++;var log = (0, _logger.createLogger)(__filename);function lint(_ref) {
   __cov_pGbnqiysFErgz0Fz$jTpQw.f['1']++;__cov_pGbnqiysFErgz0Fz$jTpQw.s['8']++;var verbose = _ref.verbose,
       sourceDir = _ref.sourceDir,
       selfHosted = _ref.selfHosted,
       boring = _ref.boring,
       output = _ref.output,
       metadata = _ref.metadata,
       pretty = _ref.pretty,
       warningsAsErrors = _ref.warningsAsErrors,
       ignoreFiles = _ref.ignoreFiles,
       artifactsDir = _ref.artifactsDir;__cov_pGbnqiysFErgz0Fz$jTpQw.s['9']++;var _ref2 = (__cov_pGbnqiysFErgz0Fz$jTpQw.b['2'][0]++, arguments.length > 1) && (__cov_pGbnqiysFErgz0Fz$jTpQw.b['2'][1]++, arguments[1] !== undefined) ? (__cov_pGbnqiysFErgz0Fz$jTpQw.b['1'][0]++, arguments[1]) : (__cov_pGbnqiysFErgz0Fz$jTpQw.b['1'][1]++, {}),
       _ref2$createLinter = _ref2.createLinter,
       createLinter = _ref2$createLinter === undefined ? (__cov_pGbnqiysFErgz0Fz$jTpQw.b['3'][0]++, _addonsLinter.createInstance) : (__cov_pGbnqiysFErgz0Fz$jTpQw.b['3'][1]++, _ref2$createLinter),
       _ref2$createFileFilte = _ref2.createFileFilter,
       createFileFilter = _ref2$createFileFilte === undefined ? (__cov_pGbnqiysFErgz0Fz$jTpQw.b['4'][0]++, _fileFilter.createFileFilter) : (__cov_pGbnqiysFErgz0Fz$jTpQw.b['4'][1]++, _ref2$createFileFilte),
       _ref2$shouldExitProgr = _ref2.shouldExitProgram,
       shouldExitProgram = _ref2$shouldExitProgr === undefined ? (__cov_pGbnqiysFErgz0Fz$jTpQw.b['5'][0]++, true) : (__cov_pGbnqiysFErgz0Fz$jTpQw.b['5'][1]++, _ref2$shouldExitProgr);__cov_pGbnqiysFErgz0Fz$jTpQw.s['10']++;var fileFilter = createFileFilter({ sourceDir: sourceDir, ignoreFiles: ignoreFiles, artifactsDir: artifactsDir });__cov_pGbnqiysFErgz0Fz$jTpQw.s['11']++;log.debug('Running addons-linter on ' + sourceDir);__cov_pGbnqiysFErgz0Fz$jTpQw.s['12']++;var linter = createLinter({ config: { logLevel: verbose ? (__cov_pGbnqiysFErgz0Fz$jTpQw.b['6'][0]++, 'debug') : (__cov_pGbnqiysFErgz0Fz$jTpQw.b['6'][1]++, 'fatal'), stack: Boolean(verbose), pretty: pretty, warningsAsErrors: warningsAsErrors, metadata: metadata, output: output, boring: boring, selfHosted: selfHosted, shouldScanFile: function shouldScanFile(fileName) {
            __cov_pGbnqiysFErgz0Fz$jTpQw.f['2']++;__cov_pGbnqiysFErgz0Fz$jTpQw.s['13']++;return fileFilter.wantFile(fileName);
         }, _: [sourceDir] }, runAsBinary: shouldExitProgram });__cov_pGbnqiysFErgz0Fz$jTpQw.s['14']++;return linter.run();
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/cmd/lint.js"))

/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_KgXeKkO6RLq0MVJmfvjAfw = Function('return this')();
if (!__cov_KgXeKkO6RLq0MVJmfvjAfw.__coverage__) {
   __cov_KgXeKkO6RLq0MVJmfvjAfw.__coverage__ = {};
}
__cov_KgXeKkO6RLq0MVJmfvjAfw = __cov_KgXeKkO6RLq0MVJmfvjAfw.__coverage__;
if (!__cov_KgXeKkO6RLq0MVJmfvjAfw['/home/travis/build/mozilla/web-ext/src/cmd/run.js']) {
   __cov_KgXeKkO6RLq0MVJmfvjAfw['/home/travis/build/mozilla/web-ext/src/cmd/run.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/run.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 1, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 1, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 1, "54": 0, "55": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0, 0, 0, 0], "20": [0, 0], "21": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0 }, "fnMap": { "1": { "name": "_interopRequireWildcard", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "(anonymous_3)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "_callee", "line": 48, "loc": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } } }, "5": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "6": { "name": "run", "line": 48, "loc": { "start": { "line": 48, "column": 30 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 6, "column": 12 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 20, "column": 0 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 50, "column": 4 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 61, "column": 21 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "35": { "start": { "line": 63, "column": 6 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 64, "column": 6 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 65, "column": 8 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 67, "column": 15 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 70, "column": 29 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 100, "column": 8 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 102, "column": 6 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 103, "column": 8 }, "end": { "line": null, "column": null } }, "49": { "start": { "line": 105, "column": 8 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 107, "column": 19 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 115, "column": 9 }, "end": { "line": null, "column": null } }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 48, "column": 30 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "55": { "start": { "line": 48, "column": 30 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 51, "type": "cond-expr", "locations": [{ "start": { "line": 51, "column": 25 }, "end": { "line": 48, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 51, "type": "cond-expr", "locations": [{ "start": { "line": 51, "column": 45 }, "end": { "line": 48, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 51, "type": "cond-expr", "locations": [{ "start": { "line": 51, "column": 63 }, "end": { "line": 48, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 52, "type": "cond-expr", "locations": [{ "start": { "line": 52, "column": 21 }, "end": { "line": 48, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "11": { "line": 61, "type": "cond-expr", "locations": [{ "start": { "line": 61, "column": 21 }, "end": { "line": 61, "column": 21 } }, { "start": { "line": 61, "column": 21 }, "end": { "line": 48, "column": 15 } }] }, "12": { "line": 61, "type": "binary-expr", "locations": [{ "start": { "line": 61, "column": 21 }, "end": { "line": 61, "column": 21 } }, { "start": { "line": 61, "column": 21 }, "end": { "line": 61, "column": 21 } }] }, "13": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 56, "type": "cond-expr", "locations": [{ "start": { "line": 56, "column": 17 }, "end": { "line": 48, "column": 15 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "20": { "line": 64, "type": "if", "locations": [{ "start": { "line": 64, "column": 6 }, "end": { "line": 64, "column": 6 } }, { "start": { "line": 64, "column": 6 }, "end": { "line": 64, "column": 6 } }] }, "21": { "line": 102, "type": "if", "locations": [{ "start": { "line": 102, "column": 6 }, "end": { "line": 102, "column": 6 } }, { "start": { "line": 102, "column": 6 }, "end": { "line": 102, "column": 6 } }] } }, "code": ["/* @flow */", "", "import {", "  showDesktopNotification as defaultDesktopNotifications,", "} from '../util/desktop-notifier';", "import * as defaultFirefoxApp from '../firefox';", "import {", "  connectWithMaxRetries as defaultFirefoxClient,", "} from '../firefox/remote';", "import {createLogger} from '../util/logger';", "import getValidatedManifest from '../util/manifest';", "import {", "  defaultReloadStrategy,", "  MultiExtensionRunner as DefaultMultiExtensionRunner,", "  FirefoxDesktopExtensionRunner as DefaultFirefoxDesktopExtensionRunner,", "} from '../extension-runners';", "// Import objects that are only used as Flow types.", "import type {FirefoxPreferences} from '../firefox/preferences';", "", "const log = createLogger(__filename);", "", "// Run command types and implementation.", "", "export type CmdRunParams = {|", "  sourceDir: string,", "  artifactsDir: string,", "  firefox: string,", "  firefoxProfile?: string,", "  keepProfileChanges: boolean,", "  preInstall: boolean,", "  noReload: boolean,", "  browserConsole: boolean,", "  customPrefs?: FirefoxPreferences,", "  startUrl?: string | Array<string>,", "  ignoreFiles?: Array<string>,", "|};", "", "export type CmdRunOptions = {|", "  desktopNotifications: typeof defaultDesktopNotifications,", "  firefoxApp: typeof defaultFirefoxApp,", "  firefoxClient: typeof defaultFirefoxClient,", "  reloadStrategy: typeof defaultReloadStrategy,", "  shouldExitProgram?: boolean,", "  FirefoxDesktopExtensionRunner?: typeof DefaultFirefoxDesktopExtensionRunner,", "  MultiExtensionRunner?: typeof DefaultMultiExtensionRunner,", "|};", "", "export default async function run(", "  {", "    sourceDir, artifactsDir, firefox, firefoxProfile,", "    keepProfileChanges = false, preInstall = false, noReload = false,", "    browserConsole = false, customPrefs, startUrl, ignoreFiles,", "  }: CmdRunParams,", "  {", "    desktopNotifications = defaultDesktopNotifications,", "    firefoxApp = defaultFirefoxApp,", "    firefoxClient = defaultFirefoxClient,", "    reloadStrategy = defaultReloadStrategy,", "    FirefoxDesktopExtensionRunner = DefaultFirefoxDesktopExtensionRunner,", "    MultiExtensionRunner = DefaultMultiExtensionRunner,", "  }: CmdRunOptions = {}): Promise<Object> {", "", "  log.info(`Running web extension from ${sourceDir}`);", "  if (preInstall) {", "    log.info('Disabled auto-reloading because it\\'s not possible with ' +", "             '--pre-install');", "    noReload = true;", "  }", "", "  const manifestData = await getValidatedManifest(sourceDir);", "", "  const firefoxDesktopRunnerParams = {", "    // Common options.", "    extensions: [{sourceDir, manifestData}],", "    keepProfileChanges,", "    startUrl,", "    desktopNotifications,", "", "    // Firefox specific CLI options.", "    firefoxBinary: firefox,", "    profilePath: firefoxProfile,", "    customPrefs,", "    browserConsole,", "    preInstall,", "", "    // Firefox runner injected dependencies.", "    firefoxApp,", "    firefoxClient,", "  };", "", "  const firefoxDesktopRunner = new FirefoxDesktopExtensionRunner(", "    firefoxDesktopRunnerParams", "  );", "", "  const extensionRunner = new MultiExtensionRunner({", "    runners: [firefoxDesktopRunner],", "    desktopNotifications,", "  });", "", "  await extensionRunner.run();", "", "  if (noReload) {", "    log.info('Automatic extension reloading has been disabled');", "  } else {", "    log.info('The extension will reload if any source file changes');", "", "    reloadStrategy({", "      extensionRunner,", "      sourceDir,", "      artifactsDir,", "      ignoreFiles,", "    });", "  }", "", "  return firefoxApp;", "}", ""] };
}
__cov_KgXeKkO6RLq0MVJmfvjAfw = __cov_KgXeKkO6RLq0MVJmfvjAfw['/home/travis/build/mozilla/web-ext/src/cmd/run.js'];
__cov_KgXeKkO6RLq0MVJmfvjAfw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_KgXeKkO6RLq0MVJmfvjAfw.s['2']++;var _regenerator = __webpack_require__(8);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['3']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['4']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['5']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['6']++;var _desktopNotifier = __webpack_require__(49);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['7']++;var _firefox = __webpack_require__(35);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['8']++;var defaultFirefoxApp = _interopRequireWildcard(_firefox);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['9']++;var _remote = __webpack_require__(24);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['10']++;var _logger = __webpack_require__(0);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['11']++;var _manifest = __webpack_require__(25);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['12']++;var _manifest2 = _interopRequireDefault(_manifest);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['13']++;var _extensionRunners = __webpack_require__(76);function _interopRequireWildcard(obj) {
   __cov_KgXeKkO6RLq0MVJmfvjAfw.f['1']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['15']++;if ((__cov_KgXeKkO6RLq0MVJmfvjAfw.b['2'][0]++, obj) && (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['2'][1]++, obj.__esModule)) {
      __cov_KgXeKkO6RLq0MVJmfvjAfw.b['1'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['16']++;return obj;
   } else {
      __cov_KgXeKkO6RLq0MVJmfvjAfw.b['1'][1]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['17']++;var newObj = {};__cov_KgXeKkO6RLq0MVJmfvjAfw.s['18']++;if (obj != null) {
         __cov_KgXeKkO6RLq0MVJmfvjAfw.b['3'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['19']++;for (var key in obj) {
            __cov_KgXeKkO6RLq0MVJmfvjAfw.s['20']++;if (Object.prototype.hasOwnProperty.call(obj, key)) {
               __cov_KgXeKkO6RLq0MVJmfvjAfw.b['4'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['21']++;newObj[key] = obj[key];
            } else {
               __cov_KgXeKkO6RLq0MVJmfvjAfw.b['4'][1]++;
            }
         }
      } else {
         __cov_KgXeKkO6RLq0MVJmfvjAfw.b['3'][1]++;
      }__cov_KgXeKkO6RLq0MVJmfvjAfw.s['22']++;newObj.default = obj;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['23']++;return newObj;
   }
}function _interopRequireDefault(obj) {
   __cov_KgXeKkO6RLq0MVJmfvjAfw.f['2']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['25']++;return (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['6'][0]++, obj) && (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['6'][1]++, obj.__esModule) ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['5'][0]++, obj) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['5'][1]++, { default: obj });
}__cov_KgXeKkO6RLq0MVJmfvjAfw.s['26']++;var log = (0, _logger.createLogger)(__filename);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['27']++;exports.default = function () {
   __cov_KgXeKkO6RLq0MVJmfvjAfw.f['3']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['28']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(_ref2) {
      __cov_KgXeKkO6RLq0MVJmfvjAfw.f['4']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['29']++;var sourceDir = _ref2.sourceDir,
          artifactsDir = _ref2.artifactsDir,
          firefox = _ref2.firefox,
          firefoxProfile = _ref2.firefoxProfile,
          _ref2$keepProfileChan = _ref2.keepProfileChanges,
          keepProfileChanges = _ref2$keepProfileChan === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['7'][0]++, false) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['7'][1]++, _ref2$keepProfileChan),
          _ref2$preInstall = _ref2.preInstall,
          preInstall = _ref2$preInstall === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['8'][0]++, false) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['8'][1]++, _ref2$preInstall),
          _ref2$noReload = _ref2.noReload,
          noReload = _ref2$noReload === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['9'][0]++, false) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['9'][1]++, _ref2$noReload),
          _ref2$browserConsole = _ref2.browserConsole,
          browserConsole = _ref2$browserConsole === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['10'][0]++, false) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['10'][1]++, _ref2$browserConsole),
          customPrefs = _ref2.customPrefs,
          startUrl = _ref2.startUrl,
          ignoreFiles = _ref2.ignoreFiles;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['30']++;var _ref3 = (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['12'][0]++, arguments.length > 1) && (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['12'][1]++, arguments[1] !== undefined) ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['11'][0]++, arguments[1]) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['11'][1]++, {}),
          _ref3$desktopNotifica = _ref3.desktopNotifications,
          desktopNotifications = _ref3$desktopNotifica === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['13'][0]++, _desktopNotifier.showDesktopNotification) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['13'][1]++, _ref3$desktopNotifica),
          _ref3$firefoxApp = _ref3.firefoxApp,
          firefoxApp = _ref3$firefoxApp === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['14'][0]++, defaultFirefoxApp) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['14'][1]++, _ref3$firefoxApp),
          _ref3$firefoxClient = _ref3.firefoxClient,
          firefoxClient = _ref3$firefoxClient === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['15'][0]++, _remote.connectWithMaxRetries) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['15'][1]++, _ref3$firefoxClient),
          _ref3$reloadStrategy = _ref3.reloadStrategy,
          reloadStrategy = _ref3$reloadStrategy === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['16'][0]++, _extensionRunners.defaultReloadStrategy) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['16'][1]++, _ref3$reloadStrategy),
          _ref3$FirefoxDesktopE = _ref3.FirefoxDesktopExtensionRunner,
          FirefoxDesktopExtensionRunner = _ref3$FirefoxDesktopE === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['17'][0]++, _extensionRunners.FirefoxDesktopExtensionRunner) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['17'][1]++, _ref3$FirefoxDesktopE),
          _ref3$MultiExtensionR = _ref3.MultiExtensionRunner,
          MultiExtensionRunner = _ref3$MultiExtensionR === undefined ? (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['18'][0]++, _extensionRunners.MultiExtensionRunner) : (__cov_KgXeKkO6RLq0MVJmfvjAfw.b['18'][1]++, _ref3$MultiExtensionR);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['31']++;var manifestData, firefoxDesktopRunnerParams, firefoxDesktopRunner, extensionRunner;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['32']++;return _regenerator2.default.wrap(function _callee$(_context) {
         __cov_KgXeKkO6RLq0MVJmfvjAfw.f['5']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['33']++;while (1) {
            __cov_KgXeKkO6RLq0MVJmfvjAfw.s['34']++;switch (_context.prev = _context.next) {case 0:
                  __cov_KgXeKkO6RLq0MVJmfvjAfw.b['19'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['35']++;log.info('Running web extension from ' + sourceDir);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['36']++;if (preInstall) {
                     __cov_KgXeKkO6RLq0MVJmfvjAfw.b['20'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['37']++;log.info('Disabled auto-reloading because it\'s not possible with ' + '--pre-install');__cov_KgXeKkO6RLq0MVJmfvjAfw.s['38']++;noReload = true;
                  } else {
                     __cov_KgXeKkO6RLq0MVJmfvjAfw.b['20'][1]++;
                  }__cov_KgXeKkO6RLq0MVJmfvjAfw.s['39']++;_context.next = 4;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['40']++;return (0, _manifest2.default)(sourceDir);case 4:
                  __cov_KgXeKkO6RLq0MVJmfvjAfw.b['19'][1]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['41']++;manifestData = _context.sent;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['42']++;firefoxDesktopRunnerParams = { extensions: [{ sourceDir: sourceDir, manifestData: manifestData }], keepProfileChanges: keepProfileChanges, startUrl: startUrl, desktopNotifications: desktopNotifications, firefoxBinary: firefox, profilePath: firefoxProfile, customPrefs: customPrefs, browserConsole: browserConsole, preInstall: preInstall, firefoxApp: firefoxApp, firefoxClient: firefoxClient };__cov_KgXeKkO6RLq0MVJmfvjAfw.s['43']++;firefoxDesktopRunner = new FirefoxDesktopExtensionRunner(firefoxDesktopRunnerParams);__cov_KgXeKkO6RLq0MVJmfvjAfw.s['44']++;extensionRunner = new MultiExtensionRunner({ runners: [firefoxDesktopRunner], desktopNotifications: desktopNotifications });__cov_KgXeKkO6RLq0MVJmfvjAfw.s['45']++;_context.next = 10;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['46']++;return extensionRunner.run();case 10:
                  __cov_KgXeKkO6RLq0MVJmfvjAfw.b['19'][2]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['47']++;if (noReload) {
                     __cov_KgXeKkO6RLq0MVJmfvjAfw.b['21'][0]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['48']++;log.info('Automatic extension reloading has been disabled');
                  } else {
                     __cov_KgXeKkO6RLq0MVJmfvjAfw.b['21'][1]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['49']++;log.info('The extension will reload if any source file changes');__cov_KgXeKkO6RLq0MVJmfvjAfw.s['50']++;reloadStrategy({ extensionRunner: extensionRunner, sourceDir: sourceDir, artifactsDir: artifactsDir, ignoreFiles: ignoreFiles });
                  }__cov_KgXeKkO6RLq0MVJmfvjAfw.s['51']++;return _context.abrupt('return', firefoxApp);case 12:
                  __cov_KgXeKkO6RLq0MVJmfvjAfw.b['19'][3]++;case 'end':
                  __cov_KgXeKkO6RLq0MVJmfvjAfw.b['19'][4]++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['52']++;return _context.stop();}
         }
      }, _callee, this);
   }));function run(_x) {
      __cov_KgXeKkO6RLq0MVJmfvjAfw.f['6']++;__cov_KgXeKkO6RLq0MVJmfvjAfw.s['54']++;return _ref.apply(this, arguments);
   }__cov_KgXeKkO6RLq0MVJmfvjAfw.s['55']++;return run;
}();
/* WEBPACK VAR INJECTION */}.call(exports, "src/cmd/run.js"))

/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_fYQK_LSZ_Hv5$mWcD11XEw = Function('return this')();
if (!__cov_fYQK_LSZ_Hv5$mWcD11XEw.__coverage__) {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw.__coverage__ = {};
}
__cov_fYQK_LSZ_Hv5$mWcD11XEw = __cov_fYQK_LSZ_Hv5$mWcD11XEw.__coverage__;
if (!__cov_fYQK_LSZ_Hv5$mWcD11XEw['/home/travis/build/mozilla/web-ext/src/cmd/sign.js']) {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw['/home/travis/build/mozilla/web-ext/src/cmd/sign.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/cmd/sign.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 1, "74": 0, "75": 0, "76": 0, "77": 1, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0 }, "b": { "1": [0, 0, 0, 0, 0, 0, 0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0, 0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_callee2", "line": 135, "loc": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } } }, "3": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "(anonymous_4)", "line": 153, "loc": { "start": { "line": 153, "column": 23 }, "end": { "line": 153, "column": 33 } } }, "5": { "name": "getIdFromSourceDir", "line": 135, "loc": { "start": { "line": 135, "column": 22 }, "end": { "line": null, "column": null } } }, "6": { "name": "(anonymous_6)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "7": { "name": "_callee3", "line": 171, "loc": { "start": { "line": 171, "column": 7 }, "end": { "line": null, "column": null } } }, "8": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "saveIdToSourceDir", "line": 171, "loc": { "start": { "line": 171, "column": 22 }, "end": { "line": null, "column": null } } }, "10": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "11": { "name": "sign", "line": 48, "loc": { "start": { "line": 48, "column": 15 }, "end": { "line": 57, "column": 23 } } }, "12": { "name": "(anonymous_12)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "13": { "name": "_callee", "line": 59, "loc": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } } }, "14": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "15": { "name": "(anonymous_15)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "19": { "start": { "line": 143, "column": 20 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "25": { "start": { "line": 145, "column": 8 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 146, "column": 10 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 153, "column": 10 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 154, "column": 11 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 155, "column": 8 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 156, "column": 13 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 135, "column": 7 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 161, "column": 6 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 163, "column": 7 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 164, "column": 10 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 167, "column": 9 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 135, "column": 22 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 171, "column": 7 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 171, "column": 7 }, "end": { "line": null, "column": null } }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 175, "column": 8 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 181, "column": 6 }, "end": { "line": null, "column": null } }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 171, "column": 22 }, "end": { "line": null, "column": null } }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 48, "column": 24 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "71": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "72": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "73": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "74": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "75": { "start": { "line": 16, "column": 0 }, "end": { "line": null, "column": null } }, "76": { "start": { "line": 18, "column": 7 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 48, "column": 15 }, "end": { "line": null, "column": null } }, "78": { "start": { "line": 50, "column": 4 }, "end": { "line": null, "column": null } }, "79": { "start": { "line": 56, "column": 19 }, "end": { "line": null, "column": null } }, "80": { "start": { "line": 58, "column": 9 }, "end": { "line": null, "column": null } }, "81": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "82": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "85": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "86": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "87": { "start": { "line": 60, "column": 12 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "89": { "start": { "line": 64, "column": 10 }, "end": { "line": null, "column": null } }, "90": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "91": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "92": { "start": { "line": 65, "column": 23 }, "end": { "line": null, "column": null } }, "93": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "94": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "95": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "96": { "start": { "line": 67, "column": 29 }, "end": { "line": null, "column": null } }, "97": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "98": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "99": { "start": { "line": 70, "column": 51 }, "end": { "line": null, "column": null } }, "100": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "101": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "102": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "103": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "104": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "105": { "start": { "line": 78, "column": 10 }, "end": { "line": null, "column": null } }, "106": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "107": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "108": { "start": { "line": 79, "column": 14 }, "end": { "line": null, "column": null } }, "109": { "start": { "line": 83, "column": 10 }, "end": { "line": null, "column": null } }, "110": { "start": { "line": 84, "column": 12 }, "end": { "line": null, "column": null } }, "111": { "start": { "line": 87, "column": 10 }, "end": { "line": null, "column": null } }, "112": { "start": { "line": 88, "column": 13 }, "end": { "line": null, "column": null } }, "113": { "start": { "line": 91, "column": 10 }, "end": { "line": null, "column": null } }, "114": { "start": { "line": 92, "column": 12 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 94, "column": 13 }, "end": { "line": null, "column": null } }, "116": { "start": { "line": 97, "column": 10 }, "end": { "line": null, "column": null } }, "117": { "start": { "line": 98, "column": 12 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "119": { "start": { "line": 101, "column": 34 }, "end": { "line": null, "column": null } }, "120": { "start": { "line": 59, "column": 4 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 114, "column": 10 }, "end": { "line": null, "column": null } }, "122": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "123": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "124": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "125": { "start": { "line": 115, "column": 14 }, "end": { "line": null, "column": null } }, "126": { "start": { "line": 120, "column": 10 }, "end": { "line": null, "column": null } }, "127": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "128": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "129": { "start": { "line": 121, "column": 12 }, "end": { "line": null, "column": null } }, "130": { "start": { "line": 122, "column": 12 }, "end": { "line": null, "column": null } }, "131": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "132": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "133": { "start": { "line": 124, "column": 12 }, "end": { "line": null, "column": null } }, "134": { "start": { "line": 125, "column": 14 }, "end": { "line": null, "column": null } }, "135": { "start": { "line": 129, "column": 13 }, "end": { "line": null, "column": null } }, "136": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "137": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "138": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 145, "type": "if", "locations": [{ "start": { "line": 145, "column": 8 }, "end": { "line": 145, "column": 8 } }, { "start": { "line": 145, "column": 8 }, "end": { "line": 145, "column": 8 } }] }, "3": { "line": 155, "type": "if", "locations": [{ "start": { "line": 155, "column": 8 }, "end": { "line": 155, "column": 8 } }, { "start": { "line": 155, "column": 8 }, "end": { "line": 155, "column": 8 } }] }, "4": { "line": 155, "type": "binary-expr", "locations": [{ "start": { "line": 155, "column": 8 }, "end": { "line": 155, "column": 16 } }, { "start": { "line": 155, "column": 16 }, "end": { "line": 155, "column": 4 } }] }, "5": { "line": 163, "type": "if", "locations": [{ "start": { "line": 163, "column": 7 }, "end": { "line": 163, "column": 7 } }, { "start": { "line": 163, "column": 7 }, "end": { "line": 163, "column": 7 } }] }, "6": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 50, "type": "cond-expr", "locations": [{ "start": { "line": 50, "column": 52 }, "end": { "line": 57, "column": 23 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 56, "type": "cond-expr", "locations": [{ "start": { "line": 56, "column": 19 }, "end": { "line": 56, "column": 19 } }, { "start": { "line": 56, "column": 19 }, "end": { "line": 57, "column": 23 } }] }, "11": { "line": 56, "type": "binary-expr", "locations": [{ "start": { "line": 56, "column": 19 }, "end": { "line": 56, "column": 19 } }, { "start": { "line": 56, "column": 19 }, "end": { "line": 56, "column": 19 } }] }, "12": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "13": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 64, "type": "if", "locations": [{ "start": { "line": 64, "column": 10 }, "end": { "line": 64, "column": 10 } }, { "start": { "line": 64, "column": 10 }, "end": { "line": 64, "column": 10 } }] }, "16": { "line": 78, "type": "if", "locations": [{ "start": { "line": 78, "column": 10 }, "end": { "line": 78, "column": 10 } }, { "start": { "line": 78, "column": 10 }, "end": { "line": 78, "column": 10 } }] }, "17": { "line": 78, "type": "binary-expr", "locations": [{ "start": { "line": 78, "column": 10 }, "end": { "line": 78, "column": 16 } }, { "start": { "line": 78, "column": 16 }, "end": { "line": 59, "column": 4 } }] }, "18": { "line": 83, "type": "if", "locations": [{ "start": { "line": 83, "column": 10 }, "end": { "line": 83, "column": 10 } }, { "start": { "line": 83, "column": 10 }, "end": { "line": 83, "column": 10 } }] }, "19": { "line": 87, "type": "if", "locations": [{ "start": { "line": 87, "column": 10 }, "end": { "line": 87, "column": 10 } }, { "start": { "line": 87, "column": 10 }, "end": { "line": 87, "column": 10 } }] }, "20": { "line": 91, "type": "if", "locations": [{ "start": { "line": 91, "column": 10 }, "end": { "line": 91, "column": 10 } }, { "start": { "line": 91, "column": 10 }, "end": { "line": 91, "column": 10 } }] }, "21": { "line": 91, "type": "binary-expr", "locations": [{ "start": { "line": 91, "column": 10 }, "end": { "line": 91, "column": 10 } }, { "start": { "line": 91, "column": 17 }, "end": { "line": 91, "column": 6 } }] }, "22": { "line": 97, "type": "if", "locations": [{ "start": { "line": 97, "column": 10 }, "end": { "line": 97, "column": 10 } }, { "start": { "line": 97, "column": 10 }, "end": { "line": 97, "column": 10 } }] }, "23": { "line": 114, "type": "if", "locations": [{ "start": { "line": 114, "column": 10 }, "end": { "line": 114, "column": 10 } }, { "start": { "line": 114, "column": 10 }, "end": { "line": 114, "column": 10 } }] }, "24": { "line": 120, "type": "if", "locations": [{ "start": { "line": 120, "column": 10 }, "end": { "line": 120, "column": 10 } }, { "start": { "line": 120, "column": 10 }, "end": { "line": 120, "column": 10 } }] } }, "code": ["/* @flow */", "import path from 'path';", "", "import {fs} from 'mz';", "import defaultAddonSigner from 'sign-addon';", "", "import defaultBuilder from './build';", "import getValidatedManifest, {getManifestId} from '../util/manifest';", "import {withTempDir} from '../util/temp-dir';", "import {isErrorWithCode, UsageError, WebExtError} from '../errors';", "import {prepareArtifactsDir} from '../util/artifacts';", "import {createLogger} from '../util/logger';", "import type {ExtensionManifest} from '../util/manifest';", "", "", "const log = createLogger(__filename);", "", "export const extensionIdFile = '.web-extension-id';", "", "// Sign command types and implementation.", "", "export type SignParams = {|", "  id?: string,", "  verbose?: boolean,", "  sourceDir: string,", "  artifactsDir: string,", "  ignoreFiles?: Array<string>,", "  apiKey: string,", "  apiSecret: string,", "  apiUrlPrefix: string,", "  apiProxy: string,", "  timeout: number,", "|};", "", "export type SignOptions = {", "  build?: typeof defaultBuilder,", "  signAddon?: typeof defaultAddonSigner,", "  preValidatedManifest?: ExtensionManifest,", "  shouldExitProgram?: boolean,", "};", "", "export type SignResult = {|", "  success: boolean,", "  id: string,", "  downloadedFiles: Array<string>,", "|};", "", "export default function sign(", "  {", "    verbose, sourceDir, artifactsDir, ignoreFiles = [],", "    apiKey, apiSecret, apiUrlPrefix, apiProxy, id, timeout,", "  }: SignParams,", "  {", "    build = defaultBuilder, signAddon = defaultAddonSigner,", "    preValidatedManifest,", "  }: SignOptions = {}", "): Promise<SignResult> {", "  return withTempDir(", "    async function(tmpDir) {", "      await prepareArtifactsDir(artifactsDir);", "", "      let manifestData;", "", "      if (preValidatedManifest) {", "        manifestData = preValidatedManifest;", "      } else {", "        manifestData = await getValidatedManifest(sourceDir);", "      }", "", "      const [buildResult, idFromSourceDir] = await Promise.all([", "        build({sourceDir, ignoreFiles, artifactsDir: tmpDir.path()},", "              {manifestData, showReadyMessage: false}),", "        getIdFromSourceDir(sourceDir),", "      ]);", "", "      const manifestId = getManifestId(manifestData);", "", "      if (id && manifestId) {", "        throw new UsageError(", "          `Cannot set custom ID ${id} because manifest.json ` +", "          `declares ID ${manifestId}`);", "      }", "      if (id) {", "        log.debug(`Using custom ID declared as --id=${id}`);", "      }", "", "      if (manifestId) {", "        id = manifestId;", "      }", "", "      if (!id && idFromSourceDir) {", "        log.info(", "          `Using previously auto-generated extension ID: ${idFromSourceDir}`);", "        id = idFromSourceDir;", "      }", "", "      if (!id) {", "        log.warn('No extension ID specified (it will be auto-generated)');", "      }", "", "      const signingResult = await signAddon({", "        apiKey,", "        apiSecret,", "        apiUrlPrefix,", "        apiProxy,", "        timeout,", "        verbose,", "        id,", "        xpiPath: buildResult.extensionPath,", "        version: manifestData.version,", "        downloadDir: artifactsDir,", "      });", "", "      if (signingResult.id) {", "        await saveIdToSourceDir(sourceDir, signingResult.id);", "      }", "", "      // All information about the downloaded files would have", "      // already been logged by signAddon().", "      if (signingResult.success) {", "        log.info(`Extension ID: ${signingResult.id}`);", "        log.info('SUCCESS');", "      } else {", "        log.info('FAIL');", "        throw new WebExtError(", "          'The WebExtension could not be signed');", "      }", "", "      return signingResult;", "    }", "  );", "}", "", "", "export async function getIdFromSourceDir(", "  sourceDir: string", "): Promise<string | void> {", "  const filePath = path.join(sourceDir, extensionIdFile);", "", "  let content;", "", "  try {", "    content = await fs.readFile(filePath);", "  } catch (error) {", "    if (isErrorWithCode('ENOENT', error)) {", "      log.debug(`No ID file found at: ${filePath}`);", "      return;", "    }", "    throw error;", "  }", "", "  let lines = content.toString().split('\\n');", "  lines = lines.filter((line) => {", "    line = line.trim();", "    if (line && !line.startsWith('#')) {", "      return line;", "    }", "  });", "", "  const id = lines[0];", "  log.debug(`Found extension ID ${id} in ${filePath}`);", "", "  if (!id) {", "    throw new UsageError(`No ID found in extension ID file ${filePath}`);", "  }", "", "  return id;", "}", "", "", "export async function saveIdToSourceDir(", "  sourceDir: string, id: string", "): Promise<void> {", "  const filePath = path.join(sourceDir, extensionIdFile);", "  await fs.writeFile(filePath, [", "    '# This file was created by https://github.com/mozilla/web-ext',", "    '# Your auto-generated extension ID for addons.mozilla.org is:',", "    id.toString(),", "  ].join('\\n'));", "", "  log.debug(`Saved auto-generated ID ${id} to ${filePath}`);", "}", ""] };
}
__cov_fYQK_LSZ_Hv5$mWcD11XEw = __cov_fYQK_LSZ_Hv5$mWcD11XEw['/home/travis/build/mozilla/web-ext/src/cmd/sign.js'];
__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['2']++;exports.saveIdToSourceDir = exports.getIdFromSourceDir = exports.extensionIdFile = undefined;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['3']++;var _regenerator = __webpack_require__(8);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['5']++;var _slicedToArray2 = __webpack_require__(30);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['6']++;var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['7']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['8']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['9']++;var getIdFromSourceDir = exports.getIdFromSourceDir = function () {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['1']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['10']++;var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(sourceDir) {
      __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['2']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['11']++;var filePath, content, lines, id;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['12']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
         __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['3']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['13']++;while (1) {
            __cov_fYQK_LSZ_Hv5$mWcD11XEw.s['14']++;switch (_context2.prev = _context2.next) {case 0:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['15']++;filePath = _path2.default.join(sourceDir, extensionIdFile);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['16']++;content = void 0;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['17']++;_context2.prev = 2;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['18']++;_context2.next = 5;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['19']++;return _mz.fs.readFile(filePath);case 5:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][1]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['20']++;content = _context2.sent;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['21']++;_context2.next = 14;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['22']++;break;case 8:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][2]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['23']++;_context2.prev = 8;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['24']++;_context2.t0 = _context2['catch'](2);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['25']++;if (!(0, _errors.isErrorWithCode)('ENOENT', _context2.t0)) {
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['2'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['26']++;_context2.next = 13;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['27']++;break;
                  } else {
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['2'][1]++;
                  }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['28']++;log.debug('No ID file found at: ' + filePath);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['29']++;return _context2.abrupt('return');case 13:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][3]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['30']++;throw _context2.t0;case 14:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][4]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['31']++;lines = content.toString().split('\n');__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['32']++;lines = lines.filter(function (line) {
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['4']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['33']++;line = line.trim();__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['34']++;if ((__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['4'][0]++, line) && (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['4'][1]++, !line.startsWith('#'))) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['3'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['35']++;return line;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['3'][1]++;
                     }
                  });__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['36']++;id = lines[0];__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['37']++;log.debug('Found extension ID ' + id + ' in ' + filePath);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['38']++;if (id) {
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['5'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['39']++;_context2.next = 20;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['40']++;break;
                  } else {
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['5'][1]++;
                  }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['41']++;throw new _errors.UsageError('No ID found in extension ID file ' + filePath);case 20:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][5]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['42']++;return _context2.abrupt('return', id);case 21:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][6]++;case 'end':
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['1'][7]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['43']++;return _context2.stop();}
         }
      }, _callee2, this, [[2, 8]]);
   }));__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['44']++;return function getIdFromSourceDir(_x3) {
      __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['5']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['45']++;return _ref6.apply(this, arguments);
   };
}();__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['46']++;var saveIdToSourceDir = exports.saveIdToSourceDir = function () {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['6']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['47']++;var _ref7 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(sourceDir, id) {
      __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['7']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['48']++;var filePath;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['49']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
         __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['8']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['50']++;while (1) {
            __cov_fYQK_LSZ_Hv5$mWcD11XEw.s['51']++;switch (_context3.prev = _context3.next) {case 0:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['6'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['52']++;filePath = _path2.default.join(sourceDir, extensionIdFile);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['53']++;_context3.next = 3;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['54']++;return _mz.fs.writeFile(filePath, ['# This file was created by https://github.com/mozilla/web-ext', '# Your auto-generated extension ID for addons.mozilla.org is:', id.toString()].join('\n'));case 3:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['6'][1]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['55']++;log.debug('Saved auto-generated ID ' + id + ' to ' + filePath);case 4:
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['6'][2]++;case 'end':
                  __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['6'][3]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['56']++;return _context3.stop();}
         }
      }, _callee3, this);
   }));__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['57']++;return function saveIdToSourceDir(_x4, _x5) {
      __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['9']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['58']++;return _ref7.apply(this, arguments);
   };
}();__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['59']++;exports.default = sign;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['60']++;var _path = __webpack_require__(4);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['61']++;var _path2 = _interopRequireDefault(_path);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['62']++;var _mz = __webpack_require__(9);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['63']++;var _signAddon = __webpack_require__(194);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['64']++;var _signAddon2 = _interopRequireDefault(_signAddon);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['65']++;var _build = __webpack_require__(46);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['66']++;var _build2 = _interopRequireDefault(_build);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['67']++;var _manifest = __webpack_require__(25);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['68']++;var _manifest2 = _interopRequireDefault(_manifest);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['69']++;var _tempDir = __webpack_require__(15);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['70']++;var _errors = __webpack_require__(2);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['71']++;var _artifacts = __webpack_require__(48);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['72']++;var _logger = __webpack_require__(0);function _interopRequireDefault(obj) {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['10']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['74']++;return (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['8'][0]++, obj) && (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['8'][1]++, obj.__esModule) ? (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['7'][0]++, obj) : (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['7'][1]++, { default: obj });
}__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['75']++;var log = (0, _logger.createLogger)(__filename);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['76']++;var extensionIdFile = exports.extensionIdFile = '.web-extension-id';function sign(_ref) {
   __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['11']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['78']++;var verbose = _ref.verbose,
       sourceDir = _ref.sourceDir,
       artifactsDir = _ref.artifactsDir,
       _ref$ignoreFiles = _ref.ignoreFiles,
       ignoreFiles = _ref$ignoreFiles === undefined ? (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['9'][0]++, []) : (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['9'][1]++, _ref$ignoreFiles),
       apiKey = _ref.apiKey,
       apiSecret = _ref.apiSecret,
       apiUrlPrefix = _ref.apiUrlPrefix,
       apiProxy = _ref.apiProxy,
       id = _ref.id,
       timeout = _ref.timeout;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['79']++;var _ref2 = (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['11'][0]++, arguments.length > 1) && (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['11'][1]++, arguments[1] !== undefined) ? (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['10'][0]++, arguments[1]) : (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['10'][1]++, {}),
       _ref2$build = _ref2.build,
       build = _ref2$build === undefined ? (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['12'][0]++, _build2.default) : (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['12'][1]++, _ref2$build),
       _ref2$signAddon = _ref2.signAddon,
       signAddon = _ref2$signAddon === undefined ? (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['13'][0]++, _signAddon2.default) : (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['13'][1]++, _ref2$signAddon),
       preValidatedManifest = _ref2.preValidatedManifest;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['80']++;return (0, _tempDir.withTempDir)(function () {
      __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['12']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['81']++;var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(tmpDir) {
         __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['13']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['82']++;var manifestData, _ref4, _ref5, buildResult, idFromSourceDir, manifestId, signingResult;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['83']++;return _regenerator2.default.wrap(function _callee$(_context) {
            __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['14']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['84']++;while (1) {
               __cov_fYQK_LSZ_Hv5$mWcD11XEw.s['85']++;switch (_context.prev = _context.next) {case 0:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['86']++;_context.next = 2;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['87']++;return (0, _artifacts.prepareArtifactsDir)(artifactsDir);case 2:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][1]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['88']++;manifestData = void 0;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['89']++;if (!preValidatedManifest) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['15'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['90']++;_context.next = 7;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['91']++;break;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['15'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['92']++;manifestData = preValidatedManifest;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['93']++;_context.next = 10;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['94']++;break;case 7:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][2]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['95']++;_context.next = 9;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['96']++;return (0, _manifest2.default)(sourceDir);case 9:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][3]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['97']++;manifestData = _context.sent;case 10:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][4]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['98']++;_context.next = 12;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['99']++;return Promise.all([build({ sourceDir: sourceDir, ignoreFiles: ignoreFiles, artifactsDir: tmpDir.path() }, { manifestData: manifestData, showReadyMessage: false }), getIdFromSourceDir(sourceDir)]);case 12:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][5]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['100']++;_ref4 = _context.sent;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['101']++;_ref5 = (0, _slicedToArray3.default)(_ref4, 2);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['102']++;buildResult = _ref5[0];__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['103']++;idFromSourceDir = _ref5[1];__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['104']++;manifestId = (0, _manifest.getManifestId)(manifestData);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['105']++;if (!((__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['17'][0]++, id) && (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['17'][1]++, manifestId))) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['16'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['106']++;_context.next = 19;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['107']++;break;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['16'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['108']++;throw new _errors.UsageError('Cannot set custom ID ' + id + ' because manifest.json ' + ('declares ID ' + manifestId));case 19:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][6]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['109']++;if (id) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['18'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['110']++;log.debug('Using custom ID declared as --id=' + id);
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['18'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['111']++;if (manifestId) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['19'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['112']++;id = manifestId;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['19'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['113']++;if ((__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['21'][0]++, !id) && (__cov_fYQK_LSZ_Hv5$mWcD11XEw.b['21'][1]++, idFromSourceDir)) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['20'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['114']++;log.info('Using previously auto-generated extension ID: ' + idFromSourceDir);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['115']++;id = idFromSourceDir;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['20'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['116']++;if (!id) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['22'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['117']++;log.warn('No extension ID specified (it will be auto-generated)');
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['22'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['118']++;_context.next = 25;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['119']++;return signAddon({ apiKey: apiKey, apiSecret: apiSecret, apiUrlPrefix: apiUrlPrefix, apiProxy: apiProxy, timeout: timeout, verbose: verbose, id: id, xpiPath: buildResult.extensionPath, version: manifestData.version, downloadDir: artifactsDir });case 25:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][7]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['120']++;signingResult = _context.sent;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['121']++;if (!signingResult.id) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['23'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['122']++;_context.next = 29;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['123']++;break;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['23'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['124']++;_context.next = 29;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['125']++;return saveIdToSourceDir(sourceDir, signingResult.id);case 29:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][8]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['126']++;if (!signingResult.success) {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['24'][0]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['127']++;_context.next = 34;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['128']++;break;
                     } else {
                        __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['24'][1]++;
                     }__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['129']++;log.info('Extension ID: ' + signingResult.id);__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['130']++;log.info('SUCCESS');__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['131']++;_context.next = 36;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['132']++;break;case 34:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][9]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['133']++;log.info('FAIL');__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['134']++;throw new _errors.WebExtError('The WebExtension could not be signed');case 36:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][10]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['135']++;return _context.abrupt('return', signingResult);case 37:
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][11]++;case 'end':
                     __cov_fYQK_LSZ_Hv5$mWcD11XEw.b['14'][12]++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['136']++;return _context.stop();}
            }
         }, _callee, this);
      }));__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['137']++;return function (_x2) {
         __cov_fYQK_LSZ_Hv5$mWcD11XEw.f['15']++;__cov_fYQK_LSZ_Hv5$mWcD11XEw.s['138']++;return _ref3.apply(this, arguments);
      };
   }());
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/cmd/sign.js"))

/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_XxfWDXe_0ezsQuCy6oqpNQ = Function('return this')();
if (!__cov_XxfWDXe_0ezsQuCy6oqpNQ.__coverage__) {
   __cov_XxfWDXe_0ezsQuCy6oqpNQ.__coverage__ = {};
}
__cov_XxfWDXe_0ezsQuCy6oqpNQ = __cov_XxfWDXe_0ezsQuCy6oqpNQ.__coverage__;
if (!__cov_XxfWDXe_0ezsQuCy6oqpNQ['/home/travis/build/mozilla/web-ext/src/extension-runners/firefox-desktop.js']) {
   __cov_XxfWDXe_0ezsQuCy6oqpNQ['/home/travis/build/mozilla/web-ext/src/extension-runners/firefox-desktop.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/extension-runners/firefox-desktop.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 1, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 1, "29": 0, "30": 0, "31": 0, "32": 1, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 1, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 1, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 1, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 1, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "148": 0, "149": 0, "150": 0, "151": 0, "152": 0, "153": 0, "154": 0, "155": 0, "156": 0, "157": 0, "158": 0, "159": 0, "160": 0, "161": 0, "162": 0, "163": 0, "164": 0, "165": 0, "166": 0, "167": 0, "168": 0, "169": 0, "170": 0, "171": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "177": 0, "178": 0, "179": 0, "180": 0, "181": 0, "182": 0, "183": 0, "184": 0, "185": 0, "186": 0, "187": 0, "188": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "194": 0, "195": 0, "196": 0, "197": 0, "198": 0, "199": 0, "200": 0, "201": 0, "202": 0, "203": 0, "204": 0, "205": 1, "206": 0, "207": 0, "208": 0, "209": 0, "210": 0, "211": 0, "212": 0, "213": 0, "214": 0, "215": 0, "216": 0, "217": 0, "218": 0, "219": 0, "220": 0, "221": 0, "222": 0, "223": 0, "224": 0, "225": 0, "226": 0, "227": 0, "228": 0, "229": 0, "230": 0, "231": 0, "232": 0, "233": 0, "234": 0, "235": 0, "236": 0, "237": 0, "238": 0, "239": 0, "240": 0, "241": 0, "242": 0, "243": 0, "244": 0, "245": 0, "246": 0, "247": 0, "248": 0, "249": 0, "250": 0, "251": 0, "252": 0, "253": 0, "254": 0, "255": 0, "256": 0, "257": 0, "258": 0, "259": 0, "260": 0, "261": 0, "262": 0, "263": 0, "264": 0, "265": 0, "266": 0, "267": 0, "268": 0, "269": 0, "270": 0, "271": 0, "272": 0, "273": 0, "274": 0, "275": 0, "276": 0, "277": 0, "278": 0, "279": 0, "280": 0, "281": 0, "282": 0, "283": 0, "284": 0, "285": 0, "286": 0, "287": 0, "288": 0, "289": 0, "290": 0, "291": 0, "292": 0, "293": 0, "294": 0, "295": 0, "296": 0, "297": 0, "298": 0, "299": 0, "300": 0, "301": 0, "302": 0, "303": 0, "304": 0, "305": 0, "306": 0, "307": 0, "308": 0, "309": 0, "310": 0, "311": 0, "312": 0, "313": 0, "314": 0, "315": 0, "316": 0, "317": 0, "318": 0, "319": 0, "320": 0, "321": 0, "322": 1, "323": 0, "324": 0, "325": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0, 0, 0], "8": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0, 0, 0, 0, 0, 0], "16": [0, 0], "17": [0, 0, 0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0], "27": [0, 0], "28": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "29": [0, 0], "30": [0, 0], "31": [0, 0], "32": [0, 0], "33": [0, 0], "34": [0, 0], "35": [0, 0], "36": [0, 0], "37": [0, 0], "38": [0, 0], "39": [0, 0], "40": [0, 0], "41": [0, 0], "42": [0, 0], "43": [0, 0], "44": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0 }, "fnMap": { "1": { "name": "_interopRequireWildcard", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "(anonymous_3)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "FirefoxDesktopExtensionRunner", "line": 64, "loc": { "start": { "line": 64, "column": 14 }, "end": { "line": 64, "column": 59 } } }, "5": { "name": "getName", "line": 76, "loc": { "start": { "line": 76, "column": 12 }, "end": { "line": 76, "column": 12 } } }, "6": { "name": "(anonymous_6)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "7": { "name": "_callee", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "8": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "run", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "10": { "name": "(anonymous_10)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "11": { "name": "_callee2", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "12": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "13": { "name": "reloadAllExtensions", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "14": { "name": "(anonymous_14)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "15": { "name": "_callee3", "line": 124, "loc": { "start": { "line": 124, "column": 4 }, "end": { "line": null, "column": null } } }, "16": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "17": { "name": "reloadExtensionBySourceDir", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "18": { "name": "registerCleanup", "line": 158, "loc": { "start": { "line": 158, "column": 18 }, "end": { "line": 158, "column": 38 } } }, "19": { "name": "(anonymous_19)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "20": { "name": "_callee4", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "21": { "name": "_callee4$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "22": { "name": "exit", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "23": { "name": "(anonymous_23)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "24": { "name": "_callee5", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "25": { "name": "_callee5$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "26": { "name": "setupProfileDir", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "27": { "name": "(anonymous_27)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "28": { "name": "_callee6", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "29": { "name": "_callee6$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "30": { "name": "(anonymous_30)", "line": 238, "loc": { "start": { "line": 238, "column": 41 }, "end": { "line": 238, "column": 47 } } }, "31": { "name": "(anonymous_31)", "line": 258, "loc": { "start": { "line": 258, "column": 20 }, "end": { "line": 258, "column": 64 } } }, "32": { "name": "startFirefoxInstance", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 16, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 16, "column": 12 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 17, "column": 0 }, "end": { "line": null, "column": null } }, "17": { "start": { "line": 20, "column": 0 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 50, "column": 0 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 55, "column": 13 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 64, "column": 14 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 65, "column": 9 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 67, "column": 9 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 68, "column": 9 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 77, "column": 11 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 86, "column": 10 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 92, "column": 10 }, "end": { "line": null, "column": null } }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "49": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "50": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "60": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 102, "column": 30 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 103, "column": 26 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "71": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "72": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "73": { "start": { "line": 104, "column": 10 }, "end": { "line": null, "column": null } }, "74": { "start": { "line": 105, "column": 21 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "76": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "77": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "78": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "79": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "80": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "81": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "82": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "85": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "86": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "87": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "88": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "89": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "90": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "91": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "92": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "93": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "94": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "95": { "start": { "line": 109, "column": 8 }, "end": { "line": null, "column": null } }, "96": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "97": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "98": { "start": { "line": 110, "column": 13 }, "end": { "line": null, "column": null } }, "99": { "start": { "line": 116, "column": 11 }, "end": { "line": null, "column": null } }, "100": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "101": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "102": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "103": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "104": { "start": { "line": 124, "column": 4 }, "end": { "line": null, "column": null } }, "105": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "106": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "107": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "108": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "109": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "110": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "111": { "start": { "line": 129, "column": 9 }, "end": { "line": null, "column": null } }, "112": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "113": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "114": { "start": { "line": 130, "column": 13 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "116": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "117": { "start": { "line": 141, "column": 12 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "119": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "120": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "121": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "122": { "start": { "line": 143, "column": 13 }, "end": { "line": null, "column": null } }, "123": { "start": { "line": 150, "column": 11 }, "end": { "line": null, "column": null } }, "124": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "125": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "126": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "127": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "128": { "start": { "line": 159, "column": 9 }, "end": { "line": null, "column": null } }, "129": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "130": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "131": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "132": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "133": { "start": { "line": 166, "column": 8 }, "end": { "line": null, "column": null } }, "134": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "135": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "136": { "start": { "line": 167, "column": 12 }, "end": { "line": null, "column": null } }, "137": { "start": { "line": 170, "column": 9 }, "end": { "line": null, "column": null } }, "138": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "139": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "140": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "141": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "142": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "143": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "144": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "145": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "146": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "147": { "start": { "line": 183, "column": 8 }, "end": { "line": null, "column": null } }, "148": { "start": { "line": 185, "column": 8 }, "end": { "line": null, "column": null } }, "149": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "150": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "151": { "start": { "line": 186, "column": 10 }, "end": { "line": null, "column": null } }, "152": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "153": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "154": { "start": { "line": 187, "column": 12 }, "end": { "line": null, "column": null } }, "155": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "156": { "start": { "line": 188, "column": 29 }, "end": { "line": null, "column": null } }, "157": { "start": { "line": 188, "column": 13 }, "end": { "line": null, "column": null } }, "158": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "159": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "160": { "start": { "line": 190, "column": 12 }, "end": { "line": null, "column": null } }, "161": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "162": { "start": { "line": 191, "column": 29 }, "end": { "line": null, "column": null } }, "163": { "start": { "line": 191, "column": 13 }, "end": { "line": null, "column": null } }, "164": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "165": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "166": { "start": { "line": 194, "column": 10 }, "end": { "line": null, "column": null } }, "167": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "168": { "start": { "line": 195, "column": 27 }, "end": { "line": null, "column": null } }, "169": { "start": { "line": 195, "column": 11 }, "end": { "line": null, "column": null } }, "170": { "start": { "line": 199, "column": 8 }, "end": { "line": null, "column": null } }, "171": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "172": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "173": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "174": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "175": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "176": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "177": { "start": { "line": 200, "column": 30 }, "end": { "line": null, "column": null } }, "178": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "179": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "180": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "181": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "182": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "183": { "start": { "line": 201, "column": 14 }, "end": { "line": null, "column": null } }, "184": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "185": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "186": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "187": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "188": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "189": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "190": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "191": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "192": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "193": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "194": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "195": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "196": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "197": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "198": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "199": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "200": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "201": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "202": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "203": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "204": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "205": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "206": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "207": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "208": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "209": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "210": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "211": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "212": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "213": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "214": { "start": { "line": 220, "column": 8 }, "end": { "line": null, "column": null } }, "215": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "216": { "start": { "line": 224, "column": 8 }, "end": { "line": null, "column": null } }, "217": { "start": { "line": 225, "column": 17 }, "end": { "line": null, "column": null } }, "218": { "start": { "line": 227, "column": 8 }, "end": { "line": null, "column": null } }, "219": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "220": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "221": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "222": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "223": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "224": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "225": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "226": { "start": { "line": 229, "column": 24 }, "end": { "line": null, "column": null } }, "227": { "start": { "line": 229, "column": 30 }, "end": { "line": null, "column": null } }, "228": { "start": { "line": 230, "column": 19 }, "end": { "line": null, "column": null } }, "229": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "230": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "231": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "232": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "233": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "234": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "235": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "236": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "237": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "238": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "239": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "240": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "241": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "242": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "243": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "244": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "245": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "246": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "247": { "start": { "line": 234, "column": 29 }, "end": { "line": null, "column": null } }, "248": { "start": { "line": 234, "column": 9 }, "end": { "line": null, "column": null } }, "249": { "start": { "line": 238, "column": 9 }, "end": { "line": null, "column": null } }, "250": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "251": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "252": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "253": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "254": { "start": { "line": 239, "column": 30 }, "end": { "line": null, "column": null } }, "255": { "start": { "line": 239, "column": 17 }, "end": { "line": null, "column": null } }, "256": { "start": { "line": 240, "column": 12 }, "end": { "line": null, "column": null } }, "257": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "258": { "start": { "line": 243, "column": 14 }, "end": { "line": null, "column": null } }, "259": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "260": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "261": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "262": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "263": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "264": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "265": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "266": { "start": { "line": 248, "column": 9 }, "end": { "line": null, "column": null } }, "267": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "268": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "269": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "270": { "start": { "line": 249, "column": 55 }, "end": { "line": null, "column": null } }, "271": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "272": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "273": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "274": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "275": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "276": { "start": { "line": 254, "column": 30 }, "end": { "line": null, "column": null } }, "277": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "278": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "279": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "280": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "281": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "282": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "283": { "start": { "line": 257, "column": 12 }, "end": { "line": null, "column": null } }, "284": { "start": { "line": 259, "column": 23 }, "end": { "line": null, "column": null } }, "285": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "286": { "start": { "line": 263, "column": 15 }, "end": { "line": null, "column": null } }, "287": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "288": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "289": { "start": { "line": 264, "column": 18 }, "end": { "line": null, "column": null } }, "290": { "start": { "line": 269, "column": 15 }, "end": { "line": null, "column": null } }, "291": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "292": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "293": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "294": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "295": { "start": { "line": 271, "column": 14 }, "end": { "line": null, "column": null } }, "296": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "297": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "298": { "start": { "line": 272, "column": 16 }, "end": { "line": null, "column": null } }, "299": { "start": { "line": 273, "column": 18 }, "end": { "line": null, "column": null } }, "300": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "301": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "302": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "303": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "304": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "305": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "306": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "307": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "308": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "309": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "310": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "311": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "312": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "313": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "314": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "315": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "316": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "317": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "318": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "319": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "320": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "321": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "322": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "323": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "324": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "325": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 104, "type": "if", "locations": [{ "start": { "line": 104, "column": 10 }, "end": { "line": 104, "column": 10 } }, { "start": { "line": 104, "column": 10 }, "end": { "line": 104, "column": 10 } }] }, "11": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "12": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "13": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 109, "type": "if", "locations": [{ "start": { "line": 109, "column": 8 }, "end": { "line": 109, "column": 8 } }, { "start": { "line": 109, "column": 8 }, "end": { "line": 109, "column": 8 } }] }, "15": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 129, "type": "if", "locations": [{ "start": { "line": 129, "column": 9 }, "end": { "line": 129, "column": 9 } }, { "start": { "line": 129, "column": 9 }, "end": { "line": 129, "column": 9 } }] }, "17": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 166, "type": "if", "locations": [{ "start": { "line": 166, "column": 8 }, "end": { "line": 166, "column": 8 } }, { "start": { "line": 166, "column": 8 }, "end": { "line": 166, "column": 8 } }] }, "19": { "line": 166, "type": "binary-expr", "locations": [{ "start": { "line": 166, "column": 8 }, "end": { "line": 166, "column": 8 } }, { "start": { "line": 166, "column": 29 }, "end": { "line": null, "column": null } }] }, "20": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "21": { "line": 185, "type": "if", "locations": [{ "start": { "line": 185, "column": 8 }, "end": { "line": 185, "column": 8 } }, { "start": { "line": 185, "column": 8 }, "end": { "line": 185, "column": 8 } }] }, "22": { "line": 186, "type": "if", "locations": [{ "start": { "line": 186, "column": 10 }, "end": { "line": 186, "column": 10 } }, { "start": { "line": 186, "column": 10 }, "end": { "line": 186, "column": 10 } }] }, "23": { "line": 199, "type": "if", "locations": [{ "start": { "line": 199, "column": 8 }, "end": { "line": 199, "column": 8 } }, { "start": { "line": 199, "column": 8 }, "end": { "line": 199, "column": 8 } }] }, "24": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "25": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "26": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "27": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "28": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "29": { "line": 224, "type": "if", "locations": [{ "start": { "line": 224, "column": 8 }, "end": { "line": 224, "column": 8 } }, { "start": { "line": 224, "column": 8 }, "end": { "line": 224, "column": 8 } }] }, "30": { "line": 227, "type": "if", "locations": [{ "start": { "line": 227, "column": 8 }, "end": { "line": 227, "column": 8 } }, { "start": { "line": 227, "column": 8 }, "end": { "line": 227, "column": 8 } }] }, "31": { "line": 228, "type": "cond-expr", "locations": [{ "start": { "line": 228, "column": 45 }, "end": { "line": 228, "column": 19 } }, { "start": { "line": 228, "column": 56 }, "end": { "line": null, "column": null } }] }, "32": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "33": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "34": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "35": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "36": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "37": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "38": { "line": 248, "type": "if", "locations": [{ "start": { "line": 248, "column": 9 }, "end": { "line": 248, "column": 9 } }, { "start": { "line": 248, "column": 9 }, "end": { "line": 248, "column": 9 } }] }, "39": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "40": { "line": 263, "type": "if", "locations": [{ "start": { "line": 263, "column": 15 }, "end": { "line": 263, "column": 15 } }, { "start": { "line": 263, "column": 15 }, "end": { "line": 263, "column": 15 } }] }, "41": { "line": 271, "type": "if", "locations": [{ "start": { "line": 271, "column": 14 }, "end": { "line": 271, "column": 14 } }, { "start": { "line": 271, "column": 14 }, "end": { "line": 271, "column": 14 } }] }, "42": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "43": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "44": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "", "/**", " * This module provide an ExtensionRunner subclass that manage an extension executed", " * in a Firefox for Desktop instance.", " */", "", "// Import flow types from npm dependencies.", "import type FirefoxProfile from 'firefox-profile';", "", "import {", "  MultiExtensionsReloadError,", "  RemoteTempInstallNotSupported,", "  WebExtError,", "} from '../errors';", "import * as defaultFirefoxApp from '../firefox';", "import {", "  connectWithMaxRetries as defaultFirefoxConnector,", "} from '../firefox/remote';", "import {createLogger} from '../util/logger';", "// Import flow types from project files.", "import type {", "  FirefoxRDPResponseAddon,", "  RemoteFirefox,", "} from '../firefox/remote';", "import type {", "  ExtensionRunnerParams,", "  ExtensionRunnerReloadResult,", "} from './base';", "import type {FirefoxPreferences} from '../firefox/preferences';", "import type {FirefoxInfo} from '../firefox/index'; // eslint-disable-line import/named", "", "type FirefoxDesktopSpecificRunnerParams = {|", "  customPrefs?: FirefoxPreferences,", "  browserConsole: boolean,", "  firefoxBinary: string,", "  preInstall: boolean,", "", "  // Firefox desktop injected dependencies.", "  firefoxApp: typeof defaultFirefoxApp,", "  firefoxClient: typeof defaultFirefoxConnector,", "|};", "", "export type FirefoxDesktopExtensionRunnerParams = {|", "  ...ExtensionRunnerParams,", "  // Firefox desktop CLI params.", "  ...FirefoxDesktopSpecificRunnerParams,", "|};", "", "const log = createLogger(__filename);", "", "/**", " * Implements an IExtensionRunner which manages a Firefox Desktop instance.", " */", "export class FirefoxDesktopExtensionRunner {", "  cleanupCallbacks: Set<Function>;", "  params: FirefoxDesktopExtensionRunnerParams;", "  profile: FirefoxProfile;", "  // Map extensions sourceDir to their related addon ids.", "  reloadableExtensions: Map<string, string>;", "  remoteFirefox: RemoteFirefox;", "  runningInfo: FirefoxInfo;", "", "  constructor(params: FirefoxDesktopExtensionRunnerParams) {", "    this.params = params;", "", "    this.reloadableExtensions = new Map();", "    this.cleanupCallbacks = new Set();", "  }", "", "  // Method exported from the IExtensionRunner interface.", "", "  /**", "   * Returns the runner name.", "   */", "  getName() {", "    return 'Firefox Desktop';", "  }", "", "  /**", "   * Setup the Firefox Profile and run a Firefox Desktop instance.", "   */", "  async run(): Promise<void> {", "    // Get a firefox profile with the custom Prefs set (a new or a cloned one).", "    // Pre-install extensions as proxy if needed (and disable auto-reload if you do)", "    await this.setupProfileDir();", "", "    // (if reload is enabled):", "    // - Connect to the firefox instance on RDP", "    // - Install any extension if needed (if not installed as proxy)", "    // - Keep track of the extension id assigned in a map with the sourceDir as a key", "    await this.startFirefoxInstance();", "  }", "", "  /**", "   * Reloads all the extensions, collect any reload error and resolves to", "   * an array composed by a single ExtensionRunnerReloadResult object.", "   */", "  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {", "    const runnerName = this.getName();", "    const reloadErrors = new Map();", "    for (const {sourceDir} of this.params.extensions) {", "      const [res] = await this.reloadExtensionBySourceDir(sourceDir);", "      if (res.reloadError instanceof Error) {", "        reloadErrors.set(sourceDir, res.reloadError);", "      }", "    }", "", "    if (reloadErrors.size > 0) {", "      return [{", "        runnerName,", "        reloadError: new MultiExtensionsReloadError(reloadErrors),", "      }];", "    }", "", "    return [{runnerName}];", "  }", "", "  /**", "   * Reloads a single extension, collect any reload error and resolves to", "   * an array composed by a single ExtensionRunnerReloadResult object.", "   */", "  async reloadExtensionBySourceDir(", "    extensionSourceDir: string", "  ): Promise<Array<ExtensionRunnerReloadResult>> {", "    const runnerName = this.getName();", "    const addonId = this.reloadableExtensions.get(extensionSourceDir);", "", "    if (!addonId) {", "      return [{", "        sourceDir: extensionSourceDir,", "        reloadError: new WebExtError(", "          'Extension not reloadable: ' +", "          `no addonId has been mapped to \"${extensionSourceDir}\"`", "        ),", "        runnerName,", "      }];", "    }", "", "    try {", "      await this.remoteFirefox.reloadAddon(addonId);", "    } catch (error) {", "      return [{", "        sourceDir: extensionSourceDir,", "        reloadError: error,", "        runnerName,", "      }];", "    }", "", "    return [{runnerName, sourceDir: extensionSourceDir}];", "  }", "", "  /**", "   * Register a callback to be called when the runner has been exited", "   * (e.g. the Firefox instance exits or the user has requested web-ext", "   * to exit).", "   */", "  registerCleanup(fn: Function): void {", "    this.cleanupCallbacks.add(fn);", "  }", "", "  /**", "   * Exits the runner, by closing the managed Firefox instance.", "   */", "  async exit(): Promise<void> {", "    if (!this.runningInfo || !this.runningInfo.firefox) {", "      throw new WebExtError('No firefox instance is currently running');", "    }", "", "    this.runningInfo.firefox.kill();", "  }", "", "  // Private helper methods.", "", "  async setupProfileDir() {", "    const {", "      customPrefs,", "      extensions,", "      keepProfileChanges,", "      preInstall,", "      profilePath,", "      firefoxApp,", "    } = this.params;", "", "    if (profilePath) {", "      if (keepProfileChanges) {", "        log.debug(`Using Firefox profile from ${profilePath}`);", "        this.profile = await firefoxApp.useProfile(profilePath, {customPrefs});", "      } else {", "        log.debug(`Copying Firefox profile from ${profilePath}`);", "        this.profile = await firefoxApp.copyProfile(profilePath, {customPrefs});", "      }", "    } else {", "      log.debug('Creating new Firefox profile');", "      this.profile = await firefoxApp.createProfile({customPrefs});", "    }", "", "    // preInstall the extensions if needed.", "    if (preInstall) {", "      for (const extension of extensions) {", "        await firefoxApp.installExtension({", "          asProxy: true,", "          extensionPath: extension.sourceDir,", "          manifestData: extension.manifestData,", "          profile: this.profile,", "        });", "      }", "    }", "  }", "", "  async startFirefoxInstance() {", "    const {", "      browserConsole,", "      extensions,", "      firefoxBinary,", "      preInstall,", "      startUrl,", "      firefoxApp,", "      firefoxClient,", "    } = this.params;", "", "    const binaryArgs = [];", "", "    if (browserConsole) {", "      binaryArgs.push('-jsconsole');", "    }", "    if (startUrl) {", "      const urls = Array.isArray(startUrl) ? startUrl : [startUrl];", "      for (const url of urls) {", "        binaryArgs.push('--url', url);", "      }", "    }", "", "    this.runningInfo = await firefoxApp.run(this.profile, {", "      firefoxBinary, binaryArgs,", "    });", "", "    this.runningInfo.firefox.on('close', () => {", "      for (const cleanupCb of this.cleanupCallbacks) {", "        try {", "          cleanupCb();", "        } catch (error) {", "          log.error(`Exception on executing cleanup callback: ${error}`);", "        }", "      }", "    });", "", "    if (!preInstall) {", "      const remoteFirefox = this.remoteFirefox = await firefoxClient({", "        port: this.runningInfo.debuggerPort,", "      });", "", "      // Install all the temporary addons.", "      for (const extension of extensions) {", "        try {", "          const addonId = await (", "            remoteFirefox.installTemporaryAddon(extension.sourceDir)", "              .then((installResult: FirefoxRDPResponseAddon) => {", "                return installResult.addon.id;", "              })", "          );", "", "          if (!addonId) {", "            throw new WebExtError(", "              'Unexpected missing addonId in the installAsTemporaryAddon result'", "            );", "          }", "", "          this.reloadableExtensions.set(extension.sourceDir, addonId);", "        } catch (error) {", "          if (error instanceof RemoteTempInstallNotSupported) {", "            log.debug(`Caught: ${error}`);", "            throw new WebExtError(", "              'Temporary add-on installation is not supported in this version' +", "              ' of Firefox (you need Firefox 49 or higher). For older Firefox' +", "              ' versions, use --pre-install'", "            );", "          } else {", "            throw error;", "          }", "        }", "      }", "    }", "  }", "}", ""] };
}
__cov_XxfWDXe_0ezsQuCy6oqpNQ = __cov_XxfWDXe_0ezsQuCy6oqpNQ['/home/travis/build/mozilla/web-ext/src/extension-runners/firefox-desktop.js'];
__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['2']++;exports.FirefoxDesktopExtensionRunner = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['3']++;var _slicedToArray2 = __webpack_require__(30);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['4']++;var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['5']++;var _regenerator = __webpack_require__(8);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['6']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['7']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['8']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['9']++;var _classCallCheck2 = __webpack_require__(14);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['10']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['11']++;var _createClass2 = __webpack_require__(16);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['12']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['13']++;var _errors = __webpack_require__(2);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['14']++;var _firefox = __webpack_require__(35);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['15']++;var defaultFirefoxApp = _interopRequireWildcard(_firefox);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['16']++;var _remote = __webpack_require__(24);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['17']++;var _logger = __webpack_require__(0);function _interopRequireWildcard(obj) {
   __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['1']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['19']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['2'][0]++, obj) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['2'][1]++, obj.__esModule)) {
      __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['1'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['20']++;return obj;
   } else {
      __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['1'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['21']++;var newObj = {};__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['22']++;if (obj != null) {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['3'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['23']++;for (var key in obj) {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['24']++;if (Object.prototype.hasOwnProperty.call(obj, key)) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['4'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['25']++;newObj[key] = obj[key];
            } else {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['4'][1]++;
            }
         }
      } else {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['3'][1]++;
      }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['26']++;newObj.default = obj;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['27']++;return newObj;
   }
}function _interopRequireDefault(obj) {
   __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['2']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['29']++;return (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['6'][0]++, obj) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['6'][1]++, obj.__esModule) ? (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['5'][0]++, obj) : (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['5'][1]++, { default: obj });
}__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['30']++;var log = (0, _logger.createLogger)(__filename);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['31']++;var FirefoxDesktopExtensionRunner = exports.FirefoxDesktopExtensionRunner = function () {
   __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['3']++;function FirefoxDesktopExtensionRunner(params) {
      __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['4']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['33']++;(0, _classCallCheck3.default)(this, FirefoxDesktopExtensionRunner);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['34']++;this.params = params;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['35']++;this.reloadableExtensions = new Map();__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['36']++;this.cleanupCallbacks = new Set();
   }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['37']++;(0, _createClass3.default)(FirefoxDesktopExtensionRunner, [{ key: 'getName', value: function getName() {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['5']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['38']++;return 'Firefox Desktop';
      } }, { key: 'run', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['6']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['39']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['7']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['40']++;return _regenerator2.default.wrap(function _callee$(_context) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['8']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['41']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['42']++;switch (_context.prev = _context.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['7'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['43']++;_context.next = 2;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['44']++;return this.setupProfileDir();case 2:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['7'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['45']++;_context.next = 4;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['46']++;return this.startFirefoxInstance();case 4:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['7'][2]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['7'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['47']++;return _context.stop();}
               }
            }, _callee, this);
         }));function run() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['9']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['49']++;return _ref.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['50']++;return run;
      }() }, { key: 'reloadAllExtensions', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['10']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['51']++;var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['11']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['52']++;var runnerName, reloadErrors, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _ref4, sourceDir, _ref5, _ref6, res;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['53']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['12']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['54']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['55']++;switch (_context2.prev = _context2.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['56']++;runnerName = this.getName();__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['57']++;reloadErrors = new Map();__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['58']++;_iteratorNormalCompletion = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['59']++;_didIteratorError = false;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['60']++;_iteratorError = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['61']++;_context2.prev = 5;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['62']++;_iterator = this.params.extensions[Symbol.iterator]();case 7:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['63']++;if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['9'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['64']++;_context2.next = 19;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['65']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['9'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['66']++;_ref4 = _step.value;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['67']++;sourceDir = _ref4.sourceDir;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['68']++;_context2.next = 12;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['69']++;return this.reloadExtensionBySourceDir(sourceDir);case 12:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][2]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['70']++;_ref5 = _context2.sent;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['71']++;_ref6 = (0, _slicedToArray3.default)(_ref5, 1);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['72']++;res = _ref6[0];__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['73']++;if (res.reloadError instanceof Error) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['10'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['74']++;reloadErrors.set(sourceDir, res.reloadError);
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['10'][1]++;
                        }case 16:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['75']++;_iteratorNormalCompletion = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['76']++;_context2.next = 7;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['77']++;break;case 19:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][4]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['78']++;_context2.next = 25;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['79']++;break;case 21:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][5]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['80']++;_context2.prev = 21;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['81']++;_context2.t0 = _context2['catch'](5);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['82']++;_didIteratorError = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['83']++;_iteratorError = _context2.t0;case 25:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][6]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['84']++;_context2.prev = 25;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['85']++;_context2.prev = 26;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['86']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['12'][0]++, !_iteratorNormalCompletion) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['12'][1]++, _iterator.return)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['11'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['87']++;_iterator.return();
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['11'][1]++;
                        }case 28:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][7]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['88']++;_context2.prev = 28;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['89']++;if (!_didIteratorError) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['13'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['90']++;_context2.next = 31;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['91']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['13'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['92']++;throw _iteratorError;case 31:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][8]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['93']++;return _context2.finish(28);case 32:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][9]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['94']++;return _context2.finish(25);case 33:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][10]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['95']++;if (!(reloadErrors.size > 0)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['14'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['96']++;_context2.next = 35;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['97']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['14'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['98']++;return _context2.abrupt('return', [{ runnerName: runnerName, reloadError: new _errors.MultiExtensionsReloadError(reloadErrors) }]);case 35:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][11]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['99']++;return _context2.abrupt('return', [{ runnerName: runnerName }]);case 36:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][12]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['8'][13]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['100']++;return _context2.stop();}
               }
            }, _callee2, this, [[5, 21, 25, 33], [26,, 28, 32]]);
         }));function reloadAllExtensions() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['13']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['102']++;return _ref2.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['103']++;return reloadAllExtensions;
      }() }, { key: 'reloadExtensionBySourceDir', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['14']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['104']++;var _ref7 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(extensionSourceDir) {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['15']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['105']++;var runnerName, addonId;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['106']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['16']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['107']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['108']++;switch (_context3.prev = _context3.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['109']++;runnerName = this.getName();__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['110']++;addonId = this.reloadableExtensions.get(extensionSourceDir);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['111']++;if (addonId) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['16'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['112']++;_context3.next = 4;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['113']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['16'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['114']++;return _context3.abrupt('return', [{ sourceDir: extensionSourceDir, reloadError: new _errors.WebExtError('Extension not reloadable: ' + ('no addonId has been mapped to "' + extensionSourceDir + '"')), runnerName: runnerName }]);case 4:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['115']++;_context3.prev = 4;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['116']++;_context3.next = 7;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['117']++;return this.remoteFirefox.reloadAddon(addonId);case 7:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][2]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['118']++;_context3.next = 12;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['119']++;break;case 9:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['120']++;_context3.prev = 9;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['121']++;_context3.t0 = _context3['catch'](4);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['122']++;return _context3.abrupt('return', [{ sourceDir: extensionSourceDir, reloadError: _context3.t0, runnerName: runnerName }]);case 12:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][4]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['123']++;return _context3.abrupt('return', [{ runnerName: runnerName, sourceDir: extensionSourceDir }]);case 13:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][5]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['15'][6]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['124']++;return _context3.stop();}
               }
            }, _callee3, this, [[4, 9]]);
         }));function reloadExtensionBySourceDir(_x) {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['17']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['126']++;return _ref7.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['127']++;return reloadExtensionBySourceDir;
      }() }, { key: 'registerCleanup', value: function registerCleanup(fn) {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['18']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['128']++;this.cleanupCallbacks.add(fn);
      } }, { key: 'exit', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['19']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['129']++;var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['20']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['130']++;return _regenerator2.default.wrap(function _callee4$(_context4) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['21']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['131']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['132']++;switch (_context4.prev = _context4.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['17'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['133']++;if (!((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['19'][0]++, !this.runningInfo) || (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['19'][1]++, !this.runningInfo.firefox))) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['18'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['134']++;_context4.next = 2;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['135']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['18'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['136']++;throw new _errors.WebExtError('No firefox instance is currently running');case 2:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['17'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['137']++;this.runningInfo.firefox.kill();case 3:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['17'][2]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['17'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['138']++;return _context4.stop();}
               }
            }, _callee4, this);
         }));function exit() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['22']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['140']++;return _ref8.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['141']++;return exit;
      }() }, { key: 'setupProfileDir', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['23']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['142']++;var _ref9 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['24']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['143']++;var _params, customPrefs, extensions, keepProfileChanges, preInstall, profilePath, firefoxApp, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, extension;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['144']++;return _regenerator2.default.wrap(function _callee5$(_context5) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['25']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['145']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['146']++;switch (_context5.prev = _context5.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['147']++;_params = this.params, customPrefs = _params.customPrefs, extensions = _params.extensions, keepProfileChanges = _params.keepProfileChanges, preInstall = _params.preInstall, profilePath = _params.profilePath, firefoxApp = _params.firefoxApp;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['148']++;if (!profilePath) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['21'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['149']++;_context5.next = 15;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['150']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['21'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['151']++;if (!keepProfileChanges) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['22'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['152']++;_context5.next = 9;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['153']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['22'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['154']++;log.debug('Using Firefox profile from ' + profilePath);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['155']++;_context5.next = 6;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['156']++;return firefoxApp.useProfile(profilePath, { customPrefs: customPrefs });case 6:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['157']++;this.profile = _context5.sent;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['158']++;_context5.next = 13;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['159']++;break;case 9:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][2]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['160']++;log.debug('Copying Firefox profile from ' + profilePath);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['161']++;_context5.next = 12;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['162']++;return firefoxApp.copyProfile(profilePath, { customPrefs: customPrefs });case 12:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['163']++;this.profile = _context5.sent;case 13:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][4]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['164']++;_context5.next = 19;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['165']++;break;case 15:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][5]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['166']++;log.debug('Creating new Firefox profile');__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['167']++;_context5.next = 18;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['168']++;return firefoxApp.createProfile({ customPrefs: customPrefs });case 18:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][6]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['169']++;this.profile = _context5.sent;case 19:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][7]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['170']++;if (!preInstall) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['23'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['171']++;_context5.next = 46;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['172']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['23'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['173']++;_iteratorNormalCompletion2 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['174']++;_didIteratorError2 = false;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['175']++;_iteratorError2 = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['176']++;_context5.prev = 23;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['177']++;_iterator2 = extensions[Symbol.iterator]();case 25:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][8]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['178']++;if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['24'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['179']++;_context5.next = 32;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['180']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['24'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['181']++;extension = _step2.value;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['182']++;_context5.next = 29;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['183']++;return firefoxApp.installExtension({ asProxy: true, extensionPath: extension.sourceDir, manifestData: extension.manifestData, profile: this.profile });case 29:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][9]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['184']++;_iteratorNormalCompletion2 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['185']++;_context5.next = 25;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['186']++;break;case 32:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][10]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['187']++;_context5.next = 38;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['188']++;break;case 34:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][11]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['189']++;_context5.prev = 34;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['190']++;_context5.t0 = _context5['catch'](23);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['191']++;_didIteratorError2 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['192']++;_iteratorError2 = _context5.t0;case 38:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][12]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['193']++;_context5.prev = 38;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['194']++;_context5.prev = 39;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['195']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['26'][0]++, !_iteratorNormalCompletion2) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['26'][1]++, _iterator2.return)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['25'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['196']++;_iterator2.return();
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['25'][1]++;
                        }case 41:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][13]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['197']++;_context5.prev = 41;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['198']++;if (!_didIteratorError2) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['27'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['199']++;_context5.next = 44;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['200']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['27'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['201']++;throw _iteratorError2;case 44:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][14]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['202']++;return _context5.finish(41);case 45:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][15]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['203']++;return _context5.finish(38);case 46:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][16]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['20'][17]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['204']++;return _context5.stop();}
               }
            }, _callee5, this, [[23, 34, 38, 46], [39,, 41, 45]]);
         }));function setupProfileDir() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['26']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['206']++;return _ref9.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['207']++;return setupProfileDir;
      }() }, { key: 'startFirefoxInstance', value: function () {
         __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['27']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['208']++;var _ref10 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['28']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['209']++;var _this = this;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['210']++;var _params2, browserConsole, extensions, firefoxBinary, preInstall, startUrl, firefoxApp, firefoxClient, binaryArgs, urls, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, url, remoteFirefox, _iteratorNormalCompletion5, _didIteratorError5, _iteratorError5, _iterator5, _step5, extension, addonId;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['211']++;return _regenerator2.default.wrap(function _callee6$(_context6) {
               __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['29']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['212']++;while (1) {
                  __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['213']++;switch (_context6.prev = _context6.next) {case 0:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['214']++;_params2 = this.params, browserConsole = _params2.browserConsole, extensions = _params2.extensions, firefoxBinary = _params2.firefoxBinary, preInstall = _params2.preInstall, startUrl = _params2.startUrl, firefoxApp = _params2.firefoxApp, firefoxClient = _params2.firefoxClient;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['215']++;binaryArgs = [];__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['216']++;if (browserConsole) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['29'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['217']++;binaryArgs.push('-jsconsole');
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['29'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['218']++;if (!startUrl) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['30'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['219']++;_context6.next = 24;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['220']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['30'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['221']++;urls = Array.isArray(startUrl) ? (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['31'][0]++, startUrl) : (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['31'][1]++, [startUrl]);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['222']++;_iteratorNormalCompletion3 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['223']++;_didIteratorError3 = false;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['224']++;_iteratorError3 = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['225']++;_context6.prev = 8;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['226']++;for (_iterator3 = urls[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['227']++;url = _step3.value;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['228']++;binaryArgs.push('--url', url);
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['229']++;_context6.next = 16;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['230']++;break;case 12:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][1]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['231']++;_context6.prev = 12;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['232']++;_context6.t0 = _context6['catch'](8);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['233']++;_didIteratorError3 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['234']++;_iteratorError3 = _context6.t0;case 16:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][2]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['235']++;_context6.prev = 16;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['236']++;_context6.prev = 17;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['237']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['33'][0]++, !_iteratorNormalCompletion3) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['33'][1]++, _iterator3.return)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['32'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['238']++;_iterator3.return();
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['32'][1]++;
                        }case 19:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][3]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['239']++;_context6.prev = 19;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['240']++;if (!_didIteratorError3) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['34'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['241']++;_context6.next = 22;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['242']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['34'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['243']++;throw _iteratorError3;case 22:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][4]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['244']++;return _context6.finish(19);case 23:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][5]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['245']++;return _context6.finish(16);case 24:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][6]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['246']++;_context6.next = 26;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['247']++;return firefoxApp.run(this.profile, { firefoxBinary: firefoxBinary, binaryArgs: binaryArgs });case 26:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][7]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['248']++;this.runningInfo = _context6.sent;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['249']++;this.runningInfo.firefox.on('close', function () {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['30']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['250']++;var _iteratorNormalCompletion4 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['251']++;var _didIteratorError4 = false;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['252']++;var _iteratorError4 = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['253']++;try {
                              __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['254']++;for (var _iterator4 = _this.cleanupCallbacks[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                                 __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['255']++;var cleanupCb = _step4.value;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['256']++;try {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['257']++;cleanupCb();
                                 } catch (error) {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['258']++;log.error('Exception on executing cleanup callback: ' + error);
                                 }
                              }
                           } catch (err) {
                              __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['259']++;_didIteratorError4 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['260']++;_iteratorError4 = err;
                           } finally {
                              __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['261']++;try {
                                 __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['262']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['36'][0]++, !_iteratorNormalCompletion4) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['36'][1]++, _iterator4.return)) {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['35'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['263']++;_iterator4.return();
                                 } else {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['35'][1]++;
                                 }
                              } finally {
                                 __cov_XxfWDXe_0ezsQuCy6oqpNQ.s['264']++;if (_didIteratorError4) {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['37'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['265']++;throw _iteratorError4;
                                 } else {
                                    __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['37'][1]++;
                                 }
                              }
                           }
                        });__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['266']++;if (preInstall) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['38'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['267']++;_context6.next = 73;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['268']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['38'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['269']++;_context6.next = 31;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['270']++;return firefoxClient({ port: this.runningInfo.debuggerPort });case 31:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][8]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['271']++;remoteFirefox = this.remoteFirefox = _context6.sent;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['272']++;_iteratorNormalCompletion5 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['273']++;_didIteratorError5 = false;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['274']++;_iteratorError5 = undefined;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['275']++;_context6.prev = 35;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['276']++;_iterator5 = extensions[Symbol.iterator]();case 37:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][9]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['277']++;if (_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['39'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['278']++;_context6.next = 59;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['279']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['39'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['280']++;extension = _step5.value;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['281']++;_context6.prev = 39;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['282']++;_context6.next = 42;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['283']++;return remoteFirefox.installTemporaryAddon(extension.sourceDir).then(function (installResult) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['31']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['284']++;return installResult.addon.id;
                        });case 42:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][10]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['285']++;addonId = _context6.sent;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['286']++;if (addonId) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['40'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['287']++;_context6.next = 45;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['288']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['40'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['289']++;throw new _errors.WebExtError('Unexpected missing addonId in the installAsTemporaryAddon result');case 45:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][11]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['290']++;this.reloadableExtensions.set(extension.sourceDir, addonId);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['291']++;_context6.next = 56;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['292']++;break;case 48:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][12]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['293']++;_context6.prev = 48;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['294']++;_context6.t1 = _context6['catch'](39);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['295']++;if (!(_context6.t1 instanceof _errors.RemoteTempInstallNotSupported)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['41'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['296']++;_context6.next = 55;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['297']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['41'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['298']++;log.debug('Caught: ' + _context6.t1);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['299']++;throw new _errors.WebExtError('Temporary add-on installation is not supported in this version' + ' of Firefox (you need Firefox 49 or higher). For older Firefox' + ' versions, use --pre-install');case 55:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][13]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['300']++;throw _context6.t1;case 56:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][14]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['301']++;_iteratorNormalCompletion5 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['302']++;_context6.next = 37;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['303']++;break;case 59:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][15]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['304']++;_context6.next = 65;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['305']++;break;case 61:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][16]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['306']++;_context6.prev = 61;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['307']++;_context6.t2 = _context6['catch'](35);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['308']++;_didIteratorError5 = true;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['309']++;_iteratorError5 = _context6.t2;case 65:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][17]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['310']++;_context6.prev = 65;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['311']++;_context6.prev = 66;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['312']++;if ((__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['43'][0]++, !_iteratorNormalCompletion5) && (__cov_XxfWDXe_0ezsQuCy6oqpNQ.b['43'][1]++, _iterator5.return)) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['42'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['313']++;_iterator5.return();
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['42'][1]++;
                        }case 68:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][18]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['314']++;_context6.prev = 68;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['315']++;if (!_didIteratorError5) {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['44'][0]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['316']++;_context6.next = 71;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['317']++;break;
                        } else {
                           __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['44'][1]++;
                        }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['318']++;throw _iteratorError5;case 71:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][19]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['319']++;return _context6.finish(68);case 72:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][20]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['320']++;return _context6.finish(65);case 73:
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][21]++;case 'end':
                        __cov_XxfWDXe_0ezsQuCy6oqpNQ.b['28'][22]++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['321']++;return _context6.stop();}
               }
            }, _callee6, this, [[8, 12, 16, 24], [17,, 19, 23], [35, 61, 65, 73], [39, 48], [66,, 68, 72]]);
         }));function startFirefoxInstance() {
            __cov_XxfWDXe_0ezsQuCy6oqpNQ.f['32']++;__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['323']++;return _ref10.apply(this, arguments);
         }__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['324']++;return startFirefoxInstance;
      }() }]);__cov_XxfWDXe_0ezsQuCy6oqpNQ.s['325']++;return FirefoxDesktopExtensionRunner;
}();
/* WEBPACK VAR INJECTION */}.call(exports, "src/extension-runners/firefox-desktop.js"))

/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_qLHFwwPQUfhAvANKIcShgQ = Function('return this')();
if (!__cov_qLHFwwPQUfhAvANKIcShgQ.__coverage__) {
   __cov_qLHFwwPQUfhAvANKIcShgQ.__coverage__ = {};
}
__cov_qLHFwwPQUfhAvANKIcShgQ = __cov_qLHFwwPQUfhAvANKIcShgQ.__coverage__;
if (!__cov_qLHFwwPQUfhAvANKIcShgQ['/home/travis/build/mozilla/web-ext/src/extension-runners/index.js']) {
   __cov_qLHFwwPQUfhAvANKIcShgQ['/home/travis/build/mozilla/web-ext/src/extension-runners/index.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/extension-runners/index.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 1, "29": 0, "30": 0, "31": 0, "32": 1, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 1, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 1, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 0, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "148": 0, "149": 0, "150": 0, "151": 0, "152": 0, "153": 0, "154": 0, "155": 0, "156": 0, "157": 0, "158": 0, "159": 0, "160": 0, "161": 0, "162": 0, "163": 1, "164": 0, "165": 0, "166": 0, "167": 0, "168": 0, "169": 0, "170": 0, "171": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "177": 0, "178": 0, "179": 0, "180": 0, "181": 0, "182": 0, "183": 0, "184": 0, "185": 0, "186": 0, "187": 0, "188": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "194": 0, "195": 0, "196": 0, "197": 0, "198": 0, "199": 0, "200": 0, "201": 0, "202": 0, "203": 0, "204": 0, "205": 0, "206": 0, "207": 0, "208": 0, "209": 0, "210": 0, "211": 0, "212": 0, "213": 0, "214": 0, "215": 0, "216": 0, "217": 0, "218": 1, "219": 0, "220": 0, "221": 0, "222": 0, "223": 0, "224": 0, "225": 0, "226": 0, "227": 0, "228": 0, "229": 0, "230": 0, "231": 0, "232": 0, "233": 0, "234": 0, "235": 0, "236": 0, "237": 0, "238": 0, "239": 0, "240": 0, "241": 0, "242": 0, "243": 0, "244": 1, "245": 0, "246": 0, "247": 0, "248": 0, "249": 0, "250": 1, "251": 0, "252": 0, "253": 0, "254": 0, "255": 0, "256": 0, "257": 0, "258": 0, "259": 0, "260": 0, "261": 0, "262": 0, "263": 0, "264": 0, "265": 0, "266": 0, "267": 0, "268": 0, "269": 0, "270": 0, "271": 0, "272": 0, "273": 0, "274": 0, "275": 0, "276": 0, "277": 0, "278": 0, "279": 0, "280": 0, "281": 0, "282": 0, "283": 0, "284": 0, "285": 0, "286": 0, "287": 0, "288": 0, "289": 0, "290": 0, "291": 0, "292": 0, "293": 0, "294": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0, 0, 0, 0, 0, 0, 0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0], "20": [0, 0, 0, 0, 0, 0, 0, 0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0], "27": [0, 0], "28": [0, 0], "29": [0, 0], "30": [0, 0], "31": [0, 0], "32": [0, 0], "33": [0, 0], "34": [0, 0], "35": [0, 0], "36": [0, 0], "37": [0, 0], "38": [0, 0, 0, 0, 0, 0], "39": [0, 0], "40": [0, 0], "41": [0, 0], "42": [0, 0], "43": [0, 0], "44": [0, 0], "45": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0 }, "fnMap": { "1": { "name": "(anonymous_1)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "get", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "4": { "name": "(anonymous_4)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "5": { "name": "MultiExtensionRunner", "line": 45, "loc": { "start": { "line": 45, "column": 14 }, "end": { "line": 45, "column": 50 } } }, "6": { "name": "getName", "line": 55, "loc": { "start": { "line": 55, "column": 12 }, "end": { "line": 55, "column": 12 } } }, "7": { "name": "(anonymous_7)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "8": { "name": "_callee", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "10": { "name": "run", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "11": { "name": "(anonymous_11)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "12": { "name": "_callee2", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "13": { "name": "_callee2$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "14": { "name": "_loop", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "15": { "name": "(anonymous_15)", "line": 86, "loc": { "start": { "line": 86, "column": 8 }, "end": { "line": 86, "column": 14 } } }, "16": { "name": "(anonymous_16)", "line": 89, "loc": { "start": { "line": 89, "column": 8 }, "end": { "line": 89, "column": 19 } } }, "17": { "name": "(anonymous_17)", "line": 100, "loc": { "start": { "line": 100, "column": 44 }, "end": { "line": 100, "column": 57 } } }, "18": { "name": "reloadAllExtensions", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "19": { "name": "(anonymous_19)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "20": { "name": "_callee3", "line": 115, "loc": { "start": { "line": 115, "column": 4 }, "end": { "line": null, "column": null } } }, "21": { "name": "_callee3$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "22": { "name": "_loop2", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "23": { "name": "(anonymous_23)", "line": 122, "loc": { "start": { "line": 122, "column": 8 }, "end": { "line": 122, "column": 14 } } }, "24": { "name": "(anonymous_24)", "line": 125, "loc": { "start": { "line": 125, "column": 8 }, "end": { "line": 125, "column": 19 } } }, "25": { "name": "(anonymous_25)", "line": 137, "loc": { "start": { "line": 137, "column": 44 }, "end": { "line": 137, "column": 57 } } }, "26": { "name": "reloadExtensionBySourceDir", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "27": { "name": "registerCleanup", "line": 146, "loc": { "start": { "line": 146, "column": 18 }, "end": { "line": 146, "column": 51 } } }, "28": { "name": "_loop3", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "29": { "name": "(anonymous_29)", "line": 153, "loc": { "start": { "line": 153, "column": 32 }, "end": { "line": 153, "column": 45 } } }, "30": { "name": "(anonymous_30)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "31": { "name": "_callee4", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "32": { "name": "_callee4$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "33": { "name": "exit", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "34": { "name": "handleReloadResults", "line": 178, "loc": { "start": { "line": 178, "column": 22 }, "end": { "line": 178, "column": 73 } } }, "35": { "name": "defaultWatcherCreator", "line": 213, "loc": { "start": { "line": 213, "column": 7 }, "end": { "line": 219, "column": 14 } } }, "36": { "name": "onChange", "line": 226, "loc": { "start": { "line": 226, "column": 14 }, "end": { "line": null, "column": null } } }, "37": { "name": "shouldWatchFile", "line": 227, "loc": { "start": { "line": 227, "column": 21 }, "end": { "line": null, "column": null } } }, "38": { "name": "defaultReloadStrategy", "line": 247, "loc": { "start": { "line": 247, "column": 7 }, "end": { "line": 257, "column": 8 } } }, "39": { "name": "reloadExtension", "line": 259, "loc": { "start": { "line": 259, "column": 21 }, "end": { "line": 259, "column": 43 } } }, "40": { "name": "(anonymous_40)", "line": 267, "loc": { "start": { "line": 267, "column": 34 }, "end": { "line": 267, "column": 40 } } }, "41": { "name": "_callee5", "line": 281, "loc": { "start": { "line": 281, "column": 27 }, "end": { "line": null, "column": null } } }, "42": { "name": "_callee5$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "43": { "name": "(anonymous_43)", "line": 287, "loc": { "start": { "line": 287, "column": 45 }, "end": { "line": 287, "column": 58 } } }, "44": { "name": "(anonymous_44)", "line": 288, "loc": { "start": { "line": 288, "column": 33 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 33, "column": 0 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "15": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 213, "column": 16 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 247, "column": 16 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "21": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "23": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 15, "column": 0 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 17, "column": 0 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 20, "column": 0 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "29": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "30": { "start": { "line": 24, "column": 0 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 41, "column": 13 }, "end": { "line": null, "column": null } }, "32": { "start": { "line": 45, "column": 14 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "34": { "start": { "line": 46, "column": 9 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 47, "column": 9 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "37": { "start": { "line": 56, "column": 11 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "39": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "40": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "41": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "42": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "43": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "44": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "48": { "start": { "line": 65, "column": 25 }, "end": { "line": null, "column": null } }, "49": { "start": { "line": 65, "column": 48 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 66, "column": 15 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "53": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "54": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "55": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "56": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "57": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "58": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "59": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "60": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "61": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "62": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "63": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "69": { "start": { "line": 69, "column": 10 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "71": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "72": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "73": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "74": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "75": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "76": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "77": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "78": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "79": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "80": { "start": { "line": 81, "column": 8 }, "end": { "line": null, "column": null } }, "81": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "82": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "85": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "86": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "87": { "start": { "line": 84, "column": 15 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 85, "column": 12 }, "end": { "line": null, "column": null } }, "89": { "start": { "line": 87, "column": 17 }, "end": { "line": null, "column": null } }, "90": { "start": { "line": 90, "column": 17 }, "end": { "line": null, "column": null } }, "91": { "start": { "line": 97, "column": 15 }, "end": { "line": null, "column": null } }, "92": { "start": { "line": 84, "column": 25 }, "end": { "line": null, "column": null } }, "93": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "94": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "95": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "96": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "97": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "98": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "99": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "100": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "101": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "102": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "103": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "104": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "105": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "106": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "107": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "108": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "109": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "110": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "111": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "112": { "start": { "line": 100, "column": 17 }, "end": { "line": null, "column": null } }, "113": { "start": { "line": 101, "column": 11 }, "end": { "line": null, "column": null } }, "114": { "start": { "line": 102, "column": 13 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "116": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "117": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "118": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "119": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "120": { "start": { "line": 115, "column": 4 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "122": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "123": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "124": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "125": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "126": { "start": { "line": 117, "column": 8 }, "end": { "line": null, "column": null } }, "127": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "128": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "129": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "130": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "131": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "132": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "133": { "start": { "line": 120, "column": 15 }, "end": { "line": null, "column": null } }, "134": { "start": { "line": 121, "column": 12 }, "end": { "line": null, "column": null } }, "135": { "start": { "line": 123, "column": 17 }, "end": { "line": null, "column": null } }, "136": { "start": { "line": 126, "column": 17 }, "end": { "line": null, "column": null } }, "137": { "start": { "line": 134, "column": 15 }, "end": { "line": null, "column": null } }, "138": { "start": { "line": 120, "column": 25 }, "end": { "line": null, "column": null } }, "139": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "140": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "141": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "142": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "143": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "144": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "145": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "146": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "147": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "148": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "149": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "150": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "151": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "152": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "153": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "154": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "155": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "156": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "157": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "158": { "start": { "line": 137, "column": 17 }, "end": { "line": null, "column": null } }, "159": { "start": { "line": 138, "column": 11 }, "end": { "line": null, "column": null } }, "160": { "start": { "line": 139, "column": 13 }, "end": { "line": null, "column": null } }, "161": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "162": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "163": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "164": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "165": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "166": { "start": { "line": 147, "column": 10 }, "end": { "line": null, "column": null } }, "167": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "168": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "169": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "170": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "171": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "172": { "start": { "line": 152, "column": 15 }, "end": { "line": null, "column": null } }, "173": { "start": { "line": 153, "column": 15 }, "end": { "line": null, "column": null } }, "174": { "start": { "line": 154, "column": 15 }, "end": { "line": null, "column": null } }, "175": { "start": { "line": 152, "column": 25 }, "end": { "line": null, "column": null } }, "176": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "177": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "178": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "179": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "180": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "181": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "182": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "183": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "184": { "start": { "line": 161, "column": 12 }, "end": { "line": null, "column": null } }, "185": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "186": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "187": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "188": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "189": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "190": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "191": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "192": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "193": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "194": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "195": { "start": { "line": 169, "column": 25 }, "end": { "line": null, "column": null } }, "196": { "start": { "line": 169, "column": 48 }, "end": { "line": null, "column": null } }, "197": { "start": { "line": 170, "column": 15 }, "end": { "line": null, "column": null } }, "198": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "199": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "200": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "201": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "202": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "203": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "204": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "205": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "206": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "207": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "208": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "209": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "210": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "211": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "212": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "213": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "214": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "215": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "216": { "start": { "line": 173, "column": 10 }, "end": { "line": null, "column": null } }, "217": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "218": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "219": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "220": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "221": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "222": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "223": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "224": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "225": { "start": { "line": 179, "column": 55 }, "end": { "line": null, "column": null } }, "226": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "227": { "start": { "line": 179, "column": 16 }, "end": { "line": null, "column": null } }, "228": { "start": { "line": 180, "column": 10 }, "end": { "line": null, "column": null } }, "229": { "start": { "line": 181, "column": 12 }, "end": { "line": null, "column": null } }, "230": { "start": { "line": 182, "column": 12 }, "end": { "line": null, "column": null } }, "231": { "start": { "line": 183, "column": 26 }, "end": { "line": null, "column": null } }, "232": { "start": { "line": 186, "column": 26 }, "end": { "line": null, "column": null } }, "233": { "start": { "line": 188, "column": 12 }, "end": { "line": null, "column": null } }, "234": { "start": { "line": 189, "column": 12 }, "end": { "line": null, "column": null } }, "235": { "start": { "line": 191, "column": 13 }, "end": { "line": null, "column": null } }, "236": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "237": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "238": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "239": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "240": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "241": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "242": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "243": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "244": { "start": { "line": 213, "column": 7 }, "end": { "line": null, "column": null } }, "245": { "start": { "line": 215, "column": 4 }, "end": { "line": null, "column": null } }, "246": { "start": { "line": 220, "column": 8 }, "end": { "line": null, "column": null } }, "247": { "start": { "line": 223, "column": 9 }, "end": { "line": null, "column": null } }, "248": { "start": { "line": 226, "column": 20 }, "end": { "line": null, "column": null } }, "249": { "start": { "line": 227, "column": 31 }, "end": { "line": null, "column": null } }, "250": { "start": { "line": 247, "column": 7 }, "end": { "line": null, "column": null } }, "251": { "start": { "line": 249, "column": 4 }, "end": { "line": null, "column": null } }, "252": { "start": { "line": 256, "column": 29 }, "end": { "line": null, "column": null } }, "253": { "start": { "line": 258, "column": 8 }, "end": { "line": null, "column": null } }, "254": { "start": { "line": 260, "column": 22 }, "end": { "line": null, "column": null } }, "255": { "start": { "line": 267, "column": 18 }, "end": { "line": null, "column": null } }, "256": { "start": { "line": 268, "column": 12 }, "end": { "line": null, "column": null } }, "257": { "start": { "line": 269, "column": 10 }, "end": { "line": null, "column": null } }, "258": { "start": { "line": 272, "column": 6 }, "end": { "line": null, "column": null } }, "259": { "start": { "line": 273, "column": 13 }, "end": { "line": null, "column": null } }, "260": { "start": { "line": 274, "column": 10 }, "end": { "line": null, "column": null } }, "261": { "start": { "line": 276, "column": 10 }, "end": { "line": null, "column": null } }, "262": { "start": { "line": 281, "column": 12 }, "end": { "line": null, "column": null } }, "263": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "264": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "265": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "266": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "267": { "start": { "line": 282, "column": 10 }, "end": { "line": null, "column": null } }, "268": { "start": { "line": 281, "column": 27 }, "end": { "line": null, "column": null } }, "269": { "start": { "line": 286, "column": 14 }, "end": { "line": null, "column": null } }, "270": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "271": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "272": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "273": { "start": { "line": 287, "column": 33 }, "end": { "line": null, "column": null } }, "274": { "start": { "line": 288, "column": 16 }, "end": { "line": null, "column": null } }, "275": { "start": { "line": 288, "column": 47 }, "end": { "line": null, "column": null } }, "276": { "start": { "line": 281, "column": 27 }, "end": { "line": null, "column": null } }, "277": { "start": { "line": 291, "column": 12 }, "end": { "line": null, "column": null } }, "278": { "start": { "line": 292, "column": 21 }, "end": { "line": null, "column": null } }, "279": { "start": { "line": 293, "column": 15 }, "end": { "line": null, "column": null } }, "280": { "start": { "line": 298, "column": 14 }, "end": { "line": null, "column": null } }, "281": { "start": { "line": 299, "column": 18 }, "end": { "line": null, "column": null } }, "282": { "start": { "line": 302, "column": 14 }, "end": { "line": null, "column": null } }, "283": { "start": { "line": 303, "column": 15 }, "end": { "line": null, "column": null } }, "284": { "start": { "line": 307, "column": 14 }, "end": { "line": null, "column": null } }, "285": { "start": { "line": 309, "column": 14 }, "end": { "line": null, "column": null } }, "286": { "start": { "line": 310, "column": 18 }, "end": { "line": null, "column": null } }, "287": { "start": { "line": 312, "column": 15 }, "end": { "line": null, "column": null } }, "288": { "start": { "line": 313, "column": 14 }, "end": { "line": null, "column": null } }, "289": { "start": { "line": 314, "column": 26 }, "end": { "line": null, "column": null } }, "290": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "291": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "292": { "start": { "line": 318, "column": 10 }, "end": { "line": null, "column": null } }, "293": { "start": { "line": 319, "column": 22 }, "end": { "line": null, "column": null } }, "294": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true } }, "branchMap": { "1": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "4": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "5": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "7": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "8": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "9": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "10": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "11": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "12": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "13": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "20": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "21": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "22": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "23": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "24": { "line": 180, "type": "if", "locations": [{ "start": { "line": 180, "column": 10 }, "end": { "line": 180, "column": 10 } }, { "start": { "line": 180, "column": 10 }, "end": { "line": 180, "column": 10 } }] }, "25": { "line": 182, "type": "if", "locations": [{ "start": { "line": 182, "column": 12 }, "end": { "line": 182, "column": 12 } }, { "start": { "line": 182, "column": 12 }, "end": { "line": 182, "column": 12 } }] }, "26": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "27": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "28": { "line": 0, "type": "if", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "29": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "30": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "31": { "line": 256, "type": "cond-expr", "locations": [{ "start": { "line": 256, "column": 29 }, "end": { "line": 256, "column": 29 } }, { "start": { "line": 256, "column": 29 }, "end": { "line": 257, "column": 8 } }] }, "32": { "line": 256, "type": "binary-expr", "locations": [{ "start": { "line": 256, "column": 29 }, "end": { "line": 256, "column": 29 } }, { "start": { "line": 256, "column": 29 }, "end": { "line": 256, "column": 29 } }] }, "33": { "line": 253, "type": "cond-expr", "locations": [{ "start": { "line": 253, "column": 20 }, "end": { "line": 257, "column": 8 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "34": { "line": 254, "type": "cond-expr", "locations": [{ "start": { "line": 254, "column": 12 }, "end": { "line": 257, "column": 8 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "35": { "line": 255, "type": "cond-expr", "locations": [{ "start": { "line": 255, "column": 11 }, "end": { "line": 257, "column": 8 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "36": { "line": 272, "type": "if", "locations": [{ "start": { "line": 272, "column": 6 }, "end": { "line": 272, "column": 6 } }, { "start": { "line": 272, "column": 6 }, "end": { "line": 272, "column": 6 } }] }, "37": { "line": 272, "type": "binary-expr", "locations": [{ "start": { "line": 272, "column": 6 }, "end": { "line": 272, "column": 6 } }, { "start": { "line": 272, "column": 21 }, "end": { "line": 272, "column": 2 } }] }, "38": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "39": { "line": 286, "type": "if", "locations": [{ "start": { "line": 286, "column": 14 }, "end": { "line": 286, "column": 14 } }, { "start": { "line": 286, "column": 14 }, "end": { "line": 286, "column": 14 } }] }, "40": { "line": 291, "type": "if", "locations": [{ "start": { "line": 291, "column": 12 }, "end": { "line": 291, "column": 12 } }, { "start": { "line": 291, "column": 12 }, "end": { "line": 291, "column": 12 } }] }, "41": { "line": 291, "type": "binary-expr", "locations": [{ "start": { "line": 291, "column": 12 }, "end": { "line": 291, "column": 12 } }, { "start": { "line": 291, "column": 31 }, "end": { "line": 291, "column": 8 } }] }, "42": { "line": 293, "type": "if", "locations": [{ "start": { "line": 293, "column": 15 }, "end": { "line": 293, "column": 15 } }, { "start": { "line": 293, "column": 15 }, "end": { "line": 293, "column": 15 } }] }, "43": { "line": 298, "type": "if", "locations": [{ "start": { "line": 298, "column": 14 }, "end": { "line": 298, "column": 14 } }, { "start": { "line": 298, "column": 14 }, "end": { "line": 298, "column": 14 } }] }, "44": { "line": 309, "type": "if", "locations": [{ "start": { "line": 309, "column": 14 }, "end": { "line": 309, "column": 14 } }, { "start": { "line": 309, "column": 14 }, "end": { "line": 309, "column": 14 } }] }, "45": { "line": 312, "type": "if", "locations": [{ "start": { "line": 312, "column": 15 }, "end": { "line": 312, "column": 15 } }, { "start": { "line": 312, "column": 15 }, "end": { "line": 312, "column": 15 } }] } }, "code": ["/* @flow */", "", "import readline from 'readline';", "import tty from 'tty';", "", "import type Watchpack from 'watchpack';", "", "import type {", "  IExtensionRunner,  // eslint-disable-line import/named", "  ExtensionRunnerReloadResult,", "} from './base';", "import {", "  showDesktopNotification as defaultDesktopNotifications,", "} from '../util/desktop-notifier';", "import {createLogger} from '../util/logger';", "import type {FileFilterCreatorFn} from '../util/file-filter';", "import {", "  createFileFilter as defaultFileFilterCreator,", "} from '../util/file-filter';", "import defaultSourceWatcher from '../watcher';", "import type {OnSourceChangeFn} from '../watcher';", "", "", "const log = createLogger(__filename);", "", "", "export type MultiExtensionRunnerParams = {|", "  runners: Array<IExtensionRunner>,", "  desktopNotifications: typeof defaultDesktopNotifications,", "|};", "", "// Export everything exported by the firefox-desktop runner.", "export * from './firefox-desktop';", "", "", "/**", " * Implements an IExtensionRunner which allow the caller to", " * manage multiple extension runners at the same time (e.g. by running", " * a Firefox Desktop instance alongside to a Firefox for Android instance).", " */", "export class MultiExtensionRunner {", "  extensionRunners: Array<IExtensionRunner>;", "  desktopNotifications: typeof defaultDesktopNotifications;", "", "  constructor(params: MultiExtensionRunnerParams) {", "    this.extensionRunners = params.runners;", "    this.desktopNotifications = params.desktopNotifications;", "  }", "", "  // Method exported from the IExtensionRunner interface.", "", "  /**", "   * Returns the runner name.", "   */", "  getName() {", "    return 'Multi Extension Runner';", "  }", "", "  /**", "   * Call the `run` method on all the managed extension runners,", "   * and awaits that all the runners has been successfully started.", "   */", "  async run(): Promise<void> {", "    const promises = [];", "    for (const runner of this.extensionRunners) {", "      promises.push(runner.run());", "    }", "", "    await Promise.all(promises);", "  }", "", "  /**", "   * Reloads all the extensions on all the managed extension runners,", "   * collect any reload error, and resolves to an array composed by", "   * a ExtensionRunnerReloadResult object per managed runner.", "   *", "   * Any detected reload error is also logged on the terminal and shows as a", "   * desktop notification.", "   */", "  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {", "    log.debug('Reloading all reloadable add-ons');", "", "    const promises = [];", "    for (const runner of this.extensionRunners) {", "      const reloadPromise = runner.reloadAllExtensions().then(", "        () => {", "          return {runnerName: runner.getName()};", "        },", "        (error) => {", "          return {", "            runnerName: runner.getName(),", "            reloadError: error,", "          };", "        }", "      );", "", "      promises.push(reloadPromise);", "    }", "", "    return await Promise.all(promises).then((results) => {", "      this.handleReloadResults(results);", "      return results;", "    });", "  }", "", "  /**", "   * Reloads a single extension on all the managed extension runners,", "   * collect any reload error and resolves to an array composed by", "   * a ExtensionRunnerReloadResult object per managed runner.", "   *", "   * Any detected reload error is also logged on the terminal and shows as a", "   * desktop notification.", "   */", "  async reloadExtensionBySourceDir(", "    sourceDir: string", "  ): Promise<Array<ExtensionRunnerReloadResult>> {", "    log.debug(`Reloading add-on at ${sourceDir}`);", "", "    const promises = [];", "    for (const runner of this.extensionRunners) {", "      const reloadPromise = runner.reloadExtensionBySourceDir(sourceDir).then(", "        () => {", "          return {runnerName: runner.getName(), sourceDir};", "        },", "        (error) => {", "          return {", "            runnerName: runner.getName(),", "            reloadError: error,", "            sourceDir,", "          };", "        }", "      );", "", "      promises.push(reloadPromise);", "    }", "", "    return await Promise.all(promises).then((results) => {", "      this.handleReloadResults(results);", "      return results;", "    });", "  }", "", "  /**", "   * Register a callback to be called when all the managed runners has been exited.", "   */", "  registerCleanup(cleanupCallback: Function): void {", "    const promises = [];", "", "    // Create a promise for every extension runner managed by this instance,", "    // the promise will be resolved when the particular runner calls its", "    // registered cleanup callbacks.", "    for (const runner of this.extensionRunners) {", "      promises.push(new Promise((resolve) => {", "        runner.registerCleanup(resolve);", "      }));", "    }", "", "    // Wait for all the created promises to be resolved or rejected", "    // (once each one of the runners has cleaned up) and then call", "    // the cleanup callback registered to this runner.", "    Promise.all(promises).then(cleanupCallback, cleanupCallback);", "  }", "", "  /**", "   * Exits all the managed runner has been exited.", "   */", "  async exit(): Promise<void> {", "    const promises = [];", "    for (const runner of this.extensionRunners) {", "      promises.push(runner.exit());", "    }", "", "    await Promise.all(promises);", "  }", "", "  // Private helper methods.", "", "  handleReloadResults(results: Array<ExtensionRunnerReloadResult>): void {", "    for (const {runnerName, reloadError, sourceDir} of results) {", "      if (reloadError instanceof Error) {", "        let message = 'Error occurred while reloading';", "        if (sourceDir) {", "          message += ` \"${sourceDir}\" `;", "        }", "", "        message += `on \"${runnerName}\" - ${reloadError.message}`;", "", "        log.error(`\\n${message}`);", "        log.debug(reloadError.stack);", "", "        this.desktopNotifications({", "          title: 'web-ext run: extension reload error',", "          message,", "        });", "      }", "    }", "  }", "}", "", "// defaultWatcherCreator types and implementation.", "", "export type WatcherCreatorParams = {|", "  reloadExtension: (string) => void,", "  sourceDir: string,", "  artifactsDir: string,", "  onSourceChange?: OnSourceChangeFn,", "  ignoreFiles?: Array<string>,", "  createFileFilter?: FileFilterCreatorFn,", "|};", "", "export type WatcherCreatorFn = (params: WatcherCreatorParams) => Watchpack;", "", "export function defaultWatcherCreator(", "  {", "    reloadExtension, sourceDir, artifactsDir, ignoreFiles,", "    onSourceChange = defaultSourceWatcher,", "    createFileFilter = defaultFileFilterCreator,", "  }: WatcherCreatorParams", " ): Watchpack {", "  const fileFilter = createFileFilter(", "    {sourceDir, artifactsDir, ignoreFiles}", "  );", "  return onSourceChange({", "    sourceDir,", "    artifactsDir,", "    onChange: () => reloadExtension(sourceDir),", "    shouldWatchFile: (file) => fileFilter.wantFile(file),", "  });", "}", "", "", "// defaultReloadStrategy types and implementation.", "", "export type ReloadStrategyParams = {|", "  extensionRunner: IExtensionRunner,", "  sourceDir: string,", "  artifactsDir: string,", "  ignoreFiles?: Array<string>,", "|};", "", "export type ReloadStrategyOptions = {|", "  createWatcher?: WatcherCreatorFn,", "  stdin?: stream$Readable,", "  kill?: typeof process.kill,", "|};", "", "export function defaultReloadStrategy(", "  {", "    extensionRunner,", "    sourceDir, artifactsDir, ignoreFiles,", "  }: ReloadStrategyParams,", "  {", "    createWatcher = defaultWatcherCreator,", "    stdin = process.stdin,", "    kill = process.kill,", "  }: ReloadStrategyOptions = {}", "): void {", "  const watcher: Watchpack = createWatcher({", "    reloadExtension: (watchedSourceDir) => {", "      extensionRunner.reloadExtensionBySourceDir(watchedSourceDir);", "    },", "    sourceDir,", "    artifactsDir,", "    ignoreFiles,", "  });", "", "  extensionRunner.registerCleanup(() => {", "    watcher.close();", "    stdin.pause();", "  });", "", "  if (stdin.isTTY && stdin instanceof tty.ReadStream) {", "    readline.emitKeypressEvents(stdin);", "    stdin.setRawMode(true);", "", "    const keypressUsageInfo = 'Press R to reload (and Ctrl-C to quit)';", "", "    // NOTE: this `Promise.resolve().then(...)` is basically used to spawn a \"co-routine\"", "    // that is executed before the callback attached to the Promise returned by this function", "    // (and it allows the `run` function to not be stuck in the while loop).", "    Promise.resolve().then(async function() {", "      log.info(keypressUsageInfo);", "", "      let userExit = false;", "", "      while (!userExit) {", "        const keyPressed = await new Promise((resolve) => {", "          stdin.once('keypress', (str, key) => resolve(key));", "        });", "", "        if (keyPressed.ctrl && keyPressed.name === 'c') {", "          userExit = true;", "        } else if (keyPressed.name === 'z') {", "          // Prepare to suspend.", "", "          // NOTE: Switch the raw mode off before suspending (needed to make the keypress event", "          // to work correctly when the nodejs process is resumed).", "          if (stdin instanceof tty.ReadStream) {", "            stdin.setRawMode(false);", "          }", "", "          log.info('\\nweb-ext has been suspended on user request');", "          kill(process.pid, 'SIGTSTP');", "", "          // Prepare to resume.", "", "          log.info(`\\nweb-ext has been resumed. ${keypressUsageInfo}`);", "          // Switch the raw mode on on resume.", "          if (stdin instanceof tty.ReadStream) {", "            stdin.setRawMode(true);", "          }", "        } else if (keyPressed.name === 'r') {", "          log.debug('Reloading installed extensions on user request');", "          extensionRunner.reloadAllExtensions();", "        }", "      }", "", "      log.info('\\nExiting web-ext on user request');", "      extensionRunner.exit();", "    });", "  }", "}", ""] };
}
__cov_qLHFwwPQUfhAvANKIcShgQ = __cov_qLHFwwPQUfhAvANKIcShgQ['/home/travis/build/mozilla/web-ext/src/extension-runners/index.js'];
__cov_qLHFwwPQUfhAvANKIcShgQ.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_qLHFwwPQUfhAvANKIcShgQ.s['2']++;exports.MultiExtensionRunner = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['3']++;var _regenerator = __webpack_require__(8);__cov_qLHFwwPQUfhAvANKIcShgQ.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_qLHFwwPQUfhAvANKIcShgQ.s['5']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_qLHFwwPQUfhAvANKIcShgQ.s['6']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_qLHFwwPQUfhAvANKIcShgQ.s['7']++;var _classCallCheck2 = __webpack_require__(14);__cov_qLHFwwPQUfhAvANKIcShgQ.s['8']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_qLHFwwPQUfhAvANKIcShgQ.s['9']++;var _createClass2 = __webpack_require__(16);__cov_qLHFwwPQUfhAvANKIcShgQ.s['10']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_qLHFwwPQUfhAvANKIcShgQ.s['11']++;var _firefoxDesktop = __webpack_require__(75);__cov_qLHFwwPQUfhAvANKIcShgQ.s['12']++;Object.keys(_firefoxDesktop).forEach(function (key) {
   __cov_qLHFwwPQUfhAvANKIcShgQ.f['1']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['13']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['2'][0]++, key === 'default') || (__cov_qLHFwwPQUfhAvANKIcShgQ.b['2'][1]++, key === '__esModule')) {
      __cov_qLHFwwPQUfhAvANKIcShgQ.b['1'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['14']++;return;
   } else {
      __cov_qLHFwwPQUfhAvANKIcShgQ.b['1'][1]++;
   }__cov_qLHFwwPQUfhAvANKIcShgQ.s['15']++;Object.defineProperty(exports, key, { enumerable: true, get: function get() {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['2']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['16']++;return _firefoxDesktop[key];
      } });
});__cov_qLHFwwPQUfhAvANKIcShgQ.s['17']++;exports.defaultWatcherCreator = defaultWatcherCreator;__cov_qLHFwwPQUfhAvANKIcShgQ.s['18']++;exports.defaultReloadStrategy = defaultReloadStrategy;__cov_qLHFwwPQUfhAvANKIcShgQ.s['19']++;var _readline = __webpack_require__(191);__cov_qLHFwwPQUfhAvANKIcShgQ.s['20']++;var _readline2 = _interopRequireDefault(_readline);__cov_qLHFwwPQUfhAvANKIcShgQ.s['21']++;var _tty = __webpack_require__(69);__cov_qLHFwwPQUfhAvANKIcShgQ.s['22']++;var _tty2 = _interopRequireDefault(_tty);__cov_qLHFwwPQUfhAvANKIcShgQ.s['23']++;var _desktopNotifier = __webpack_require__(49);__cov_qLHFwwPQUfhAvANKIcShgQ.s['24']++;var _logger = __webpack_require__(0);__cov_qLHFwwPQUfhAvANKIcShgQ.s['25']++;var _fileFilter = __webpack_require__(29);__cov_qLHFwwPQUfhAvANKIcShgQ.s['26']++;var _watcher = __webpack_require__(50);__cov_qLHFwwPQUfhAvANKIcShgQ.s['27']++;var _watcher2 = _interopRequireDefault(_watcher);function _interopRequireDefault(obj) {
   __cov_qLHFwwPQUfhAvANKIcShgQ.f['3']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['29']++;return (__cov_qLHFwwPQUfhAvANKIcShgQ.b['4'][0]++, obj) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['4'][1]++, obj.__esModule) ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['3'][0]++, obj) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['3'][1]++, { default: obj });
}__cov_qLHFwwPQUfhAvANKIcShgQ.s['30']++;var log = (0, _logger.createLogger)(__filename);__cov_qLHFwwPQUfhAvANKIcShgQ.s['31']++;var MultiExtensionRunner = exports.MultiExtensionRunner = function () {
   __cov_qLHFwwPQUfhAvANKIcShgQ.f['4']++;function MultiExtensionRunner(params) {
      __cov_qLHFwwPQUfhAvANKIcShgQ.f['5']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['33']++;(0, _classCallCheck3.default)(this, MultiExtensionRunner);__cov_qLHFwwPQUfhAvANKIcShgQ.s['34']++;this.extensionRunners = params.runners;__cov_qLHFwwPQUfhAvANKIcShgQ.s['35']++;this.desktopNotifications = params.desktopNotifications;
   }__cov_qLHFwwPQUfhAvANKIcShgQ.s['36']++;(0, _createClass3.default)(MultiExtensionRunner, [{ key: 'getName', value: function getName() {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['6']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['37']++;return 'Multi Extension Runner';
      } }, { key: 'run', value: function () {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['7']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['38']++;var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['8']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['39']++;var promises, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, runner;__cov_qLHFwwPQUfhAvANKIcShgQ.s['40']++;return _regenerator2.default.wrap(function _callee$(_context) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.f['9']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['41']++;while (1) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.s['42']++;switch (_context.prev = _context.next) {case 0:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['43']++;promises = [];__cov_qLHFwwPQUfhAvANKIcShgQ.s['44']++;_iteratorNormalCompletion = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['45']++;_didIteratorError = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['46']++;_iteratorError = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['47']++;_context.prev = 4;__cov_qLHFwwPQUfhAvANKIcShgQ.s['48']++;for (_iterator = this.extensionRunners[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.s['49']++;runner = _step.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['50']++;promises.push(runner.run());
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['51']++;_context.next = 12;__cov_qLHFwwPQUfhAvANKIcShgQ.s['52']++;break;case 8:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['53']++;_context.prev = 8;__cov_qLHFwwPQUfhAvANKIcShgQ.s['54']++;_context.t0 = _context['catch'](4);__cov_qLHFwwPQUfhAvANKIcShgQ.s['55']++;_didIteratorError = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['56']++;_iteratorError = _context.t0;case 12:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][2]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['57']++;_context.prev = 12;__cov_qLHFwwPQUfhAvANKIcShgQ.s['58']++;_context.prev = 13;__cov_qLHFwwPQUfhAvANKIcShgQ.s['59']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['7'][0]++, !_iteratorNormalCompletion) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['7'][1]++, _iterator.return)) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['6'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['60']++;_iterator.return();
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['6'][1]++;
                        }case 15:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][3]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['61']++;_context.prev = 15;__cov_qLHFwwPQUfhAvANKIcShgQ.s['62']++;if (!_didIteratorError) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['8'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['63']++;_context.next = 18;__cov_qLHFwwPQUfhAvANKIcShgQ.s['64']++;break;
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['8'][1]++;
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['65']++;throw _iteratorError;case 18:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][4]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['66']++;return _context.finish(15);case 19:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][5]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['67']++;return _context.finish(12);case 20:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][6]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['68']++;_context.next = 22;__cov_qLHFwwPQUfhAvANKIcShgQ.s['69']++;return Promise.all(promises);case 22:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][7]++;case 'end':
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['5'][8]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['70']++;return _context.stop();}
               }
            }, _callee, this, [[4, 8, 12, 20], [13,, 15, 19]]);
         }));function run() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['10']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['72']++;return _ref.apply(this, arguments);
         }__cov_qLHFwwPQUfhAvANKIcShgQ.s['73']++;return run;
      }() }, { key: 'reloadAllExtensions', value: function () {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['11']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['74']++;var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['12']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['75']++;var _this = this;__cov_qLHFwwPQUfhAvANKIcShgQ.s['76']++;var promises, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _loop, _iterator2, _step2;__cov_qLHFwwPQUfhAvANKIcShgQ.s['77']++;return _regenerator2.default.wrap(function _callee2$(_context2) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.f['13']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['78']++;while (1) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.s['79']++;switch (_context2.prev = _context2.next) {case 0:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['80']++;log.debug('Reloading all reloadable add-ons');__cov_qLHFwwPQUfhAvANKIcShgQ.s['81']++;promises = [];__cov_qLHFwwPQUfhAvANKIcShgQ.s['82']++;_iteratorNormalCompletion2 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['83']++;_didIteratorError2 = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['84']++;_iteratorError2 = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['85']++;_context2.prev = 5;__cov_qLHFwwPQUfhAvANKIcShgQ.s['86']++;_loop = function _loop() {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.f['14']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['87']++;var runner = _step2.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['88']++;var reloadPromise = runner.reloadAllExtensions().then(function () {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.f['15']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['89']++;return { runnerName: runner.getName() };
                           }, function (error) {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.f['16']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['90']++;return { runnerName: runner.getName(), reloadError: error };
                           });__cov_qLHFwwPQUfhAvANKIcShgQ.s['91']++;promises.push(reloadPromise);
                        };__cov_qLHFwwPQUfhAvANKIcShgQ.s['92']++;for (_iterator2 = this.extensionRunners[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.s['93']++;_loop();
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['94']++;_context2.next = 14;__cov_qLHFwwPQUfhAvANKIcShgQ.s['95']++;break;case 10:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['96']++;_context2.prev = 10;__cov_qLHFwwPQUfhAvANKIcShgQ.s['97']++;_context2.t0 = _context2['catch'](5);__cov_qLHFwwPQUfhAvANKIcShgQ.s['98']++;_didIteratorError2 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['99']++;_iteratorError2 = _context2.t0;case 14:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][2]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['100']++;_context2.prev = 14;__cov_qLHFwwPQUfhAvANKIcShgQ.s['101']++;_context2.prev = 15;__cov_qLHFwwPQUfhAvANKIcShgQ.s['102']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['11'][0]++, !_iteratorNormalCompletion2) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['11'][1]++, _iterator2.return)) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['10'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['103']++;_iterator2.return();
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['10'][1]++;
                        }case 17:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][3]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['104']++;_context2.prev = 17;__cov_qLHFwwPQUfhAvANKIcShgQ.s['105']++;if (!_didIteratorError2) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['12'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['106']++;_context2.next = 20;__cov_qLHFwwPQUfhAvANKIcShgQ.s['107']++;break;
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['12'][1]++;
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['108']++;throw _iteratorError2;case 20:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][4]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['109']++;return _context2.finish(17);case 21:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][5]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['110']++;return _context2.finish(14);case 22:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][6]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['111']++;_context2.next = 24;__cov_qLHFwwPQUfhAvANKIcShgQ.s['112']++;return Promise.all(promises).then(function (results) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.f['17']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['113']++;_this.handleReloadResults(results);__cov_qLHFwwPQUfhAvANKIcShgQ.s['114']++;return results;
                        });case 24:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][7]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['115']++;return _context2.abrupt('return', _context2.sent);case 25:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][8]++;case 'end':
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['9'][9]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['116']++;return _context2.stop();}
               }
            }, _callee2, this, [[5, 10, 14, 22], [15,, 17, 21]]);
         }));function reloadAllExtensions() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['18']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['118']++;return _ref2.apply(this, arguments);
         }__cov_qLHFwwPQUfhAvANKIcShgQ.s['119']++;return reloadAllExtensions;
      }() }, { key: 'reloadExtensionBySourceDir', value: function () {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['19']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['120']++;var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(sourceDir) {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['20']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['121']++;var _this2 = this;__cov_qLHFwwPQUfhAvANKIcShgQ.s['122']++;var promises, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _loop2, _iterator3, _step3;__cov_qLHFwwPQUfhAvANKIcShgQ.s['123']++;return _regenerator2.default.wrap(function _callee3$(_context3) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.f['21']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['124']++;while (1) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.s['125']++;switch (_context3.prev = _context3.next) {case 0:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['126']++;log.debug('Reloading add-on at ' + sourceDir);__cov_qLHFwwPQUfhAvANKIcShgQ.s['127']++;promises = [];__cov_qLHFwwPQUfhAvANKIcShgQ.s['128']++;_iteratorNormalCompletion3 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['129']++;_didIteratorError3 = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['130']++;_iteratorError3 = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['131']++;_context3.prev = 5;__cov_qLHFwwPQUfhAvANKIcShgQ.s['132']++;_loop2 = function _loop2() {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.f['22']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['133']++;var runner = _step3.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['134']++;var reloadPromise = runner.reloadExtensionBySourceDir(sourceDir).then(function () {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.f['23']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['135']++;return { runnerName: runner.getName(), sourceDir: sourceDir };
                           }, function (error) {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.f['24']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['136']++;return { runnerName: runner.getName(), reloadError: error, sourceDir: sourceDir };
                           });__cov_qLHFwwPQUfhAvANKIcShgQ.s['137']++;promises.push(reloadPromise);
                        };__cov_qLHFwwPQUfhAvANKIcShgQ.s['138']++;for (_iterator3 = this.extensionRunners[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.s['139']++;_loop2();
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['140']++;_context3.next = 14;__cov_qLHFwwPQUfhAvANKIcShgQ.s['141']++;break;case 10:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['142']++;_context3.prev = 10;__cov_qLHFwwPQUfhAvANKIcShgQ.s['143']++;_context3.t0 = _context3['catch'](5);__cov_qLHFwwPQUfhAvANKIcShgQ.s['144']++;_didIteratorError3 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['145']++;_iteratorError3 = _context3.t0;case 14:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][2]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['146']++;_context3.prev = 14;__cov_qLHFwwPQUfhAvANKIcShgQ.s['147']++;_context3.prev = 15;__cov_qLHFwwPQUfhAvANKIcShgQ.s['148']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['15'][0]++, !_iteratorNormalCompletion3) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['15'][1]++, _iterator3.return)) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['14'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['149']++;_iterator3.return();
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['14'][1]++;
                        }case 17:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][3]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['150']++;_context3.prev = 17;__cov_qLHFwwPQUfhAvANKIcShgQ.s['151']++;if (!_didIteratorError3) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['16'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['152']++;_context3.next = 20;__cov_qLHFwwPQUfhAvANKIcShgQ.s['153']++;break;
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['16'][1]++;
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['154']++;throw _iteratorError3;case 20:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][4]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['155']++;return _context3.finish(17);case 21:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][5]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['156']++;return _context3.finish(14);case 22:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][6]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['157']++;_context3.next = 24;__cov_qLHFwwPQUfhAvANKIcShgQ.s['158']++;return Promise.all(promises).then(function (results) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.f['25']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['159']++;_this2.handleReloadResults(results);__cov_qLHFwwPQUfhAvANKIcShgQ.s['160']++;return results;
                        });case 24:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][7]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['161']++;return _context3.abrupt('return', _context3.sent);case 25:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][8]++;case 'end':
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['13'][9]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['162']++;return _context3.stop();}
               }
            }, _callee3, this, [[5, 10, 14, 22], [15,, 17, 21]]);
         }));function reloadExtensionBySourceDir(_x) {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['26']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['164']++;return _ref3.apply(this, arguments);
         }__cov_qLHFwwPQUfhAvANKIcShgQ.s['165']++;return reloadExtensionBySourceDir;
      }() }, { key: 'registerCleanup', value: function registerCleanup(cleanupCallback) {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['27']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['166']++;var promises = [];__cov_qLHFwwPQUfhAvANKIcShgQ.s['167']++;var _iteratorNormalCompletion4 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['168']++;var _didIteratorError4 = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['169']++;var _iteratorError4 = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['170']++;try {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['171']++;var _loop3 = function _loop3() {
               __cov_qLHFwwPQUfhAvANKIcShgQ.f['28']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['172']++;var runner = _step4.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['173']++;promises.push(new Promise(function (resolve) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.f['29']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['174']++;runner.registerCleanup(resolve);
               }));
            };__cov_qLHFwwPQUfhAvANKIcShgQ.s['175']++;for (var _iterator4 = this.extensionRunners[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['176']++;_loop3();
            }
         } catch (err) {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['177']++;_didIteratorError4 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['178']++;_iteratorError4 = err;
         } finally {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['179']++;try {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['180']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['18'][0]++, !_iteratorNormalCompletion4) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['18'][1]++, _iterator4.return)) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['17'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['181']++;_iterator4.return();
               } else {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['17'][1]++;
               }
            } finally {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['182']++;if (_didIteratorError4) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['19'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['183']++;throw _iteratorError4;
               } else {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['19'][1]++;
               }
            }
         }__cov_qLHFwwPQUfhAvANKIcShgQ.s['184']++;Promise.all(promises).then(cleanupCallback, cleanupCallback);
      } }, { key: 'exit', value: function () {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['30']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['185']++;var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['31']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['186']++;var promises, _iteratorNormalCompletion5, _didIteratorError5, _iteratorError5, _iterator5, _step5, _runner;__cov_qLHFwwPQUfhAvANKIcShgQ.s['187']++;return _regenerator2.default.wrap(function _callee4$(_context4) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.f['32']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['188']++;while (1) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.s['189']++;switch (_context4.prev = _context4.next) {case 0:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['190']++;promises = [];__cov_qLHFwwPQUfhAvANKIcShgQ.s['191']++;_iteratorNormalCompletion5 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['192']++;_didIteratorError5 = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['193']++;_iteratorError5 = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['194']++;_context4.prev = 4;__cov_qLHFwwPQUfhAvANKIcShgQ.s['195']++;for (_iterator5 = this.extensionRunners[Symbol.iterator](); !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.s['196']++;_runner = _step5.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['197']++;promises.push(_runner.exit());
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['198']++;_context4.next = 12;__cov_qLHFwwPQUfhAvANKIcShgQ.s['199']++;break;case 8:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['200']++;_context4.prev = 8;__cov_qLHFwwPQUfhAvANKIcShgQ.s['201']++;_context4.t0 = _context4['catch'](4);__cov_qLHFwwPQUfhAvANKIcShgQ.s['202']++;_didIteratorError5 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['203']++;_iteratorError5 = _context4.t0;case 12:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][2]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['204']++;_context4.prev = 12;__cov_qLHFwwPQUfhAvANKIcShgQ.s['205']++;_context4.prev = 13;__cov_qLHFwwPQUfhAvANKIcShgQ.s['206']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['22'][0]++, !_iteratorNormalCompletion5) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['22'][1]++, _iterator5.return)) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['21'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['207']++;_iterator5.return();
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['21'][1]++;
                        }case 15:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][3]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['208']++;_context4.prev = 15;__cov_qLHFwwPQUfhAvANKIcShgQ.s['209']++;if (!_didIteratorError5) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['23'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['210']++;_context4.next = 18;__cov_qLHFwwPQUfhAvANKIcShgQ.s['211']++;break;
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['23'][1]++;
                        }__cov_qLHFwwPQUfhAvANKIcShgQ.s['212']++;throw _iteratorError5;case 18:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][4]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['213']++;return _context4.finish(15);case 19:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][5]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['214']++;return _context4.finish(12);case 20:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][6]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['215']++;_context4.next = 22;__cov_qLHFwwPQUfhAvANKIcShgQ.s['216']++;return Promise.all(promises);case 22:
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][7]++;case 'end':
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['20'][8]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['217']++;return _context4.stop();}
               }
            }, _callee4, this, [[4, 8, 12, 20], [13,, 15, 19]]);
         }));function exit() {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['33']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['219']++;return _ref4.apply(this, arguments);
         }__cov_qLHFwwPQUfhAvANKIcShgQ.s['220']++;return exit;
      }() }, { key: 'handleReloadResults', value: function handleReloadResults(results) {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['34']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['221']++;var _iteratorNormalCompletion6 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['222']++;var _didIteratorError6 = false;__cov_qLHFwwPQUfhAvANKIcShgQ.s['223']++;var _iteratorError6 = undefined;__cov_qLHFwwPQUfhAvANKIcShgQ.s['224']++;try {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['225']++;for (var _iterator6 = results[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['226']++;var _ref6 = _step6.value;__cov_qLHFwwPQUfhAvANKIcShgQ.s['227']++;var runnerName = _ref6.runnerName,
                   reloadError = _ref6.reloadError,
                   _sourceDir = _ref6.sourceDir;__cov_qLHFwwPQUfhAvANKIcShgQ.s['228']++;if (reloadError instanceof Error) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['24'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['229']++;var message = 'Error occurred while reloading';__cov_qLHFwwPQUfhAvANKIcShgQ.s['230']++;if (_sourceDir) {
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['25'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['231']++;message += ' "' + _sourceDir + '" ';
                  } else {
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['25'][1]++;
                  }__cov_qLHFwwPQUfhAvANKIcShgQ.s['232']++;message += 'on "' + runnerName + '" - ' + reloadError.message;__cov_qLHFwwPQUfhAvANKIcShgQ.s['233']++;log.error('\n' + message);__cov_qLHFwwPQUfhAvANKIcShgQ.s['234']++;log.debug(reloadError.stack);__cov_qLHFwwPQUfhAvANKIcShgQ.s['235']++;this.desktopNotifications({ title: 'web-ext run: extension reload error', message: message });
               } else {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['24'][1]++;
               }
            }
         } catch (err) {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['236']++;_didIteratorError6 = true;__cov_qLHFwwPQUfhAvANKIcShgQ.s['237']++;_iteratorError6 = err;
         } finally {
            __cov_qLHFwwPQUfhAvANKIcShgQ.s['238']++;try {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['239']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['27'][0]++, !_iteratorNormalCompletion6) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['27'][1]++, _iterator6.return)) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['26'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['240']++;_iterator6.return();
               } else {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['26'][1]++;
               }
            } finally {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['241']++;if (_didIteratorError6) {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['28'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['242']++;throw _iteratorError6;
               } else {
                  __cov_qLHFwwPQUfhAvANKIcShgQ.b['28'][1]++;
               }
            }
         }
      } }]);__cov_qLHFwwPQUfhAvANKIcShgQ.s['243']++;return MultiExtensionRunner;
}();function defaultWatcherCreator(_ref7) {
   __cov_qLHFwwPQUfhAvANKIcShgQ.f['35']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['245']++;var reloadExtension = _ref7.reloadExtension,
       sourceDir = _ref7.sourceDir,
       artifactsDir = _ref7.artifactsDir,
       ignoreFiles = _ref7.ignoreFiles,
       _ref7$onSourceChange = _ref7.onSourceChange,
       onSourceChange = _ref7$onSourceChange === undefined ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['29'][0]++, _watcher2.default) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['29'][1]++, _ref7$onSourceChange),
       _ref7$createFileFilte = _ref7.createFileFilter,
       createFileFilter = _ref7$createFileFilte === undefined ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['30'][0]++, _fileFilter.createFileFilter) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['30'][1]++, _ref7$createFileFilte);__cov_qLHFwwPQUfhAvANKIcShgQ.s['246']++;var fileFilter = createFileFilter({ sourceDir: sourceDir, artifactsDir: artifactsDir, ignoreFiles: ignoreFiles });__cov_qLHFwwPQUfhAvANKIcShgQ.s['247']++;return onSourceChange({ sourceDir: sourceDir, artifactsDir: artifactsDir, onChange: function onChange() {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['36']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['248']++;return reloadExtension(sourceDir);
      }, shouldWatchFile: function shouldWatchFile(file) {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['37']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['249']++;return fileFilter.wantFile(file);
      } });
}function defaultReloadStrategy(_ref8) {
   __cov_qLHFwwPQUfhAvANKIcShgQ.f['38']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['251']++;var extensionRunner = _ref8.extensionRunner,
       sourceDir = _ref8.sourceDir,
       artifactsDir = _ref8.artifactsDir,
       ignoreFiles = _ref8.ignoreFiles;__cov_qLHFwwPQUfhAvANKIcShgQ.s['252']++;var _ref9 = (__cov_qLHFwwPQUfhAvANKIcShgQ.b['32'][0]++, arguments.length > 1) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['32'][1]++, arguments[1] !== undefined) ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['31'][0]++, arguments[1]) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['31'][1]++, {}),
       _ref9$createWatcher = _ref9.createWatcher,
       createWatcher = _ref9$createWatcher === undefined ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['33'][0]++, defaultWatcherCreator) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['33'][1]++, _ref9$createWatcher),
       _ref9$stdin = _ref9.stdin,
       stdin = _ref9$stdin === undefined ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['34'][0]++, process.stdin) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['34'][1]++, _ref9$stdin),
       _ref9$kill = _ref9.kill,
       kill = _ref9$kill === undefined ? (__cov_qLHFwwPQUfhAvANKIcShgQ.b['35'][0]++, process.kill) : (__cov_qLHFwwPQUfhAvANKIcShgQ.b['35'][1]++, _ref9$kill);__cov_qLHFwwPQUfhAvANKIcShgQ.s['253']++;var watcher = createWatcher({ reloadExtension: function reloadExtension(watchedSourceDir) {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['39']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['254']++;extensionRunner.reloadExtensionBySourceDir(watchedSourceDir);
      }, sourceDir: sourceDir, artifactsDir: artifactsDir, ignoreFiles: ignoreFiles });__cov_qLHFwwPQUfhAvANKIcShgQ.s['255']++;extensionRunner.registerCleanup(function () {
      __cov_qLHFwwPQUfhAvANKIcShgQ.f['40']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['256']++;watcher.close();__cov_qLHFwwPQUfhAvANKIcShgQ.s['257']++;stdin.pause();
   });__cov_qLHFwwPQUfhAvANKIcShgQ.s['258']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['37'][0]++, stdin.isTTY) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['37'][1]++, stdin instanceof _tty2.default.ReadStream)) {
      __cov_qLHFwwPQUfhAvANKIcShgQ.b['36'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['259']++;_readline2.default.emitKeypressEvents(stdin);__cov_qLHFwwPQUfhAvANKIcShgQ.s['260']++;stdin.setRawMode(true);__cov_qLHFwwPQUfhAvANKIcShgQ.s['261']++;var keypressUsageInfo = 'Press R to reload (and Ctrl-C to quit)';__cov_qLHFwwPQUfhAvANKIcShgQ.s['262']++;Promise.resolve().then((0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
         __cov_qLHFwwPQUfhAvANKIcShgQ.f['41']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['263']++;var userExit, keyPressed;__cov_qLHFwwPQUfhAvANKIcShgQ.s['264']++;return _regenerator2.default.wrap(function _callee5$(_context5) {
            __cov_qLHFwwPQUfhAvANKIcShgQ.f['42']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['265']++;while (1) {
               __cov_qLHFwwPQUfhAvANKIcShgQ.s['266']++;switch (_context5.prev = _context5.next) {case 0:
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['267']++;log.info(keypressUsageInfo);__cov_qLHFwwPQUfhAvANKIcShgQ.s['268']++;userExit = false;case 2:
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['269']++;if (userExit) {
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['39'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['270']++;_context5.next = 9;__cov_qLHFwwPQUfhAvANKIcShgQ.s['271']++;break;
                     } else {
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['39'][1]++;
                     }__cov_qLHFwwPQUfhAvANKIcShgQ.s['272']++;_context5.next = 5;__cov_qLHFwwPQUfhAvANKIcShgQ.s['273']++;return new Promise(function (resolve) {
                        __cov_qLHFwwPQUfhAvANKIcShgQ.f['43']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['274']++;stdin.once('keypress', function (str, key) {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.f['44']++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['275']++;return resolve(key);
                        });
                     });case 5:
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][2]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['276']++;keyPressed = _context5.sent;__cov_qLHFwwPQUfhAvANKIcShgQ.s['277']++;if ((__cov_qLHFwwPQUfhAvANKIcShgQ.b['41'][0]++, keyPressed.ctrl) && (__cov_qLHFwwPQUfhAvANKIcShgQ.b['41'][1]++, keyPressed.name === 'c')) {
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['40'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['278']++;userExit = true;
                     } else {
                        __cov_qLHFwwPQUfhAvANKIcShgQ.b['40'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['279']++;if (keyPressed.name === 'z') {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['42'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['280']++;if (stdin instanceof _tty2.default.ReadStream) {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['43'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['281']++;stdin.setRawMode(false);
                           } else {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['43'][1]++;
                           }__cov_qLHFwwPQUfhAvANKIcShgQ.s['282']++;log.info('\nweb-ext has been suspended on user request');__cov_qLHFwwPQUfhAvANKIcShgQ.s['283']++;kill(process.pid, 'SIGTSTP');__cov_qLHFwwPQUfhAvANKIcShgQ.s['284']++;log.info('\nweb-ext has been resumed. ' + keypressUsageInfo);__cov_qLHFwwPQUfhAvANKIcShgQ.s['285']++;if (stdin instanceof _tty2.default.ReadStream) {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['44'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['286']++;stdin.setRawMode(true);
                           } else {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['44'][1]++;
                           }
                        } else {
                           __cov_qLHFwwPQUfhAvANKIcShgQ.b['42'][1]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['287']++;if (keyPressed.name === 'r') {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['45'][0]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['288']++;log.debug('Reloading installed extensions on user request');__cov_qLHFwwPQUfhAvANKIcShgQ.s['289']++;extensionRunner.reloadAllExtensions();
                           } else {
                              __cov_qLHFwwPQUfhAvANKIcShgQ.b['45'][1]++;
                           }
                        }
                     }__cov_qLHFwwPQUfhAvANKIcShgQ.s['290']++;_context5.next = 2;__cov_qLHFwwPQUfhAvANKIcShgQ.s['291']++;break;case 9:
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][3]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['292']++;log.info('\nExiting web-ext on user request');__cov_qLHFwwPQUfhAvANKIcShgQ.s['293']++;extensionRunner.exit();case 11:
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][4]++;case 'end':
                     __cov_qLHFwwPQUfhAvANKIcShgQ.b['38'][5]++;__cov_qLHFwwPQUfhAvANKIcShgQ.s['294']++;return _context5.stop();}
            }
         }, _callee5, this);
      })));
   } else {
      __cov_qLHFwwPQUfhAvANKIcShgQ.b['36'][1]++;
   }
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/extension-runners/index.js"))

/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_rtDiy5PKXWj8mZTjz2K$4w = Function('return this')();
if (!__cov_rtDiy5PKXWj8mZTjz2K$4w.__coverage__) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.__coverage__ = {};
}
__cov_rtDiy5PKXWj8mZTjz2K$4w = __cov_rtDiy5PKXWj8mZTjz2K$4w.__coverage__;
if (!__cov_rtDiy5PKXWj8mZTjz2K$4w['/home/travis/build/mozilla/web-ext/src/program.js']) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w['/home/travis/build/mozilla/web-ext/src/program.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/program.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 0, "18": 0, "19": 0, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 1, "31": 0, "32": 0, "33": 0, "34": 0, "35": 1, "36": 0, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0, "47": 0, "48": 0, "49": 0, "50": 0, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 0, "65": 0, "66": 0, "67": 0, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 0, "75": 0, "76": 0, "77": 0, "78": 0, "79": 0, "80": 0, "81": 0, "82": 0, "83": 0, "84": 0, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 1, "109": 0, "110": 0, "111": 0, "112": 1, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 1, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 1, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0], "9": [0, 0], "10": [0, 0], "11": [0, 0], "12": [0, 0], "13": [0, 0], "14": [0, 0], "15": [0, 0], "16": [0, 0], "17": [0, 0], "18": [0, 0], "19": [0, 0, 0, 0, 0, 0, 0, 0], "20": [0, 0], "21": [0, 0], "22": [0, 0], "23": [0, 0], "24": [0, 0], "25": [0, 0], "26": [0, 0], "27": [0, 0], "28": [0, 0], "29": [0, 0], "30": [0, 0], "31": [0, 0], "32": [0, 0], "33": [0, 0], "34": [0, 0], "35": [0, 0], "36": [0, 0], "37": [0, 0], "38": [0, 0], "39": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "(anonymous_2)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "3": { "name": "Program", "line": 45, "loc": { "start": { "line": 45, "column": 4 }, "end": { "line": 49, "column": 4 } } }, "4": { "name": "command", "line": 70, "loc": { "start": { "line": 70, "column": 4 }, "end": { "line": 72, "column": 13 } } }, "5": { "name": "(anonymous_5)", "line": 74, "loc": { "start": { "line": 74, "column": 42 }, "end": { "line": 74, "column": 59 } } }, "6": { "name": "setGlobalOptions", "line": 95, "loc": { "start": { "line": 95, "column": 19 }, "end": { "line": 95, "column": 45 } } }, "7": { "name": "(anonymous_7)", "line": 100, "loc": { "start": { "line": 100, "column": 33 }, "end": { "line": 100, "column": 42 } } }, "8": { "name": "(anonymous_8)", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "9": { "name": "_callee", "line": 113, "loc": { "start": { "line": 113, "column": 4 }, "end": { "line": null, "column": null } } }, "10": { "name": "_callee$", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "11": { "name": "execute", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "12": { "name": "setDefaultValues", "line": 175, "loc": { "start": { "line": 175, "column": 0 }, "end": { "line": 175, "column": 51 } } }, "13": { "name": "(anonymous_13)", "line": 177, "loc": { "start": { "line": 177, "column": 31 }, "end": { "line": 177, "column": 40 } } }, "14": { "name": "defaultVersionGetter", "line": 194, "loc": { "start": { "line": 194, "column": 7 }, "end": { "line": 197, "column": 10 } } }, "15": { "name": "main", "line": 218, "loc": { "start": { "line": 218, "column": 7 }, "end": { "line": 224, "column": 16 } } }, "16": { "name": "(anonymous_16)", "line": 244, "loc": { "start": { "line": 244, "column": 13 }, "end": { "line": null, "column": null } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "13": { "start": { "line": 194, "column": 16 }, "end": { "line": null, "column": null } }, "14": { "start": { "line": 218, "column": 16 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "18": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "20": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "22": { "start": { "line": 7, "column": 0 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "24": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "26": { "start": { "line": 10, "column": 0 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "28": { "start": { "line": 12, "column": 0 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 13, "column": 0 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 15, "column": 0 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 16, "column": 0 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 38, "column": 13 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 45, "column": 4 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 48, "column": 24 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "38": { "start": { "line": 54, "column": 11 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 59, "column": 10 }, "end": { "line": null, "column": null } }, "40": { "start": { "line": 61, "column": 9 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 62, "column": 9 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 63, "column": 9 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 65, "column": 9 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 66, "column": 9 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "46": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "47": { "start": { "line": 71, "column": 4 }, "end": { "line": null, "column": null } }, "48": { "start": { "line": 73, "column": 9 }, "end": { "line": null, "column": null } }, "49": { "start": { "line": 74, "column": 9 }, "end": { "line": null, "column": null } }, "50": { "start": { "line": 75, "column": 10 }, "end": { "line": null, "column": null } }, "51": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "52": { "start": { "line": 78, "column": 13 }, "end": { "line": null, "column": null } }, "53": { "start": { "line": 91, "column": 9 }, "end": { "line": null, "column": null } }, "54": { "start": { "line": 92, "column": 11 }, "end": { "line": null, "column": null } }, "55": { "start": { "line": 99, "column": 9 }, "end": { "line": null, "column": null } }, "56": { "start": { "line": 100, "column": 11 }, "end": { "line": null, "column": null } }, "57": { "start": { "line": 101, "column": 14 }, "end": { "line": null, "column": null } }, "58": { "start": { "line": 102, "column": 10 }, "end": { "line": null, "column": null } }, "59": { "start": { "line": 105, "column": 16 }, "end": { "line": null, "column": null } }, "60": { "start": { "line": 108, "column": 9 }, "end": { "line": null, "column": null } }, "61": { "start": { "line": 109, "column": 11 }, "end": { "line": null, "column": null } }, "62": { "start": { "line": 113, "column": 4 }, "end": { "line": null, "column": null } }, "63": { "start": { "line": 118, "column": 24 }, "end": { "line": null, "column": null } }, "64": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "65": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "66": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "67": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "68": { "start": { "line": 121, "column": 9 }, "end": { "line": null, "column": null } }, "69": { "start": { "line": 122, "column": 9 }, "end": { "line": null, "column": null } }, "70": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "71": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "72": { "start": { "line": 128, "column": 9 }, "end": { "line": null, "column": null } }, "73": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "74": { "start": { "line": 132, "column": 8 }, "end": { "line": null, "column": null } }, "75": { "start": { "line": 133, "column": 16 }, "end": { "line": null, "column": null } }, "76": { "start": { "line": 134, "column": 10 }, "end": { "line": null, "column": null } }, "77": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "78": { "start": { "line": 138, "column": 10 }, "end": { "line": null, "column": null } }, "79": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "80": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "81": { "start": { "line": 139, "column": 14 }, "end": { "line": null, "column": null } }, "82": { "start": { "line": 141, "column": 11 }, "end": { "line": null, "column": null } }, "83": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "84": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "85": { "start": { "line": 142, "column": 14 }, "end": { "line": null, "column": null } }, "86": { "start": { "line": 144, "column": 10 }, "end": { "line": null, "column": null } }, "87": { "start": { "line": 145, "column": 25 }, "end": { "line": null, "column": null } }, "88": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "89": { "start": { "line": 150, "column": 12 }, "end": { "line": null, "column": null } }, "90": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "91": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "92": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "93": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "94": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "95": { "start": { "line": 154, "column": 10 }, "end": { "line": null, "column": null } }, "96": { "start": { "line": 155, "column": 12 }, "end": { "line": null, "column": null } }, "97": { "start": { "line": 157, "column": 12 }, "end": { "line": null, "column": null } }, "98": { "start": { "line": 159, "column": 10 }, "end": { "line": null, "column": null } }, "99": { "start": { "line": 160, "column": 12 }, "end": { "line": null, "column": null } }, "100": { "start": { "line": 163, "column": 10 }, "end": { "line": null, "column": null } }, "101": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "102": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "103": { "start": { "line": 164, "column": 22 }, "end": { "line": null, "column": null } }, "104": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "105": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "106": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "107": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "108": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "109": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "110": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "111": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "112": { "start": { "line": 175, "column": 0 }, "end": { "line": null, "column": null } }, "113": { "start": { "line": 176, "column": 8 }, "end": { "line": null, "column": null } }, "114": { "start": { "line": 177, "column": 9 }, "end": { "line": null, "column": null } }, "115": { "start": { "line": 178, "column": 10 }, "end": { "line": null, "column": null } }, "116": { "start": { "line": 179, "column": 8 }, "end": { "line": null, "column": null } }, "117": { "start": { "line": 180, "column": 20 }, "end": { "line": null, "column": null } }, "118": { "start": { "line": 182, "column": 8 }, "end": { "line": null, "column": null } }, "119": { "start": { "line": 183, "column": 20 }, "end": { "line": null, "column": null } }, "120": { "start": { "line": 186, "column": 9 }, "end": { "line": null, "column": null } }, "121": { "start": { "line": 194, "column": 7 }, "end": { "line": null, "column": null } }, "122": { "start": { "line": 196, "column": 57 }, "end": { "line": null, "column": null } }, "123": { "start": { "line": 198, "column": 6 }, "end": { "line": null, "column": null } }, "124": { "start": { "line": 199, "column": 8 }, "end": { "line": null, "column": null } }, "125": { "start": { "line": 200, "column": 10 }, "end": { "line": null, "column": null } }, "126": { "start": { "line": 202, "column": 11 }, "end": { "line": null, "column": null } }, "127": { "start": { "line": 204, "column": 8 }, "end": { "line": null, "column": null } }, "128": { "start": { "line": 205, "column": 14 }, "end": { "line": null, "column": null } }, "129": { "start": { "line": 218, "column": 7 }, "end": { "line": null, "column": null } }, "130": { "start": { "line": 223, "column": 18 }, "end": { "line": null, "column": null } }, "131": { "start": { "line": 226, "column": 8 }, "end": { "line": null, "column": null } }, "132": { "start": { "line": 231, "column": 10 }, "end": { "line": null, "column": null } }, "133": { "start": { "line": 244, "column": 19 }, "end": { "line": null, "column": null } }, "134": { "start": { "line": 248, "column": 10 }, "end": { "line": null, "column": null } }, "135": { "start": { "line": 282, "column": 5 }, "end": { "line": null, "column": null } }, "136": { "start": { "line": 437, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 48, "type": "cond-expr", "locations": [{ "start": { "line": 48, "column": 24 }, "end": { "line": 48, "column": 24 } }, { "start": { "line": 48, "column": 24 }, "end": { "line": 49, "column": 4 } }] }, "4": { "line": 48, "type": "binary-expr", "locations": [{ "start": { "line": 48, "column": 24 }, "end": { "line": 48, "column": 24 } }, { "start": { "line": 48, "column": 24 }, "end": { "line": 48, "column": 24 } }] }, "5": { "line": 47, "type": "cond-expr", "locations": [{ "start": { "line": 47, "column": 27 }, "end": { "line": 49, "column": 4 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "6": { "line": 54, "type": "binary-expr", "locations": [{ "start": { "line": 54, "column": 11 }, "end": { "line": 54, "column": 19 } }, { "start": { "line": 54, "column": 19 }, "end": { "line": 54, "column": 4 } }] }, "7": { "line": 71, "type": "cond-expr", "locations": [{ "start": { "line": 71, "column": 29 }, "end": { "line": 71, "column": 29 } }, { "start": { "line": 71, "column": 29 }, "end": { "line": 72, "column": 13 } }] }, "8": { "line": 71, "type": "binary-expr", "locations": [{ "start": { "line": 71, "column": 29 }, "end": { "line": 71, "column": 29 } }, { "start": { "line": 71, "column": 29 }, "end": { "line": 71, "column": 29 } }] }, "9": { "line": 75, "type": "if", "locations": [{ "start": { "line": 75, "column": 10 }, "end": { "line": 75, "column": 10 } }, { "start": { "line": 75, "column": 10 }, "end": { "line": 75, "column": 10 } }] }, "10": { "line": 102, "type": "if", "locations": [{ "start": { "line": 102, "column": 10 }, "end": { "line": 102, "column": 10 } }, { "start": { "line": 102, "column": 10 }, "end": { "line": 102, "column": 10 } }] }, "11": { "line": 118, "type": "cond-expr", "locations": [{ "start": { "line": 118, "column": 24 }, "end": { "line": 118, "column": 24 } }, { "start": { "line": 118, "column": 24 }, "end": { "line": null, "column": null } }] }, "12": { "line": 118, "type": "binary-expr", "locations": [{ "start": { "line": 118, "column": 24 }, "end": { "line": 118, "column": 24 } }, { "start": { "line": 118, "column": 24 }, "end": { "line": 118, "column": 24 } }] }, "13": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "14": { "line": 115, "type": "cond-expr", "locations": [{ "start": { "line": 115, "column": 62 }, "end": { "line": null, "column": null } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "15": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "16": { "line": 116, "type": "cond-expr", "locations": [{ "start": { "line": 116, "column": 49 }, "end": { "line": null, "column": null } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "17": { "line": 117, "type": "cond-expr", "locations": [{ "start": { "line": 117, "column": 26 }, "end": { "line": null, "column": null } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "18": { "line": 117, "type": "cond-expr", "locations": [{ "start": { "line": 117, "column": 44 }, "end": { "line": null, "column": null } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "19": { "line": 0, "type": "switch", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "20": { "line": 132, "type": "if", "locations": [{ "start": { "line": 132, "column": 8 }, "end": { "line": 132, "column": 8 } }, { "start": { "line": 132, "column": 8 }, "end": { "line": 132, "column": 8 } }] }, "21": { "line": 138, "type": "if", "locations": [{ "start": { "line": 138, "column": 10 }, "end": { "line": 138, "column": 10 } }, { "start": { "line": 138, "column": 10 }, "end": { "line": 138, "column": 10 } }] }, "22": { "line": 141, "type": "if", "locations": [{ "start": { "line": 141, "column": 11 }, "end": { "line": 141, "column": 11 } }, { "start": { "line": 141, "column": 11 }, "end": { "line": 141, "column": 11 } }] }, "23": { "line": 144, "type": "if", "locations": [{ "start": { "line": 144, "column": 10 }, "end": { "line": 144, "column": 10 } }, { "start": { "line": 144, "column": 10 }, "end": { "line": 144, "column": 10 } }] }, "24": { "line": 153, "type": "cond-expr", "locations": [{ "start": { "line": 153, "column": 30 }, "end": { "line": 153, "column": 40 } }, { "start": { "line": 153, "column": 40 }, "end": { "line": null, "column": null } }] }, "25": { "line": 154, "type": "if", "locations": [{ "start": { "line": 154, "column": 10 }, "end": { "line": 154, "column": 10 } }, { "start": { "line": 154, "column": 10 }, "end": { "line": 154, "column": 10 } }] }, "26": { "line": 154, "type": "binary-expr", "locations": [{ "start": { "line": 154, "column": 10 }, "end": { "line": 154, "column": 44 } }, { "start": { "line": 154, "column": 44 }, "end": { "line": 154, "column": 6 } }] }, "27": { "line": 159, "type": "if", "locations": [{ "start": { "line": 159, "column": 10 }, "end": { "line": 159, "column": 10 } }, { "start": { "line": 159, "column": 10 }, "end": { "line": 159, "column": 10 } }] }, "28": { "line": 163, "type": "if", "locations": [{ "start": { "line": 163, "column": 10 }, "end": { "line": 163, "column": 10 } }, { "start": { "line": 163, "column": 10 }, "end": { "line": 163, "column": 10 } }] }, "29": { "line": 179, "type": "if", "locations": [{ "start": { "line": 179, "column": 8 }, "end": { "line": 179, "column": 8 } }, { "start": { "line": 179, "column": 8 }, "end": { "line": 179, "column": 8 } }] }, "30": { "line": 182, "type": "if", "locations": [{ "start": { "line": 182, "column": 8 }, "end": { "line": 182, "column": 8 } }, { "start": { "line": 182, "column": 8 }, "end": { "line": 182, "column": 8 } }] }, "31": { "line": 196, "type": "cond-expr", "locations": [{ "start": { "line": 196, "column": 57 }, "end": { "line": 196, "column": 57 } }, { "start": { "line": 196, "column": 57 }, "end": { "line": 197, "column": 10 } }] }, "32": { "line": 196, "type": "binary-expr", "locations": [{ "start": { "line": 196, "column": 57 }, "end": { "line": 196, "column": 57 } }, { "start": { "line": 196, "column": 57 }, "end": { "line": 196, "column": 57 } }] }, "33": { "line": 196, "type": "cond-expr", "locations": [{ "start": { "line": 196, "column": 15 }, "end": { "line": 197, "column": 10 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "34": { "line": 198, "type": "if", "locations": [{ "start": { "line": 198, "column": 6 }, "end": { "line": 198, "column": 6 } }, { "start": { "line": 198, "column": 6 }, "end": { "line": 198, "column": 6 } }] }, "35": { "line": 223, "type": "cond-expr", "locations": [{ "start": { "line": 223, "column": 18 }, "end": { "line": 223, "column": 18 } }, { "start": { "line": 223, "column": 18 }, "end": { "line": 224, "column": 16 } }] }, "36": { "line": 223, "type": "binary-expr", "locations": [{ "start": { "line": 223, "column": 18 }, "end": { "line": 223, "column": 18 } }, { "start": { "line": 223, "column": 18 }, "end": { "line": 223, "column": 18 } }] }, "37": { "line": 221, "type": "cond-expr", "locations": [{ "start": { "line": 221, "column": 17 }, "end": { "line": 224, "column": 16 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "38": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "39": { "line": 222, "type": "cond-expr", "locations": [{ "start": { "line": 222, "column": 17 }, "end": { "line": 224, "column": 16 } }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import path from 'path';", "import {readFileSync} from 'fs';", "", "import git from 'git-rev-sync';", "import yargs from 'yargs';", "import camelCase from 'camelcase';", "", "import defaultCommands from './cmd';", "import {UsageError} from './errors';", "import {createLogger, consoleStream as defaultLogStream} from './util/logger';", "import {coerceCLICustomPreference} from './firefox/preferences';", "import {checkForUpdates as defaultUpdateChecker} from './util/updates';", "", "const log = createLogger(__filename);", "const envPrefix = 'WEB_EXT';", "", "", "type ProgramOptions = {|", "  absolutePackageDir?: string,", "|}", "", "// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed", "", "type ExecuteOptions = {", "  checkForUpdates?: Function,", "  systemProcess?: typeof process,", "  logStream?: typeof defaultLogStream,", "  getVersion?: Function,", "  shouldExitProgram?: boolean,", "  globalEnv?: string,", "}", "", "", "/*", " * The command line program.", " */", "export class Program {", "  yargs: any;", "  commands: { [key: string]: Function };", "  shouldExitProgram: boolean;", "  defaultValues: Object;", "", "  constructor(", "    argv: ?Array<string>,", "    {", "      absolutePackageDir = process.cwd(),", "    }: ProgramOptions = {}", "  ) {", "    // This allows us to override the process argv which is useful for", "    // testing.", "    // NOTE: process.argv.slice(2) removes the path to node and web-ext", "    // executables from the process.argv array.", "    argv = argv || process.argv.slice(2);", "", "    // NOTE: always initialize yargs explicitly with the package dir", "    // so that we are sure that it is going to load the 'boolean-negation: false'", "    // config (See web-ext#469 for rationale).", "    const yargsInstance = yargs(argv, absolutePackageDir);", "", "    this.shouldExitProgram = true;", "    this.yargs = yargsInstance;", "    this.yargs.strict();", "", "    this.commands = {};", "    this.defaultValues = {};", "  }", "", "  command(", "    name: string, description: string, executor: Function,", "    commandOptions: Object = {}", "  ): Program {", "    this.defaultValues[name] = setDefaultValues(commandOptions);", "    this.yargs.command(name, description, (yargsForCmd) => {", "      if (!commandOptions) {", "        return;", "      }", "      return yargsForCmd", "        // Make sure the user does not add any extra commands. For example,", "        // this would be a mistake because lint does not accept arguments:", "        // web-ext lint ./src/path/to/file.js", "        .demandCommand(0, 0, undefined,", "                       'This command does not take any arguments')", "        .strict()", "        .exitProcess(this.shouldExitProgram)", "        // Calling env() will be unnecessary after", "        // https://github.com/yargs/yargs/issues/486 is fixed", "        .env(envPrefix)", "        .options(commandOptions);", "    });", "    this.commands[name] = executor;", "    return this;", "  }", "", "  setGlobalOptions(options: Object): Program {", "    // This is a convenience for setting global options.", "    // An option is only global (i.e. available to all sub commands)", "    // with the `global` flag so this makes sure every option has it.", "    this.defaultValues = {...this.defaultValues, ...setDefaultValues(options)};", "    Object.keys(options).forEach((key) => {", "      options[key].global = true;", "      if (options[key].demand === undefined) {", "        // By default, all options should be \"demanded\" otherwise", "        // yargs.strict() will think they are missing when declared.", "        options[key].demand = true;", "      }", "    });", "    this.yargs.options(options);", "    return this;", "  }", "", "  async execute(", "    absolutePackageDir: string,", "    {", "      checkForUpdates = defaultUpdateChecker, systemProcess = process,", "      logStream = defaultLogStream, getVersion = defaultVersionGetter,", "      shouldExitProgram = true, globalEnv = WEBEXT_BUILD_ENV,", "    }: ExecuteOptions = {}", "  ): Promise<void> {", "", "    this.shouldExitProgram = shouldExitProgram;", "    this.yargs.exitProcess(this.shouldExitProgram);", "", "    const argv = this.yargs.argv;", "    const cmd = argv._[0];", "", "    // Command line option (pref) renamed for internal use (customPref).", "    argv.customPrefs = argv.pref;", "", "    const runCommand = this.commands[cmd];", "", "    if (argv.verbose) {", "      logStream.makeVerbose();", "      log.info('Version:', getVersion(absolutePackageDir));", "    }", "", "    try {", "      if (cmd === undefined) {", "        throw new UsageError('No sub-command was specified in the args');", "      }", "      if (!runCommand) {", "        throw new UsageError(`Unknown command: ${cmd}`);", "      }", "      if (globalEnv === 'production') {", "        checkForUpdates ({", "          version: getVersion(absolutePackageDir),", "        });", "      }", "", "      await runCommand(argv, {shouldExitProgram});", "", "    } catch (error) {", "      const prefix = cmd ? `${cmd}: ` : '';", "      if (!(error instanceof UsageError) || argv.verbose) {", "        log.error(`\\n${prefix}${error.stack}\\n`);", "      } else {", "        log.error(`\\n${prefix}${error}\\n`);", "      }", "      if (error.code) {", "        log.error(`${prefix}Error code: ${error.code}\\n`);", "      }", "", "      if (this.shouldExitProgram) {", "        systemProcess.exit(1);", "      } else {", "        throw error;", "      }", "    }", "  }", "}", "", "// A global variable generated by DefinePlugin, generated in webpack.config.js", "declare var WEBEXT_BUILD_ENV: string;", "", "function setDefaultValues(options: Object): Object {", "  const defaultValues = {};", "  Object.keys(options).forEach((key) => {", "    const camelCasedKey = camelCase(key);", "    if (options[key].type === 'boolean') {", "      defaultValues[camelCasedKey] = false;", "    }", "    if (typeof(options[key].default) !== 'undefined') {", "      defaultValues[camelCasedKey] = options[key].default;", "    }", "  });", "  return defaultValues;", "}", "", "//A defintion of type of argument for defaultVersionGetter", "type VersionGetterOptions = {", "  globalEnv?: string,", "};", "", "export function defaultVersionGetter(", "  absolutePackageDir: string,", "  {globalEnv = WEBEXT_BUILD_ENV}: VersionGetterOptions = {}", "): string {", "  if (globalEnv === 'production') {", "    log.debug('Getting the version from package.json');", "    const packageData: any = readFileSync(", "      path.join(absolutePackageDir, 'package.json'));", "    return JSON.parse(packageData).version;", "  } else {", "    log.debug('Getting version from the git revision');", "    return `${git.branch(absolutePackageDir)}-${git.long(absolutePackageDir)}`;", "  }", "}", "", "// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed", "", "type MainParams = {", "  getVersion?: Function,", "  commands?: Object,", "  argv: Array<any>,", "  runOptions?: Object,", "}", "", "export function main(", "  absolutePackageDir: string,", "  {", "    getVersion = defaultVersionGetter, commands = defaultCommands, argv,", "    runOptions = {},", "  }: MainParams = {}", "): Promise<any> {", "", "  const program = new Program(argv, {absolutePackageDir});", "", "  // yargs uses magic camel case expansion to expose options on the", "  // final argv object. For example, the 'artifacts-dir' option is alternatively", "  // available as argv.artifactsDir.", "  program.yargs", "    .usage(`Usage: $0 [options] command", "", "Option values can also be set by declaring an environment variable prefixed", "with $${envPrefix}_. For example: $${envPrefix}_SOURCE_DIR=/path is the same as", "--source-dir=/path.", "", "To view specific help for any given command, add the command name.", "Example: $0 --help run.", "`)", "    .help('help')", "    .alias('h', 'help')", "    .env(envPrefix)", "    .version(() => getVersion(absolutePackageDir))", "    .demandCommand(1, 'You must specify a command')", "    .strict();", "", "  program.setGlobalOptions({", "    'source-dir': {", "      alias: 's',", "      describe: 'Web extension source directory.',", "      default: process.cwd(),", "      requiresArg: true,", "      type: 'string',", "      coerce: path.resolve,", "    },", "    'artifacts-dir': {", "      alias: 'a',", "      describe: 'Directory where artifacts will be saved.',", "      default: path.join(process.cwd(), 'web-ext-artifacts'),", "      normalize: true,", "      requiresArg: true,", "      type: 'string',", "    },", "    'verbose': {", "      alias: 'v',", "      describe: 'Show verbose output',", "      type: 'boolean',", "    },", "    'ignore-files': {", "      alias: 'i',", "      describe: 'A list of glob patterns to define which files should be ' +", "                'ignored. (Example: --ignore-files=path/to/first.js ' +", "                'path/to/second.js \"**/*.log\")',", "      demand: false,", "      requiresArg: true,", "      type: 'array',", "    },", "  });", "", "  program", "    .command(", "      'build',", "      'Create a web extension package from source',", "      commands.build, {", "        'as-needed': {", "          describe: 'Watch for file changes and re-build as needed',", "          type: 'boolean',", "        },", "        'overwrite-dest': {", "          alias: 'o',", "          describe: 'Overwrite destination package if it exists.',", "          type: 'boolean',", "        },", "      })", "    .command(", "      'sign',", "      'Sign the web extension so it can be installed in Firefox',", "      commands.sign, {", "        'api-key': {", "          describe: 'API key (JWT issuer) from addons.mozilla.org',", "          demand: true,", "          type: 'string',", "        },", "        'api-secret': {", "          describe: 'API secret (JWT secret) from addons.mozilla.org',", "          demand: true,", "          type: 'string',", "        },", "        'api-url-prefix': {", "          describe: 'Signing API URL prefix',", "          default: 'https://addons.mozilla.org/api/v3',", "          demand: true,", "          type: 'string',", "        },", "        'api-proxy': {", "          describe:", "            'Use a proxy to access the signing API. ' +", "            'Example: https://yourproxy:6000 ',", "          demand: false,", "          type: 'string',", "        },", "        'id': {", "          describe:", "            'A custom ID for the extension. This has no effect if the ' +", "            'extension already declares an explicit ID in its manifest.',", "          demand: false,", "          type: 'string',", "        },", "        'timeout': {", "          describe: 'Number of milliseconds to wait before giving up',", "          type: 'number',", "        },", "      })", "    .command('run', 'Run the web extension', commands.run, {", "      'firefox': {", "        alias: ['f', 'firefox-binary'],", "        describe: 'Path or alias to a Firefox executable such as firefox-bin ' +", "                  'or firefox.exe. ' +", "                  'If not specified, the default Firefox will be used. ' +", "                  'You can specify the following aliases in lieu of a path: ' +", "                  'firefox, beta, nightly, firefoxdeveloperedition.',", "        demand: false,", "        type: 'string',", "      },", "      'firefox-profile': {", "        alias: 'p',", "        describe: 'Run Firefox using a copy of this profile. The profile ' +", "                  'can be specified as a directory or a name, such as one ' +", "                  'you would see in the Profile Manager. If not specified, ' +", "                  'a new temporary profile will be created.',", "        demand: false,", "        type: 'string',", "      },", "      'keep-profile-changes': {", "        describe: 'Run Firefox directly in custom profile. Any changes to ' +", "                  'the profile will be saved.',", "        demand: false,", "        type: 'boolean',", "      },", "      'no-reload': {", "        describe: 'Do not reload the extension when source files change',", "        demand: false,", "        type: 'boolean',", "      },", "      'pre-install': {", "        describe: 'Pre-install the extension into the profile before ' +", "                  'startup. This is only needed to support older versions ' +", "                  'of Firefox.',", "        demand: false,", "        type: 'boolean',", "      },", "      'pref': {", "        describe: 'Launch firefox with a custom preference ' +", "                  '(example: --pref=general.useragent.locale=fr-FR). ' +", "                  'You can repeat this option to set more than one ' +", "                  'preference.',", "        demand: false,", "        requiresArg: true,", "        type: 'string',", "        coerce: coerceCLICustomPreference,", "      },", "      'start-url': {", "        alias: ['u', 'url'],", "        describe: 'Launch firefox at specified page',", "        demand: false,", "        requiresArg: true,", "        type: 'string',", "      },", "      'browser-console': {", "        alias: ['bc'],", "        describe: 'Open the DevTools Browser Console.',", "        demand: false,", "        type: 'boolean',", "      },", "    })", "    .command('lint', 'Validate the web extension source', commands.lint, {", "      'output': {", "        alias: 'o',", "        describe: 'The type of output to generate',", "        type: 'string',", "        default: 'text',", "        choices: ['json', 'text'],", "      },", "      'metadata': {", "        describe: 'Output only metadata as JSON',", "        type: 'boolean',", "        default: false,", "      },", "      'warnings-as-errors': {", "        describe: 'Treat warnings as errors by exiting non-zero for warnings',", "        alias: 'w',", "        type: 'boolean',", "        default: false,", "      },", "      'pretty': {", "        describe: 'Prettify JSON output',", "        type: 'boolean',", "        default: false,", "      },", "      'self-hosted': {", "        describe:", "          'Your extension will be self-hosted. This disables messages ' +", "          'related to hosting on addons.mozilla.org.',", "        type: 'boolean',", "        default: false,", "      },", "      'boring': {", "        describe: 'Disables colorful shell output',", "        type: 'boolean',", "        default: false,", "      },", "    })", "    .command('docs', 'Open the web-ext documentation in a browser',", "      commands.docs, {});", "", "  return program.execute(absolutePackageDir, runOptions);", "}", ""] };
}
__cov_rtDiy5PKXWj8mZTjz2K$4w = __cov_rtDiy5PKXWj8mZTjz2K$4w['/home/travis/build/mozilla/web-ext/src/program.js'];
__cov_rtDiy5PKXWj8mZTjz2K$4w.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['2']++;exports.Program = undefined;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['3']++;var _regenerator = __webpack_require__(8);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['4']++;var _regenerator2 = _interopRequireDefault(_regenerator);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['5']++;var _asyncToGenerator2 = __webpack_require__(7);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['6']++;var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['7']++;var _extends2 = __webpack_require__(5);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['8']++;var _extends3 = _interopRequireDefault(_extends2);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['9']++;var _classCallCheck2 = __webpack_require__(14);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['10']++;var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['11']++;var _createClass2 = __webpack_require__(16);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['12']++;var _createClass3 = _interopRequireDefault(_createClass2);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['13']++;exports.defaultVersionGetter = defaultVersionGetter;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['14']++;exports.main = main;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['15']++;var _path = __webpack_require__(4);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['16']++;var _path2 = _interopRequireDefault(_path);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['17']++;var _fs = __webpack_require__(68);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['18']++;var _gitRevSync = __webpack_require__(97);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['19']++;var _gitRevSync2 = _interopRequireDefault(_gitRevSync);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['20']++;var _yargs = __webpack_require__(199);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['21']++;var _yargs2 = _interopRequireDefault(_yargs);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['22']++;var _camelcase = __webpack_require__(94);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['23']++;var _camelcase2 = _interopRequireDefault(_camelcase);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['24']++;var _cmd = __webpack_require__(71);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['25']++;var _cmd2 = _interopRequireDefault(_cmd);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['26']++;var _errors = __webpack_require__(2);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['27']++;var _logger = __webpack_require__(0);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['28']++;var _preferences = __webpack_require__(47);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['29']++;var _updates = __webpack_require__(79);function _interopRequireDefault(obj) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.f['1']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['31']++;return (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['2'][0]++, obj) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['2'][1]++, obj.__esModule) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['1'][0]++, obj) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['1'][1]++, { default: obj });
}__cov_rtDiy5PKXWj8mZTjz2K$4w.s['32']++;var log = (0, _logger.createLogger)(__filename);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['33']++;var envPrefix = 'WEB_EXT';__cov_rtDiy5PKXWj8mZTjz2K$4w.s['34']++;var Program = exports.Program = function () {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.f['2']++;function Program(argv) {
      __cov_rtDiy5PKXWj8mZTjz2K$4w.f['3']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['36']++;var _ref = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['4'][0]++, arguments.length > 1) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['4'][1]++, arguments[1] !== undefined) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['3'][0]++, arguments[1]) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['3'][1]++, {}),
          _ref$absolutePackageD = _ref.absolutePackageDir,
          absolutePackageDir = _ref$absolutePackageD === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['5'][0]++, process.cwd()) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['5'][1]++, _ref$absolutePackageD);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['37']++;(0, _classCallCheck3.default)(this, Program);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['38']++;argv = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['6'][0]++, argv) || (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['6'][1]++, process.argv.slice(2));__cov_rtDiy5PKXWj8mZTjz2K$4w.s['39']++;var yargsInstance = (0, _yargs2.default)(argv, absolutePackageDir);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['40']++;this.shouldExitProgram = true;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['41']++;this.yargs = yargsInstance;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['42']++;this.yargs.strict();__cov_rtDiy5PKXWj8mZTjz2K$4w.s['43']++;this.commands = {};__cov_rtDiy5PKXWj8mZTjz2K$4w.s['44']++;this.defaultValues = {};
   }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['45']++;(0, _createClass3.default)(Program, [{ key: 'command', value: function command(name, description, executor) {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.f['4']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['46']++;var _this = this;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['47']++;var commandOptions = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['8'][0]++, arguments.length > 3) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['8'][1]++, arguments[3] !== undefined) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['7'][0]++, arguments[3]) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['7'][1]++, {});__cov_rtDiy5PKXWj8mZTjz2K$4w.s['48']++;this.defaultValues[name] = setDefaultValues(commandOptions);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['49']++;this.yargs.command(name, description, function (yargsForCmd) {
            __cov_rtDiy5PKXWj8mZTjz2K$4w.f['5']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['50']++;if (!commandOptions) {
               __cov_rtDiy5PKXWj8mZTjz2K$4w.b['9'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['51']++;return;
            } else {
               __cov_rtDiy5PKXWj8mZTjz2K$4w.b['9'][1]++;
            }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['52']++;return yargsForCmd.demandCommand(0, 0, undefined, 'This command does not take any arguments').strict().exitProcess(_this.shouldExitProgram).env(envPrefix).options(commandOptions);
         });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['53']++;this.commands[name] = executor;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['54']++;return this;
      } }, { key: 'setGlobalOptions', value: function setGlobalOptions(options) {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.f['6']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['55']++;this.defaultValues = (0, _extends3.default)({}, this.defaultValues, setDefaultValues(options));__cov_rtDiy5PKXWj8mZTjz2K$4w.s['56']++;Object.keys(options).forEach(function (key) {
            __cov_rtDiy5PKXWj8mZTjz2K$4w.f['7']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['57']++;options[key].global = true;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['58']++;if (options[key].demand === undefined) {
               __cov_rtDiy5PKXWj8mZTjz2K$4w.b['10'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['59']++;options[key].demand = true;
            } else {
               __cov_rtDiy5PKXWj8mZTjz2K$4w.b['10'][1]++;
            }
         });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['60']++;this.yargs.options(options);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['61']++;return this;
      } }, { key: 'execute', value: function () {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.f['8']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['62']++;var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(absolutePackageDir) {
            __cov_rtDiy5PKXWj8mZTjz2K$4w.f['9']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['63']++;var _ref3 = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['12'][0]++, arguments.length > 1) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['12'][1]++, arguments[1] !== undefined) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['11'][0]++, arguments[1]) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['11'][1]++, {}),
                _ref3$checkForUpdates = _ref3.checkForUpdates,
                checkForUpdates = _ref3$checkForUpdates === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['13'][0]++, _updates.checkForUpdates) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['13'][1]++, _ref3$checkForUpdates),
                _ref3$systemProcess = _ref3.systemProcess,
                systemProcess = _ref3$systemProcess === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['14'][0]++, process) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['14'][1]++, _ref3$systemProcess),
                _ref3$logStream = _ref3.logStream,
                logStream = _ref3$logStream === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['15'][0]++, _logger.consoleStream) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['15'][1]++, _ref3$logStream),
                _ref3$getVersion = _ref3.getVersion,
                getVersion = _ref3$getVersion === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['16'][0]++, defaultVersionGetter) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['16'][1]++, _ref3$getVersion),
                _ref3$shouldExitProgr = _ref3.shouldExitProgram,
                shouldExitProgram = _ref3$shouldExitProgr === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['17'][0]++, true) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['17'][1]++, _ref3$shouldExitProgr),
                _ref3$globalEnv = _ref3.globalEnv,
                globalEnv = _ref3$globalEnv === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['18'][0]++, "production") : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['18'][1]++, _ref3$globalEnv);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['64']++;var argv, cmd, runCommand, prefix;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['65']++;return _regenerator2.default.wrap(function _callee$(_context) {
               __cov_rtDiy5PKXWj8mZTjz2K$4w.f['10']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['66']++;while (1) {
                  __cov_rtDiy5PKXWj8mZTjz2K$4w.s['67']++;switch (_context.prev = _context.next) {case 0:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['68']++;this.shouldExitProgram = shouldExitProgram;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['69']++;this.yargs.exitProcess(this.shouldExitProgram);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['70']++;argv = this.yargs.argv;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['71']++;cmd = argv._[0];__cov_rtDiy5PKXWj8mZTjz2K$4w.s['72']++;argv.customPrefs = argv.pref;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['73']++;runCommand = this.commands[cmd];__cov_rtDiy5PKXWj8mZTjz2K$4w.s['74']++;if (argv.verbose) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['20'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['75']++;logStream.makeVerbose();__cov_rtDiy5PKXWj8mZTjz2K$4w.s['76']++;log.info('Version:', getVersion(absolutePackageDir));
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['20'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['77']++;_context.prev = 7;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['78']++;if (!(cmd === undefined)) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['21'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['79']++;_context.next = 10;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['80']++;break;
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['21'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['81']++;throw new _errors.UsageError('No sub-command was specified in the args');case 10:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][1]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['82']++;if (runCommand) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['22'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['83']++;_context.next = 12;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['84']++;break;
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['22'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['85']++;throw new _errors.UsageError('Unknown command: ' + cmd);case 12:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][2]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['86']++;if (globalEnv === 'production') {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['23'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['87']++;checkForUpdates({ version: getVersion(absolutePackageDir) });
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['23'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['88']++;_context.next = 15;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['89']++;return runCommand(argv, { shouldExitProgram: shouldExitProgram });case 15:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][3]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['90']++;_context.next = 27;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['91']++;break;case 17:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][4]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['92']++;_context.prev = 17;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['93']++;_context.t0 = _context['catch'](7);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['94']++;prefix = cmd ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['24'][0]++, cmd + ': ') : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['24'][1]++, '');__cov_rtDiy5PKXWj8mZTjz2K$4w.s['95']++;if ((__cov_rtDiy5PKXWj8mZTjz2K$4w.b['26'][0]++, !(_context.t0 instanceof _errors.UsageError)) || (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['26'][1]++, argv.verbose)) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['25'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['96']++;log.error('\n' + prefix + _context.t0.stack + '\n');
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['25'][1]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['97']++;log.error('\n' + prefix + _context.t0 + '\n');
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['98']++;if (_context.t0.code) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['27'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['99']++;log.error(prefix + 'Error code: ' + _context.t0.code + '\n');
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['27'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['100']++;if (!this.shouldExitProgram) {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['28'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['101']++;_context.next = 26;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['102']++;break;
                        } else {
                           __cov_rtDiy5PKXWj8mZTjz2K$4w.b['28'][1]++;
                        }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['103']++;systemProcess.exit(1);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['104']++;_context.next = 27;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['105']++;break;case 26:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][5]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['106']++;throw _context.t0;case 27:
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][6]++;case 'end':
                        __cov_rtDiy5PKXWj8mZTjz2K$4w.b['19'][7]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['107']++;return _context.stop();}
               }
            }, _callee, this, [[7, 17]]);
         }));function execute(_x3) {
            __cov_rtDiy5PKXWj8mZTjz2K$4w.f['11']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['109']++;return _ref2.apply(this, arguments);
         }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['110']++;return execute;
      }() }]);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['111']++;return Program;
}();function setDefaultValues(options) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.f['12']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['113']++;var defaultValues = {};__cov_rtDiy5PKXWj8mZTjz2K$4w.s['114']++;Object.keys(options).forEach(function (key) {
      __cov_rtDiy5PKXWj8mZTjz2K$4w.f['13']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['115']++;var camelCasedKey = (0, _camelcase2.default)(key);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['116']++;if (options[key].type === 'boolean') {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.b['29'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['117']++;defaultValues[camelCasedKey] = false;
      } else {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.b['29'][1]++;
      }__cov_rtDiy5PKXWj8mZTjz2K$4w.s['118']++;if (typeof options[key].default !== 'undefined') {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.b['30'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['119']++;defaultValues[camelCasedKey] = options[key].default;
      } else {
         __cov_rtDiy5PKXWj8mZTjz2K$4w.b['30'][1]++;
      }
   });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['120']++;return defaultValues;
}function defaultVersionGetter(absolutePackageDir) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.f['14']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['122']++;var _ref4 = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['32'][0]++, arguments.length > 1) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['32'][1]++, arguments[1] !== undefined) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['31'][0]++, arguments[1]) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['31'][1]++, {}),
       _ref4$globalEnv = _ref4.globalEnv,
       globalEnv = _ref4$globalEnv === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['33'][0]++, "production") : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['33'][1]++, _ref4$globalEnv);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['123']++;if (globalEnv === 'production') {
      __cov_rtDiy5PKXWj8mZTjz2K$4w.b['34'][0]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['124']++;log.debug('Getting the version from package.json');__cov_rtDiy5PKXWj8mZTjz2K$4w.s['125']++;var packageData = (0, _fs.readFileSync)(_path2.default.join(absolutePackageDir, 'package.json'));__cov_rtDiy5PKXWj8mZTjz2K$4w.s['126']++;return JSON.parse(packageData).version;
   } else {
      __cov_rtDiy5PKXWj8mZTjz2K$4w.b['34'][1]++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['127']++;log.debug('Getting version from the git revision');__cov_rtDiy5PKXWj8mZTjz2K$4w.s['128']++;return _gitRevSync2.default.branch(absolutePackageDir) + '-' + _gitRevSync2.default.long(absolutePackageDir);
   }
}function main(absolutePackageDir) {
   __cov_rtDiy5PKXWj8mZTjz2K$4w.f['15']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['130']++;var _ref5 = (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['36'][0]++, arguments.length > 1) && (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['36'][1]++, arguments[1] !== undefined) ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['35'][0]++, arguments[1]) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['35'][1]++, {}),
       _ref5$getVersion = _ref5.getVersion,
       getVersion = _ref5$getVersion === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['37'][0]++, defaultVersionGetter) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['37'][1]++, _ref5$getVersion),
       _ref5$commands = _ref5.commands,
       commands = _ref5$commands === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['38'][0]++, _cmd2.default) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['38'][1]++, _ref5$commands),
       argv = _ref5.argv,
       _ref5$runOptions = _ref5.runOptions,
       runOptions = _ref5$runOptions === undefined ? (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['39'][0]++, {}) : (__cov_rtDiy5PKXWj8mZTjz2K$4w.b['39'][1]++, _ref5$runOptions);__cov_rtDiy5PKXWj8mZTjz2K$4w.s['131']++;var program = new Program(argv, { absolutePackageDir: absolutePackageDir });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['132']++;program.yargs.usage('Usage: $0 [options] command\n\nOption values can also be set by declaring an environment variable prefixed\nwith $' + envPrefix + '_. For example: $' + envPrefix + '_SOURCE_DIR=/path is the same as\n--source-dir=/path.\n\nTo view specific help for any given command, add the command name.\nExample: $0 --help run.\n').help('help').alias('h', 'help').env(envPrefix).version(function () {
      __cov_rtDiy5PKXWj8mZTjz2K$4w.f['16']++;__cov_rtDiy5PKXWj8mZTjz2K$4w.s['133']++;return getVersion(absolutePackageDir);
   }).demandCommand(1, 'You must specify a command').strict();__cov_rtDiy5PKXWj8mZTjz2K$4w.s['134']++;program.setGlobalOptions({ 'source-dir': { alias: 's', describe: 'Web extension source directory.', default: process.cwd(), requiresArg: true, type: 'string', coerce: _path2.default.resolve }, 'artifacts-dir': { alias: 'a', describe: 'Directory where artifacts will be saved.', default: _path2.default.join(process.cwd(), 'web-ext-artifacts'), normalize: true, requiresArg: true, type: 'string' }, 'verbose': { alias: 'v', describe: 'Show verbose output', type: 'boolean' }, 'ignore-files': { alias: 'i', describe: 'A list of glob patterns to define which files should be ' + 'ignored. (Example: --ignore-files=path/to/first.js ' + 'path/to/second.js "**/*.log")', demand: false, requiresArg: true, type: 'array' } });__cov_rtDiy5PKXWj8mZTjz2K$4w.s['135']++;program.command('build', 'Create a web extension package from source', commands.build, { 'as-needed': { describe: 'Watch for file changes and re-build as needed', type: 'boolean' }, 'overwrite-dest': { alias: 'o', describe: 'Overwrite destination package if it exists.', type: 'boolean' } }).command('sign', 'Sign the web extension so it can be installed in Firefox', commands.sign, { 'api-key': { describe: 'API key (JWT issuer) from addons.mozilla.org', demand: true, type: 'string' }, 'api-secret': { describe: 'API secret (JWT secret) from addons.mozilla.org', demand: true, type: 'string' }, 'api-url-prefix': { describe: 'Signing API URL prefix', default: 'https://addons.mozilla.org/api/v3', demand: true, type: 'string' }, 'api-proxy': { describe: 'Use a proxy to access the signing API. ' + 'Example: https://yourproxy:6000 ', demand: false, type: 'string' }, 'id': { describe: 'A custom ID for the extension. This has no effect if the ' + 'extension already declares an explicit ID in its manifest.', demand: false, type: 'string' }, 'timeout': { describe: 'Number of milliseconds to wait before giving up', type: 'number' } }).command('run', 'Run the web extension', commands.run, { 'firefox': { alias: ['f', 'firefox-binary'], describe: 'Path or alias to a Firefox executable such as firefox-bin ' + 'or firefox.exe. ' + 'If not specified, the default Firefox will be used. ' + 'You can specify the following aliases in lieu of a path: ' + 'firefox, beta, nightly, firefoxdeveloperedition.', demand: false, type: 'string' }, 'firefox-profile': { alias: 'p', describe: 'Run Firefox using a copy of this profile. The profile ' + 'can be specified as a directory or a name, such as one ' + 'you would see in the Profile Manager. If not specified, ' + 'a new temporary profile will be created.', demand: false, type: 'string' }, 'keep-profile-changes': { describe: 'Run Firefox directly in custom profile. Any changes to ' + 'the profile will be saved.', demand: false, type: 'boolean' }, 'no-reload': { describe: 'Do not reload the extension when source files change', demand: false, type: 'boolean' }, 'pre-install': { describe: 'Pre-install the extension into the profile before ' + 'startup. This is only needed to support older versions ' + 'of Firefox.', demand: false, type: 'boolean' }, 'pref': { describe: 'Launch firefox with a custom preference ' + '(example: --pref=general.useragent.locale=fr-FR). ' + 'You can repeat this option to set more than one ' + 'preference.', demand: false, requiresArg: true, type: 'string', coerce: _preferences.coerceCLICustomPreference }, 'start-url': { alias: ['u', 'url'], describe: 'Launch firefox at specified page', demand: false, requiresArg: true, type: 'string' }, 'browser-console': { alias: ['bc'], describe: 'Open the DevTools Browser Console.', demand: false, type: 'boolean' } }).command('lint', 'Validate the web extension source', commands.lint, { 'output': { alias: 'o', describe: 'The type of output to generate', type: 'string', default: 'text', choices: ['json', 'text'] }, 'metadata': { describe: 'Output only metadata as JSON', type: 'boolean', default: false }, 'warnings-as-errors': { describe: 'Treat warnings as errors by exiting non-zero for warnings', alias: 'w', type: 'boolean', default: false }, 'pretty': { describe: 'Prettify JSON output', type: 'boolean', default: false }, 'self-hosted': { describe: 'Your extension will be self-hosted. This disables messages ' + 'related to hosting on addons.mozilla.org.', type: 'boolean', default: false }, 'boring': { describe: 'Disables colorful shell output', type: 'boolean', default: false } }).command('docs', 'Open the web-ext documentation in a browser', commands.docs, {});__cov_rtDiy5PKXWj8mZTjz2K$4w.s['136']++;return program.execute(absolutePackageDir, runOptions);
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/program.js"))

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_eLo03$j2uHGC68kkQ$PaHw = Function('return this')();
if (!__cov_eLo03$j2uHGC68kkQ$PaHw.__coverage__) {
   __cov_eLo03$j2uHGC68kkQ$PaHw.__coverage__ = {};
}
__cov_eLo03$j2uHGC68kkQ$PaHw = __cov_eLo03$j2uHGC68kkQ$PaHw.__coverage__;
if (!__cov_eLo03$j2uHGC68kkQ$PaHw['/home/travis/build/mozilla/web-ext/src/util/is-directory.js']) {
   __cov_eLo03$j2uHGC68kkQ$PaHw['/home/travis/build/mozilla/web-ext/src/util/is-directory.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/is-directory.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 1, "6": 0, "7": 0, "8": 0 }, "b": {}, "f": { "1": 0, "2": 0, "3": 0 }, "fnMap": { "1": { "name": "isDirectory", "line": 17, "loc": { "start": { "line": 17, "column": 15 }, "end": { "line": 17, "column": 68 } } }, "2": { "name": "(anonymous_2)", "line": 19, "loc": { "start": { "line": 19, "column": 10 }, "end": { "line": null, "column": null } } }, "3": { "name": "(anonymous_3)", "line": 20, "loc": { "start": { "line": 20, "column": 53 }, "end": { "line": 20, "column": 59 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 17, "column": 24 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 17, "column": 15 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 18, "column": 9 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 19, "column": 21 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 21, "column": 13 }, "end": { "line": null, "column": null } } }, "branchMap": {}, "code": ["/* @flow */", "import {fs} from 'mz';", "", "import {onlyErrorsWithCode} from '../errors';", "", "/*", " * Resolves true if the path is a readable directory.", " *", " * Usage:", " *", " * isDirectory('/some/path')", " *  .then((dirExists) => {", " *    // dirExists will be true or false.", " *  });", " *", " * */", "export default function isDirectory(path: string): Promise<boolean> {", "  return fs.stat(path)", "    .then((stats) => stats.isDirectory())", "    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], () => {", "      return false;", "    }));", "}", ""] };
}
__cov_eLo03$j2uHGC68kkQ$PaHw = __cov_eLo03$j2uHGC68kkQ$PaHw['/home/travis/build/mozilla/web-ext/src/util/is-directory.js'];
__cov_eLo03$j2uHGC68kkQ$PaHw.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_eLo03$j2uHGC68kkQ$PaHw.s['2']++;exports.default = isDirectory;__cov_eLo03$j2uHGC68kkQ$PaHw.s['3']++;var _mz = __webpack_require__(9);__cov_eLo03$j2uHGC68kkQ$PaHw.s['4']++;var _errors = __webpack_require__(2);function isDirectory(path) {
   __cov_eLo03$j2uHGC68kkQ$PaHw.f['1']++;__cov_eLo03$j2uHGC68kkQ$PaHw.s['6']++;return _mz.fs.stat(path).then(function (stats) {
      __cov_eLo03$j2uHGC68kkQ$PaHw.f['2']++;__cov_eLo03$j2uHGC68kkQ$PaHw.s['7']++;return stats.isDirectory();
   }).catch((0, _errors.onlyErrorsWithCode)(['ENOENT', 'ENOTDIR'], function () {
      __cov_eLo03$j2uHGC68kkQ$PaHw.f['3']++;__cov_eLo03$j2uHGC68kkQ$PaHw.s['8']++;return false;
   }));
}

/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_AarF4QIWjVsGR_jdYidzzA = Function('return this')();
if (!__cov_AarF4QIWjVsGR_jdYidzzA.__coverage__) {
   __cov_AarF4QIWjVsGR_jdYidzzA.__coverage__ = {};
}
__cov_AarF4QIWjVsGR_jdYidzzA = __cov_AarF4QIWjVsGR_jdYidzzA.__coverage__;
if (!__cov_AarF4QIWjVsGR_jdYidzzA['/home/travis/build/mozilla/web-ext/src/util/updates.js']) {
   __cov_AarF4QIWjVsGR_jdYidzzA['/home/travis/build/mozilla/web-ext/src/util/updates.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/updates.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 1, "6": 0, "7": 1, "8": 0, "9": 0, "10": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0] }, "f": { "1": 0, "2": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "checkForUpdates", "line": 9, "loc": { "start": { "line": 9, "column": 7 }, "end": { "line": 14, "column": 2 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 9, "column": 16 }, "end": { "line": null, "column": null } }, "3": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 9, "column": 7 }, "end": { "line": null, "column": null } }, "8": { "start": { "line": 11, "column": 4 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 15, "column": 8 }, "end": { "line": null, "column": null } }, "10": { "start": { "line": 17, "column": 17 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import defaultUpdateNotifier from 'update-notifier';", "", "type CheckForUpdatesParams = {|", "  version: string,", "  updateNotifier?: typeof defaultUpdateNotifier,", "|};", "", "export function checkForUpdates(", "  {", "    version,", "    updateNotifier = defaultUpdateNotifier,", "  }: CheckForUpdatesParams", ") {", "  const pkg = {name: 'web-ext', version};", "", "  updateNotifier({", "    pkg,", "    updateCheckInterval: 1000 * 60 * 60 * 24 * 3, // 3 days,", "  }).notify();", "}", ""] };
}
__cov_AarF4QIWjVsGR_jdYidzzA = __cov_AarF4QIWjVsGR_jdYidzzA['/home/travis/build/mozilla/web-ext/src/util/updates.js'];
__cov_AarF4QIWjVsGR_jdYidzzA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_AarF4QIWjVsGR_jdYidzzA.s['2']++;exports.checkForUpdates = checkForUpdates;__cov_AarF4QIWjVsGR_jdYidzzA.s['3']++;var _updateNotifier = __webpack_require__(197);__cov_AarF4QIWjVsGR_jdYidzzA.s['4']++;var _updateNotifier2 = _interopRequireDefault(_updateNotifier);function _interopRequireDefault(obj) {
   __cov_AarF4QIWjVsGR_jdYidzzA.f['1']++;__cov_AarF4QIWjVsGR_jdYidzzA.s['6']++;return (__cov_AarF4QIWjVsGR_jdYidzzA.b['2'][0]++, obj) && (__cov_AarF4QIWjVsGR_jdYidzzA.b['2'][1]++, obj.__esModule) ? (__cov_AarF4QIWjVsGR_jdYidzzA.b['1'][0]++, obj) : (__cov_AarF4QIWjVsGR_jdYidzzA.b['1'][1]++, { default: obj });
}function checkForUpdates(_ref) {
   __cov_AarF4QIWjVsGR_jdYidzzA.f['2']++;__cov_AarF4QIWjVsGR_jdYidzzA.s['8']++;var version = _ref.version,
       _ref$updateNotifier = _ref.updateNotifier,
       updateNotifier = _ref$updateNotifier === undefined ? (__cov_AarF4QIWjVsGR_jdYidzzA.b['3'][0]++, _updateNotifier2.default) : (__cov_AarF4QIWjVsGR_jdYidzzA.b['3'][1]++, _ref$updateNotifier);__cov_AarF4QIWjVsGR_jdYidzzA.s['9']++;var pkg = { name: 'web-ext', version: version };__cov_AarF4QIWjVsGR_jdYidzzA.s['10']++;updateNotifier({ pkg: pkg, updateCheckInterval: 1000 * 60 * 60 * 24 * 3 }).notify();
}

/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(13).document && document.documentElement;

/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = !__webpack_require__(18) && !__webpack_require__(33)(function(){
  return Object.defineProperty(__webpack_require__(56)('div'), 'a', {get: function(){ return 7; }}).a != 7;
});

/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof = __webpack_require__(31);
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){
  return cof(it) == 'String' ? it.split('') : Object(it);
};

/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY        = __webpack_require__(39)
  , $export        = __webpack_require__(20)
  , redefine       = __webpack_require__(87)
  , hide           = __webpack_require__(22)
  , has            = __webpack_require__(21)
  , Iterators      = __webpack_require__(27)
  , $iterCreate    = __webpack_require__(153)
  , setToStringTag = __webpack_require__(42)
  , getPrototypeOf = __webpack_require__(162)
  , ITERATOR       = __webpack_require__(11)('iterator')
  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`
  , FF_ITERATOR    = '@@iterator'
  , KEYS           = 'keys'
  , VALUES         = 'values';

var returnThis = function(){ return this; };

module.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){
  $iterCreate(Constructor, NAME, next);
  var getMethod = function(kind){
    if(!BUGGY && kind in proto)return proto[kind];
    switch(kind){
      case KEYS: return function keys(){ return new Constructor(this, kind); };
      case VALUES: return function values(){ return new Constructor(this, kind); };
    } return function entries(){ return new Constructor(this, kind); };
  };
  var TAG        = NAME + ' Iterator'
    , DEF_VALUES = DEFAULT == VALUES
    , VALUES_BUG = false
    , proto      = Base.prototype
    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]
    , $default   = $native || getMethod(DEFAULT)
    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined
    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native
    , methods, key, IteratorPrototype;
  // Fix native
  if($anyNative){
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));
    if(IteratorPrototype !== Object.prototype){
      // Set @@toStringTag to native iterators
      setToStringTag(IteratorPrototype, TAG, true);
      // fix for some old engines
      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);
    }
  }
  // fix Array#{values, @@iterator}.name in V8 / FF
  if(DEF_VALUES && $native && $native.name !== VALUES){
    VALUES_BUG = true;
    $default = function values(){ return $native.call(this); };
  }
  // Define iterator
  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){
    hide(proto, ITERATOR, $default);
  }
  // Plug for library
  Iterators[NAME] = $default;
  Iterators[TAG]  = returnThis;
  if(DEFAULT){
    methods = {
      values:  DEF_VALUES ? $default : getMethod(VALUES),
      keys:    IS_SET     ? $default : getMethod(KEYS),
      entries: $entries
    };
    if(FORCED)for(key in methods){
      if(!(key in proto))redefine(proto, key, methods[key]);
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
  }
  return methods;
};

/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

var pIE            = __webpack_require__(40)
  , createDesc     = __webpack_require__(41)
  , toIObject      = __webpack_require__(23)
  , toPrimitive    = __webpack_require__(63)
  , has            = __webpack_require__(21)
  , IE8_DOM_DEFINE = __webpack_require__(81)
  , gOPD           = Object.getOwnPropertyDescriptor;

exports.f = __webpack_require__(18) ? gOPD : function getOwnPropertyDescriptor(O, P){
  O = toIObject(O);
  P = toPrimitive(P, true);
  if(IE8_DOM_DEFINE)try {
    return gOPD(O, P);
  } catch(e){ /* empty */ }
  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);
};

/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)
var $keys      = __webpack_require__(86)
  , hiddenKeys = __webpack_require__(57).concat('length', 'prototype');

exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){
  return $keys(O, hiddenKeys);
};

/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

var has          = __webpack_require__(21)
  , toIObject    = __webpack_require__(23)
  , arrayIndexOf = __webpack_require__(146)(false)
  , IE_PROTO     = __webpack_require__(60)('IE_PROTO');

module.exports = function(object, names){
  var O      = toIObject(object)
    , i      = 0
    , result = []
    , key;
  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while(names.length > i)if(has(O, key = names[i++])){
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};

/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(22);

/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

var ctx                = __webpack_require__(32)
  , invoke             = __webpack_require__(149)
  , html               = __webpack_require__(80)
  , cel                = __webpack_require__(56)
  , global             = __webpack_require__(13)
  , process            = global.process
  , setTask            = global.setImmediate
  , clearTask          = global.clearImmediate
  , MessageChannel     = global.MessageChannel
  , counter            = 0
  , queue              = {}
  , ONREADYSTATECHANGE = 'onreadystatechange'
  , defer, channel, port;
var run = function(){
  var id = +this;
  if(queue.hasOwnProperty(id)){
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};
var listener = function(event){
  run.call(event.data);
};
// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if(!setTask || !clearTask){
  setTask = function setImmediate(fn){
    var args = [], i = 1;
    while(arguments.length > i)args.push(arguments[i++]);
    queue[++counter] = function(){
      invoke(typeof fn == 'function' ? fn : Function(fn), args);
    };
    defer(counter);
    return counter;
  };
  clearTask = function clearImmediate(id){
    delete queue[id];
  };
  // Node.js 0.8-
  if(__webpack_require__(31)(process) == 'process'){
    defer = function(id){
      process.nextTick(ctx(run, id, 1));
    };
  // Browsers with MessageChannel, includes WebWorkers
  } else if(MessageChannel){
    channel = new MessageChannel;
    port    = channel.port2;
    channel.port1.onmessage = listener;
    defer = ctx(port.postMessage, port, 1);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){
    defer = function(id){
      global.postMessage(id + '', '*');
    };
    global.addEventListener('message', listener, false);
  // IE8-
  } else if(ONREADYSTATECHANGE in cel('script')){
    defer = function(id){
      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){
        html.removeChild(this);
        run.call(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function(id){
      setTimeout(ctx(run, id, 1), 0);
    };
  }
}
module.exports = {
  set:   setTask,
  clear: clearTask
};

/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.15 ToLength
var toInteger = __webpack_require__(62)
  , min       = Math.min;
module.exports = function(it){
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};

/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.13 ToObject(argument)
var defined = __webpack_require__(55);
module.exports = function(it){
  return Object(defined(it));
};

/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

var classof   = __webpack_require__(54)
  , ITERATOR  = __webpack_require__(11)('iterator')
  , Iterators = __webpack_require__(27);
module.exports = __webpack_require__(12).getIteratorMethod = function(it){
  if(it != undefined)return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};

/***/ }),
/* 92 */
/***/ (function(module, exports) {



/***/ }),
/* 93 */
/***/ (function(module, exports) {

module.exports = require("bunyan");

/***/ }),
/* 94 */
/***/ (function(module, exports) {

module.exports = require("camelcase");

/***/ }),
/* 95 */
/***/ (function(module, exports) {

module.exports = require("es6-error");

/***/ }),
/* 96 */
/***/ (function(module, exports) {

module.exports = require("firefox-profile");

/***/ }),
/* 97 */
/***/ (function(module, exports) {

module.exports = require("git-rev-sync");

/***/ }),
/* 98 */
/***/ (function(module, exports) {

module.exports = require("parse-json");

/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./test-cmd/test.build.js": 104,
	"./test-cmd/test.docs.js": 105,
	"./test-cmd/test.lint.js": 106,
	"./test-cmd/test.run.js": 107,
	"./test-cmd/test.sign.js": 108,
	"./test-extension-runners/test.extension-runners.js": 109,
	"./test-extension-runners/test.firefox-desktop.js": 110,
	"./test-firefox/test.firefox.js": 111,
	"./test-firefox/test.preferences.js": 112,
	"./test-firefox/test.remote.js": 113,
	"./test-util/test.artifacts.js": 114,
	"./test-util/test.desktop-notifier.js": 115,
	"./test-util/test.file-filter.js": 116,
	"./test-util/test.is-directory.js": 117,
	"./test-util/test.logger.js": 118,
	"./test-util/test.manifest.js": 36,
	"./test-util/test.temp-dir.js": 119,
	"./test-util/test.updates.js": 120,
	"./test.config.js": 121,
	"./test.errors.js": 122,
	"./test.program.js": 123,
	"./test.setup.js": 124,
	"./test.watcher.js": 125
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 99;

/***/ }),
/* 100 */
/***/ (function(module, exports) {

module.exports = require("babel-polyfill");

/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var __cov_ejPwKiQryyJ0rqC9maPjHQ = Function('return this')();
if (!__cov_ejPwKiQryyJ0rqC9maPjHQ.__coverage__) {
   __cov_ejPwKiQryyJ0rqC9maPjHQ.__coverage__ = {};
}
__cov_ejPwKiQryyJ0rqC9maPjHQ = __cov_ejPwKiQryyJ0rqC9maPjHQ.__coverage__;
if (!__cov_ejPwKiQryyJ0rqC9maPjHQ['/home/travis/build/mozilla/web-ext/src/config.js']) {
   __cov_ejPwKiQryyJ0rqC9maPjHQ['/home/travis/build/mozilla/web-ext/src/config.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/config.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 1, "17": 0, "18": 0, "19": 1, "20": 0, "21": 0, "22": 0, "23": 0, "24": 0, "25": 0, "26": 0, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 0, "33": 0, "34": 0, "35": 0, "36": 1, "37": 0, "38": 0, "39": 0, "40": 0, "41": 0, "42": 0, "43": 0, "44": 0, "45": 0, "46": 0 }, "b": { "1": [0, 0], "2": [0, 0], "3": [0, 0], "4": [0, 0], "5": [0, 0], "6": [0, 0], "7": [0, 0], "8": [0, 0] }, "f": { "1": 0, "2": 0, "3": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true }, "2": { "name": "applyConfigToArgv", "line": 21, "loc": { "start": { "line": 21, "column": 7 }, "end": { "line": 27, "column": 36 } } }, "3": { "name": "loadJSConfigFile", "line": 66, "loc": { "start": { "line": 66, "column": 7 }, "end": { "line": 66, "column": 59 } } } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "4": { "start": { "line": 21, "column": 16 }, "end": { "line": null, "column": null } }, "5": { "start": { "line": 66, "column": 16 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 4, "column": 0 }, "end": { "line": null, "column": null } }, "9": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "10": { "start": { "line": 5, "column": 0 }, "end": { "line": null, "column": null } }, "11": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "12": { "start": { "line": 6, "column": 0 }, "end": { "line": null, "column": null } }, "13": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "14": { "start": { "line": 8, "column": 0 }, "end": { "line": null, "column": null } }, "15": { "start": { "line": 9, "column": 0 }, "end": { "line": null, "column": null } }, "16": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "17": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "18": { "start": { "line": 11, "column": 0 }, "end": { "line": null, "column": null } }, "19": { "start": { "line": 21, "column": 7 }, "end": { "line": null, "column": null } }, "20": { "start": { "line": 22, "column": 2 }, "end": { "line": null, "column": null } }, "21": { "start": { "line": 28, "column": 6 }, "end": { "line": null, "column": null } }, "22": { "start": { "line": 29, "column": 7 }, "end": { "line": null, "column": null } }, "23": { "start": { "line": 31, "column": 8 }, "end": { "line": null, "column": null } }, "24": { "start": { "line": 32, "column": 12 }, "end": { "line": null, "column": null } }, "25": { "start": { "line": 36, "column": 8 }, "end": { "line": null, "column": null } }, "26": { "start": { "line": 37, "column": 16 }, "end": { "line": null, "column": null } }, "27": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "28": { "start": { "line": 48, "column": 10 }, "end": { "line": null, "column": null } }, "29": { "start": { "line": 50, "column": 8 }, "end": { "line": null, "column": null } }, "30": { "start": { "line": 51, "column": 10 }, "end": { "line": null, "column": null } }, "31": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "32": { "start": { "line": 56, "column": 8 }, "end": { "line": null, "column": null } }, "33": { "start": { "line": 57, "column": 12 }, "end": { "line": null, "column": null } }, "34": { "start": { "line": 61, "column": 12 }, "end": { "line": null, "column": null } }, "35": { "start": { "line": 63, "column": 9 }, "end": { "line": null, "column": null } }, "36": { "start": { "line": 66, "column": 7 }, "end": { "line": null, "column": null } }, "37": { "start": { "line": 67, "column": 8 }, "end": { "line": null, "column": null } }, "38": { "start": { "line": 68, "column": 6 }, "end": { "line": null, "column": null } }, "39": { "start": { "line": 71, "column": 6 }, "end": { "line": null, "column": null } }, "40": { "start": { "line": 72, "column": 6 }, "end": { "line": null, "column": null } }, "41": { "start": { "line": 73, "column": 19 }, "end": { "line": null, "column": null } }, "42": { "start": { "line": 75, "column": 8 }, "end": { "line": null, "column": null } }, "43": { "start": { "line": 76, "column": 10 }, "end": { "line": null, "column": null } }, "44": { "start": { "line": 80, "column": 6 }, "end": { "line": null, "column": null } }, "45": { "start": { "line": 81, "column": 8 }, "end": { "line": null, "column": null } }, "46": { "start": { "line": 84, "column": 9 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "3": { "line": 31, "type": "if", "locations": [{ "start": { "line": 31, "column": 8 }, "end": { "line": 31, "column": 8 } }, { "start": { "line": 31, "column": 8 }, "end": { "line": 31, "column": 8 } }] }, "4": { "line": 36, "type": "if", "locations": [{ "start": { "line": 36, "column": 8 }, "end": { "line": 36, "column": 8 } }, { "start": { "line": 36, "column": 8 }, "end": { "line": 36, "column": 8 } }] }, "5": { "line": 48, "type": "binary-expr", "locations": [{ "start": { "line": 48, "column": 29 }, "end": { "line": 48, "column": 29 } }, { "start": { "line": 49, "column": 7 }, "end": { "line": 48, "column": 4 } }] }, "6": { "line": 50, "type": "if", "locations": [{ "start": { "line": 50, "column": 8 }, "end": { "line": 50, "column": 8 } }, { "start": { "line": 50, "column": 8 }, "end": { "line": 50, "column": 8 } }] }, "7": { "line": 56, "type": "if", "locations": [{ "start": { "line": 56, "column": 8 }, "end": { "line": 56, "column": 8 } }, { "start": { "line": 56, "column": 8 }, "end": { "line": 56, "column": 8 } }] }, "8": { "line": 80, "type": "if", "locations": [{ "start": { "line": 80, "column": 6 }, "end": { "line": 80, "column": 6 } }, { "start": { "line": 80, "column": 6 }, "end": { "line": 80, "column": 6 } }] } }, "code": ["/* @flow */", "import path from 'path';", "", "import requireUncached from 'require-uncached';", "import camelCase from 'camelcase';", "import decamelize from 'decamelize';", "", "import {createLogger} from './util/logger';", "import {UsageError} from './errors';", "", "const log = createLogger(__filename);", "", "type ApplyConfigToArgvParams = {|", "  argv: Object,", "  configObject: Object,", "  defaultValues: Object,", "  configFileName: string,", "  commandExecuted?: string,", "|};", "", "export function applyConfigToArgv({", "  argv,", "  configObject,", "  defaultValues,", "  configFileName,", "  commandExecuted,", "}: ApplyConfigToArgvParams): Object {", "  let newArgv = {...argv};", "  for (const option in configObject) {", "", "    if (camelCase(option) !== option) {", "      throw new UsageError(`The config option \"${option}\" must be ` +", "        `specified in camel case: \"${camelCase(option)}\"`);", "    }", "", "    if (option === commandExecuted) {", "      newArgv = applyConfigToArgv({", "        argv,", "        configObject: configObject[commandExecuted],", "        defaultValues: defaultValues[commandExecuted],", "        configFileName});", "      continue;", "    }", "", "    // we assume the value was set on the CLI if the default value is", "    // not the same as that on the argv object as there is a very rare chance", "    // of this happening", "    const wasValueSetOnCLI = typeof(argv[option]) !== 'undefined' &&", "      (argv[option] !== defaultValues[option]);", "    if (wasValueSetOnCLI) {", "      log.debug(`Favoring CLI: ${option}=${argv[option]} over ` +", "        `configuration: ${option}=${configObject[option]}`);", "      continue;", "    }", "", "    if (!argv.hasOwnProperty(decamelize(option, '-'))) {", "      throw new UsageError(`The config file at ${configFileName} specified ` +", "        `an unknown option: \"${option}\"`);", "    }", "", "    newArgv[option] = configObject[option];", "  }", "  return newArgv;", "}", "", "export function loadJSConfigFile(filePath: string): Object {", "  const resolvedFilePath = path.resolve(filePath);", "  log.debug(", "    `Loading JS config file: \"${filePath}\" ` +", "    `(resolved to \"${resolvedFilePath}\")`);", "  let configObject;", "  try {", "    configObject = requireUncached(resolvedFilePath);", "  } catch (error) {", "    log.debug('Handling error:', error);", "    throw new UsageError(", "      `Cannot read config file: ${resolvedFilePath}\\n` +", "      `Error: ${error.message}`);", "  }", "  if (Object.keys(configObject).length === 0) {", "    log.debug(`Config file ${resolvedFilePath} did not define any options. ` +", "      'Did you set module.exports = {...}?');", "  }", "  return configObject;", "}"] };
}
__cov_ejPwKiQryyJ0rqC9maPjHQ = __cov_ejPwKiQryyJ0rqC9maPjHQ['/home/travis/build/mozilla/web-ext/src/config.js'];
__cov_ejPwKiQryyJ0rqC9maPjHQ.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_ejPwKiQryyJ0rqC9maPjHQ.s['2']++;var _extends2 = __webpack_require__(5);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['3']++;var _extends3 = _interopRequireDefault(_extends2);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['4']++;exports.applyConfigToArgv = applyConfigToArgv;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['5']++;exports.loadJSConfigFile = loadJSConfigFile;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['6']++;var _path = __webpack_require__(4);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['7']++;var _path2 = _interopRequireDefault(_path);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['8']++;var _requireUncached = __webpack_require__(193);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['9']++;var _requireUncached2 = _interopRequireDefault(_requireUncached);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['10']++;var _camelcase = __webpack_require__(94);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['11']++;var _camelcase2 = _interopRequireDefault(_camelcase);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['12']++;var _decamelize = __webpack_require__(183);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['13']++;var _decamelize2 = _interopRequireDefault(_decamelize);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['14']++;var _logger = __webpack_require__(0);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['15']++;var _errors = __webpack_require__(2);function _interopRequireDefault(obj) {
   __cov_ejPwKiQryyJ0rqC9maPjHQ.f['1']++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['17']++;return (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['2'][0]++, obj) && (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['2'][1]++, obj.__esModule) ? (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['1'][0]++, obj) : (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['1'][1]++, { default: obj });
}__cov_ejPwKiQryyJ0rqC9maPjHQ.s['18']++;var log = (0, _logger.createLogger)(__filename);function applyConfigToArgv(_ref) {
   __cov_ejPwKiQryyJ0rqC9maPjHQ.f['2']++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['20']++;var argv = _ref.argv,
       configObject = _ref.configObject,
       defaultValues = _ref.defaultValues,
       configFileName = _ref.configFileName,
       commandExecuted = _ref.commandExecuted;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['21']++;var newArgv = (0, _extends3.default)({}, argv);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['22']++;for (var option in configObject) {
      __cov_ejPwKiQryyJ0rqC9maPjHQ.s['23']++;if ((0, _camelcase2.default)(option) !== option) {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['3'][0]++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['24']++;throw new _errors.UsageError('The config option "' + option + '" must be ' + ('specified in camel case: "' + (0, _camelcase2.default)(option) + '"'));
      } else {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['3'][1]++;
      }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['25']++;if (option === commandExecuted) {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['4'][0]++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['26']++;newArgv = applyConfigToArgv({ argv: argv, configObject: configObject[commandExecuted], defaultValues: defaultValues[commandExecuted], configFileName: configFileName });__cov_ejPwKiQryyJ0rqC9maPjHQ.s['27']++;continue;
      } else {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['4'][1]++;
      }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['28']++;var wasValueSetOnCLI = (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['5'][0]++, typeof argv[option] !== 'undefined') && (__cov_ejPwKiQryyJ0rqC9maPjHQ.b['5'][1]++, argv[option] !== defaultValues[option]);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['29']++;if (wasValueSetOnCLI) {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['6'][0]++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['30']++;log.debug('Favoring CLI: ' + option + '=' + argv[option] + ' over ' + ('configuration: ' + option + '=' + configObject[option]));__cov_ejPwKiQryyJ0rqC9maPjHQ.s['31']++;continue;
      } else {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['6'][1]++;
      }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['32']++;if (!argv.hasOwnProperty((0, _decamelize2.default)(option, '-'))) {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['7'][0]++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['33']++;throw new _errors.UsageError('The config file at ' + configFileName + ' specified ' + ('an unknown option: "' + option + '"'));
      } else {
         __cov_ejPwKiQryyJ0rqC9maPjHQ.b['7'][1]++;
      }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['34']++;newArgv[option] = configObject[option];
   }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['35']++;return newArgv;
}function loadJSConfigFile(filePath) {
   __cov_ejPwKiQryyJ0rqC9maPjHQ.f['3']++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['37']++;var resolvedFilePath = _path2.default.resolve(filePath);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['38']++;log.debug('Loading JS config file: "' + filePath + '" ' + ('(resolved to "' + resolvedFilePath + '")'));__cov_ejPwKiQryyJ0rqC9maPjHQ.s['39']++;var configObject = void 0;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['40']++;try {
      __cov_ejPwKiQryyJ0rqC9maPjHQ.s['41']++;configObject = (0, _requireUncached2.default)(resolvedFilePath);
   } catch (error) {
      __cov_ejPwKiQryyJ0rqC9maPjHQ.s['42']++;log.debug('Handling error:', error);__cov_ejPwKiQryyJ0rqC9maPjHQ.s['43']++;throw new _errors.UsageError('Cannot read config file: ' + resolvedFilePath + '\n' + ('Error: ' + error.message));
   }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['44']++;if (Object.keys(configObject).length === 0) {
      __cov_ejPwKiQryyJ0rqC9maPjHQ.b['8'][0]++;__cov_ejPwKiQryyJ0rqC9maPjHQ.s['45']++;log.debug('Config file ' + resolvedFilePath + ' did not define any options. ' + 'Did you set module.exports = {...}?');
   } else {
      __cov_ejPwKiQryyJ0rqC9maPjHQ.b['8'][1]++;
   }__cov_ejPwKiQryyJ0rqC9maPjHQ.s['46']++;return configObject;
}
/* WEBPACK VAR INJECTION */}.call(exports, "src/config.js"))

/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var __cov_ZqiTBvXCYqvB_BrH8zqMeA = Function('return this')();
if (!__cov_ZqiTBvXCYqvB_BrH8zqMeA.__coverage__) {
   __cov_ZqiTBvXCYqvB_BrH8zqMeA.__coverage__ = {};
}
__cov_ZqiTBvXCYqvB_BrH8zqMeA = __cov_ZqiTBvXCYqvB_BrH8zqMeA.__coverage__;
if (!__cov_ZqiTBvXCYqvB_BrH8zqMeA['/home/travis/build/mozilla/web-ext/src/util/zip-dir.js']) {
   __cov_ZqiTBvXCYqvB_BrH8zqMeA['/home/travis/build/mozilla/web-ext/src/util/zip-dir.js'] = { "path": "/home/travis/build/mozilla/web-ext/src/util/zip-dir.js", "s": { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 1, "8": 0, "9": 0 }, "b": { "1": [0, 0], "2": [0, 0] }, "f": { "1": 0 }, "fnMap": { "1": { "name": "_interopRequireDefault", "line": 0, "loc": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 } }, "skip": true } }, "statementMap": { "1": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "2": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "3": { "start": { "line": 2, "column": 0 }, "end": { "line": null, "column": null } }, "4": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "5": { "start": { "line": 3, "column": 0 }, "end": { "line": null, "column": null } }, "6": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "7": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "8": { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, "9": { "start": { "line": 5, "column": 7 }, "end": { "line": null, "column": null } } }, "branchMap": { "1": { "line": 0, "type": "cond-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] }, "2": { "line": 0, "type": "binary-expr", "locations": [{ "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }, { "start": { "line": 0, "column": 0 }, "end": { "line": 0, "column": 0 }, "skip": true }] } }, "code": ["/* @flow */", "import zipDirModule from 'zip-dir';", "import promisify from 'es6-promisify';", "", "export const zipDir = promisify(zipDirModule);", ""] };
}
__cov_ZqiTBvXCYqvB_BrH8zqMeA = __cov_ZqiTBvXCYqvB_BrH8zqMeA['/home/travis/build/mozilla/web-ext/src/util/zip-dir.js'];
__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['1']++;Object.defineProperty(exports, '__esModule', { value: true });__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['2']++;exports.zipDir = undefined;__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['3']++;var _zipDir = __webpack_require__(201);__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['4']++;var _zipDir2 = _interopRequireDefault(_zipDir);__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['5']++;var _es6Promisify = __webpack_require__(28);__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['6']++;var _es6Promisify2 = _interopRequireDefault(_es6Promisify);function _interopRequireDefault(obj) {
   __cov_ZqiTBvXCYqvB_BrH8zqMeA.f['1']++;__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['8']++;return (__cov_ZqiTBvXCYqvB_BrH8zqMeA.b['2'][0]++, obj) && (__cov_ZqiTBvXCYqvB_BrH8zqMeA.b['2'][1]++, obj.__esModule) ? (__cov_ZqiTBvXCYqvB_BrH8zqMeA.b['1'][0]++, obj) : (__cov_ZqiTBvXCYqvB_BrH8zqMeA.b['1'][1]++, { default: obj });
}__cov_ZqiTBvXCYqvB_BrH8zqMeA.s['9']++;var zipDir = exports.zipDir = (0, _es6Promisify2.default)(_zipDir2.default);

/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


__webpack_require__(100);

var context = __webpack_require__(99); // Webpack tests entry point. Bundles all the test files
// into a single file.

context.keys().forEach(context);

/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mz = __webpack_require__(9);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _eventToPromise = __webpack_require__(67);

var _eventToPromise2 = _interopRequireDefault(_eventToPromise);

var _build = __webpack_require__(46);

var _build2 = _interopRequireDefault(_build);

var _fileFilter = __webpack_require__(29);

var _tempDir = __webpack_require__(15);

var _helpers = __webpack_require__(10);

var _test = __webpack_require__(36);

var _errors = __webpack_require__(2);

var _logger = __webpack_require__(0);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var log = (0, _logger.createLogger)(__filename);


(0, _mocha.describe)('build', function () {

  (0, _mocha.it)('zips a package', function () {
    var zipFile = new _helpers.ZipFile();

    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: tmpDir.path()
      }).then(function (buildResult) {
        _chai.assert.match(buildResult.extensionPath, /minimal_extension-1\.0\.zip$/);
        return buildResult.extensionPath;
      }).then(function (extensionPath) {
        return zipFile.open(extensionPath);
      }).then(function () {
        return zipFile.extractFilenames();
      }).then(function (fileNames) {
        fileNames.sort();
        _chai.assert.deepEqual(fileNames, ['background-script.js', 'manifest.json']);
        return zipFile.close();
      });
    });
  });

  (0, _mocha.it)('configures a build command with the expected fileFilter', function () {
    var packageCreator = _sinon2.default.spy(function () {
      return { extensionPath: 'extension/path' };
    });
    var fileFilter = { wantFile: function wantFile() {
        return true;
      } };
    var createFileFilter = _sinon2.default.spy(function () {
      return fileFilter;
    });
    var params = {
      sourceDir: '/src',
      artifactsDir: 'artifacts',
      ignoreFiles: ['**/*.log']
    };
    return (0, _build2.default)(params, { packageCreator: packageCreator, createFileFilter: createFileFilter }).then(function () {
      // ensure sourceDir, artifactsDir, ignoreFiles is used
      _chai.assert.ok(createFileFilter.called);
      _chai.assert.deepEqual(createFileFilter.firstCall.args[0], params);
      // ensure packageCreator received correct fileFilter
      _chai.assert.ok(packageCreator.called);
      _chai.assert.equal(packageCreator.firstCall.args[0].fileFilter, fileFilter);
    });
  });

  (0, _mocha.it)('gives the correct name to a localized extension', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-localizable-web-ext'),
        artifactsDir: tmpDir.path()
      }).then(function (buildResult) {
        _chai.assert.match(buildResult.extensionPath, /name_of_the_extension-1\.0\.zip$/);
        return buildResult.extensionPath;
      });
    });
  });

  (0, _mocha.it)('handles repeating localization keys', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var messageFileName = _path2.default.join(tmpDir.path(), 'messages.json');
      _mz.fs.writeFileSync(messageFileName, '{"extensionName": {\n              "message": "example extension",\n              "description": "example description"\n            }\n          }');

      var manifestWithRepeatingPattern = {
        name: '__MSG_extensionName__ __MSG_extensionName__',
        version: '0.0.1'
      };

      return (0, _build.getDefaultLocalizedName)({
        messageFile: messageFileName,
        manifestData: manifestWithRepeatingPattern
      }).then(function (result) {
        _chai.assert.match(result, /example extension example extension/);
      });
    });
  });

  (0, _mocha.it)('checks locale file for malformed json', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var messageFileName = _path2.default.join(tmpDir.path(), 'messages.json');
      _mz.fs.writeFileSync(messageFileName, '{"simulated:" "json syntax error"');
      return (0, _build.getDefaultLocalizedName)({
        messageFile: messageFileName,
        manifestData: _test.manifestWithoutApps
      }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.instanceOf(error, _errors.UsageError);
        _chai.assert.match(error.message, /Unexpected token '"' at 1:15/);
        _chai.assert.match(error.message, /^Error parsing messages.json/);
        _chai.assert.include(error.message, messageFileName);
      });
    });
  });

  (0, _mocha.it)('checks locale file for incorrect format', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var messageFileName = _path2.default.join(tmpDir.path(), 'messages.json');
      //This is missing the 'message' key
      _mz.fs.writeFileSync(messageFileName, '{"extensionName": {\n              "description": "example extension"\n              }\n          }');
      var basicLocalizedManifest = {
        name: '__MSG_extensionName__',
        version: '0.0.1'
      };
      return (0, _build.getDefaultLocalizedName)({
        messageFile: messageFileName,
        manifestData: basicLocalizedManifest
      }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.instanceOf(error, _errors.UsageError);
        _chai.assert.match(error.message, /The locale file .*messages\.json is missing key: extensionName/);
      });
    });
  });

  (0, _mocha.it)('throws an error if the locale file does not exist', function () {
    return (0, _build.getDefaultLocalizedName)({
      messageFile: '/path/to/non-existent-dir/messages.json',
      manifestData: _test.manifestWithoutApps
    }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      log.info(error);
      _chai.assert.instanceOf(error, _errors.UsageError);
      _chai.assert.match(error.message, /Error: ENOENT: no such file or directory, open .*messages.json/);
      _chai.assert.match(error.message, /^Error reading messages.json/);
      _chai.assert.include(error.message, '/path/to/non-existent-dir/messages.json');
    });
  });

  (0, _mocha.it)('can build an extension without an ID', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      // Make sure a manifest without an ID doesn't throw an error.
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: tmpDir.path()
      }, { manifestData: _test.manifestWithoutApps });
    });
  });

  (0, _mocha.it)('prepares the artifacts dir', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var artifactsDir = _path2.default.join(tmpDir.path(), 'artifacts');
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: artifactsDir
      }).then(function () {
        return _mz.fs.stat(artifactsDir);
      }).then(function (stats) {
        _chai.assert.equal(stats.isDirectory(), true);
      });
    });
  });

  (0, _mocha.it)('lets you specify a manifest', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: tmpDir.path()
      }, {
        manifestData: _helpers.basicManifest
      }).then(function (buildResult) {
        _chai.assert.match(buildResult.extensionPath, /the_extension-0\.0\.1\.zip$/);
        return buildResult.extensionPath;
      });
    });
  });

  (0, _mocha.it)('asks FileFilter what files to include in the ZIP', function () {
    var zipFile = new _helpers.ZipFile();
    var fileFilter = new _fileFilter.FileFilter({
      sourceDir: '.',
      baseIgnoredPatterns: ['**/background-script.js']
    });

    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: tmpDir.path()
      }, { fileFilter: fileFilter }).then(function (buildResult) {
        return zipFile.open(buildResult.extensionPath);
      }).then(function () {
        return zipFile.extractFilenames();
      }).then(function (fileNames) {
        _chai.assert.notInclude(fileNames, 'background-script.js');
        return zipFile.close();
      });
    });
  });

  (0, _mocha.it)('lets you rebuild when files change', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var sourceDir = (0, _helpers.fixturePath)('minimal-web-ext');
      var artifactsDir = tmpDir.path();
      var fileFilter = new _fileFilter.FileFilter({ sourceDir: sourceDir, artifactsDir: artifactsDir });
      _sinon2.default.spy(fileFilter, 'wantFile');
      var onSourceChange = _sinon2.default.spy(function () {});
      return (0, _build2.default)({
        sourceDir: sourceDir, artifactsDir: artifactsDir, asNeeded: true
      }, {
        manifestData: _helpers.basicManifest, onSourceChange: onSourceChange, fileFilter: fileFilter
      }).then(function (buildResult) {
        // Make sure we still have a build result.
        _chai.assert.match(buildResult.extensionPath, /\.zip$/);
        return buildResult;
      }).then(function (buildResult) {
        _chai.assert.equal(onSourceChange.called, true);
        var args = onSourceChange.firstCall.args[0];
        _chai.assert.equal(args.sourceDir, sourceDir);
        _chai.assert.equal(args.artifactsDir, artifactsDir);
        _chai.assert.typeOf(args.onChange, 'function');

        // Make sure it uses the file filter.
        _chai.assert.typeOf(args.shouldWatchFile, 'function');
        args.shouldWatchFile('/some/path');
        _chai.assert.equal(fileFilter.wantFile.called, true);

        // Remove the built extension.
        return _mz.fs.unlink(buildResult.extensionPath)
        // Execute the onChange handler to make sure it gets built
        // again. This simulates what happens when the file watcher
        // executes the callback.
        .then(function () {
          return args.onChange();
        });
      }).then(function (buildResult) {
        _chai.assert.match(buildResult.extensionPath, /\.zip$/);
        return _mz.fs.stat(buildResult.extensionPath);
      }).then(function (stat) {
        _chai.assert.equal(stat.isFile(), true);
      });
    });
  });

  (0, _mocha.it)('throws errors when rebuilding in source watcher', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var packageResult = Promise.resolve({});
      var packageCreator = _sinon2.default.spy(function () {
        return packageResult;
      });
      var onSourceChange = _sinon2.default.spy(function () {});
      return (0, _build2.default)({
        sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
        artifactsDir: tmpDir.path(),
        asNeeded: true
      }, {
        manifestData: _helpers.basicManifest, onSourceChange: onSourceChange, packageCreator: packageCreator
      }).then(function () {
        _chai.assert.equal(onSourceChange.called, true);
        _chai.assert.equal(packageCreator.callCount, 1);

        var onChange = onSourceChange.firstCall.args[0].onChange;

        packageResult = Promise.reject(new Error('Simulate an error on the second call to packageCreator()'));
        // Invoke the stub packageCreator() again which should throw an error
        return onChange();
      }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.include(error.message, 'Simulate an error on the second call to packageCreator()');
      });
    });
  });

  (0, _mocha.it)('raises an UsageError if zip file exists', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var testFileName = _path2.default.join(tmpDir.path(), 'minimal_extension-1.0.zip');
      return _mz.fs.writeFile(testFileName, 'test').then(function () {
        return (0, _build2.default)({
          sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
          artifactsDir: tmpDir.path()
        });
      }).catch(function (error) {
        _chai.assert.instanceOf(error, _errors.UsageError);
        _chai.assert.match(error.message, /Extension exists at the destination path/);
      });
    });
  });

  (0, _mocha.it)('overwrites zip file if it exists', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var testFileName = _path2.default.join(tmpDir.path(), 'minimal_extension-1.0.zip');
      return _mz.fs.writeFile(testFileName, 'test').then(function () {
        return (0, _build2.default)({
          sourceDir: (0, _helpers.fixturePath)('minimal-web-ext'),
          artifactsDir: tmpDir.path(),
          overwriteDest: true
        });
      }).then(function (buildResult) {
        _chai.assert.match(buildResult.extensionPath, /minimal_extension-1\.0\.zip$/);
      });
    });
  });

  (0, _mocha.describe)('safeFileName', function () {

    (0, _mocha.it)('makes names safe for writing to a file system', function () {
      _chai.assert.equal((0, _build.safeFileName)('Bob Loblaw\'s 2005 law-blog.net'), 'bob_loblaw_s_2005_law-blog.net');
    });
  });

  (0, _mocha.describe)('defaultPackageCreator', function () {
    (0, _mocha.it)('should reject on Unexpected errors', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var fakeEventToPromise = _sinon2.default.spy(function () {
          var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(stream) {
            var files, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, file;

            return _regenerator2.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _context.next = 2;
                    return (0, _eventToPromise2.default)(stream, 'close');

                  case 2:
                    _context.next = 4;
                    return _mz.fs.readdir(tmpDir.path());

                  case 4:
                    files = _context.sent;
                    _iteratorNormalCompletion = true;
                    _didIteratorError = false;
                    _iteratorError = undefined;
                    _context.prev = 8;
                    _iterator = files[Symbol.iterator]();

                  case 10:
                    if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                      _context.next = 17;
                      break;
                    }

                    file = _step.value;
                    _context.next = 14;
                    return _mz.fs.unlink(_path2.default.join(tmpDir.path(), file));

                  case 14:
                    _iteratorNormalCompletion = true;
                    _context.next = 10;
                    break;

                  case 17:
                    _context.next = 23;
                    break;

                  case 19:
                    _context.prev = 19;
                    _context.t0 = _context['catch'](8);
                    _didIteratorError = true;
                    _iteratorError = _context.t0;

                  case 23:
                    _context.prev = 23;
                    _context.prev = 24;

                    if (!_iteratorNormalCompletion && _iterator.return) {
                      _iterator.return();
                    }

                  case 26:
                    _context.prev = 26;

                    if (!_didIteratorError) {
                      _context.next = 29;
                      break;
                    }

                    throw _iteratorError;

                  case 29:
                    return _context.finish(26);

                  case 30:
                    return _context.finish(23);

                  case 31:
                    return _context.abrupt('return', Promise.reject(new Error('Unexpected error')));

                  case 32:
                  case 'end':
                    return _context.stop();
                }
              }
            }, _callee, undefined, [[8, 19, 23, 31], [24,, 26, 30]]);
          }));

          return function (_x) {
            return _ref.apply(this, arguments);
          };
        }());
        var sourceDir = (0, _helpers.fixturePath)('minimal-web-ext');
        var artifactsDir = tmpDir.path();
        var fileFilter = new _fileFilter.FileFilter({ sourceDir: sourceDir, artifactsDir: artifactsDir });
        var params = {
          manifestData: _helpers.basicManifest,
          sourceDir: sourceDir,
          fileFilter: fileFilter,
          artifactsDir: artifactsDir,
          overwriteDest: false,
          showReadyMessage: false
        };
        var options = {
          eventToPromise: fakeEventToPromise
        };

        return (0, _build.defaultPackageCreator)(params, options).then((0, _helpers.makeSureItFails)()).catch(function (error) {
          _chai.assert.match(error.message, /Unexpected error/);
        });
      });
    });
  });
});
/* WEBPACK VAR INJECTION */}.call(exports, "tests/unit/test-cmd/test.build.js"))

/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _mocha = __webpack_require__(1);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = __webpack_require__(3);

var _helpers = __webpack_require__(10);

var _docs = __webpack_require__(70);

var _docs2 = _interopRequireDefault(_docs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('docs', function () {
  (0, _mocha.it)('passes the correct url to docs', function () {
    var openUrl = _sinon2.default.spy(function (urlToOpen, callback) {
      return callback(null);
    });
    return (0, _docs2.default)({}, { openUrl: openUrl }).then(function () {
      _chai.assert.ok(openUrl.called);
      _chai.assert.equal(openUrl.firstCall.args[0], _docs.url);
    });
  });

  (0, _mocha.it)('throws an error when open fails', function () {
    var openUrl = _sinon2.default.spy(function (urlToOpen, callback) {
      return callback(new Error('pretends this is an error from open()'));
    });
    return (0, _docs2.default)({}, { openUrl: openUrl }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /error from open()/);
    });
  });
});

/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _lint = __webpack_require__(72);

var _lint2 = _interopRequireDefault(_lint);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('lint', function () {

  function setUp() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
        createLinter = _ref.createLinter,
        createFileFilter = _ref.createFileFilter;

    var lintResult = '<lint.run() result placeholder>';
    var runLinter = _sinon2.default.spy(function () {
      return Promise.resolve(lintResult);
    });
    if (!createLinter) {
      createLinter = _sinon2.default.spy(function () {
        return { run: runLinter };
      });
    }
    return {
      lintResult: lintResult,
      createLinter: createLinter,
      runLinter: runLinter,
      lint: function lint() {
        var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

        return (0, _lint2.default)((0, _extends3.default)({
          sourceDir: '/fake/source/dir'
        }, params), (0, _extends3.default)({
          createLinter: createLinter,
          createFileFilter: createFileFilter
        }, options));
      }
    };
  }

  (0, _mocha.it)('creates and runs a linter', function () {
    var _setUp = setUp(),
        lint = _setUp.lint,
        createLinter = _setUp.createLinter,
        runLinter = _setUp.runLinter,
        lintResult = _setUp.lintResult;

    return lint().then(function (actualLintResult) {
      _chai.assert.equal(actualLintResult, lintResult);
      _chai.assert.equal(createLinter.called, true);
      _chai.assert.equal(runLinter.called, true);
    });
  });

  (0, _mocha.it)('fails when the linter fails', function () {
    var createLinter = function createLinter() {
      return {
        run: function run() {
          return Promise.reject(new Error('some error from the linter'));
        }
      };
    };

    var _setUp2 = setUp({ createLinter: createLinter }),
        lint = _setUp2.lint;

    return lint().then((0, _helpers.makeSureItFails)(), function (error) {
      _chai.assert.match(error.message, /error from the linter/);
    });
  });

  (0, _mocha.it)('runs as a binary', function () {
    var _setUp3 = setUp(),
        lint = _setUp3.lint,
        createLinter = _setUp3.createLinter;

    return lint().then(function () {
      var args = createLinter.firstCall.args[0];
      _chai.assert.equal(args.runAsBinary, true);
    });
  });

  (0, _mocha.it)('sets runAsBinary according shouldExitProgram option', function () {
    var _setUp4 = setUp(),
        lint = _setUp4.lint,
        createLinter = _setUp4.createLinter;

    return lint({}, { shouldExitProgram: false }).then(function () {
      var args = createLinter.firstCall.args[0];
      _chai.assert.strictEqual(args.runAsBinary, false);
    });
  });

  (0, _mocha.it)('passes sourceDir to the linter', function () {
    var _setUp5 = setUp(),
        lint = _setUp5.lint,
        createLinter = _setUp5.createLinter;

    return lint({ sourceDir: '/some/path' }).then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.equal(config._[0], '/some/path');
    });
  });

  (0, _mocha.it)('passes warningsAsErrors to the linter', function () {
    var _setUp6 = setUp(),
        lint = _setUp6.lint,
        createLinter = _setUp6.createLinter;

    return lint({ warningsAsErrors: true }).then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.equal(config.warningsAsErrors, true);
    });
  });

  (0, _mocha.it)('passes warningsAsErrors undefined to the linter', function () {
    var _setUp7 = setUp(),
        lint = _setUp7.lint,
        createLinter = _setUp7.createLinter;

    return lint().then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.equal(config.warningsAsErrors, undefined);
    });
  });

  (0, _mocha.it)('configures the linter when verbose', function () {
    var _setUp8 = setUp(),
        lint = _setUp8.lint,
        createLinter = _setUp8.createLinter;

    return lint({ verbose: true }).then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.equal(config.logLevel, 'debug');
      _chai.assert.equal(config.stack, true);
    });
  });

  (0, _mocha.it)('configures the linter when not verbose', function () {
    var _setUp9 = setUp(),
        lint = _setUp9.lint,
        createLinter = _setUp9.createLinter;

    return lint({ verbose: false }).then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.equal(config.logLevel, 'fatal');
      _chai.assert.equal(config.stack, false);
    });
  });

  (0, _mocha.it)('passes through linter configuration', function () {
    var _setUp10 = setUp(),
        lint = _setUp10.lint,
        createLinter = _setUp10.createLinter;

    return lint({
      pretty: true,
      metadata: true,
      output: 'json',
      boring: true,
      selfHosted: true
    }).then(function () {
      var config = createLinter.firstCall.args[0].config;
      _chai.assert.strictEqual(config.pretty, true);
      _chai.assert.strictEqual(config.metadata, true);
      _chai.assert.strictEqual(config.output, 'json');
      _chai.assert.strictEqual(config.boring, true);
      _chai.assert.strictEqual(config.selfHosted, true);
    });
  });

  (0, _mocha.it)('configures a lint command with the expected fileFilter', function () {
    var fileFilter = { wantFile: _sinon2.default.spy(function () {
        return true;
      }) };
    var createFileFilter = _sinon2.default.spy(function () {
      return fileFilter;
    });

    var _setUp11 = setUp({ createFileFilter: createFileFilter }),
        lint = _setUp11.lint,
        createLinter = _setUp11.createLinter;

    var params = {
      sourceDir: '.',
      artifactsDir: 'artifacts',
      ignoreFiles: ['file1', '**/file2']
    };
    return lint(params).then(function () {
      _chai.assert.ok(createFileFilter.called);
      _chai.assert.deepEqual(createFileFilter.firstCall.args[0], params);

      _chai.assert.ok(createLinter.called);
      var shouldScanFile = createLinter.firstCall.args[0].config.shouldScanFile;

      shouldScanFile('path/to/file');
      _chai.assert.ok(fileFilter.wantFile.called);
      _chai.assert.equal(fileFilter.wantFile.firstCall.args[0], 'path/to/file');
    });
  });
});

/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _run2 = __webpack_require__(73);

var _run3 = _interopRequireDefault(_run2);

var _helpers = __webpack_require__(10);

var _logger = __webpack_require__(0);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var log = (0, _logger.createLogger)(__filename);
// Fake result for client.installTemporaryAddon().then(installResult => ...)

var tempInstallResult = {
  addon: { id: 'some-addon@test-suite' }
};

(0, _mocha.describe)('run', function () {

  function prepareRun(fakeInstallResult) {
    var sourceDir = (0, _helpers.fixturePath)('minimal-web-ext');

    var argv = {
      artifactsDir: _path2.default.join(sourceDir, 'web-ext-artifacts'),
      sourceDir: sourceDir,
      noReload: true,
      keepProfileChanges: false,
      browserConsole: false
    };
    var options = {
      firefoxApp: (0, _helpers.getFakeFirefox)(),
      firefoxClient: _sinon2.default.spy(function () {
        return Promise.resolve((0, _helpers.getFakeRemoteFirefox)({
          installTemporaryAddon: function installTemporaryAddon() {
            return Promise.resolve(fakeInstallResult || tempInstallResult);
          }
        }));
      }),
      reloadStrategy: _sinon2.default.spy(function () {
        log.debug('fake: reloadStrategy()');
      }),
      FirefoxDesktopExtensionRunner: _sinon2.default.spy(_helpers.FakeExtensionRunner),
      desktopNotifications: _sinon2.default.spy(function () {})
    };

    return {
      argv: argv,
      options: options,
      run: function run() {
        var customArgv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var customOpt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        return (0, _run3.default)((0, _extends3.default)({}, argv, customArgv), (0, _extends3.default)({}, options, customOpt));
      }
    };
  }

  (0, _mocha.it)('passes a custom Firefox binary when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
    var firefox, cmd, FirefoxDesktopExtensionRunner;
    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            firefox = '/pretend/path/to/Firefox/firefox-bin';
            cmd = prepareRun();
            FirefoxDesktopExtensionRunner = _sinon2.default.spy(_helpers.FakeExtensionRunner);
            _context.next = 5;
            return cmd.run({ firefox: firefox }, { FirefoxDesktopExtensionRunner: FirefoxDesktopExtensionRunner });

          case 5:
            _chai.assert.equal(FirefoxDesktopExtensionRunner.called, true);
            _chai.assert.equal(FirefoxDesktopExtensionRunner.firstCall.args[0].firefoxBinary, firefox);

          case 7:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, undefined);
  })));

  (0, _mocha.it)('passes startUrl parameter to Firefox when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
    var cmd, expectedStartUrls, FirefoxDesktopExtensionRunner;
    return _regenerator2.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            cmd = prepareRun();
            expectedStartUrls = 'www.example.com';
            FirefoxDesktopExtensionRunner = _sinon2.default.spy(_helpers.FakeExtensionRunner);
            _context2.next = 5;
            return cmd.run({ startUrl: expectedStartUrls }, { FirefoxDesktopExtensionRunner: FirefoxDesktopExtensionRunner });

          case 5:

            _chai.assert.ok(FirefoxDesktopExtensionRunner.called);
            _chai.assert.deepEqual(FirefoxDesktopExtensionRunner.firstCall.args[0].startUrl, expectedStartUrls);

          case 7:
          case 'end':
            return _context2.stop();
        }
      }
    }, _callee2, undefined);
  })));

  (0, _mocha.it)('passes the expected parameters to the extension runner', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
    var cmd, runOptions, FirefoxDesktopExtensionRunner, runnerParams;
    return _regenerator2.default.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            cmd = prepareRun();
            runOptions = {
              preInstall: true,
              keepProfileChanges: true,
              browserConsole: true,
              firefox: '/path/to/custom/bin/firefox',
              customPrefs: { 'my.custom.pref': 'value' },
              firefoxProfile: '/path/to/custom/profile'
            };
            FirefoxDesktopExtensionRunner = _sinon2.default.spy(_helpers.FakeExtensionRunner);
            _context3.next = 5;
            return cmd.run(runOptions, { FirefoxDesktopExtensionRunner: FirefoxDesktopExtensionRunner });

          case 5:

            _chai.assert.ok(FirefoxDesktopExtensionRunner.called);
            runnerParams = FirefoxDesktopExtensionRunner.firstCall.args[0];

            _chai.assert.deepEqual({
              preInstall: runnerParams.preInstall,
              keepProfileChanges: runnerParams.keepProfileChanges,
              browserConsole: runnerParams.browserConsole,
              firefox: runnerParams.firefoxBinary,
              customPrefs: runnerParams.customPrefs,
              firefoxProfile: runnerParams.profilePath
            }, runOptions);
            _chai.assert.equal(runnerParams.extensions.length, 1);
            _chai.assert.equal(runnerParams.extensions[0].sourceDir, cmd.argv.sourceDir);

          case 10:
          case 'end':
            return _context3.stop();
        }
      }
    }, _callee3, undefined);
  })));

  (0, _mocha.it)('passes the expected dependencies to the extension runner', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
    var cmd, _cmd$options, firefoxApp, firefoxClient, FirefoxDesktopExtensionRunner, runnerParams;

    return _regenerator2.default.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            cmd = prepareRun();
            _cmd$options = cmd.options, firefoxApp = _cmd$options.firefoxApp, firefoxClient = _cmd$options.firefoxClient;
            FirefoxDesktopExtensionRunner = _sinon2.default.spy(_helpers.FakeExtensionRunner);
            _context4.next = 5;
            return cmd.run({}, { FirefoxDesktopExtensionRunner: FirefoxDesktopExtensionRunner });

          case 5:
            _chai.assert.ok(FirefoxDesktopExtensionRunner.called);
            runnerParams = FirefoxDesktopExtensionRunner.firstCall.args[0];

            _chai.assert.deepEqual({
              firefoxApp: runnerParams.firefoxApp,
              firefoxClient: runnerParams.firefoxClient
            }, { firefoxApp: firefoxApp, firefoxClient: firefoxClient });

          case 8:
          case 'end':
            return _context4.stop();
        }
      }
    }, _callee4, undefined);
  })));

  (0, _mocha.it)('can watch and reload the extension', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
    var cmd, _cmd$argv, sourceDir, artifactsDir, reloadStrategy, args;

    return _regenerator2.default.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            cmd = prepareRun();
            _cmd$argv = cmd.argv, sourceDir = _cmd$argv.sourceDir, artifactsDir = _cmd$argv.artifactsDir;
            reloadStrategy = cmd.options.reloadStrategy;
            _context5.next = 5;
            return cmd.run({ noReload: false });

          case 5:
            _chai.assert.equal(reloadStrategy.called, true);
            args = reloadStrategy.firstCall.args[0];

            _chai.assert.equal(args.sourceDir, sourceDir);
            _chai.assert.equal(args.artifactsDir, artifactsDir);

          case 9:
          case 'end':
            return _context5.stop();
        }
      }
    }, _callee5, undefined);
  })));

  (0, _mocha.it)('will not reload when using --pre-install', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {
    var cmd, reloadStrategy;
    return _regenerator2.default.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            cmd = prepareRun();
            reloadStrategy = cmd.options.reloadStrategy;

            // --pre-install should imply --no-reload

            _context6.next = 4;
            return cmd.run({ noReload: false, preInstall: true });

          case 4:
            _chai.assert.equal(reloadStrategy.called, false);

          case 5:
          case 'end':
            return _context6.stop();
        }
      }
    }, _callee6, undefined);
  })));

  (0, _mocha.it)('allows you to opt out of extension reloading', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7() {
    var cmd, reloadStrategy;
    return _regenerator2.default.wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            cmd = prepareRun();
            reloadStrategy = cmd.options.reloadStrategy;
            _context7.next = 4;
            return cmd.run({ noReload: true });

          case 4:
            _chai.assert.equal(reloadStrategy.called, false);

          case 5:
          case 'end':
            return _context7.stop();
        }
      }
    }, _callee7, undefined);
  })));
});
/* WEBPACK VAR INJECTION */}.call(exports, "tests/unit/test-cmd/test.run.js"))

/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _copyDir = __webpack_require__(181);

var _copyDir2 = _interopRequireDefault(_copyDir);

var _mz = __webpack_require__(9);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _es6Promisify = __webpack_require__(28);

var _es6Promisify2 = _interopRequireDefault(_es6Promisify);

var _errors = __webpack_require__(2);

var _manifest = __webpack_require__(25);

var _tempDir = __webpack_require__(15);

var _test = __webpack_require__(36);

var _sign2 = __webpack_require__(74);

var _sign3 = _interopRequireDefault(_sign2);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Import flow type
(0, _mocha.describe)('sign', function () {

  function getStubs() {
    var signingConfig = {
      apiKey: 'AMO JWT issuer',
      apiSecret: 'AMO JWT secret',
      apiUrlPrefix: 'http://not-the-real-amo.com/api/v3',
      apiProxy: 'http://yourproxy:6000',
      timeout: 999
    };

    var buildResult = {
      extensionPath: '/tmp/built-web-extension.xpi'
    };
    var build = _sinon2.default.spy(function () {
      return Promise.resolve(buildResult);
    });

    var signingResult = {
      id: 'some-addon-id',
      success: true,
      downloadedFiles: []
    };
    var signAddon = _sinon2.default.spy(function () {
      return Promise.resolve(signingResult);
    });

    return {
      signingConfig: signingConfig,
      build: build,
      buildResult: buildResult,
      signAddon: signAddon,
      signingResult: signingResult,
      preValidatedManifest: _helpers.basicManifest
    };
  }

  /*
   * Run the sign command with stubs for all dependencies.
   */
  function sign(tmpDir, stubs) {
    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
        _ref$extraArgs = _ref.extraArgs,
        extraArgs = _ref$extraArgs === undefined ? {} : _ref$extraArgs,
        _ref$extraOptions = _ref.extraOptions,
        extraOptions = _ref$extraOptions === undefined ? {} : _ref$extraOptions;

    return (0, _sign3.default)((0, _extends3.default)({
      verbose: false,
      artifactsDir: _path2.default.join(tmpDir.path(), 'artifacts-dir'),
      sourceDir: tmpDir.path()
    }, stubs.signingConfig, extraArgs), (0, _extends3.default)({}, stubs, extraOptions));
  }

  (0, _mocha.it)('builds and signs an extension', function () {
    return (0, _tempDir.withTempDir)(
    // This test only stubs out the signer in an effort to integrate
    // all other parts of the process.
    function (tmpDir) {
      var stubs = getStubs();
      var sourceDir = _path2.default.join(tmpDir.path(), 'source-dir');
      var copyDirAsPromised = (0, _es6Promisify2.default)(_copyDir2.default);
      return copyDirAsPromised((0, _helpers.fixturePath)('minimal-web-ext'), sourceDir).then(function () {
        return (0, _sign3.default)((0, _extends3.default)({
          sourceDir: sourceDir,
          artifactsDir: _path2.default.join(tmpDir.path(), 'artifacts')
        }, stubs.signingConfig), {
          signAddon: stubs.signAddon
        });
      }).then(function (result) {
        _chai.assert.equal(result.success, true);
        // Do a sanity check that a built extension was passed to the
        // signer.
        _chai.assert.include(stubs.signAddon.firstCall.args[0].xpiPath, 'minimal_extension-1.0.zip');
      });
    });
  });

  (0, _mocha.it)('allows an empty application ID when signing', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      return sign(tmpDir, stubs, {
        extraOptions: {
          preValidatedManifest: _test.manifestWithoutApps
        }
      }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        _chai.assert.strictEqual(stubs.signAddon.firstCall.args[0].id, (0, _manifest.getManifestId)(_test.manifestWithoutApps));
      });
    });
  });

  (0, _mocha.it)('allows a custom ID when no ID in manifest.json', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var customId = 'some-custom-id';
      var stubs = getStubs();
      return sign(tmpDir, stubs, {
        extraArgs: {
          id: customId
        },
        extraOptions: {
          preValidatedManifest: _test.manifestWithoutApps
        }
      }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        _chai.assert.equal(stubs.signAddon.firstCall.args[0].id, customId);
      });
    });
  });

  (0, _mocha.it)('prefers a custom ID over an ID file', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var sourceDir = _path2.default.join(tmpDir.path(), 'source-dir');
      var customId = 'some-custom-id';
      var stubs = getStubs();
      // First, save an extension ID like a previous signing call.
      return _mz.fs.mkdir(sourceDir).then(function () {
        return (0, _sign2.saveIdToSourceDir)(sourceDir, 'some-other-id');
      })
      // Now, make a signing call with a custom ID.
      .then(function () {
        return sign(tmpDir, stubs, {
          extraArgs: {
            sourceDir: sourceDir,
            id: customId
          },
          extraOptions: {
            preValidatedManifest: _test.manifestWithoutApps
          }
        });
      }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        _chai.assert.equal(stubs.signAddon.firstCall.args[0].id, customId);
      });
    });
  });

  (0, _mocha.it)('disallows a custom ID when manifest.json has ID', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var customId = 'some-custom-id';
      var stubs = getStubs();
      return sign(tmpDir, stubs, {
        extraArgs: {
          id: customId
        },
        extraOptions: {
          // This manifest has an ID in it.
          preValidatedManifest: _helpers.basicManifest
        }
      }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
        _chai.assert.match(error.message, /Cannot set custom ID some-custom-id/);
        _chai.assert.match(error.message, /manifest\.json declares ID basic-manifest@web-ext-test-suite/);
      }));
    });
  });

  (0, _mocha.it)('remembers auto-generated IDs for successive signing', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {

      function _sign() {
        var signAddon = _sinon2.default.spy(function () {
          return Promise.resolve((0, _extends3.default)({}, stubs.signingResult, {
            id: 'auto-generated-id'
          }));
        });

        return sign(tmpDir, (0, _extends3.default)({}, stubs, {
          signAddon: signAddon
        }), {
          extraOptions: {
            preValidatedManifest: _test.manifestWithoutApps
          }
        }).then(function (signingResult) {
          return { signingResult: signingResult, signAddon: signAddon };
        });
      }

      var stubs = getStubs();

      // Run an initial sign command which will yield a server generated ID.
      return _sign().then(function (_ref2) {
        var signAddon = _ref2.signAddon,
            signingResult = _ref2.signingResult;

        _chai.assert.equal(signAddon.called, true);
        _chai.assert.strictEqual(signAddon.firstCall.args[0].id, undefined);
        _chai.assert.equal(signingResult.id, 'auto-generated-id');

        // Re-run the sign command again.
        return _sign();
      }).then(function (_ref3) {
        var signAddon = _ref3.signAddon;

        _chai.assert.equal(signAddon.called, true);
        // This should call signAddon() with the server generated
        // ID that was saved to the source directory from the previous
        // signing result.
        _chai.assert.equal(signAddon.firstCall.args[0].id, 'auto-generated-id');
      });
    });
  });

  (0, _mocha.it)('returns a signing result', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      return sign(tmpDir, stubs).then(function (realResult) {
        _chai.assert.deepEqual(realResult, stubs.signingResult);
      });
    });
  });

  (0, _mocha.it)('might fail', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return sign(tmpDir, (0, _extends3.default)({}, getStubs(), {
        signAddon: function signAddon() {
          return Promise.resolve({
            success: false
          });
        }
      })).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.instanceOf(error, _errors.WebExtError);
        _chai.assert.match(error.message, /The WebExtension could not be signed/);
      });
    });
  });

  (0, _mocha.it)('calls the add-on signer', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      var artifactsDir = _path2.default.join(tmpDir.path(), 'some-artifacts-dir');
      return sign(tmpDir, stubs, { extraArgs: { artifactsDir: artifactsDir } }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        var signedAddonCall = stubs.signAddon.firstCall.args[0];
        _chai.assert.equal(signedAddonCall.apiKey, stubs.signingConfig.apiKey);
        _chai.assert.equal(signedAddonCall.apiSecret, stubs.signingConfig.apiSecret);
        _chai.assert.equal(signedAddonCall.apiUrlPrefix, stubs.signingConfig.apiUrlPrefix);
        _chai.assert.equal(signedAddonCall.apiProxy, stubs.signingConfig.apiProxy);
        _chai.assert.equal(signedAddonCall.timeout, stubs.signingConfig.timeout);
        _chai.assert.equal(signedAddonCall.xpiPath, stubs.buildResult.extensionPath);

        var applications = stubs.preValidatedManifest.applications || { gecko: {} };
        _chai.assert.equal(signedAddonCall.id, applications.gecko.id);

        _chai.assert.equal(signedAddonCall.version, stubs.preValidatedManifest.version);
        _chai.assert.equal(signedAddonCall.downloadDir, artifactsDir);
      });
    });
  });

  (0, _mocha.it)('passes the verbose flag to the signer', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      return sign(tmpDir, stubs, { extraArgs: { verbose: true } }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        _chai.assert.equal(stubs.signAddon.firstCall.args[0].verbose, true);
      });
    });
  });

  (0, _mocha.it)('passes the ignoreFiles flag to the builder', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      var ignoreFiles = ['*'];
      return sign(tmpDir, stubs, { extraArgs: { ignoreFiles: ignoreFiles } }).then(function () {
        _chai.assert.equal(stubs.signAddon.called, true);
        _chai.assert.equal(stubs.build.firstCall.args[0].ignoreFiles, ignoreFiles);
      });
    });
  });

  (0, _mocha.it)('passes through a signing exception', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var stubs = getStubs();
      stubs.signAddon = function () {
        return Promise.reject(new Error('some signing error'));
      };

      return sign(tmpDir, stubs).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.match(error.message, /signing error/);
      });
    });
  });

  (0, _mocha.describe)('saveIdToSourceDir', function () {

    (0, _mocha.it)('saves an extension ID to file', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var sourceDir = tmpDir.path();
        return (0, _sign2.saveIdToSourceDir)(sourceDir, 'some-id').then(function () {
          return _mz.fs.readFile(_path2.default.join(sourceDir, _sign2.extensionIdFile));
        }).then(function (content) {
          _chai.assert.include(content.toString(), 'some-id');
        });
      });
    });

    (0, _mocha.it)('will overwrite an existing file', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var sourceDir = tmpDir.path();
        return (0, _sign2.saveIdToSourceDir)(sourceDir, 'first-id').then(function () {
          return (0, _sign2.saveIdToSourceDir)(sourceDir, 'second-id');
        }).then(function () {
          return (0, _sign2.getIdFromSourceDir)(sourceDir);
        }).then(function (savedId) {
          _chai.assert.equal(savedId, 'second-id');
        });
      });
    });
  });

  (0, _mocha.describe)('getIdFromSourceDir', function () {

    (0, _mocha.it)('gets a saved extension ID', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var sourceDir = tmpDir.path();
        return (0, _sign2.saveIdToSourceDir)(sourceDir, 'some-id').then(function () {
          return (0, _sign2.getIdFromSourceDir)(sourceDir);
        }).then(function (extensionId) {
          _chai.assert.equal(extensionId, 'some-id');
        });
      });
    });

    (0, _mocha.it)('throws an error for empty files', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var sourceDir = tmpDir.path();
        return _mz.fs.writeFile(_path2.default.join(sourceDir, _sign2.extensionIdFile), '').then(function () {
          return (0, _sign2.getIdFromSourceDir)(sourceDir);
        }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
          _chai.assert.match(error.message, /No ID found in extension ID file/);
        }));
      });
    });

    (0, _mocha.it)('returns empty ID when extension file does not exist', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var sourceDir = tmpDir.path();
        return (0, _sign2.getIdFromSourceDir)(sourceDir).then(function (savedId) {
          _chai.assert.strictEqual(savedId, undefined);
        });
      });
    });
  });
});

/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _objectWithoutProperties2 = __webpack_require__(51);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _slicedToArray2 = __webpack_require__(30);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _stream = __webpack_require__(195);

var _stream2 = _interopRequireDefault(_stream);

var _tty = __webpack_require__(69);

var _tty2 = _interopRequireDefault(_tty);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _extensionRunners = __webpack_require__(76);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createFakeExtensionRunner(_ref) {
  var _ref$params = _ref.params,
      params = _ref$params === undefined ? {} : _ref$params,
      _ref$overriddenMethod = _ref.overriddenMethods,
      overriddenMethods = _ref$overriddenMethod === undefined ? {} : _ref$overriddenMethod;

  var runner = new _helpers.FakeExtensionRunner(params);

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = Object.entries(overriddenMethods)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var _step$value = (0, _slicedToArray3.default)(_step.value, 2),
          fnName = _step$value[0],
          fn = _step$value[1];

      _sinon2.default.stub(runner, fnName).callsFake(fn);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return runner;
}

function prepareExtensionRunnerParams(params) {
  return (0, _extends3.default)({
    runners: [new _helpers.FakeExtensionRunner(), new _helpers.FakeExtensionRunner()],
    firefoxApp: (0, _helpers.getFakeFirefox)(),
    firefoxClient: function firefoxClient() {
      return Promise.resolve((0, _helpers.getFakeRemoteFirefox)());
    },
    desktopNotifications: _sinon2.default.spy(function () {})
  }, params);
}

function exitKeypressLoop(stdin) {
  try {
    // Ensure that the keypress processing loop (defined in defaultReloadStrategy)
    // is exited.
    stdin.emit('keypress', 'c', { name: 'c', ctrl: true });
  } catch (error) {
    // NOTE: exceptions raised by this helper are logged on the console
    // and ignored (so that we don't hide an exception raised by a try block
    // if this helper is used in a finally block).

    // eslint-disable-next-line no-console
    console.error('ERROR in exitKeypressLoop test helper - ' + 'Unexpected exception while exiting the keypress loop', error);
  }
}

(0, _mocha.describe)('util/extension-runners', function () {

  (0, _mocha.describe)('MultiExtensionRunner', function () {

    (0, _mocha.it)('calls the "run" method on all the created IExtensionRunner', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
      var params, _params$runners, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance;

      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              _params$runners = (0, _slicedToArray3.default)(params.runners, 2), fakeExtensionRunner = _params$runners[0], anotherFakeExtensionRunner = _params$runners[1];


              _sinon2.default.spy(fakeExtensionRunner, 'run');
              _sinon2.default.spy(anotherFakeExtensionRunner, 'run');

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);


              _chai.assert.equal(runnerInstance.getName(), 'Multi Extension Runner');

              _context.next = 8;
              return runnerInstance.run();

            case 8:

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.run);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.run);

            case 10:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, undefined);
    })));

    (0, _mocha.it)('calls the "reloadAllExtensions" on all the created runners', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
      var params, _params$runners2, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance;

      return _regenerator2.default.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              _params$runners2 = (0, _slicedToArray3.default)(params.runners, 2), fakeExtensionRunner = _params$runners2[0], anotherFakeExtensionRunner = _params$runners2[1];


              _sinon2.default.spy(fakeExtensionRunner, 'reloadAllExtensions');
              _sinon2.default.spy(anotherFakeExtensionRunner, 'reloadAllExtensions');

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
              _context2.next = 7;
              return runnerInstance.reloadAllExtensions();

            case 7:

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.reloadAllExtensions);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.reloadAllExtensions);

            case 9:
            case 'end':
              return _context2.stop();
          }
        }
      }, _callee2, undefined);
    })));

    (0, _mocha.it)('calls the "reloadExtensionBySourceDir" on all the created runners', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
      var params, _params$runners3, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance;

      return _regenerator2.default.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              _params$runners3 = (0, _slicedToArray3.default)(params.runners, 2), fakeExtensionRunner = _params$runners3[0], anotherFakeExtensionRunner = _params$runners3[1];


              _sinon2.default.spy(fakeExtensionRunner, 'reloadExtensionBySourceDir');
              _sinon2.default.spy(anotherFakeExtensionRunner, 'reloadExtensionBySourceDir');

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
              _context3.next = 7;
              return runnerInstance.reloadExtensionBySourceDir('/fake/source/dir');

            case 7:

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.reloadExtensionBySourceDir);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.reloadExtensionBySourceDir);

              _sinon2.default.assert.calledWith(fakeExtensionRunner.reloadExtensionBySourceDir, _sinon2.default.match('/fake/source/dir'));
              _sinon2.default.assert.calledWith(anotherFakeExtensionRunner.reloadExtensionBySourceDir, _sinon2.default.match('/fake/source/dir'));

            case 11:
            case 'end':
              return _context3.stop();
          }
        }
      }, _callee3, undefined);
    })));

    (0, _mocha.it)('calls exit on all the created IExtensionRunner', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
      var params, _params$runners4, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance;

      return _regenerator2.default.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              _params$runners4 = (0, _slicedToArray3.default)(params.runners, 2), fakeExtensionRunner = _params$runners4[0], anotherFakeExtensionRunner = _params$runners4[1];


              _sinon2.default.spy(fakeExtensionRunner, 'exit');
              _sinon2.default.spy(anotherFakeExtensionRunner, 'exit');

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
              _context4.next = 7;
              return runnerInstance.exit();

            case 7:

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.exit);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.exit);

            case 9:
            case 'end':
              return _context4.stop();
          }
        }
      }, _callee4, undefined);
    })));

    (0, _mocha.it)('shows a desktop notification on errors while reloading all extensions', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
      var params, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance;
      return _regenerator2.default.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              fakeExtensionRunner = createFakeExtensionRunner({
                overriddenMethods: {
                  getName: function getName() {
                    return 'fakeExtensionRunner';
                  },
                  reloadAllExtensions: function reloadAllExtensions() {
                    return Promise.reject(new Error('reload error 1'));
                  }
                }
              });
              anotherFakeExtensionRunner = createFakeExtensionRunner({
                getName: function getName() {
                  return 'anotherFakeExtensionRunner';
                },
                overriddenMethods: {
                  reloadAllExtensions: function reloadAllExtensions() {
                    return Promise.reject(new Error('reload error 2'));
                  }
                }
              });


              params.runners = [fakeExtensionRunner, anotherFakeExtensionRunner];

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
              _context5.next = 7;
              return runnerInstance.reloadAllExtensions();

            case 7:

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.reloadAllExtensions);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.reloadAllExtensions);
              _sinon2.default.assert.callCount(params.desktopNotifications, 2);
              _sinon2.default.assert.calledWith(params.desktopNotifications, _sinon2.default.match({
                title: _sinon2.default.match(/web-ext run: extension reload error/),
                message: _sinon2.default.match(/on "fakeExtensionRunner" - reload error 1/)
              }));

            case 11:
            case 'end':
              return _context5.stop();
          }
        }
      }, _callee5, undefined);
    })));

    (0, _mocha.it)('shows a desktop notification on errors while reloading an extension', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {
      var params, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance, sourceDir, res, errors;
      return _regenerator2.default.wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              params = prepareExtensionRunnerParams();
              fakeExtensionRunner = createFakeExtensionRunner({
                overriddenMethods: {
                  getName: function getName() {
                    return 'fakeExtensionRunner';
                  },
                  reloadExtensionBySourceDir: function reloadExtensionBySourceDir() {
                    return Promise.reject(new Error('reload error 1'));
                  }
                }
              });
              anotherFakeExtensionRunner = createFakeExtensionRunner({
                overriddenMethods: {
                  reloadExtensionBySourceDir: function reloadExtensionBySourceDir() {
                    return Promise.resolve();
                  },
                  getName: function getName() {
                    return 'anotherFakeExtensionRunner';
                  }
                }
              });


              params.runners = [fakeExtensionRunner, anotherFakeExtensionRunner];

              runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
              sourceDir = '/fake/sourceDir';
              _context6.next = 8;
              return runnerInstance.reloadExtensionBySourceDir(sourceDir);

            case 8:
              res = _context6.sent;
              errors = res.filter(function (r) {
                return r.reloadError;
              });


              _chai.assert.equal(res.length, 2);
              _chai.assert.equal(errors.length, 1);

              _sinon2.default.assert.calledOnce(fakeExtensionRunner.reloadExtensionBySourceDir);
              _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.reloadExtensionBySourceDir);
              _sinon2.default.assert.calledOnce(params.desktopNotifications);

              _sinon2.default.assert.calledWith(params.desktopNotifications, _sinon2.default.match({
                title: _sinon2.default.match(/web-ext run: extension reload error/),
                message: _sinon2.default.match(/"\/fake\/sourceDir" on "fakeExtensionRunner" - reload error 1/)
              }));

            case 16:
            case 'end':
              return _context6.stop();
          }
        }
      }, _callee6, undefined);
    })));

    (0, _mocha.describe)('registerCleanup', function () {

      (0, _mocha.it)('calls its callbacks once all the runner callbacks have been called', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7() {
        var params, _params$runners5, fakeExtensionRunner, anotherFakeExtensionRunner, runnerInstance, waitRegisterCleanup, checkIncompleteCleanup;

        return _regenerator2.default.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                params = prepareExtensionRunnerParams();
                _params$runners5 = (0, _slicedToArray3.default)(params.runners, 2), fakeExtensionRunner = _params$runners5[0], anotherFakeExtensionRunner = _params$runners5[1];


                _sinon2.default.spy(fakeExtensionRunner, 'registerCleanup');
                _sinon2.default.spy(anotherFakeExtensionRunner, 'registerCleanup');

                runnerInstance = new _extensionRunners.MultiExtensionRunner(params);
                waitRegisterCleanup = new Promise(function (resolve) {
                  runnerInstance.registerCleanup(resolve);
                });


                _sinon2.default.assert.calledOnce(fakeExtensionRunner.registerCleanup);
                _sinon2.default.assert.calledOnce(anotherFakeExtensionRunner.registerCleanup);

                // Call the cleanup callback on the first runner.
                fakeExtensionRunner.registerCleanup.firstCall.args[0]();

                _context7.next = 11;
                return Promise.race([waitRegisterCleanup, new Promise(function (resolve) {
                  setTimeout(function () {
                    resolve('waitRegisterCleanup should not be resolved yet');
                  }, 300);
                })]);

              case 11:
                checkIncompleteCleanup = _context7.sent;


                _chai.assert.equal(checkIncompleteCleanup, 'waitRegisterCleanup should not be resolved yet');

                // Call the cleanup callback on the second and last runner.
                anotherFakeExtensionRunner.registerCleanup.firstCall.args[0]();

                _context7.next = 16;
                return waitRegisterCleanup;

              case 16:
              case 'end':
                return _context7.stop();
            }
          }
        }, _callee7, undefined);
      })));
    });
  });

  (0, _mocha.describe)('defaultWatcherCreator', function () {

    function prepare() {
      var config = {
        sourceDir: '/path/to/extension/source/',
        artifactsDir: '/path/to/web-ext-artifacts',
        onSourceChange: _sinon2.default.spy(function () {}),
        ignoreFiles: ['path/to/file', 'path/to/file2'],
        reloadExtension: _sinon2.default.spy(function () {
          return Promise.resolve();
        })
      };
      return {
        config: config,
        createWatcher: function createWatcher() {
          var customConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

          return (0, _extensionRunners.defaultWatcherCreator)((0, _extends3.default)({}, config, customConfig));
        }
      };
    }

    (0, _mocha.it)('configures a source watcher', function () {
      var _prepare = prepare(),
          config = _prepare.config,
          createWatcher = _prepare.createWatcher;

      createWatcher();
      _sinon2.default.assert.called(config.onSourceChange);
      _sinon2.default.assert.calledWith(config.onSourceChange, _sinon2.default.match({
        sourceDir: config.sourceDir,
        artifactsDir: config.artifactsDir,
        onChange: _sinon2.default.match.typeOf('function')
      }));
    });

    (0, _mocha.it)('configures a run command with the expected fileFilter', function () {
      var fileFilter = { wantFile: _sinon2.default.spy() };
      var createFileFilter = _sinon2.default.spy(function () {
        return fileFilter;
      });

      var _prepare2 = prepare(),
          config = _prepare2.config,
          createWatcher = _prepare2.createWatcher;

      createWatcher({ createFileFilter: createFileFilter });
      _sinon2.default.assert.called(createFileFilter);
      _sinon2.default.assert.calledWith(createFileFilter, _sinon2.default.match({
        sourceDir: config.sourceDir,
        artifactsDir: config.artifactsDir,
        ignoreFiles: config.ignoreFiles
      }));
      var shouldWatchFile = config.onSourceChange.firstCall.args[0].shouldWatchFile;

      shouldWatchFile('path/to/file');
      _sinon2.default.assert.called(fileFilter.wantFile);
      _sinon2.default.assert.calledWith(fileFilter.wantFile, _sinon2.default.match('path/to/file'));
    });

    (0, _mocha.it)('returns a watcher', function () {
      var watcher = {};
      var onSourceChange = _sinon2.default.spy(function () {
        return watcher;
      });
      var createdWatcher = prepare().createWatcher({ onSourceChange: onSourceChange });
      _chai.assert.equal(createdWatcher, watcher);
    });

    (0, _mocha.it)('reloads the extension', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee8() {
      var _prepare3, config, createWatcher, onChange;

      return _regenerator2.default.wrap(function _callee8$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              _prepare3 = prepare(), config = _prepare3.config, createWatcher = _prepare3.createWatcher;

              createWatcher();

              _sinon2.default.assert.called(config.onSourceChange);
              _sinon2.default.assert.calledWith(config.onSourceChange, _sinon2.default.match({
                onChange: _sinon2.default.match.typeOf('function')
              }));

              onChange = config.onSourceChange.firstCall.args[0].onChange;
              // Simulate executing the handler when a source file changes.

              _context8.next = 7;
              return onChange();

            case 7:
              _sinon2.default.assert.called(config.reloadExtension);
              _sinon2.default.assert.calledWith(config.reloadExtension, _sinon2.default.match(config.sourceDir));

            case 9:
            case 'end':
              return _context8.stop();
          }
        }
      }, _callee8, undefined);
    })));
  });

  (0, _mocha.describe)('defaultReloadStrategy', function () {

    function prepare() {
      var _this = this;

      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          stubExtensionRunner = _ref10.stubExtensionRunner;

      var watcher = {
        close: _sinon2.default.spy(function () {})
      };
      var extensionRunner = createFakeExtensionRunner({
        overriddenMethods: stubExtensionRunner
      });
      var args = {
        extensionRunner: extensionRunner,
        sourceDir: '/path/to/extension/source',
        artifactsDir: '/path/to/web-ext-artifacts/',
        ignoreFiles: ['first/file', 'second/file']
      };
      var options = {
        createWatcher: _sinon2.default.spy(function () {
          return watcher;
        }),
        stdin: new _stream2.default.Readable()
      };
      return (0, _extends3.default)({}, args, options, {
        watcher: watcher,
        extensionRunner: extensionRunner,
        reloadStrategy: function () {
          var _ref11 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee9() {
            var argOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            var optOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
            return _regenerator2.default.wrap(function _callee9$(_context9) {
              while (1) {
                switch (_context9.prev = _context9.next) {
                  case 0:
                    return _context9.abrupt('return', (0, _extensionRunners.defaultReloadStrategy)((0, _extends3.default)({}, args, argOverride), (0, _extends3.default)({}, options, optOverride)));

                  case 1:
                  case 'end':
                    return _context9.stop();
                }
              }
            }, _callee9, _this);
          }));

          return function reloadStrategy() {
            return _ref11.apply(this, arguments);
          };
        }()
      });
    }

    (0, _mocha.it)('configures a watcher', function () {
      var _prepare4 = prepare(),
          createWatcher = _prepare4.createWatcher,
          reloadStrategy = _prepare4.reloadStrategy,
          sentArgs = (0, _objectWithoutProperties3.default)(_prepare4, ['createWatcher', 'reloadStrategy']);

      reloadStrategy();
      _sinon2.default.assert.called(createWatcher);
      _sinon2.default.assert.calledWith(createWatcher, _sinon2.default.match({
        client: sentArgs.client,
        sourceDir: sentArgs.sourceDir,
        artifactsDir: sentArgs.artifactsDir,
        ignoreFiles: sentArgs.ignoreFiles
      }));
    });

    (0, _mocha.it)('configure the watcher to reload an extension by sourceDir', function () {
      var _prepare5 = prepare({
        stubExtensionRunner: {
          reloadExtensionBySourceDir: function reloadExtensionBySourceDir() {}
        }
      }),
          extensionRunner = _prepare5.extensionRunner,
          createWatcher = _prepare5.createWatcher,
          reloadStrategy = _prepare5.reloadStrategy;

      reloadStrategy();

      _sinon2.default.assert.calledOnce(createWatcher);
      _sinon2.default.assert.calledWith(createWatcher, _sinon2.default.match({
        reloadExtension: _sinon2.default.match.typeOf('function')
      }));

      var sourceDir = '/fake/sourceDir';
      var reloadExtension = createWatcher.firstCall.args[0].reloadExtension;

      reloadExtension(sourceDir);

      var reloadExtensionBySourceDir = extensionRunner.reloadExtensionBySourceDir;

      _sinon2.default.assert.calledOnce(reloadExtensionBySourceDir);
      _sinon2.default.assert.calledWith(reloadExtensionBySourceDir, _sinon2.default.match(sourceDir));
    });

    (0, _mocha.it)('cleans up when the extension runner closes', function () {
      var _prepare6 = prepare({
        stubExtensionRunner: {
          registerCleanup: function registerCleanup() {}
        }
      }),
          extensionRunner = _prepare6.extensionRunner,
          watcher = _prepare6.watcher,
          reloadStrategy = _prepare6.reloadStrategy,
          stdin = _prepare6.stdin;

      _sinon2.default.spy(stdin, 'pause');

      reloadStrategy();

      _sinon2.default.assert.called(extensionRunner.registerCleanup);
      _sinon2.default.assert.calledOnce(extensionRunner.registerCleanup);
      _sinon2.default.assert.calledWith(extensionRunner.registerCleanup, _sinon2.default.match.typeOf('function'));

      var registeredCb = extensionRunner.registerCleanup.firstCall.args[0];
      registeredCb();

      _sinon2.default.assert.called(watcher.close);
      _sinon2.default.assert.called(stdin.pause);
    });

    (0, _mocha.it)('can reload when user presses R in shell console', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee10() {
      var _prepare7, extensionRunner, reloadStrategy, fakeStdin;

      return _regenerator2.default.wrap(function _callee10$(_context10) {
        while (1) {
          switch (_context10.prev = _context10.next) {
            case 0:
              _prepare7 = prepare(), extensionRunner = _prepare7.extensionRunner, reloadStrategy = _prepare7.reloadStrategy;
              fakeStdin = new _tty2.default.ReadStream();

              _sinon2.default.spy(fakeStdin, 'setRawMode');
              _sinon2.default.spy(extensionRunner, 'reloadAllExtensions');

              _context10.prev = 4;
              _context10.next = 7;
              return reloadStrategy({}, { stdin: fakeStdin });

            case 7:
              fakeStdin.emit('keypress', 'r', { name: 'r', ctrl: false });

              // Wait for one tick.
              _context10.next = 10;
              return Promise.resolve();

            case 10:

              _sinon2.default.assert.called(fakeStdin.setRawMode);
              _sinon2.default.assert.called(extensionRunner.reloadAllExtensions);

            case 12:
              _context10.prev = 12;

              exitKeypressLoop(fakeStdin);
              return _context10.finish(12);

            case 15:
            case 'end':
              return _context10.stop();
          }
        }
      }, _callee10, undefined, [[4,, 12, 15]]);
    })));

    (0, _mocha.it)('can still reload when user presses R after a reload error', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee11() {
      var _prepare8, extensionRunner, reloadStrategy, fakeStdin;

      return _regenerator2.default.wrap(function _callee11$(_context11) {
        while (1) {
          switch (_context11.prev = _context11.next) {
            case 0:
              _prepare8 = prepare({
                stubExtensionRunner: {
                  reloadAllExtensions: _sinon2.default.spy(function () {
                    return Promise.reject(Error('fake reload error'));
                  })
                }
              }), extensionRunner = _prepare8.extensionRunner, reloadStrategy = _prepare8.reloadStrategy;
              fakeStdin = new _tty2.default.ReadStream();

              _sinon2.default.spy(fakeStdin, 'setRawMode');

              _context11.prev = 3;
              _context11.next = 6;
              return reloadStrategy({}, { stdin: fakeStdin });

            case 6:
              _context11.next = 8;
              return Promise.resolve();

            case 8:

              fakeStdin.emit('keypress', 'r', { name: 'r', ctrl: false });
              // Wait for one tick to give reloadStrategy the chance to handle
              // the keypress event.
              _context11.next = 11;
              return Promise.resolve();

            case 11:
              _sinon2.default.assert.called(fakeStdin.setRawMode);
              _sinon2.default.assert.calledOnce(extensionRunner.reloadAllExtensions);
              fakeStdin.emit('keypress', 'r', { name: 'r', ctrl: false });
              _context11.next = 16;
              return Promise.resolve();

            case 16:
              _sinon2.default.assert.calledTwice(extensionRunner.reloadAllExtensions);

            case 17:
              _context11.prev = 17;

              exitKeypressLoop(fakeStdin);
              return _context11.finish(17);

            case 20:
            case 'end':
              return _context11.stop();
          }
        }
      }, _callee11, undefined, [[3,, 17, 20]]);
    })));

    (0, _mocha.it)('shuts down firefox on user request (CTRL+C in shell console)', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee13() {
      var _prepare9, extensionRunner, reloadStrategy, fakeStdin;

      return _regenerator2.default.wrap(function _callee13$(_context13) {
        while (1) {
          switch (_context13.prev = _context13.next) {
            case 0:
              _prepare9 = prepare({
                stubExtensionRunner: {
                  exit: function exit() {
                    var _this2 = this;

                    return (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee12() {
                      return _regenerator2.default.wrap(function _callee12$(_context12) {
                        while (1) {
                          switch (_context12.prev = _context12.next) {
                            case 0:
                            case 'end':
                              return _context12.stop();
                          }
                        }
                      }, _callee12, _this2);
                    }))();
                  }
                }
              }), extensionRunner = _prepare9.extensionRunner, reloadStrategy = _prepare9.reloadStrategy;
              fakeStdin = new _tty2.default.ReadStream();
              _context13.prev = 2;
              _context13.next = 5;
              return reloadStrategy({}, { stdin: fakeStdin });

            case 5:
              _context13.next = 7;
              return Promise.resolve();

            case 7:

              fakeStdin.emit('keypress', 'c', { name: 'c', ctrl: true });

              // Wait for one tick.
              _context13.next = 10;
              return Promise.resolve();

            case 10:

              _sinon2.default.assert.called(extensionRunner.exit);

            case 11:
              _context13.prev = 11;

              exitKeypressLoop(fakeStdin);
              return _context13.finish(11);

            case 14:
            case 'end':
              return _context13.stop();
          }
        }
      }, _callee13, undefined, [[2,, 11, 14]]);
    })));

    (0, _mocha.it)('pauses the web-ext process (CTRL+Z in shell console)', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee14() {
      var _prepare10, reloadStrategy, fakeStdin, setRawMode, fakeKill;

      return _regenerator2.default.wrap(function _callee14$(_context14) {
        while (1) {
          switch (_context14.prev = _context14.next) {
            case 0:
              _prepare10 = prepare(), reloadStrategy = _prepare10.reloadStrategy;
              fakeStdin = new _tty2.default.ReadStream();
              setRawMode = _sinon2.default.spy(fakeStdin, 'setRawMode');
              fakeKill = _sinon2.default.spy(function () {});
              _context14.prev = 4;

              reloadStrategy({}, { stdin: fakeStdin, kill: fakeKill });

              // Wait for one tick.
              _context14.next = 8;
              return Promise.resolve();

            case 8:

              fakeStdin.emit('keypress', 'z', { name: 'z', ctrl: true });

              // Wait for one tick.
              _context14.next = 11;
              return Promise.resolve();

            case 11:

              _sinon2.default.assert.called(fakeKill);
              _sinon2.default.assert.calledWith(fakeKill, _sinon2.default.match(process.pid), _sinon2.default.match('SIGTSTP'));
              _sinon2.default.assert.callOrder(setRawMode, setRawMode, fakeKill, setRawMode);
              _sinon2.default.assert.calledThrice(setRawMode);
              _sinon2.default.assert.calledWith(setRawMode, _sinon2.default.match(true));
              _sinon2.default.assert.calledWith(setRawMode, _sinon2.default.match(false));
              _sinon2.default.assert.calledWith(setRawMode, _sinon2.default.match(true));

            case 18:
              _context14.prev = 18;

              exitKeypressLoop(fakeStdin);
              return _context14.finish(18);

            case 21:
            case 'end':
              return _context14.stop();
          }
        }
      }, _callee14, undefined, [[4,, 18, 21]]);
    })));
  });
});

/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _chai = __webpack_require__(3);

var _mocha = __webpack_require__(1);

var _deepcopy = __webpack_require__(66);

var _deepcopy2 = _interopRequireDefault(_deepcopy);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _firefoxDesktop = __webpack_require__(75);

var _helpers = __webpack_require__(10);

var _errors = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Fake result for client.installTemporaryAddon().then(installResult => ...)
var tempInstallResult = {
  addon: { id: 'some-addon@test-suite' }
};
// Fake missing addon id result for client.installTemporaryAddon


var tempInstallResultMissingAddonId = {
  addon: { id: null }
};

function prepareExtensionRunnerParams() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      params = _ref.params,
      fakeFirefoxApp = _ref.fakeFirefoxApp,
      fakeRemoteFirefox = _ref.fakeRemoteFirefox,
      debuggerPort = _ref.debuggerPort;

  var remoteFirefox = (0, _helpers.getFakeRemoteFirefox)((0, _extends3.default)({
    installTemporaryAddon: _sinon2.default.spy(function () {
      return Promise.resolve(tempInstallResult);
    })
  }, fakeRemoteFirefox));
  var firefoxProcess = new _helpers.StubChildProcess();

  // $FLOW_IGNORE: allow overriden params for testing purpose.
  var runnerParams = (0, _extends3.default)({
    extensions: [{
      sourceDir: '/fake/sourceDir',
      manifestData: (0, _deepcopy2.default)(_helpers.basicManifest)
    }],
    keepProfileChanges: false,
    browserConsole: false,
    startUrl: undefined,
    firefoxBinary: 'firefox',
    preInstall: false,
    firefoxApp: (0, _helpers.getFakeFirefox)((0, _extends3.default)({
      run: _sinon2.default.spy(function () {
        return Promise.resolve({
          debuggerPort: debuggerPort,
          firefox: firefoxProcess
        });
      })
    }, fakeFirefoxApp), debuggerPort),
    firefoxClient: function firefoxClient() {
      return Promise.resolve(remoteFirefox);
    }
  }, params || {});

  return {
    remoteFirefox: remoteFirefox,
    firefoxProcess: firefoxProcess,
    params: runnerParams
  };
}

(0, _mocha.describe)('util/extension-runners/firefox-desktop', function () {
  var testBinaryArgs = function () {
    var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(extensionRunnerParams, expectedBinaryArgs) {
      var _prepareExtensionRunn4, params, runnerInstance;

      return _regenerator2.default.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _prepareExtensionRunn4 = prepareExtensionRunnerParams({
                params: (0, _extends3.default)({}, extensionRunnerParams)
              }), params = _prepareExtensionRunn4.params;


              _sinon2.default.spy(params, 'firefoxClient');

              runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
              _context4.next = 5;
              return runnerInstance.run();

            case 5:

              _sinon2.default.assert.calledOnce(params.firefoxApp.run);
              _sinon2.default.assert.calledWith(params.firefoxApp.run, _sinon2.default.match.any, _sinon2.default.match.has('binaryArgs', _sinon2.default.match.array.deepEquals(expectedBinaryArgs)));

            case 7:
            case 'end':
              return _context4.stop();
          }
        }
      }, _callee4, this);
    }));

    return function testBinaryArgs(_x2, _x3) {
      return _ref5.apply(this, arguments);
    };
  }();

  (0, _mocha.it)('installs and runs the extension', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
    var fakeProfile, customPrefs, _prepareExtensionRunn, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            fakeProfile = {};
            customPrefs = {};
            _prepareExtensionRunn = prepareExtensionRunnerParams({
              fakeFirefoxApp: {
                createProfile: _sinon2.default.spy(function () {
                  return fakeProfile;
                })
              },
              params: {
                customPrefs: customPrefs
              }
            }), params = _prepareExtensionRunn.params, remoteFirefox = _prepareExtensionRunn.remoteFirefox;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context.next = 6;
            return runnerInstance.run();

          case 6:

            _chai.assert.ok(runnerInstance.getName(), 'Firefox Desktop');
            _chai.assert.ok(remoteFirefox.installTemporaryAddon.calledOnce);
            _chai.assert.equal(remoteFirefox.installTemporaryAddon.firstCall.args[0], params.extensions[0].sourceDir);

            _sinon2.default.assert.calledOnce(params.firefoxApp.createProfile);
            _sinon2.default.assert.calledWith(params.firefoxApp.createProfile, _sinon2.default.match({ customPrefs: customPrefs }));

            _sinon2.default.assert.calledOnce(params.firefoxApp.run);
            _sinon2.default.assert.calledWith(params.firefoxApp.run, _sinon2.default.match(fakeProfile));

          case 13:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, undefined);
  })));

  (0, _mocha.it)('runs extension in correct port', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
    var _prepareExtensionRunn2, params, runnerInstance;

    return _regenerator2.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _prepareExtensionRunn2 = prepareExtensionRunnerParams({
              debuggerPort: 6008
            }), params = _prepareExtensionRunn2.params;


            _sinon2.default.spy(params, 'firefoxClient');

            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context2.next = 5;
            return runnerInstance.run();

          case 5:

            _sinon2.default.assert.calledOnce(params.firefoxApp.run);
            _sinon2.default.assert.calledOnce(params.firefoxClient);
            _sinon2.default.assert.calledWith(params.firefoxClient, _sinon2.default.match({ port: 6008 }));

          case 8:
          case 'end':
            return _context2.stop();
        }
      }
    }, _callee2, undefined);
  })));

  (0, _mocha.it)('suggests --pre-install when remote install not supported', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
    var _prepareExtensionRunn3, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _prepareExtensionRunn3 = prepareExtensionRunnerParams({
              fakeRemoteFirefox: {
                // Simulate an older Firefox that will throw this error.
                installTemporaryAddon: _sinon2.default.spy(function () {
                  return Promise.reject(new _errors.RemoteTempInstallNotSupported(''));
                })
              }
            }), params = _prepareExtensionRunn3.params, remoteFirefox = _prepareExtensionRunn3.remoteFirefox;


            _sinon2.default.spy(params, 'firefoxClient');

            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            return _context3.abrupt('return', runnerInstance.run().then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
              _chai.assert.equal(remoteFirefox.installTemporaryAddon.called, true);
              _chai.assert.match(error.message, /use --pre-install/);
            })));

          case 4:
          case 'end':
            return _context3.stop();
        }
      }
    }, _callee3, undefined);
  })));

  (0, _mocha.it)('passes -jsconsole when --browser-console is specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
    return _regenerator2.default.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _context5.next = 2;
            return testBinaryArgs({
              browserConsole: true
            }, ['-jsconsole']);

          case 2:
          case 'end':
            return _context5.stop();
        }
      }
    }, _callee5, undefined);
  })));

  (0, _mocha.it)('passes single url parameter to Firefox when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {
    return _regenerator2.default.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            _context6.next = 2;
            return testBinaryArgs({
              startUrl: 'url1'
            }, ['--url', 'url1']);

          case 2:
          case 'end':
            return _context6.stop();
        }
      }
    }, _callee6, undefined);
  })));

  (0, _mocha.it)('passes multiple url parameters to Firefox when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7() {
    return _regenerator2.default.wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            _context7.next = 2;
            return testBinaryArgs({
              startUrl: ['url1', 'url2']
            }, ['--url', 'url1', '--url', 'url2']);

          case 2:
          case 'end':
            return _context7.stop();
        }
      }
    }, _callee7, undefined);
  })));

  (0, _mocha.it)('passes a custom Firefox profile when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee8() {
    var _prepareExtensionRunn5, params, runnerInstance;

    return _regenerator2.default.wrap(function _callee8$(_context8) {
      while (1) {
        switch (_context8.prev = _context8.next) {
          case 0:
            _prepareExtensionRunn5 = prepareExtensionRunnerParams({
              params: {
                profilePath: '/path/to/profile'
              }
            }), params = _prepareExtensionRunn5.params;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context8.next = 4;
            return runnerInstance.run();

          case 4:

            _sinon2.default.assert.notCalled(params.firefoxApp.createProfile);
            _sinon2.default.assert.notCalled(params.firefoxApp.useProfile);
            _sinon2.default.assert.calledOnce(params.firefoxApp.copyProfile);
            _sinon2.default.assert.calledWith(params.firefoxApp.copyProfile, _sinon2.default.match(params.profilePath));

          case 8:
          case 'end':
            return _context8.stop();
        }
      }
    }, _callee8, undefined);
  })));

  (0, _mocha.it)('keeps changes in custom profile when specified', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee9() {
    var _prepareExtensionRunn6, params, runnerInstance;

    return _regenerator2.default.wrap(function _callee9$(_context9) {
      while (1) {
        switch (_context9.prev = _context9.next) {
          case 0:
            _prepareExtensionRunn6 = prepareExtensionRunnerParams({
              params: {
                profilePath: '/path/to/profile',
                keepProfileChanges: true
              }
            }), params = _prepareExtensionRunn6.params;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context9.next = 4;
            return runnerInstance.run();

          case 4:

            _sinon2.default.assert.notCalled(params.firefoxApp.createProfile);
            _sinon2.default.assert.notCalled(params.firefoxApp.copyProfile);
            _sinon2.default.assert.calledOnce(params.firefoxApp.useProfile);
            _sinon2.default.assert.calledWith(params.firefoxApp.useProfile, _sinon2.default.match(params.profilePath));

          case 8:
          case 'end':
            return _context9.stop();
        }
      }
    }, _callee9, undefined);
  })));

  (0, _mocha.it)('can pre-install into the profile before startup', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee10() {
    var fakeProfile, _prepareExtensionRunn7, params, remoteFirefox, runnerInstance, _params$extensions$, manifestData, sourceDir, install;

    return _regenerator2.default.wrap(function _callee10$(_context10) {
      while (1) {
        switch (_context10.prev = _context10.next) {
          case 0:
            fakeProfile = {};
            _prepareExtensionRunn7 = prepareExtensionRunnerParams({
              fakeFirefoxApp: {
                copyProfile: function copyProfile() {
                  return fakeProfile;
                }
              },
              params: {
                preInstall: true
              }
            }), params = _prepareExtensionRunn7.params, remoteFirefox = _prepareExtensionRunn7.remoteFirefox;


            _sinon2.default.spy(params, 'firefoxClient');

            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context10.next = 6;
            return runnerInstance.run();

          case 6:

            // Install the extension without connecting to the RDP server.

            _sinon2.default.assert.notCalled(params.firefoxClient);
            _sinon2.default.assert.notCalled(remoteFirefox.installTemporaryAddon);
            _sinon2.default.assert.called(params.firefoxApp.installExtension);

            _params$extensions$ = params.extensions[0], manifestData = _params$extensions$.manifestData, sourceDir = _params$extensions$.sourceDir;


            _sinon2.default.assert.calledWith(params.firefoxApp.installExtension, _sinon2.default.match({
              asProxy: true,
              manifestData: manifestData,
              profile: fakeProfile,
              extensionPath: sourceDir
            }));
            // $FLOW_IGNORE: ignored 'property not found' on sinon spy.
            install = params.firefoxApp.installExtension.firstCall.args[0];


            _chai.assert.equal(install.asProxy, true);
            _chai.assert.equal(install.manifestData.applications.gecko.id, manifestData.applications && manifestData.applications.gecko.id);
            _chai.assert.deepEqual(install.profile, fakeProfile);
            // This needs to be the source of the extension.
            _chai.assert.equal(install.extensionPath, sourceDir);

          case 16:
          case 'end':
            return _context10.stop();
        }
      }
    }, _callee10, undefined);
  })));

  (0, _mocha.it)('raise an error on addonId missing from installTemporaryAddon result', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee11() {
    var _prepareExtensionRunn8, params, runnerInstance;

    return _regenerator2.default.wrap(function _callee11$(_context11) {
      while (1) {
        switch (_context11.prev = _context11.next) {
          case 0:
            _prepareExtensionRunn8 = prepareExtensionRunnerParams({
              fakeRemoteFirefox: {
                installTemporaryAddon: _sinon2.default.spy(function () {
                  return Promise.resolve(tempInstallResultMissingAddonId);
                })
              }
            }), params = _prepareExtensionRunn8.params;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context11.next = 4;
            return runnerInstance.run().catch(function (error) {
              return error;
            }).then(function (error) {
              _chai.assert.equal(error instanceof _errors.WebExtError, true);
              _chai.assert.equal(error && error.message, 'Unexpected missing addonId in the installAsTemporaryAddon result');
            });

          case 4:
          case 'end':
            return _context11.stop();
        }
      }
    }, _callee11, undefined);
  })));

  (0, _mocha.it)('calls the callback registered on cleanup when firefox closes', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee12() {
    var _prepareExtensionRunn9, params, firefoxProcess, runnerInstance, cleanupCallback, anotherCallback;

    return _regenerator2.default.wrap(function _callee12$(_context12) {
      while (1) {
        switch (_context12.prev = _context12.next) {
          case 0:
            _prepareExtensionRunn9 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn9.params, firefoxProcess = _prepareExtensionRunn9.firefoxProcess;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            cleanupCallback = _sinon2.default.spy(function () {
              throw new Error('cleanup callback error');
            });
            anotherCallback = _sinon2.default.spy();


            runnerInstance.registerCleanup(cleanupCallback);
            runnerInstance.registerCleanup(anotherCallback);

            _context12.next = 8;
            return runnerInstance.run();

          case 8:

            firefoxProcess.emit('close');
            _context12.next = 11;
            return Promise.resolve();

          case 11:
            _sinon2.default.assert.calledOnce(cleanupCallback);
            _sinon2.default.assert.calledOnce(anotherCallback);

          case 13:
          case 'end':
            return _context12.stop();
        }
      }
    }, _callee12, undefined);
  })));

  (0, _mocha.it)('kills Firefox when the exit method is called', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee13() {
    var _prepareExtensionRunn10, params, firefoxProcess, runnerInstance, cleanupCallback, anotherCallback;

    return _regenerator2.default.wrap(function _callee13$(_context13) {
      while (1) {
        switch (_context13.prev = _context13.next) {
          case 0:
            _prepareExtensionRunn10 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn10.params, firefoxProcess = _prepareExtensionRunn10.firefoxProcess;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            cleanupCallback = _sinon2.default.spy(function () {
              throw new Error('cleanup callback error');
            });
            anotherCallback = _sinon2.default.spy();


            runnerInstance.registerCleanup(cleanupCallback);
            runnerInstance.registerCleanup(anotherCallback);

            _context13.next = 8;
            return runnerInstance.run();

          case 8:
            _context13.next = 10;
            return runnerInstance.exit();

          case 10:

            _sinon2.default.assert.calledOnce(firefoxProcess.kill);

          case 11:
          case 'end':
            return _context13.stop();
        }
      }
    }, _callee13, undefined);
  })));

  (0, _mocha.it)('raises an Error when exit method is called on a non-started runner', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee14() {
    var _prepareExtensionRunn11, params, runnerInstance;

    return _regenerator2.default.wrap(function _callee14$(_context14) {
      while (1) {
        switch (_context14.prev = _context14.next) {
          case 0:
            _prepareExtensionRunn11 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn11.params;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context14.next = 4;
            return runnerInstance.exit().catch(function (error) {
              return error;
            }).then(function (error) {
              _chai.assert.equal(error instanceof _errors.WebExtError, true);
              _chai.assert.equal(error && error.message, 'No firefox instance is currently running');
            });

          case 4:
          case 'end':
            return _context14.stop();
        }
      }
    }, _callee14, undefined);
  })));

  (0, _mocha.it)('reloads all reloadable extensions when reloadAllExtensions is called', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee15() {
    var _prepareExtensionRunn12, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee15$(_context15) {
      while (1) {
        switch (_context15.prev = _context15.next) {
          case 0:
            _prepareExtensionRunn12 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn12.params, remoteFirefox = _prepareExtensionRunn12.remoteFirefox;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context15.next = 4;
            return runnerInstance.run();

          case 4:
            _context15.next = 6;
            return runnerInstance.reloadAllExtensions();

          case 6:

            _sinon2.default.assert.calledOnce(remoteFirefox.reloadAddon);

          case 7:
          case 'end':
            return _context15.stop();
        }
      }
    }, _callee15, undefined);
  })));

  (0, _mocha.it)('reloads an extension by sourceDir', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee16() {
    var _prepareExtensionRunn13, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee16$(_context16) {
      while (1) {
        switch (_context16.prev = _context16.next) {
          case 0:
            _prepareExtensionRunn13 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn13.params, remoteFirefox = _prepareExtensionRunn13.remoteFirefox;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context16.next = 4;
            return runnerInstance.run();

          case 4:
            _context16.next = 6;
            return runnerInstance.reloadExtensionBySourceDir(params.extensions[0].sourceDir);

          case 6:

            _sinon2.default.assert.calledOnce(remoteFirefox.reloadAddon);

          case 7:
          case 'end':
            return _context16.stop();
        }
      }
    }, _callee16, undefined);
  })));

  (0, _mocha.it)('returns an error in the results when the extension is not reloadable', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee17() {
    var _prepareExtensionRunn14, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee17$(_context17) {
      while (1) {
        switch (_context17.prev = _context17.next) {
          case 0:
            _prepareExtensionRunn14 = prepareExtensionRunnerParams(), params = _prepareExtensionRunn14.params, remoteFirefox = _prepareExtensionRunn14.remoteFirefox;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context17.next = 4;
            return runnerInstance.run();

          case 4:
            _context17.next = 6;
            return runnerInstance.reloadExtensionBySourceDir('/non-existent/source-dir').then(function (results) {
              var error = results[0].reloadError;
              _chai.assert.equal(error instanceof _errors.WebExtError, true);
              _chai.assert.equal(error && error.message, 'Extension not reloadable: no addonId has been mapped to ' + '"/non-existent/source-dir"');
            });

          case 6:

            _sinon2.default.assert.notCalled(remoteFirefox.reloadAddon);

          case 7:
          case 'end':
            return _context17.stop();
        }
      }
    }, _callee17, undefined);
  })));

  (0, _mocha.it)('rejects an AllExtensionsReloadError if any extension fails to reload', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee18() {
    var _prepareExtensionRunn15, params, remoteFirefox, runnerInstance;

    return _regenerator2.default.wrap(function _callee18$(_context18) {
      while (1) {
        switch (_context18.prev = _context18.next) {
          case 0:
            _prepareExtensionRunn15 = prepareExtensionRunnerParams({
              fakeRemoteFirefox: {
                reloadAddon: _sinon2.default.spy(function () {
                  return Promise.reject(Error('Reload failure'));
                })
              }
            }), params = _prepareExtensionRunn15.params, remoteFirefox = _prepareExtensionRunn15.remoteFirefox;
            runnerInstance = new _firefoxDesktop.FirefoxDesktopExtensionRunner(params);
            _context18.next = 4;
            return runnerInstance.run();

          case 4:
            _context18.next = 6;
            return runnerInstance.reloadAllExtensions().then(function (results) {
              var error = results[0].reloadError;
              _chai.assert.equal(error instanceof _errors.WebExtError, true);
              var sourceDir = params.extensions[0].sourceDir;

              _chai.assert.ok(error && error.message.includes('Error on extension loaded from ' + sourceDir + ': '));
            });

          case 6:

            _sinon2.default.assert.called(remoteFirefox.reloadAddon);

          case 7:
          case 'end':
            return _context18.stop();
        }
      }
    }, _callee18, undefined);
  })));
});

/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _objectWithoutProperties2 = __webpack_require__(51);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _deepcopy = __webpack_require__(66);

var _deepcopy2 = _interopRequireDefault(_deepcopy);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _firefoxProfile = __webpack_require__(96);

var _firefoxProfile2 = _interopRequireDefault(_firefoxProfile);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _mz = __webpack_require__(9);

var _firefox = __webpack_require__(35);

var firefox = _interopRequireWildcard(_firefox);

var _errors = __webpack_require__(2);

var _tempDir = __webpack_require__(15);

var _helpers = __webpack_require__(10);

var _test = __webpack_require__(36);

var _remote = __webpack_require__(24);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var defaultFirefoxEnv = firefox.defaultFirefoxEnv;


function withBaseProfile(callback) {
  return (0, _tempDir.withTempDir)(function (tmpDir) {
    var baseProfile = new _firefoxProfile2.default({
      destinationDirectory: tmpDir.path()
    });
    return callback(baseProfile);
  });
}

(0, _mocha.describe)('firefox', function () {

  (0, _mocha.describe)('run', function () {

    var fakeProfile = {
      path: function path() {
        return '/dev/null/some-profile-path';
      }
    };

    var fakeFirefoxProcess = {
      on: function on(eventName, callback) {
        if (eventName === 'close') {
          // Immediately "emit" a close event to complete the test.
          callback();
        }
      },
      stdout: { on: function on() {} },
      stderr: { on: function on() {} }
    };

    function createFakeFxRunner() {
      var firefoxOverrides = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var fxProcess = (0, _extends3.default)({}, (0, _deepcopy2.default)(fakeFirefoxProcess), firefoxOverrides);
      return _sinon2.default.spy(function () {
        return Promise.resolve({ args: [], process: fxProcess });
      });
    }

    // TODO: This object should accept dynamic properties since those are passed to firefox.run()

    function runFirefox() {
      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref$profile = _ref.profile,
          profile = _ref$profile === undefined ? fakeProfile : _ref$profile,
          args = (0, _objectWithoutProperties3.default)(_ref, ['profile']);

      return firefox.run(profile, (0, _extends3.default)({
        fxRunner: createFakeFxRunner(),
        findRemotePort: function findRemotePort() {
          return Promise.resolve(6000);
        }
      }, args));
    }

    (0, _mocha.it)('executes the Firefox runner with a given profile', function () {
      var runner = createFakeFxRunner();
      var profile = fakeProfile;
      return runFirefox({ fxRunner: runner, profile: profile }).then(function () {
        _chai.assert.equal(runner.called, true);
        _chai.assert.equal(runner.firstCall.args[0].profile, profile.path());
      });
    });

    (0, _mocha.it)('starts the remote debugger on a discovered port', function () {
      var port = 6001;
      var runner = createFakeFxRunner();
      var findRemotePort = _sinon2.default.spy(function () {
        return Promise.resolve(port);
      });
      return runFirefox({ fxRunner: runner, findRemotePort: findRemotePort }).then(function () {
        _chai.assert.equal(runner.called, true);
        _chai.assert.equal(runner.firstCall.args[0].listen, port);
      });
    });

    (0, _mocha.it)('passes binary args to Firefox', function () {
      var fxRunner = createFakeFxRunner();
      var binaryArgs = '--safe-mode';
      return runFirefox({ fxRunner: fxRunner, binaryArgs: binaryArgs }).then(function () {
        _chai.assert.equal(fxRunner.called, true);
        _chai.assert.equal(fxRunner.firstCall.args[0]['binary-args'], binaryArgs);
      });
    });

    (0, _mocha.it)('sets up a Firefox process environment', function () {
      var runner = createFakeFxRunner();
      // Make sure it passes through process environment variables.
      process.env._WEB_EXT_FIREFOX_ENV_TEST = 'thing';
      return runFirefox({ fxRunner: runner }).then(function () {
        var declaredEnv = runner.firstCall.args[0].env;
        for (var key in defaultFirefoxEnv) {
          _chai.assert.equal(declaredEnv[key], defaultFirefoxEnv[key]);
        }
        _chai.assert.equal(declaredEnv._WEB_EXT_FIREFOX_ENV_TEST, 'thing');
      });
    });

    (0, _mocha.it)('fails on a firefox error', function () {
      var someError = new Error('some internal firefox error');
      var runner = createFakeFxRunner({
        on: function on(eventName, callback) {
          if (eventName === 'error') {
            // Immediately "emit" an error event.
            callback(someError);
          }
        }
      });

      return runFirefox({ fxRunner: runner }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.equal(error.message, someError.message);
      });
    });

    (0, _mocha.it)('passes a custom Firefox binary when specified', function () {
      var runner = createFakeFxRunner();
      var firefoxBinary = '/pretend/path/to/firefox-bin';
      return runFirefox({ fxRunner: runner, firefoxBinary: firefoxBinary }).then(function () {
        _chai.assert.equal(runner.called, true);
        _chai.assert.equal(runner.firstCall.args[0].binary, firefoxBinary);
      });
    });

    (0, _mocha.it)('logs stdout and stderr without errors', function () {
      // Store a registry of handlers that we can execute directly.
      var firefoxApp = {};
      var runner = createFakeFxRunner({
        stdout: {
          on: function on(event, handler) {
            firefoxApp.writeStdout = handler;
          }
        },
        stderr: {
          on: function on(event, handler) {
            firefoxApp.writeStderr = handler;
          }
        }
      });

      return runFirefox({ fxRunner: runner }).then(function () {
        // This makes sure that when each handler writes to the
        // logger they don't raise any exceptions.
        firefoxApp.writeStdout('example of stdout');
        firefoxApp.writeStderr('example of stderr');
      });
    });
  });

  (0, _mocha.describe)('copyProfile', function () {

    (0, _mocha.it)('copies a profile', function () {
      return withBaseProfile(function (baseProfile) {
        baseProfile.setPreference('webext.customSetting', true);
        baseProfile.updatePreferences();

        return firefox.copyProfile(baseProfile.path(), { configureThisProfile: function configureThisProfile(profile) {
            return Promise.resolve(profile);
          } }).then(function (profile) {
          return _mz.fs.readFile(profile.userPrefs);
        }).then(function (userPrefs) {
          _chai.assert.include(userPrefs.toString(), 'webext.customSetting');
        });
      });
    });

    (0, _mocha.it)('requires a valid profile directory', function () {
      // This stubs out the code that looks for a named
      // profile because on Travis CI there will not be a Firefox
      // user directory.
      var copyFromUserProfile = _sinon2.default.spy(function (config, cb) {
        return cb(new Error('simulated: could not find profile'));
      });

      return firefox.copyProfile('/dev/null/non_existent_path', {
        copyFromUserProfile: copyFromUserProfile,
        configureThisProfile: function configureThisProfile(profile) {
          return Promise.resolve(profile);
        }
      }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
        _chai.assert.equal(copyFromUserProfile.called, true);
        _chai.assert.match(error.message, /Could not copy Firefox profile from .*non_existent_path/);
      }));
    });

    (0, _mocha.it)('can copy a profile by name', function () {
      var name = 'some-fake-firefox-profile-name';
      // Fake profile object:
      var profileToCopy = {
        defaultPreferences: {
          thing: 'value'
        }
      };
      var copyFromUserProfile = _sinon2.default.spy(function (config, callback) {
        return callback(null, profileToCopy);
      });

      return firefox.copyProfile(name, {
        copyFromUserProfile: copyFromUserProfile,
        configureThisProfile: function configureThisProfile(profile) {
          return Promise.resolve(profile);
        }
      }).then(function (profile) {
        _chai.assert.equal(copyFromUserProfile.called, true);
        _chai.assert.equal(copyFromUserProfile.firstCall.args[0].name, name);
        _chai.assert.equal(profile.defaultPreferences.thing, profileToCopy.defaultPreferences.thing);
      });
    });

    (0, _mocha.it)('configures the copied profile', function () {
      return withBaseProfile(function (baseProfile) {
        var app = 'fennec';
        var configureThisProfile = _sinon2.default.spy(function (profile) {
          return Promise.resolve(profile);
        });

        return firefox.copyProfile(baseProfile.path(), { app: app, configureThisProfile: configureThisProfile }).then(function (profile) {
          _chai.assert.equal(configureThisProfile.called, true);
          _chai.assert.equal(configureThisProfile.firstCall.args[0], profile);
          _chai.assert.equal(configureThisProfile.firstCall.args[1].app, app);
        });
      });
    });
  });

  (0, _mocha.describe)('createProfile', function () {

    (0, _mocha.it)('resolves with a profile object', function () {
      return firefox.createProfile({ configureThisProfile: function configureThisProfile(profile) {
          return Promise.resolve(profile);
        } }).then(function (profile) {
        _chai.assert.instanceOf(profile, _firefoxProfile2.default);
      });
    });

    (0, _mocha.it)('creates a Firefox profile', function () {
      // This is a quick and paranoid sanity check that the FirefoxProfile
      // object is real and has some preferences.
      return firefox.createProfile({ configureThisProfile: function configureThisProfile(profile) {
          return Promise.resolve(profile);
        } }).then(function (profile) {
        profile.updatePreferences();
        return _mz.fs.readFile(_path2.default.join(profile.path(), 'user.js'));
      }).then(function (prefFile) {
        // Check for some default pref set by FirefoxProfile.
        _chai.assert.include(prefFile.toString(), '"startup.homepage_welcome_url", "about:blank"');
      });
    });

    (0, _mocha.it)('configures a profile', function () {
      var configureThisProfile = _sinon2.default.spy(function (profile) {
        return Promise.resolve(profile);
      });
      var app = 'fennec';
      return firefox.createProfile({ app: app, configureThisProfile: configureThisProfile }).then(function (profile) {
        _chai.assert.equal(configureThisProfile.called, true);
        _chai.assert.equal(configureThisProfile.firstCall.args[0], profile);
        _chai.assert.equal(configureThisProfile.firstCall.args[1].app, app);
      });
    });
  });

  (0, _mocha.describe)('useProfile', function () {

    (0, _mocha.it)('resolves to a FirefoxProfile instance', function () {
      return withBaseProfile(function (baseProfile) {
        var configureThisProfile = function configureThisProfile(profile) {
          return Promise.resolve(profile);
        };
        return firefox.useProfile(baseProfile.path(), { configureThisProfile: configureThisProfile }).then(function (profile) {
          _chai.assert.instanceOf(profile, _firefoxProfile2.default);
        });
      });
    });

    (0, _mocha.it)('configures a profile', function () {
      return withBaseProfile(function (baseProfile) {
        var configureThisProfile = _sinon2.default.spy(function (profile) {
          return Promise.resolve(profile);
        });
        var app = 'fennec';
        var profilePath = baseProfile.path();
        return firefox.useProfile(profilePath, { app: app, configureThisProfile: configureThisProfile }).then(function (profile) {
          _chai.assert.equal(configureThisProfile.called, true);
          _chai.assert.equal(configureThisProfile.firstCall.args[0], profile);
          _chai.assert.equal(configureThisProfile.firstCall.args[1].app, app);
        });
      });
    });
  });

  (0, _mocha.describe)('configureProfile', function () {

    function withTempProfile(callback) {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var profile = new _firefoxProfile2.default({
          destinationDirectory: tmpDir.path()
        });
        return callback(profile);
      });
    }

    (0, _mocha.it)('resolves with a profile', function () {
      return withTempProfile(function (profile) {
        var fakePrefGetter = _sinon2.default.stub().returns({});
        return firefox.configureProfile(profile, { getPrefs: fakePrefGetter }).then(function (configuredProfile) {
          _chai.assert.instanceOf(configuredProfile, _firefoxProfile2.default);
        });
      });
    });

    (0, _mocha.it)('sets Firefox preferences', function () {
      return withTempProfile(function (profile) {
        var fakePrefGetter = _sinon2.default.stub().returns({});
        return firefox.configureProfile(profile, { getPrefs: fakePrefGetter }).then(function () {
          _chai.assert.equal(fakePrefGetter.firstCall.args[0], 'firefox');
        });
      });
    });

    (0, _mocha.it)('sets Fennec preferences', function () {
      return withTempProfile(function (profile) {
        var fakePrefGetter = _sinon2.default.stub().returns({});
        return firefox.configureProfile(profile, {
          getPrefs: fakePrefGetter,
          app: 'fennec'
        }).then(function () {
          _chai.assert.equal(fakePrefGetter.firstCall.args[0], 'fennec');
        });
      });
    });

    (0, _mocha.it)('writes new preferences', function () {
      return withTempProfile(function (profile) {
        // This is a quick sanity check that real preferences were
        // written to disk.
        return firefox.configureProfile(profile).then(function (configuredProfile) {
          return _mz.fs.readFile(_path2.default.join(configuredProfile.path(), 'user.js'));
        }).then(function (prefFile) {
          // Check for some pref set by configureProfile().
          _chai.assert.include(prefFile.toString(), '"devtools.debugger.remote-enabled", true');
        });
      });
    });

    (0, _mocha.it)('writes custom preferences', function () {
      return withTempProfile(function (profile) {
        var customPrefs = { 'extensions.checkCompatibility.nightly': true };
        return firefox.configureProfile(profile, { customPrefs: customPrefs }).then(function (configuredProfile) {
          return _mz.fs.readFile(_path2.default.join(configuredProfile.path(), 'user.js'));
        }).then(function (prefFile) {
          // Check for custom pref set by configureProfile().
          _chai.assert.include(prefFile.toString(), '"extensions.checkCompatibility.nightly", true');
          // Check that one of the default preferences is set as well
          _chai.assert.include(prefFile.toString(), '"devtools.debugger.remote-enabled", true');
        });
      });
    });
  });

  (0, _mocha.describe)('installExtension', function () {

    function setUp(testPromise) {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var data = {
          extensionPath: (0, _helpers.fixturePath)('minimal_extension-1.0.zip'),
          profile: undefined,
          profileDir: _path2.default.join(tmpDir.path(), 'profile')
        };
        return _mz.fs.mkdir(data.profileDir).then(function () {
          data.profile = new _firefoxProfile2.default({
            destinationDirectory: data.profileDir
          });
        }).then(function () {
          return testPromise(data);
        });
      });
    }

    function installBasicExt(data) {
      return firefox.installExtension({
        manifestData: _helpers.basicManifest,
        profile: data.profile,
        extensionPath: data.extensionPath
      });
    }

    (0, _mocha.it)('installs an extension file into a profile', function () {
      return setUp(function (data) {
        return installBasicExt(data).then(function () {
          return _mz.fs.readdir(data.profile.extensionsDir);
        }).then(function (files) {
          _chai.assert.deepEqual(files, ['basic-manifest@web-ext-test-suite.xpi']);
        });
      });
    });

    (0, _mocha.it)('requires a manifest ID', function () {
      return setUp(function (data) {
        return firefox.installExtension({
          manifestData: _test.manifestWithoutApps,
          profile: data.profile,
          extensionPath: data.extensionPath
        }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
          _chai.assert.match(error.message, /explicit extension ID is required/);
        }));
      });
    });

    (0, _mocha.it)('can install the extension as a proxy', function () {
      return setUp(function (data) {
        var sourceDir = (0, _helpers.fixturePath)('minimal-web-ext');
        return firefox.installExtension({
          manifestData: _helpers.basicManifest,
          profile: data.profile,
          extensionPath: sourceDir,
          asProxy: true
        }).then(function () {
          var proxyFile = _path2.default.join(data.profile.extensionsDir, 'basic-manifest@web-ext-test-suite');
          return _mz.fs.readFile(proxyFile);
        }).then(function (proxyData) {
          // The proxy file should contain the path to the extension.
          _chai.assert.equal(proxyData.toString(), sourceDir);
        });
      });
    });

    (0, _mocha.it)('requires a directory path for proxy installs', function () {
      return setUp(function (data) {
        var extensionPath = (0, _helpers.fixturePath)('minimal_extension-1.0.zip');
        return firefox.installExtension({
          manifestData: _helpers.basicManifest,
          profile: data.profile,
          extensionPath: extensionPath,
          asProxy: true
        }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
          _chai.assert.match(error.message, /must be the extension source directory/);
          _chai.assert.include(error.message, extensionPath);
        }));
      });
    });

    (0, _mocha.it)('re-uses an existing extension directory', function () {
      return setUp(function (data) {
        return _mz.fs.mkdir(_path2.default.join(data.profile.extensionsDir)).then(function () {
          return installBasicExt(data);
        }).then(function () {
          return _mz.fs.stat(data.profile.extensionsDir);
        });
      });
    });

    (0, _mocha.it)('checks for an empty extensionsDir', function () {
      return setUp(function (data) {
        data.profile.extensionsDir = undefined;
        return installBasicExt(data).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
          _chai.assert.match(error.message, /unexpectedly empty/);
        }));
      });
    });
  });

  (0, _mocha.describe)('defaultRemotePortFinder', function () {

    function findRemotePort() {
      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var args = (0, _objectWithoutProperties3.default)(_ref2, []);

      return firefox.defaultRemotePortFinder((0, _extends3.default)({}, args));
    }

    (0, _mocha.it)('resolves to an open port', function () {
      var connectToFirefox = _sinon2.default.spy(function () {
        return Promise.reject(new _helpers.TCPConnectError());
      });
      return findRemotePort({ connectToFirefox: connectToFirefox }).then(function (port) {
        _chai.assert.isNumber(port);
      });
    });

    (0, _mocha.it)('returns a port on first try', function () {
      var connectToFirefox = _sinon2.default.spy(function () {
        return new Promise(function (resolve, reject) {
          reject(new _helpers.TCPConnectError('first call connection fails - port is free'));
        });
      });
      return findRemotePort({ connectToFirefox: connectToFirefox, retriesLeft: 2 }).then(function (port) {
        _chai.assert.equal(connectToFirefox.callCount, 1);
        _chai.assert.isNumber(port);
      });
    });

    (0, _mocha.it)('cancels search after too many fails', function () {
      var client = (0, _helpers.fake)(_remote.RemoteFirefox.prototype);
      var connectToFirefox = _sinon2.default.spy(function () {
        return new Promise(function (resolve) {
          return resolve(client);
        });
      });
      return findRemotePort({ connectToFirefox: connectToFirefox, retriesLeft: 2 }).catch(function (err) {
        _chai.assert.equal(err, 'WebExtError: Too many retries on port search');
        _chai.assert.equal(connectToFirefox.callCount, 3);
      });
    });

    (0, _mocha.it)('retries port discovery after first failure', function () {
      var client = (0, _helpers.fake)(_remote.RemoteFirefox.prototype);
      var callCount = 0;
      var connectToFirefox = _sinon2.default.spy(function () {
        callCount++;
        return new Promise(function (resolve, reject) {
          if (callCount === 2) {
            reject(new _helpers.TCPConnectError('port is free'));
          } else {
            resolve(client);
          }
        });
      });
      return findRemotePort({ connectToFirefox: connectToFirefox, retriesLeft: 2 }).then(function (port) {
        _chai.assert.isNumber(port);
        _chai.assert.equal(connectToFirefox.callCount, 2);
      });
    });
  });
});

/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _errors = __webpack_require__(2);

var _preferences = __webpack_require__(47);

(0, _mocha.describe)('firefox/preferences', function () {

  (0, _mocha.describe)('getPrefs', function () {

    (0, _mocha.it)('gets Firefox prefs with some defaults', function () {
      var prefs = (0, _preferences.getPrefs)();
      // This is a commonly shared pref.
      _chai.assert.equal(prefs['devtools.debugger.remote-enabled'], true);
      // This is a Firefox only pref.
      _chai.assert.equal(prefs['devtools.chrome.enabled'], true);
    });

    (0, _mocha.it)('gets Fennec prefs with some defaults', function () {
      var prefs = (0, _preferences.getPrefs)('fennec');
      // This is a commonly shared pref.
      _chai.assert.equal(prefs['devtools.debugger.remote-enabled'], true);
      // This is a Fennec only pref.
      _chai.assert.equal(prefs['browser.console.showInPanel'], true);
    });

    (0, _mocha.it)('throws an error for unsupported apps', function () {
      // $FLOW_IGNORE: ignore type errors on testing nonexistent 'thunderbird' prefs
      _chai.assert.throws(function () {
        return (0, _preferences.getPrefs)('thunderbird');
      }, _errors.WebExtError, /Unsupported application: thunderbird/);
    });
  });

  (0, _mocha.describe)('coerceCLICustomPreference', function () {

    (0, _mocha.it)('converts a single --pref cli option from string to object', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)('valid.preference=true');
      _chai.assert.isObject(prefs);
      _chai.assert.equal(prefs['valid.preference'], true);
    });

    (0, _mocha.it)('converts array of --pref cli option values into object', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)(['valid.preference=true', 'valid.preference2=false']);
      _chai.assert.isObject(prefs);
      _chai.assert.equal(prefs['valid.preference'], true);
      _chai.assert.equal(prefs['valid.preference2'], false);
    });

    (0, _mocha.it)('converts boolean values', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)('valid.preference=true');
      _chai.assert.equal(prefs['valid.preference'], true);
    });

    (0, _mocha.it)('converts number values', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)('valid.preference=455');
      _chai.assert.equal(prefs['valid.preference'], 455);
    });

    (0, _mocha.it)('converts float values', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)('valid.preference=4.55');
      _chai.assert.equal(prefs['valid.preference'], '4.55');
    });

    (0, _mocha.it)('supports string values with "=" chars', function () {
      var prefs = (0, _preferences.coerceCLICustomPreference)('valid.preference=value=withequals=chars');
      _chai.assert.equal(prefs['valid.preference'], 'value=withequals=chars');
    });

    (0, _mocha.it)('does not allow certain default preferences to be customized', function () {
      var nonChangeablePrefs = _preferences.nonOverridablePreferences.map(function (prop) {
        return prop += '=true';
      });
      var prefs = (0, _preferences.coerceCLICustomPreference)(nonChangeablePrefs);
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = nonChangeablePrefs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var pref = _step.value;

          _chai.assert.isUndefined(prefs[pref], pref + ' should be undefined');
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    });

    (0, _mocha.it)('throws an error for invalid or incomplete preferences', function () {
      _chai.assert.throws(function () {
        return (0, _preferences.coerceCLICustomPreference)('test.invalid.prop');
      }, _errors.UsageError, 'UsageError: Incomplete custom preference: "test.invalid.prop". ' + 'Syntax expected: "prefname=prefvalue".');

      _chai.assert.throws(function () {
        return (0, _preferences.coerceCLICustomPreference)('*&%=true');
      }, _errors.UsageError, 'UsageError: Invalid custom preference name: *&%');
    });
  });
});

/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _regenerator = __webpack_require__(8);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(7);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _errors = __webpack_require__(2);

var _remote = __webpack_require__(24);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('firefox.remote', function () {

  (0, _mocha.describe)('connect', function () {

    function prepareConnection() {
      var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options = (0, _extends3.default)({
        connectToFirefox: _sinon2.default.spy(function () {
          return Promise.resolve((0, _helpers.fakeFirefoxClient)());
        })
      }, options);
      var connect = (0, _remote.connect)(port, options);
      return { options: options, connect: connect };
    }

    (0, _mocha.it)('resolves with a RemoteFirefox instance', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
      var client;
      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return prepareConnection().connect;

            case 2:
              client = _context.sent;

              _chai.assert.instanceOf(client, _remote.RemoteFirefox);

            case 4:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, undefined);
    })));

    (0, _mocha.it)('connects on the default port', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
      var _prepareConnection, connect, options;

      return _regenerator2.default.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _prepareConnection = prepareConnection(), connect = _prepareConnection.connect, options = _prepareConnection.options;
              _context2.next = 3;
              return connect;

            case 3:
              _chai.assert.equal(options.connectToFirefox.firstCall.args[0], 6005);

            case 4:
            case 'end':
              return _context2.stop();
          }
        }
      }, _callee2, undefined);
    })));

    (0, _mocha.it)('lets you configure the port', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
      var _prepareConnection2, connect, options;

      return _regenerator2.default.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _prepareConnection2 = prepareConnection(7000), connect = _prepareConnection2.connect, options = _prepareConnection2.options;
              _context3.next = 3;
              return connect;

            case 3:
              _chai.assert.equal(options.connectToFirefox.args[0], 7000);

            case 4:
            case 'end':
              return _context3.stop();
          }
        }
      }, _callee3, undefined);
    })));
  });

  (0, _mocha.describe)('RemoteFirefox', function () {

    function fakeAddon() {
      return { id: 'some-id', actor: 'serv1.localhost' };
    }

    function makeInstance() {
      var client = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _helpers.fakeFirefoxClient)();

      return new _remote.RemoteFirefox(client);
    }

    (0, _mocha.it)('listens to client events', function () {
      var client = (0, _helpers.fakeFirefoxClient)();
      var listener = _sinon2.default.spy(function () {});
      client.client.on = listener;
      makeInstance(client); // this will register listeners
      // Make sure no errors are thrown when the client emits
      // events and calls each handler.
      listener.firstCall.args[1](); // disconnect
      listener.secondCall.args[1](); // end
      listener.thirdCall.args[1]({}); // message
    });

    (0, _mocha.describe)('disconnect', function () {
      (0, _mocha.it)('lets you disconnect', function () {
        var client = (0, _helpers.fakeFirefoxClient)();
        var conn = makeInstance(client);
        conn.disconnect();
        _chai.assert.equal(client.disconnect.called, true);
      });
    });

    (0, _mocha.describe)('addonRequest', function () {

      (0, _mocha.it)('makes requests to an add-on actor', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
        var addon, stubResponse, client, conn, response, args;
        return _regenerator2.default.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                addon = fakeAddon();
                stubResponse = { requestTypes: ['reload'] };
                client = (0, _helpers.fakeFirefoxClient)({
                  makeRequestResult: stubResponse
                });
                conn = makeInstance(client);
                _context4.next = 6;
                return conn.addonRequest(addon, 'requestTypes');

              case 6:
                response = _context4.sent;


                _chai.assert.equal(client.client.makeRequest.called, true);
                args = client.client.makeRequest.firstCall.args;

                _chai.assert.equal(args[0].type, 'requestTypes');
                _chai.assert.equal(args[0].to, 'serv1.localhost');

                _chai.assert.deepEqual(response, stubResponse);

              case 12:
              case 'end':
                return _context4.stop();
            }
          }
        }, _callee4, undefined);
      })));

      (0, _mocha.it)('throws when add-on actor requests fail', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
        var addon, client, conn;
        return _regenerator2.default.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                addon = fakeAddon();
                client = (0, _helpers.fakeFirefoxClient)({
                  makeRequestError: {
                    error: 'unknownError',
                    message: 'some actor failure'
                  }
                });
                conn = makeInstance(client);
                _context5.next = 5;
                return conn.addonRequest(addon, 'requestTypes').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
                  _chai.assert.equal(error.message, 'unknownError: some actor failure');
                }));

              case 5:
              case 'end':
                return _context5.stop();
            }
          }
        }, _callee5, undefined);
      })));
    });

    (0, _mocha.describe)('getInstalledAddon', function () {

      (0, _mocha.it)('gets an installed add-on by ID', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {
        var someAddonId, client, conn, addon;
        return _regenerator2.default.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                someAddonId = 'some-id';
                client = (0, _helpers.fakeFirefoxClient)({
                  requestResult: {
                    addons: [{ id: 'another-id' }, { id: someAddonId }, { id: 'bazinga' }]
                  }
                });
                conn = makeInstance(client);
                _context6.next = 5;
                return conn.getInstalledAddon(someAddonId);

              case 5:
                addon = _context6.sent;

                _chai.assert.equal(addon.id, someAddonId);

              case 7:
              case 'end':
                return _context6.stop();
            }
          }
        }, _callee6, undefined);
      })));

      (0, _mocha.it)('throws an error when the add-on is not installed', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7() {
        var client, conn;
        return _regenerator2.default.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  requestResult: {
                    addons: [{ id: 'one-id' }, { id: 'other-id' }]
                  }
                });
                conn = makeInstance(client);
                _context7.next = 4;
                return conn.getInstalledAddon('missing-id').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
                  _chai.assert.match(error.message, /does not have your extension installed/);
                }));

              case 4:
              case 'end':
                return _context7.stop();
            }
          }
        }, _callee7, undefined);
      })));

      (0, _mocha.it)('throws an error when listAddons() fails', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee8() {
        var client, conn;
        return _regenerator2.default.wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  requestError: new Error('some internal error')
                });
                conn = makeInstance(client);
                _context8.next = 4;
                return conn.getInstalledAddon('some-id').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
                  _chai.assert.equal(error.message, 'Remote Firefox: listAddons() error: Error: some internal error');
                }));

              case 4:
              case 'end':
                return _context8.stop();
            }
          }
        }, _callee8, undefined);
      })));
    });

    (0, _mocha.describe)('checkForAddonReloading', function () {

      (0, _mocha.it)('checks for reload requestType in remote debugger', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee9() {
        var addon, stubResponse, conn, returnedAddon, args;
        return _regenerator2.default.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                addon = fakeAddon();
                stubResponse = { requestTypes: ['reload'] };
                conn = makeInstance();


                conn.addonRequest = _sinon2.default.spy(function () {
                  return Promise.resolve(stubResponse);
                });

                _context9.next = 6;
                return conn.checkForAddonReloading(addon);

              case 6:
                returnedAddon = _context9.sent;

                _chai.assert.equal(conn.addonRequest.called, true);
                args = conn.addonRequest.firstCall.args;


                _chai.assert.equal(args[0].id, addon.id);
                _chai.assert.equal(args[1], 'requestTypes');

                _chai.assert.deepEqual(returnedAddon, addon);

              case 12:
              case 'end':
                return _context9.stop();
            }
          }
        }, _callee9, undefined);
      })));

      (0, _mocha.it)('throws an error if reload is not supported', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee10() {
        var addon, stubResponse, conn;
        return _regenerator2.default.wrap(function _callee10$(_context10) {
          while (1) {
            switch (_context10.prev = _context10.next) {
              case 0:
                addon = fakeAddon();
                stubResponse = { requestTypes: ['install'] };
                conn = makeInstance();


                conn.addonRequest = function () {
                  return Promise.resolve(stubResponse);
                };

                _context10.next = 6;
                return conn.checkForAddonReloading(addon).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
                  _chai.assert.match(error.message, /does not support add-on reloading/);
                }));

              case 6:
              case 'end':
                return _context10.stop();
            }
          }
        }, _callee10, undefined);
      })));

      (0, _mocha.it)('only checks for reloading once', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee11() {
        var addon, conn, checkedAddon, finalAddon;
        return _regenerator2.default.wrap(function _callee11$(_context11) {
          while (1) {
            switch (_context11.prev = _context11.next) {
              case 0:
                addon = fakeAddon();
                conn = makeInstance();


                conn.addonRequest = _sinon2.default.spy(function () {
                  return Promise.resolve({ requestTypes: ['reload'] });
                });
                _context11.next = 5;
                return conn.checkForAddonReloading(addon);

              case 5:
                checkedAddon = _context11.sent;
                _context11.next = 8;
                return conn.checkForAddonReloading(checkedAddon);

              case 8:
                finalAddon = _context11.sent;

                // This should remember not to check a second time.
                _chai.assert.equal(conn.addonRequest.callCount, 1);
                _chai.assert.deepEqual(finalAddon, addon);

              case 11:
              case 'end':
                return _context11.stop();
            }
          }
        }, _callee11, undefined);
      })));
    });

    (0, _mocha.describe)('installTemporaryAddon', function () {

      (0, _mocha.it)('throws listTabs errors', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee12() {
        var client, conn;
        return _regenerator2.default.wrap(function _callee12$(_context12) {
          while (1) {
            switch (_context12.prev = _context12.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  // listTabs response:
                  requestError: new Error('some listTabs error')
                });
                conn = makeInstance(client);
                _context12.next = 4;
                return conn.installTemporaryAddon('/path/to/addon').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
                  _chai.assert.match(error.message, /some listTabs error/);
                }));

              case 4:
              case 'end':
                return _context12.stop();
            }
          }
        }, _callee12, undefined);
      })));

      (0, _mocha.it)('fails when there is no add-ons actor', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee13() {
        var client, conn;
        return _regenerator2.default.wrap(function _callee13$(_context13) {
          while (1) {
            switch (_context13.prev = _context13.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  // A listTabs response that does not contain addonsActor.
                  requestResult: {}
                });
                conn = makeInstance(client);
                _context13.next = 4;
                return conn.installTemporaryAddon('/path/to/addon').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.RemoteTempInstallNotSupported, function (error) {
                  _chai.assert.match(error.message, /does not provide an add-ons actor/);
                }));

              case 4:
              case 'end':
                return _context13.stop();
            }
          }
        }, _callee13, undefined);
      })));

      (0, _mocha.it)('lets you install an add-on temporarily', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee14() {
        var client, conn, response;
        return _regenerator2.default.wrap(function _callee14$(_context14) {
          while (1) {
            switch (_context14.prev = _context14.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  // listTabs response:
                  requestResult: {
                    addonsActor: 'addons1.actor.conn'
                  },
                  // installTemporaryAddon response:
                  makeRequestResult: {
                    addon: { id: 'abc123@temporary-addon' }
                  }
                });
                conn = makeInstance(client);
                _context14.next = 4;
                return conn.installTemporaryAddon('/path/to/addon');

              case 4:
                response = _context14.sent;

                _chai.assert.equal(response.addon.id, 'abc123@temporary-addon');

              case 6:
              case 'end':
                return _context14.stop();
            }
          }
        }, _callee14, undefined);
      })));

      (0, _mocha.it)('throws install errors', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee15() {
        var client, conn;
        return _regenerator2.default.wrap(function _callee15$(_context15) {
          while (1) {
            switch (_context15.prev = _context15.next) {
              case 0:
                client = (0, _helpers.fakeFirefoxClient)({
                  // listTabs response:
                  requestResult: {
                    addonsActor: 'addons1.actor.conn'
                  },
                  // installTemporaryAddon response:
                  makeRequestError: {
                    error: 'install error',
                    message: 'error message'
                  }
                });
                conn = makeInstance(client);
                _context15.next = 4;
                return conn.installTemporaryAddon('/path/to/addon').then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.WebExtError, function (error) {
                  _chai.assert.match(error.message, /install error: error message/);
                }));

              case 4:
              case 'end':
                return _context15.stop();
            }
          }
        }, _callee15, undefined);
      })));
    });

    (0, _mocha.describe)('reloadAddon', function () {

      (0, _mocha.it)('asks the actor to reload the add-on', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee16() {
        var addon, conn, requestArgs;
        return _regenerator2.default.wrap(function _callee16$(_context16) {
          while (1) {
            switch (_context16.prev = _context16.next) {
              case 0:
                addon = fakeAddon();
                conn = makeInstance();


                conn.getInstalledAddon = _sinon2.default.spy(function () {
                  return Promise.resolve(addon);
                });
                conn.checkForAddonReloading = function (addonToCheck) {
                  return Promise.resolve(addonToCheck);
                };
                conn.addonRequest = _sinon2.default.spy(function () {
                  return Promise.resolve({});
                });

                _context16.next = 7;
                return conn.reloadAddon('some-id');

              case 7:
                _chai.assert.equal(conn.getInstalledAddon.called, true);
                _chai.assert.equal(conn.getInstalledAddon.firstCall.args[0], 'some-id');

                _chai.assert.equal(conn.addonRequest.called, true);
                requestArgs = conn.addonRequest.firstCall.args;

                _chai.assert.deepEqual(requestArgs[0], addon);
                _chai.assert.equal(requestArgs[1], 'reload');

              case 13:
              case 'end':
                return _context16.stop();
            }
          }
        }, _callee16, undefined);
      })));

      (0, _mocha.it)('makes sure the addon can be reloaded', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee17() {
        var addon, conn;
        return _regenerator2.default.wrap(function _callee17$(_context17) {
          while (1) {
            switch (_context17.prev = _context17.next) {
              case 0:
                addon = fakeAddon();
                conn = makeInstance();


                conn.getInstalledAddon = function () {
                  return Promise.resolve(addon);
                };
                conn.checkForAddonReloading = _sinon2.default.spy(function (addonToCheck) {
                  return Promise.resolve(addonToCheck);
                });

                _context17.next = 6;
                return conn.reloadAddon(addon.id);

              case 6:
                _chai.assert.equal(conn.checkForAddonReloading.called, true);
                _chai.assert.deepEqual(conn.checkForAddonReloading.firstCall.args[0], addon);

              case 8:
              case 'end':
                return _context17.stop();
            }
          }
        }, _callee17, undefined);
      })));
    });
  });

  (0, _mocha.describe)('connectWithMaxRetries', function () {

    function firefoxClient() {
      var opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var deps = arguments[1];

      return (0, _remote.connectWithMaxRetries)((0, _extends3.default)({
        maxRetries: 0, retryInterval: 1, port: 6005 }, opt), deps);
    }

    (0, _mocha.it)('retries after a connection error', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee18() {
      var client, tryCount, connectToFirefox;
      return _regenerator2.default.wrap(function _callee18$(_context18) {
        while (1) {
          switch (_context18.prev = _context18.next) {
            case 0:
              client = new _remote.RemoteFirefox((0, _helpers.fakeFirefoxClient)());
              tryCount = 0;
              connectToFirefox = _sinon2.default.spy(function () {
                return new Promise(function (resolve, reject) {
                  tryCount++;
                  if (tryCount === 1) {
                    reject(new _helpers.TCPConnectError('first connection fails'));
                  } else {
                    // The second connection succeeds.
                    resolve(client);
                  }
                });
              });
              _context18.next = 5;
              return firefoxClient({ maxRetries: 3 }, { connectToFirefox: connectToFirefox });

            case 5:
              _chai.assert.equal(connectToFirefox.callCount, 2);

            case 6:
            case 'end':
              return _context18.stop();
          }
        }
      }, _callee18, undefined);
    })));

    (0, _mocha.it)('only retries connection errors', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee19() {
      var connectToFirefox;
      return _regenerator2.default.wrap(function _callee19$(_context19) {
        while (1) {
          switch (_context19.prev = _context19.next) {
            case 0:
              connectToFirefox = _sinon2.default.spy(function () {
                return Promise.reject(new Error('not a connection error'));
              });
              _context19.next = 3;
              return firefoxClient({ maxRetries: 2 }, { connectToFirefox: connectToFirefox }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
                _chai.assert.equal(connectToFirefox.callCount, 1);
                _chai.assert.equal(error.message, 'not a connection error');
              });

            case 3:
            case 'end':
              return _context19.stop();
          }
        }
      }, _callee19, undefined);
    })));

    (0, _mocha.it)('gives up connecting after too many retries', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee20() {
      var connectToFirefox;
      return _regenerator2.default.wrap(function _callee20$(_context20) {
        while (1) {
          switch (_context20.prev = _context20.next) {
            case 0:
              connectToFirefox = _sinon2.default.spy(function () {
                return Promise.reject(new _helpers.TCPConnectError('failure'));
              });
              _context20.next = 3;
              return firefoxClient({ maxRetries: 2 }, { connectToFirefox: connectToFirefox }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
                _chai.assert.equal(connectToFirefox.callCount, 3);
                _chai.assert.equal(error.message, 'failure');
              });

            case 3:
            case 'end':
              return _context20.stop();
          }
        }
      }, _callee20, undefined);
    })));
  });
});

/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _mz = __webpack_require__(9);

var _errors = __webpack_require__(2);

var _tempDir = __webpack_require__(15);

var _artifacts = __webpack_require__(48);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('prepareArtifactsDir', function () {

  (0, _mocha.it)('creates an artifacts dir if needed', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var artifactsDir = _path2.default.join(tmpDir.path(), 'build');
      return (0, _artifacts.prepareArtifactsDir)(artifactsDir).then(function () {
        // This should not throw an error if created properly.
        return _mz.fs.stat(artifactsDir);
      });
    });
  });

  (0, _mocha.it)('ignores existing artifacts dir', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _artifacts.prepareArtifactsDir)(tmpDir.path()).then(function () {
        // Make sure everything is still cool with this path.
        return _mz.fs.stat(tmpDir.path());
      });
    });
  });

  (0, _mocha.it)('ensures the path is really a directory', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var someFile = _path2.default.join(tmpDir.path(), 'some-file.txt');
      return _mz.fs.writeFile(someFile, 'some content').then(function () {
        return (0, _artifacts.prepareArtifactsDir)(someFile);
      }).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
        _chai.assert.match(error.message, /not a directory/);
      }));
    });
  });

  (0, _mocha.it)('resolves with the artifacts dir', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var artifactsDir = _path2.default.join(tmpDir.path(), 'artifacts');
      return (0, _artifacts.prepareArtifactsDir)(artifactsDir).then(function (resolvedDir) {
        _chai.assert.equal(resolvedDir, artifactsDir);
      });
    });
  });

  (0, _mocha.it)('throws an UsageError when it lacks permissions to stat the directory', function () {
    var _this = this;

    return (0, _tempDir.withTempDir)(function (tmpDir) {
      if (process.platform === 'win32') {
        _this.skip();
        return;
      }
      var tmpPath = _path2.default.join(tmpDir.path(), 'build');
      return _mz.fs.mkdir(tmpPath, '0622').then(function () {
        var artifactsDir = _path2.default.join(tmpPath, 'artifacts');
        return (0, _artifacts.prepareArtifactsDir)(artifactsDir).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
          _chai.assert.match(error.message, /Cannot access.*lacks permissions/);
        }));
      });
    });
  });

  (0, _mocha.it)('throws error when directory exists but lacks writing permissions', function () {
    var _this2 = this;

    return (0, _tempDir.withTempDir)(function (tmpDir) {
      if (process.platform === 'win32') {
        _this2.skip();
        return;
      }
      var artifactsDir = _path2.default.join(tmpDir.path(), 'dir-nowrite');
      return _mz.fs.mkdir(artifactsDir, '0555').then(function () {
        return (0, _artifacts.prepareArtifactsDir)(artifactsDir).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
          _chai.assert.match(error.message, /exists.*lacks permissions/);
        }));
      });
    });
  });

  (0, _mocha.it)('throws error when creating a folder if lacks writing permissions', function () {
    var _this3 = this;

    return (0, _tempDir.withTempDir)(function (tmpDir) {
      if (process.platform === 'win32') {
        _this3.skip();
        return;
      }
      var parentDir = _path2.default.join(tmpDir.path(), 'dir-nowrite');
      var artifactsDir = _path2.default.join(parentDir, 'artifacts');
      return _mz.fs.mkdir(parentDir, '0555').then(function () {
        return (0, _artifacts.prepareArtifactsDir)(artifactsDir).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
          _chai.assert.match(error.message, /Cannot create.*lacks permissions/);
        }));
      });
    });
  });

  (0, _mocha.it)('creates the artifacts dir successfully if the parent dir does not exist', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var tmpPath = _path2.default.join(tmpDir.path(), 'build', 'subdir');
      return (0, _artifacts.prepareArtifactsDir)(tmpPath).then(function (resolvedDir) {
        _chai.assert.equal(resolvedDir, tmpPath);
      });
    });
  });

  (0, _mocha.it)('throws error when creating a folder if there is not enough space', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var fakeAsyncMkdirp = _sinon2.default.spy(function () {
        return Promise.reject(new _helpers.ErrorWithCode('ENOSPC', 'an error'));
      });
      var tmpPath = _path2.default.join(tmpDir.path(), 'build', 'subdir');
      return (0, _artifacts.prepareArtifactsDir)(tmpPath, { asyncMkdirp: fakeAsyncMkdirp }).then((0, _helpers.makeSureItFails)(), function (error) {
        _chai.assert.ok(fakeAsyncMkdirp.called);
        _chai.assert.equal(error.message, 'an error');
      });
    });
  });
});

/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__filename) {

var _mocha = __webpack_require__(1);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _desktopNotifier = __webpack_require__(49);

var _logger = __webpack_require__(0);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('util/desktop-notifier', function () {
  (0, _mocha.describe)('desktopNotifications()', function () {
    var expectedNotification = {
      title: 'web-ext run: title',
      message: 'message'
    };

    (0, _mocha.it)('is called and creates a message with correct parameters', function () {
      var fakeNotifier = {
        notify: _sinon2.default.spy(function (options, callback) {
          return callback();
        })
      };
      return (0, _desktopNotifier.showDesktopNotification)(expectedNotification, {
        notifier: fakeNotifier
      }).then(function () {
        _sinon2.default.assert.calledWithMatch(fakeNotifier.notify, {
          title: 'web-ext run: title',
          message: 'message'
        });
      });
    });

    (0, _mocha.it)('logs error when notifier fails', function () {
      var expectedError = new Error('an error');
      var fakeLog = (0, _logger.createLogger)(__filename);
      _sinon2.default.spy(fakeLog, 'debug');
      var fakeNotifier = {
        notify: function notify(obj, callback) {
          callback(expectedError, 'response');
        }
      };

      return (0, _desktopNotifier.showDesktopNotification)(expectedNotification, {
        notifier: fakeNotifier,
        log: fakeLog
      }).then((0, _helpers.makeSureItFails)()).catch(function () {
        _sinon2.default.assert.calledWith(fakeLog.debug, 'Desktop notifier error: ' + expectedError.message + ', ' + 'response: response');
      });
    });
  });
});
/* WEBPACK VAR INJECTION */}.call(exports, "tests/unit/test-util/test.desktop-notifier.js"))

/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _fileFilter = __webpack_require__(29);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('util/file-filter', function () {

  var newFileFilter = function newFileFilter() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    return new _fileFilter.FileFilter((0, _extends3.default)({
      sourceDir: '.'
    }, params));
  };

  (0, _mocha.describe)('default', function () {
    var defaultFilter = newFileFilter();

    (0, _mocha.it)('ignores long XPI paths', function () {
      _chai.assert.equal(defaultFilter.wantFile('path/to/some.xpi'), false);
    });

    (0, _mocha.it)('ignores short XPI paths', function () {
      _chai.assert.equal(defaultFilter.wantFile('some.xpi'), false);
    });

    (0, _mocha.it)('ignores .git directories', function () {
      _chai.assert.equal(defaultFilter.wantFile('.git'), false);
    });

    (0, _mocha.it)('ignores nested .git directories', function () {
      _chai.assert.equal(defaultFilter.wantFile('path/to/.git'), false);
    });

    (0, _mocha.it)('ignores any hidden file', function () {
      _chai.assert.equal(defaultFilter.wantFile('.whatever'), false);
    });

    (0, _mocha.it)('ignores subdirectories within hidden folders', function () {
      _chai.assert.equal(defaultFilter.wantFile('.git/some/other/stuff'), false);
    });

    (0, _mocha.it)('ignores ZPI paths', function () {
      _chai.assert.equal(defaultFilter.wantFile('path/to/some.zip'), false);
    });

    (0, _mocha.it)('allows other files', function () {
      _chai.assert.equal(defaultFilter.wantFile('manifest.json'), true);
    });

    (0, _mocha.it)('ignores node_modules by default', function () {
      _chai.assert.equal(defaultFilter.wantFile('path/to/node_modules'), false);
    });

    (0, _mocha.it)('ignores module content within node_modules by default', function () {
      _chai.assert.equal(defaultFilter.wantFile('node_modules/something/file.js'), false);
    });
  });

  (0, _mocha.describe)('options', function () {

    (0, _mocha.it)('override the defaults with baseIgnoredPatterns', function () {
      var filter = newFileFilter({
        baseIgnoredPatterns: ['manifest.json']
      });
      _chai.assert.equal(filter.wantFile('some.xpi'), true);
      _chai.assert.equal(filter.wantFile('manifest.json'), false);
    });

    (0, _mocha.it)('add more files to ignore with ignoreFiles', function () {
      var filter = newFileFilter({
        ignoreFiles: ['*.log']
      });
      _chai.assert.equal(filter.wantFile('some.xpi'), false);
      _chai.assert.equal(filter.wantFile('some.log'), false);
    });

    (0, _mocha.it)('ignore artifactsDir and its content', function () {
      var filter = newFileFilter({
        artifactsDir: 'artifacts'
      });
      _chai.assert.equal(filter.wantFile('artifacts'), false);
      _chai.assert.equal(filter.wantFile('artifacts/some.js'), false);
    });

    (0, _mocha.it)('does not ignore an artifactsDir outside of sourceDir', function () {
      var filter = newFileFilter({
        artifactsDir: '.',
        sourceDir: 'dist'
      });
      _chai.assert.equal(filter.wantFile('file'), true);
      _chai.assert.equal(filter.wantFile('dist/file'), true);
    });

    (0, _mocha.it)('resolve relative path', function () {
      var filter = newFileFilter({
        sourceDir: '/src',
        artifactsDir: 'artifacts',
        ignoreFiles: ['ignore-dir/', 'some.js', '**/some.log', 'ignore/dir/content/**/*']
      });
      _chai.assert.equal(filter.wantFile('/src/artifacts'), true);
      _chai.assert.equal(filter.wantFile('/src/ignore-dir'), false);
      _chai.assert.equal(filter.wantFile('/src/ignore-dir/some.css'), true);
      _chai.assert.equal(filter.wantFile('/src/some.js'), false);
      _chai.assert.equal(filter.wantFile('/src/some.log'), false);
      _chai.assert.equal(filter.wantFile('/src/other/some.js'), true);
      _chai.assert.equal(filter.wantFile('/src/other/some.log'), false);
      _chai.assert.equal(filter.wantFile('/src/ignore/dir/content'), true);
      _chai.assert.equal(filter.wantFile('/src/ignore/dir/content/file.js'), false);
      // This file is not ignored because it's not relative to /src:
      _chai.assert.equal(filter.wantFile('/some.js'), true);
    });
  });

  (0, _mocha.describe)('isSubPath', function () {
    (0, _mocha.it)('test if target is a sub directory of src', function () {
      _chai.assert.equal((0, _fileFilter.isSubPath)('dist', '.'), false);
      _chai.assert.equal((0, _fileFilter.isSubPath)('.', 'artifacts'), true);
      _chai.assert.equal((0, _fileFilter.isSubPath)('.', '.'), false);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/src/dist', '/src'), false);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/src', '/src/artifacts'), true);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/src', '/src'), false);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/firstroot', '/secondroot'), false);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/src', '/src/.dir'), true);
      _chai.assert.equal((0, _fileFilter.isSubPath)('/src', '/src/..dir'), true);
    });
  });
});

/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mz = __webpack_require__(9);

var _chai = __webpack_require__(3);

var _mocha = __webpack_require__(1);

var _isDirectory = __webpack_require__(78);

var _isDirectory2 = _interopRequireDefault(_isDirectory);

var _tempDir = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('util.isDirectory', function () {

  (0, _mocha.it)('resolves true for a directory', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _isDirectory2.default)(tmpDir.path()).then(function (dirExists) {
        _chai.assert.equal(dirExists, true);
      });
    });
  });

  (0, _mocha.it)('resolves false for non-existent paths', function () {
    return (0, _isDirectory2.default)('/dev/null/not-a-real-path-at-all').then(function (dirExists) {
      _chai.assert.equal(dirExists, false);
    });
  });

  (0, _mocha.it)('resolves false for non-directory paths', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var filePath = _path2.default.join(tmpDir.path(), 'some.txt');
      return _mz.fs.writeFile(filePath, 'some text').then(function () {
        return (0, _isDirectory2.default)(filePath);
      }).then(function (dirExists) {
        _chai.assert.equal(dirExists, false);
      });
    });
  });

  (0, _mocha.it)('resolves false for incomplete directory paths', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return (0, _isDirectory2.default)(_path2.default.join(tmpDir.path(), 'missing-leaf')).then(function (dirExists) {
        _chai.assert.equal(dirExists, false);
      });
    });
  });
});

/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _classCallCheck2 = __webpack_require__(14);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(16);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(37);

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _tty = __webpack_require__(69);

var _bunyan = __webpack_require__(93);

var _bunyan2 = _interopRequireDefault(_bunyan);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _logger = __webpack_require__(0);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('logger', function () {

  (0, _mocha.describe)('createLogger', function () {

    (0, _mocha.it)('makes file names less redundant', function () {
      var createBunyanLog = _sinon2.default.spy(function () {});
      (0, _logger.createLogger)('src/some-file.js', { createBunyanLog: createBunyanLog });
      _sinon2.default.assert.calledWithMatch(createBunyanLog, { name: 'some-file.js' });
    });
  });

  (0, _mocha.describe)('ConsoleStream', function () {

    function packet(overrides) {
      return (0, _extends3.default)({
        name: 'some name',
        msg: 'some messge',
        level: _bunyan2.default.INFO
      }, overrides);
    }

    // NOTE: create a fake process that makes flow happy.
    function fakeProcess() {
      var FakeWritableStream = function (_WriteStream) {
        (0, _inherits3.default)(FakeWritableStream, _WriteStream);

        function FakeWritableStream() {
          (0, _classCallCheck3.default)(this, FakeWritableStream);
          return (0, _possibleConstructorReturn3.default)(this, (FakeWritableStream.__proto__ || Object.getPrototypeOf(FakeWritableStream)).apply(this, arguments));
        }

        (0, _createClass3.default)(FakeWritableStream, [{
          key: 'write',
          value: function write() {
            return true;
          }
        }]);
        return FakeWritableStream;
      }(_tty.WriteStream);

      var fakeWritableStream = new FakeWritableStream();
      _sinon2.default.spy(fakeWritableStream, 'write');

      return {
        stdout: fakeWritableStream
      };
    }

    (0, _mocha.it)('lets you turn on verbose logging', function () {
      var log = new _logger.ConsoleStream({ verbose: false });
      log.makeVerbose();
      _chai.assert.equal(log.verbose, true);
    });

    (0, _mocha.it)('logs names in verbose mode', function () {
      var log = new _logger.ConsoleStream({ verbose: true });
      _chai.assert.equal(log.format(packet({
        name: 'foo',
        msg: 'some message',
        level: _bunyan2.default.DEBUG
      })), '[foo][debug] some message\n');
    });

    (0, _mocha.it)('does not log names in non-verbose mode', function () {
      var log = new _logger.ConsoleStream({ verbose: false });
      _chai.assert.equal(log.format(packet({ name: 'foo', msg: 'some message' })), 'some message\n');
    });

    (0, _mocha.it)('does not log debug packets unless verbose', function () {
      var log = new _logger.ConsoleStream({ verbose: false });
      var localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.DEBUG }), { localProcess: localProcess });
      _sinon2.default.assert.notCalled(localProcess.stdout.write);
    });

    (0, _mocha.it)('does not log trace packets unless verbose', function () {
      var log = new _logger.ConsoleStream({ verbose: false });
      var localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.TRACE }), { localProcess: localProcess });
      _sinon2.default.assert.notCalled(localProcess.stdout.write);
    });

    (0, _mocha.it)('logs debug packets when verbose', function () {
      var log = new _logger.ConsoleStream({ verbose: true });
      var localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.DEBUG }), { localProcess: localProcess });
      _sinon2.default.assert.called(localProcess.stdout.write);
    });

    (0, _mocha.it)('logs trace packets when verbose', function () {
      var log = new _logger.ConsoleStream({ verbose: true });
      var localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.TRACE }), { localProcess: localProcess });
      _sinon2.default.assert.called(localProcess.stdout.write);
    });

    (0, _mocha.it)('logs info packets when verbose or not', function () {
      var log = new _logger.ConsoleStream({ verbose: false });
      var localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.INFO }), { localProcess: localProcess });
      log.makeVerbose();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ level: _bunyan2.default.INFO }), { localProcess: localProcess });
      _sinon2.default.assert.callCount(localProcess.stdout.write, 2);
    });

    (0, _mocha.it)('lets you capture logging', function () {
      var log = new _logger.ConsoleStream();
      var localProcess = fakeProcess();

      log.startCapturing();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet({ msg: 'message' }), { localProcess: localProcess });
      _sinon2.default.assert.notCalled(localProcess.stdout.write);
      // $FLOW_IGNORE: fake process for testing reasons.
      log.flushCapturedLogs({ localProcess: localProcess });
      _sinon2.default.assert.calledWith(localProcess.stdout.write, 'message\n');
    });

    (0, _mocha.it)('only flushes captured messages once', function () {
      var log = new _logger.ConsoleStream();
      var localProcess = fakeProcess();

      log.startCapturing();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet(), { localProcess: localProcess });
      // $FLOW_IGNORE: fake process for testing reasons.
      log.flushCapturedLogs({ localProcess: localProcess });

      // Make sure there is nothing more to flush.
      localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.flushCapturedLogs({ localProcess: localProcess });
      _sinon2.default.assert.notCalled(localProcess.stdout.write);
    });

    (0, _mocha.it)('lets you start and stop capturing', function () {
      var log = new _logger.ConsoleStream();
      var localProcess = fakeProcess();

      log.startCapturing();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet(), { localProcess: localProcess });
      _sinon2.default.assert.notCalled(localProcess.stdout.write);

      log.stopCapturing();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.write(packet(), { localProcess: localProcess });
      _sinon2.default.assert.callCount(localProcess.stdout.write, 1);

      // Make sure that when we start capturing again,
      // the queue gets reset.
      log.startCapturing();
      log.write(packet());
      localProcess = fakeProcess();
      // $FLOW_IGNORE: fake process for testing reasons.
      log.flushCapturedLogs({ localProcess: localProcess });
      _sinon2.default.assert.callCount(localProcess.stdout.write, 1);
    });
  });
});

/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _mocha = __webpack_require__(1);

var _mz = __webpack_require__(9);

var _chai = __webpack_require__(3);

var _tempDir = __webpack_require__(15);

var _helpers = __webpack_require__(10);

(0, _mocha.describe)('util.withTempDir', function () {

  (0, _mocha.it)('creates a temp directory', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      // Make sure the directory exists.
      return _mz.fs.stat(tmpDir.path());
    });
  });

  (0, _mocha.it)('destroys the directory on completion', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      return Promise.resolve(tmpDir.path());
    }).then(function (tmpPath) {
      return _mz.fs.stat(tmpPath);
    }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /ENOENT.* stat/);
    });
  });

  (0, _mocha.it)('destroys the directory on error', function () {
    var tmpPath;
    var tmpPathExisted = false;
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      tmpPath = tmpDir.path();
      return _mz.fs.stat(tmpPath).then(function () {
        tmpPathExisted = true;
        throw new Error('simulated error');
      });
    }).then((0, _helpers.makeSureItFails)()).catch(function () {
      _chai.assert.equal(tmpPathExisted, true);
      return _mz.fs.stat(tmpPath);
    }).catch(function (error) {
      _chai.assert.match(error.message, /ENOENT.* stat/);
    });
  });
});


(0, _mocha.describe)('util.TempDir', function () {

  (0, _mocha.it)('requires you to create the directory before accessing path()', function () {
    var tmp = new _tempDir.TempDir();
    _chai.assert.throws(function () {
      return tmp.path();
    }, /cannot access path.* before.* create/);
  });
});

/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _mocha = __webpack_require__(1);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _updates = __webpack_require__(79);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('util/updates', function () {
  (0, _mocha.describe)('checkForUpdates()', function () {
    (0, _mocha.it)('calls the notifier with the correct parameters', function () {
      var updateNotifierStub = _sinon2.default.spy(function () {
        return {
          notify: _sinon2.default.spy()
        };
      });

      (0, _updates.checkForUpdates)({
        version: '1.0.0',
        updateNotifier: updateNotifierStub
      });

      _sinon2.default.assert.calledWithMatch(updateNotifierStub, {
        updateCheckInterval: 1000 * 60 * 60 * 24 * 3,
        pkg: { name: 'web-ext', version: '1.0.0' }
      });
    });
  });
});

/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _chai = __webpack_require__(3);

var _mocha = __webpack_require__(1);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _mz = __webpack_require__(9);

var _program = __webpack_require__(77);

var _config = __webpack_require__(101);

var _tempDir = __webpack_require__(15);

var _errors = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function makeArgv(_ref) {
  var _ref$userCmd = _ref.userCmd,
      userCmd = _ref$userCmd === undefined ? ['fakecommand'] : _ref$userCmd,
      _ref$command = _ref.command,
      command = _ref$command === undefined ? 'fakecommand' : _ref$command,
      _ref$commandDesc = _ref.commandDesc,
      commandDesc = _ref$commandDesc === undefined ? 'this is a fake command' : _ref$commandDesc,
      _ref$commandExecutor = _ref.commandExecutor,
      commandExecutor = _ref$commandExecutor === undefined ? _sinon2.default.stub() : _ref$commandExecutor,
      commandOpt = _ref.commandOpt,
      globalOpt = _ref.globalOpt;

  var program = new _program.Program(userCmd);

  if (globalOpt) {
    program.setGlobalOptions(globalOpt);
  }
  if (commandOpt) {
    program.command(command, commandDesc, commandExecutor, commandOpt);
  }
  return {
    argv: program.yargs.exitProcess(false).argv,
    defaultValues: program.defaultValues,
    commandExecuted: command
  };
}


var applyConf = function applyConf(params) {
  return (0, _config.applyConfigToArgv)((0, _extends3.default)({
    configFileName: 'some/path/to/config.js'
  }, params));
};

(0, _mocha.describe)('config', function () {
  (0, _mocha.describe)('applyConfigToArgv', function () {

    (0, _mocha.it)('preserves a string value on the command line over configured', function () {
      var cmdLineSrcDir = '/user/specified/source/dir/';

      var _makeArgv = makeArgv({
        userCmd: ['fakecommand', '--source-dir', cmdLineSrcDir],
        globalOpt: {
          'source-dir': {
            requiresArg: true,
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv.argv,
          defaultValues = _makeArgv.defaultValues;

      var configObject = {
        sourceDir: '/configured/source/dir'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);
    });

    (0, _mocha.it)('preserves configured value over default', function () {
      var _makeArgv2 = makeArgv({
        globalOpt: {
          'source-dir': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'default/value/option/definition'
          }
        }
      }),
          argv = _makeArgv2.argv,
          defaultValues = _makeArgv2.defaultValues;

      var configObject = {
        sourceDir: '/configured/source/dir'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, configObject.sourceDir);
    });

    (0, _mocha.it)('preserves a string value on the command line over all others', function () {
      var cmdLineSrcDir = '/user/specified/source/dir/';

      var _makeArgv3 = makeArgv({
        userCmd: ['fakecommand', '--sourceDir', cmdLineSrcDir],
        globalOpt: {
          'source-dir': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'default/value/option/definition'
          }
        }
      }),
          argv = _makeArgv3.argv,
          defaultValues = _makeArgv3.defaultValues;

      var configObject = {
        sourceDir: '/configured/source/dir'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);
    });

    (0, _mocha.it)('preserves default value of option if not in config', function () {
      var _makeArgv4 = makeArgv({
        globalOpt: {
          'source-dir': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'default/value/option/definition'
          },
          'artifacts-dir': {
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv4.argv,
          defaultValues = _makeArgv4.defaultValues;

      var configObject = {
        artifactsDir: '/configured/artifacts/dir'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, 'default/value/option/definition');
    });

    (0, _mocha.it)('preserves value on the command line if not in config', function () {
      var cmdLineSrcDir = '/user/specified/source/dir/';

      var _makeArgv5 = makeArgv({
        userCmd: ['fakecommand', '--sourceDir', cmdLineSrcDir],
        globalOpt: {
          'source-dir': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'default/value/option/definition'
          },
          'artifacts-dir': {
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv5.argv,
          defaultValues = _makeArgv5.defaultValues;

      var configObject = {
        artifactsDir: '/configured/artifacts/dir'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);
    });

    (0, _mocha.it)('uses a configured boolean value over an implicit default', function () {
      var _makeArgv6 = makeArgv({
        globalOpt: {
          'overwrite-files': {
            type: 'boolean'
            // No default is set here explicitly but yargs will set it to
            // false implicitly.
          }
        }
      }),
          argv = _makeArgv6.argv,
          defaultValues = _makeArgv6.defaultValues;

      var configObject = {
        overwriteFiles: true
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.overwriteFiles, true);
    });

    (0, _mocha.it)('uses a configured boolean value over an explicit default', function () {
      var _makeArgv7 = makeArgv({
        globalOpt: {
          'overwrite-files': {
            type: 'boolean',
            default: false
          }
        }
      }),
          argv = _makeArgv7.argv,
          defaultValues = _makeArgv7.defaultValues;

      var configObject = {
        overwriteFiles: true
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.overwriteFiles, true);
    });

    (0, _mocha.it)('uses a CLI boolean value over a configured one', function () {
      var _makeArgv8 = makeArgv({
        userCmd: ['fakecommand', '--overwrite-files'],
        globalOpt: {
          'overwrite-files': {
            type: 'boolean'
          }
        }
      }),
          argv = _makeArgv8.argv,
          defaultValues = _makeArgv8.defaultValues;

      var configObject = {
        overwriteFiles: false
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.overwriteFiles, true);
    });

    (0, _mocha.it)('uses CLI option over undefined configured option and default', function () {
      var cmdLineSrcDir = '/user/specified/source/dir/';

      var _makeArgv9 = makeArgv({
        userCmd: ['fakecommand', '--source-dir', cmdLineSrcDir],
        globalOpt: {
          'source-dir': {
            type: 'string'
          },
          'verbose': {
            type: 'boolean'
          }
        }
      }),
          argv = _makeArgv9.argv,
          defaultValues = _makeArgv9.defaultValues;

      var configObject = {
        verbose: true
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);
    });

    (0, _mocha.it)('uses a configured number value over a falsey default', function () {
      var _makeArgv10 = makeArgv({
        userCmd: ['fakecommand'],
        globalOpt: {
          'number-of-retries': {
            type: 'number',
            default: 0
          }
        }
      }),
          argv = _makeArgv10.argv,
          defaultValues = _makeArgv10.defaultValues;

      var configObject = {
        numberOfRetries: 1
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.numberOfRetries, 1);
    });

    (0, _mocha.it)('uses a falsey CLI number value over a configured one', function () {
      var _makeArgv11 = makeArgv({
        userCmd: ['fakecommand', '--number-of-retries=0'],
        globalOpt: {
          'number-of-retries': {
            type: 'number',
            default: 1
          }
        }
      }),
          argv = _makeArgv11.argv,
          defaultValues = _makeArgv11.defaultValues;

      var configObject = {
        numberOfRetries: 1
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.numberOfRetries, 0);
    });

    (0, _mocha.it)('uses configured value even when option defaults to undefined', function () {
      var _makeArgv12 = makeArgv({
        globalOpt: {
          'source-dir': {
            type: 'string',
            default: undefined
          }
        }
      }),
          argv = _makeArgv12.argv,
          defaultValues = _makeArgv12.defaultValues;

      var configObject = {
        sourceDir: '/configured/directory'
      };
      var newArgv = applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      _chai.assert.strictEqual(newArgv.sourceDir, '/configured/directory');
    });

    (0, _mocha.it)('throws an error when an option is not camel cased', function () {
      var _makeArgv13 = makeArgv({
        globalOpt: {
          'source-dir': {
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv13.argv,
          defaultValues = _makeArgv13.defaultValues;

      var configObject = {
        'source-dir': 'fake/value/'
      };
      _chai.assert.throws(function () {
        applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues });
      }, _errors.UsageError, 'UsageError: The config option "source-dir" must be ' + 'specified in camel case: "sourceDir"');
    });

    (0, _mocha.it)('throws an error when an option is invalid', function () {
      var _makeArgv14 = makeArgv({
        globalOpt: {
          'source-dir': {
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv14.argv,
          defaultValues = _makeArgv14.defaultValues;

      var configFileName = 'fake/path/to/config';
      var configObject = {
        artifactsDir: 'fake/artifacts/dir'
      };
      _chai.assert.throws(function () {
        applyConf({ argv: argv, configObject: configObject, defaultValues: defaultValues, configFileName: configFileName });
      }, _errors.UsageError, 'UsageError: The config file at fake/path/to/config ' + 'specified an unknown option: "artifactsDir"');
    });
  });

  (0, _mocha.describe)('sub commands', function () {
    (0, _mocha.it)('preserves configured value over default', function () {
      var _makeArgv15 = makeArgv({
        userCmd: ['sign'],
        command: 'sign',
        commandOpt: {
          'api-key': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value'
          }
        }
      }),
          argv = _makeArgv15.argv,
          defaultValues = _makeArgv15.defaultValues,
          commandExecuted = _makeArgv15.commandExecuted;

      var configObject = {
        sign: {
          apiKey: 'custom-configured-key'
        }
      };
      var newArgv = applyConf({
        argv: argv,
        configObject: configObject,
        defaultValues: defaultValues,
        commandExecuted: commandExecuted
      });
      _chai.assert.strictEqual(newArgv.apiKey, configObject.sign.apiKey);
    });

    (0, _mocha.it)('preserves CLI value over default and configured', function () {
      var cmdApiKey = 'api-key-cmd';

      var _makeArgv16 = makeArgv({
        userCmd: ['sign', '--api-key', cmdApiKey],
        command: 'sign',
        commandOpt: {
          'api-key': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value'
          }
        }
      }),
          argv = _makeArgv16.argv,
          defaultValues = _makeArgv16.defaultValues,
          commandExecuted = _makeArgv16.commandExecuted;

      var configObject = {
        sign: {
          apiKey: 'custom-configured-key'
        }
      };
      var newArgv = applyConf({
        argv: argv,
        configObject: configObject,
        defaultValues: defaultValues,
        commandExecuted: commandExecuted
      });
      _chai.assert.strictEqual(newArgv.apiKey, cmdApiKey);
    });

    (0, _mocha.it)('preserves CLI value over configured', function () {
      var cmdApiKey = 'api-key-cmd';

      var _makeArgv17 = makeArgv({
        userCmd: ['sign', '--api-key', cmdApiKey],
        command: 'sign',
        commandOpt: {
          'api-key': {
            requiresArg: true,
            type: 'string',
            demand: false
          }
        }
      }),
          argv = _makeArgv17.argv,
          defaultValues = _makeArgv17.defaultValues,
          commandExecuted = _makeArgv17.commandExecuted;

      var configObject = {
        sign: {
          apiKey: 'custom-configured-key'
        }
      };
      var newArgv = applyConf({
        argv: argv,
        configObject: configObject,
        defaultValues: defaultValues,
        commandExecuted: commandExecuted
      });
      _chai.assert.strictEqual(newArgv.apiKey, cmdApiKey);
    });

    (0, _mocha.it)('preserves default value if not in config', function () {
      var _makeArgv18 = makeArgv({
        userCmd: ['sign'],
        command: 'sign',
        commandOpt: {
          'api-key': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value-of-apiKey'
          },
          'api-url': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value-of-apiUrl'
          }
        }
      }),
          argv = _makeArgv18.argv,
          defaultValues = _makeArgv18.defaultValues,
          commandExecuted = _makeArgv18.commandExecuted;

      var configObject = {
        sign: {
          apiKey: 'custom-configured-key'
        }
      };
      var newArgv = applyConf({
        argv: argv,
        configObject: configObject,
        defaultValues: defaultValues,
        commandExecuted: commandExecuted
      });
      _chai.assert.strictEqual(newArgv.apiUrl, 'pretend-default-value-of-apiUrl');
    });

    (0, _mocha.it)('preserves CLI value if not in config', function () {
      var cmdApiKey = 'api-key-cmd';

      var _makeArgv19 = makeArgv({
        userCmd: ['sign', '--api-key', cmdApiKey],
        command: 'sign',
        commandOpt: {
          'api-key': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value-of-apiKey'
          },
          'api-url': {
            requiresArg: true,
            type: 'string',
            demand: false,
            default: 'pretend-default-value-of-apiUrl'
          }
        }
      }),
          argv = _makeArgv19.argv,
          defaultValues = _makeArgv19.defaultValues,
          commandExecuted = _makeArgv19.commandExecuted;

      var configObject = {
        sign: {
          apiUrl: 'custom-configured-url'
        }
      };
      var newArgv = applyConf({
        argv: argv,
        configObject: configObject,
        defaultValues: defaultValues,
        commandExecuted: commandExecuted
      });
      _chai.assert.strictEqual(newArgv.apiKey, cmdApiKey);
    });
  });

  (0, _mocha.describe)('loadJSConfigFile', function () {
    (0, _mocha.it)('throws an error if the config file does not exist', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        _chai.assert.throws(function () {
          (0, _config.loadJSConfigFile)(_path2.default.join(tmpDir.path(), 'non-existant-config.js'));
        }, _errors.UsageError, /Cannot read config file/);
      });
    });

    (0, _mocha.it)('throws an error if the config file has syntax errors', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var configFilePath = _path2.default.join(tmpDir.path(), 'config.js');
        _mz.fs.writeFileSync(configFilePath,
        // missing = in two places
        'module.exports {\n                sourceDir \'path/to/fake/source/dir\',\n              };');
        _chai.assert.throws(function () {
          (0, _config.loadJSConfigFile)(configFilePath);
        }, _errors.UsageError);
      });
    });

    (0, _mocha.it)('parses the configuration file correctly', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var configFilePath = _path2.default.join(tmpDir.path(), 'config.js');
        _mz.fs.writeFileSync(configFilePath, 'module.exports = {\n              sourceDir: \'path/to/fake/source/dir\',\n            };');
        var configObj = (0, _config.loadJSConfigFile)(configFilePath);
        _chai.assert.equal(configObj.sourceDir, 'path/to/fake/source/dir');
      });
    });

    (0, _mocha.it)('does not throw an error for an empty config', function () {
      return (0, _tempDir.withTempDir)(function (tmpDir) {
        var configFilePath = _path2.default.join(tmpDir.path(), 'config.js');
        _mz.fs.writeFileSync(configFilePath, '{};');
        (0, _config.loadJSConfigFile)(configFilePath);
      });
    });
  });
});

/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _classCallCheck2 = __webpack_require__(14);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = __webpack_require__(38);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(37);

var _inherits3 = _interopRequireDefault(_inherits2);

var _mocha = __webpack_require__(1);

var _chai = __webpack_require__(3);

var _errors = __webpack_require__(2);

var _helpers = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('errors', function () {

  (0, _mocha.describe)('onlyInstancesOf', function () {

    (0, _mocha.it)('lets you catch a certain error', function () {
      return Promise.reject(new SyntaxError('simulated error')).catch((0, _errors.onlyInstancesOf)(SyntaxError, function (error) {
        _chai.assert.instanceOf(error, SyntaxError);
      }));
    });

    (0, _mocha.it)('throws instances of other errors', function () {
      return Promise.reject(new SyntaxError('simulated error')).catch((0, _errors.onlyInstancesOf)(TypeError, function () {
        throw new Error('Unexpectedly caught the wrong error');
      })).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.match(error.message, /simulated error/);
      });
    });
  });

  (0, _mocha.describe)('onlyErrorsWithCode', function () {
    var ErrorWithErrno = function (_Error) {
      (0, _inherits3.default)(ErrorWithErrno, _Error);

      function ErrorWithErrno() {
        (0, _classCallCheck3.default)(this, ErrorWithErrno);

        var _this = (0, _possibleConstructorReturn3.default)(this, (ErrorWithErrno.__proto__ || Object.getPrototypeOf(ErrorWithErrno)).call(this, 'pretend this is a system error'));

        _this.errno = 53;
        return _this;
      }

      return ErrorWithErrno;
    }(Error);

    (0, _mocha.it)('catches errors having a code', function () {
      return Promise.reject(new _helpers.ErrorWithCode()).catch((0, _errors.onlyErrorsWithCode)('SOME_CODE', function (error) {
        _chai.assert.equal(error.code, 'SOME_CODE');
      }));
    });

    (0, _mocha.it)('catches errors having a error no', function () {
      return Promise.reject(new ErrorWithErrno()).catch((0, _errors.onlyErrorsWithCode)(53, function (error) {
        _chai.assert.equal(error.errno, 53);
      }));
    });

    (0, _mocha.it)('throws errors that do not match the code', function () {
      return Promise.reject(new SyntaxError('simulated error')).catch((0, _errors.onlyErrorsWithCode)('SOME_CODE', function () {
        throw new Error('Unexpectedly caught the wrong error');
      })).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.match(error.message, /simulated error/);
      });
    });

    (0, _mocha.it)('catches errors having one of many codes', function () {
      return Promise.reject(new _helpers.ErrorWithCode()).catch((0, _errors.onlyErrorsWithCode)(['OTHER_CODE', 'SOME_CODE'], function (error) {
        _chai.assert.equal(error.code, 'SOME_CODE');
      }));
    });

    (0, _mocha.it)('catches errors having one of many errno', function () {
      return Promise.reject(new ErrorWithErrno()).catch((0, _errors.onlyErrorsWithCode)([34, 53], function (error) {
        _chai.assert.equal(error.errno, 53);
      }));
    });

    (0, _mocha.it)('throws errors that are not in an array of codes', function () {
      return Promise.reject(new _helpers.ErrorWithCode()).catch((0, _errors.onlyErrorsWithCode)(['OTHER_CODE', 'ANOTHER_CODE'], function () {
        throw new Error('Unexpectedly caught the wrong error');
      })).then((0, _helpers.makeSureItFails)()).catch(function (error) {
        _chai.assert.equal(error.code, 'SOME_CODE');
      });
    });
  });

  (0, _mocha.describe)('isErrorWithCode', function () {

    (0, _mocha.it)('returns true on errors that do match the code', function () {
      _chai.assert.equal((0, _errors.isErrorWithCode)('SOME_CODE', new _helpers.ErrorWithCode()), true);
      _chai.assert.equal((0, _errors.isErrorWithCode)(['SOME_CODE', 'OTHER_CODE'], new _helpers.ErrorWithCode()), true);
    });

    (0, _mocha.it)('returns false on errors that do not match the code', function () {
      _chai.assert.equal((0, _errors.isErrorWithCode)('OTHER_CODE', new _helpers.ErrorWithCode()), false);
      _chai.assert.equal((0, _errors.isErrorWithCode)(['OTHER_CODE', 'ANOTHER_CODE'], new _helpers.ErrorWithCode()), false);
      _chai.assert.equal((0, _errors.isErrorWithCode)('ANY_CODE', new Error()), false);
    });
  });
});

/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__dirname) {

var _objectWithoutProperties2 = __webpack_require__(51);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mocha = __webpack_require__(1);

var _gitRevSync = __webpack_require__(97);

var _gitRevSync2 = _interopRequireDefault(_gitRevSync);

var _mz = __webpack_require__(9);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = __webpack_require__(3);

var _program = __webpack_require__(77);

var _cmd = __webpack_require__(71);

var _cmd2 = _interopRequireDefault(_cmd);

var _errors = __webpack_require__(2);

var _helpers = __webpack_require__(10);

var _logger = __webpack_require__(0);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('program.Program', function () {

  function execProgram(program) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var fakeProcess = (0, _helpers.createFakeProcess)();
    var absolutePackageDir = _path2.default.join(__dirname, '..', '..');
    return program.execute(absolutePackageDir, (0, _extends3.default)({
      getVersion: function getVersion() {
        return (0, _sinon.spy)();
      },
      checkForUpdates: (0, _sinon.spy)(),
      systemProcess: fakeProcess,
      shouldExitProgram: false
    }, options));
  }

  (0, _mocha.it)('executes a command callback', function () {
    var thing = (0, _sinon.spy)(function () {
      return Promise.resolve();
    });
    var program = new _program.Program(['thing']).command('thing', 'does a thing', thing);
    return execProgram(program).then(function () {
      _chai.assert.equal(thing.called, true);
    });
  });

  (0, _mocha.it)('reports unknown commands', function () {
    var program = new _program.Program(['thing']);
    return execProgram(program).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
      _chai.assert.match(error.message, /Unknown command: thing/);
    }));
  });

  (0, _mocha.it)('reports missing command', function () {
    var program = new _program.Program([]);
    return execProgram(program).then((0, _helpers.makeSureItFails)()).catch((0, _errors.onlyInstancesOf)(_errors.UsageError, function (error) {
      _chai.assert.match(error.message, /No sub-command was specified/);
    }));
  });

  (0, _mocha.it)('exits 1 on a thrown error', function () {
    var fakeProcess = (0, _helpers.createFakeProcess)();
    var program = new _program.Program(['cmd']).command('cmd', 'some command', function () {
      throw new Error('this is an error from a command handler');
    });
    return execProgram(program, {
      systemProcess: fakeProcess,
      shouldExitProgram: true
    }).then(function () {
      _chai.assert.equal(fakeProcess.exit.called, true);
      _chai.assert.equal(fakeProcess.exit.firstCall.args[0], 1);
    });
  });

  (0, _mocha.it)('throws an error if sub-command is given an argument', function () {
    var program = new _program.Program(['thing', 'nope']).command('thing', '', function () {});
    return execProgram(program).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /This command does not take any arguments/);
    });
  });

  (0, _mocha.it)('handles errors that have codes', function () {

    var program = new _program.Program(['cmd']).command('cmd', 'some command', function () {
      var error = new _helpers.ErrorWithCode();
      throw error;
    });
    // This is just a smoke test to make sure the error code doesn't
    // introduce an unexpected exception.
    return execProgram(program).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /pretend this is a system error/);
    });
  });

  (0, _mocha.it)('lets commands define options', function () {
    var handler = (0, _sinon.spy)(function () {
      return Promise.resolve();
    });
    var program = new _program.Program(['cmd']).command('cmd', 'some command', handler, {
      'some-option': {
        default: 'default value'
      }
    });
    return execProgram(program).then(function () {
      _chai.assert.equal(handler.called, true);
      // This ensures that the default configuration for the option has
      // been applied.
      _chai.assert.equal(handler.firstCall.args[0].someOption, 'default value');
    });
  });

  (0, _mocha.it)('preserves global option configuration', function () {
    var handler = (0, _sinon.spy)(function () {
      return Promise.resolve();
    });
    var program = new _program.Program(['cmd']).setGlobalOptions({
      'global-option': {
        type: 'string',
        default: 'the default'
      }
    }).command('cmd', 'some command', handler, {
      'some-option': {
        default: 'default value'
      }
    });
    return execProgram(program).then(function () {
      _chai.assert.equal(handler.called, true);
      // By checking the global default, it ensures that default configuration
      // will be applied to sub commands.
      _chai.assert.equal(handler.firstCall.args[0].globalOption, 'the default');
      _chai.assert.equal(handler.firstCall.args[0].someOption, 'default value');
    });
  });

  (0, _mocha.it)('reads option values from env vars in sub commands', function () {
    // Set an env var that mimics web-ext cmd --some-opt=value
    process.env.WEB_EXT_SOME_OPT = 'value';
    var valueReceived = void 0;
    var program = new _program.Program(['cmd']).command('cmd', 'some command', function (_ref) {
      var someOpt = _ref.someOpt;

      valueReceived = someOpt;
    }, {
      'some-opt': {
        describe: 'example option'
      }
    });
    return execProgram(program, { shouldExitProgram: true }).then(function () {
      _chai.assert.equal(valueReceived, 'value');
      delete process.env.WEB_EXT_SOME_OPT;
    });
  });

  (0, _mocha.it)('configures the logger when verbose', function () {
    var logStream = (0, _helpers.fake)(new _logger.ConsoleStream());

    var program = new _program.Program(['--verbose', 'thing']);
    program.setGlobalOptions({
      verbose: {
        type: 'boolean'
      }
    });
    program.command('thing', 'does a thing', function () {});

    return execProgram(program, {
      getVersion: (0, _sinon.spy)(),
      logStream: logStream
    }).then(function () {
      _chai.assert.equal(logStream.makeVerbose.called, true);
    });
  });

  (0, _mocha.it)('checks the version when verbose', function () {
    var version = (0, _sinon.spy)();
    var program = new _program.Program(['--verbose', 'thing']);
    program.setGlobalOptions({
      verbose: {
        type: 'boolean'
      }
    });
    program.command('thing', 'does a thing', function () {});
    return execProgram(program, { getVersion: version }).then(function () {
      _chai.assert.equal(version.firstCall.args[0], _path2.default.join(__dirname, '..', '..'));
    });
  });

  (0, _mocha.it)('does not configure the logger unless verbose', function () {
    var logStream = (0, _helpers.fake)(new _logger.ConsoleStream());
    var program = new _program.Program(['thing']).command('thing', '', function () {});
    program.setGlobalOptions({
      verbose: {
        type: 'boolean'
      }
    });
    return execProgram(program, { logStream: logStream }).then(function () {
      _chai.assert.equal(logStream.makeVerbose.called, false);
    });
  });

  (0, _mocha.it)('throws an error about unknown commands', function () {
    return execProgram(new _program.Program(['nope'])).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /Unknown command: nope/);
    });
  });

  (0, _mocha.it)('throws an error about unknown options', function () {
    return execProgram(new _program.Program(['--nope'])).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      // Make sure that the option name is in the error message.
      // Be careful not to rely on any text from yargs since it's localized.
      _chai.assert.match(error.message, /nope/);
    });
  });

  (0, _mocha.it)('throws an error about unknown sub-command options', function () {
    var program = new _program.Program(['thing', '--nope']).command('thing', '', function () {});
    return execProgram(program).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      // Make sure that the option name is in the error message.
      // Be careful not to rely on any text from yargs since it's localized.
      _chai.assert.match(error.message, /nope/);
    });
  });

  (0, _mocha.it)('checks for updates automatically', function () {
    var handler = (0, _sinon.spy)();
    var getVersion = function getVersion() {
      return 'some-package-version';
    };
    var checkForUpdates = _sinon2.default.stub();
    var program = new _program.Program(['run']).command('run', 'some command', handler);
    return execProgram(program, {
      checkForUpdates: checkForUpdates,
      getVersion: getVersion,
      globalEnv: 'production'
    }).then(function () {
      _chai.assert.equal(checkForUpdates.firstCall.args[0].version, 'some-package-version');
    });
  });

  (0, _mocha.it)('does not check for updates during development', function () {
    var handler = (0, _sinon.spy)();
    var getVersion = function getVersion() {
      return 'some-package-version';
    };
    var checkForUpdates = _sinon2.default.stub();
    var program = new _program.Program(['run']).command('run', 'some command', handler);
    return execProgram(program, {
      checkForUpdates: checkForUpdates,
      getVersion: getVersion,
      globalEnv: 'development'
    }).then(function () {
      _chai.assert.equal(checkForUpdates.called, false);
    });
  });
});


(0, _mocha.describe)('program.main', function () {

  function execProgram(argv) {
    var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var _ref2$projectRoot = _ref2.projectRoot,
        projectRoot = _ref2$projectRoot === undefined ? '' : _ref2$projectRoot,
        mainOptions = (0, _objectWithoutProperties3.default)(_ref2, ['projectRoot']);

    var runOptions = {
      getVersion: function getVersion() {
        return 'not-a-real-version';
      },
      checkForUpdates: (0, _sinon.spy)(),
      shouldExitProgram: false,
      systemProcess: (0, _helpers.createFakeProcess)()
    };
    return (0, _program.main)(projectRoot, (0, _extends3.default)({ argv: argv, runOptions: runOptions }, mainOptions));
  }

  (0, _mocha.it)('executes a command handler', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      build: function build() {
        return Promise.resolve();
      }
    });
    return execProgram(['build'], { commands: fakeCommands }).then(function () {
      // This is a smoke test mainly to make sure main() configures
      // options with handlers. It does not extensively test the
      // configuration of all handlers.
      _chai.assert.equal(fakeCommands.build.called, true);
    });
  });

  (0, _mocha.it)('throws an error if no command is given', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {});
    return execProgram([], { commands: fakeCommands }).then((0, _helpers.makeSureItFails)()).catch(function (error) {
      _chai.assert.match(error.message, /You must specify a command/);
    });
  });

  (0, _mocha.it)('can get the program version', function () {
    var fakeVersionGetter = _sinon2.default.spy(function () {
      return '<version>';
    });
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      build: function build() {
        return Promise.resolve();
      }
    });
    var projectRoot = '/pretend/project/root';
    // For some reason, executing --version like this
    // requires a command. In the real CLI, it does not.
    return execProgram(['--version', 'build'], {
      projectRoot: projectRoot,
      commands: fakeCommands,
      getVersion: fakeVersionGetter
    }).then(function () {
      _chai.assert.equal(fakeVersionGetter.called, true);
      _chai.assert.equal(fakeVersionGetter.firstCall.args[0], projectRoot);
    });
  });

  (0, _mocha.it)('turns sourceDir into an absolute path', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      build: function build() {
        return Promise.resolve();
      }
    });
    return execProgram(['build', '--source-dir', '..'], { commands: fakeCommands }).then(function () {
      _chai.assert.equal(fakeCommands.build.called, true);
      _chai.assert.equal(fakeCommands.build.firstCall.args[0].sourceDir, _path2.default.resolve(_path2.default.join(process.cwd(), '..')));
    });
  });

  (0, _mocha.it)('normalizes the artifactsDir path', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      build: function build() {
        return Promise.resolve();
      }
    });
    return execProgram(
    // Add a double slash to the path, which will be fixed by normalization.
    ['build', '--artifacts-dir', process.cwd() + _path2.default.sep + _path2.default.sep], { commands: fakeCommands }).then(function () {
      _chai.assert.equal(fakeCommands.build.called, true);
      _chai.assert.equal(fakeCommands.build.firstCall.args[0].artifactsDir, process.cwd() + _path2.default.sep);
    });
  });

  (0, _mocha.it)('passes the path of a firefox binary when specified', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      run: function run() {
        return Promise.resolve();
      }
    });
    return execProgram(['run', '--firefox-binary', '/path/to/firefox-binary'], { commands: fakeCommands }).then(function () {
      _chai.assert.equal(fakeCommands.run.called, true);
      _chai.assert.equal(fakeCommands.run.firstCall.args[0].firefox, '/path/to/firefox-binary');
    });
  });

  (0, _mocha.it)('passes the url of a firefox binary when specified', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      run: function run() {
        return Promise.resolve();
      }
    });
    return execProgram(['run', '--start-url', 'www.example.com'], { commands: fakeCommands }).then(function () {
      _chai.assert.equal(fakeCommands.run.called, true);
      _chai.assert.equal(fakeCommands.run.firstCall.args[0].startUrl, 'www.example.com');
    });
  });

  (0, _mocha.it)('opens browser console when --browser-console is specified', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      run: function run() {
        return Promise.resolve();
      }
    });
    return execProgram(['run', '--browser-console'], { commands: fakeCommands }).then(function () {
      _chai.assert.equal(fakeCommands.run.called, true);
      _chai.assert.equal(fakeCommands.run.firstCall.args[0].browserConsole, true);
    });
  });

  (0, _mocha.it)('converts custom preferences into an object', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      run: function run() {
        return Promise.resolve();
      }
    });
    return execProgram(['run', '--pref', 'prop=true', '--pref', 'prop2=value2'], { commands: fakeCommands }).then(function () {
      var customPrefs = fakeCommands.run.firstCall.args[0].customPrefs;

      _chai.assert.isObject(customPrefs);
      _chai.assert.equal(customPrefs.prop, true);
      _chai.assert.equal(customPrefs.prop2, 'value2');
    });
  });

  (0, _mocha.it)('passes shouldExitProgram option to commands', function () {
    var fakeCommands = (0, _helpers.fake)(_cmd2.default, {
      lint: function lint() {
        return Promise.resolve();
      }
    });
    return execProgram(['lint'], { commands: fakeCommands }).then(function () {
      var options = fakeCommands.lint.firstCall.args[1];
      _chai.assert.strictEqual(options.shouldExitProgram, false);
    });
  });
});

(0, _mocha.describe)('program.defaultVersionGetter', function () {
  var projectRoot = _path2.default.join(__dirname, '..', '..');

  (0, _mocha.it)('returns the package version in production', function () {
    var pkgFile = _path2.default.join(projectRoot, 'package.json');
    return _mz.fs.readFile(pkgFile).then(function (pkgData) {
      var testBuildEnv = { globalEnv: 'production' };
      _chai.assert.equal((0, _program.defaultVersionGetter)(projectRoot, testBuildEnv), JSON.parse(pkgData).version);
    });
  });

  (0, _mocha.it)('returns git commit information in development', function () {
    if (process.env.APPVEYOR) {
      // Test skipped because of $APPVEYOR' issues with git-rev-sync (mozilla/web-ext#774)
      this.skip();
      return;
    }
    var commit = _gitRevSync2.default.branch() + '-' + _gitRevSync2.default.long();
    var testBuildEnv = { globalEnv: 'development' };
    _chai.assert.equal((0, _program.defaultVersionGetter)(projectRoot, testBuildEnv), commit);
  });
});
/* WEBPACK VAR INJECTION */}.call(exports, "tests/unit"))

/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _mocha = __webpack_require__(1);

var _logger = __webpack_require__(0);

(0, _mocha.beforeEach)(function () {
  _logger.consoleStream.makeVerbose();
  _logger.consoleStream.startCapturing();
});

(0, _mocha.afterEach)(function () {
  if (this.currentTest.state !== 'passed') {
    _logger.consoleStream.flushCapturedLogs();
  }
  _logger.consoleStream.stopCapturing();
});

/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _extends2 = __webpack_require__(5);

var _extends3 = _interopRequireDefault(_extends2);

var _path = __webpack_require__(4);

var _path2 = _interopRequireDefault(_path);

var _mocha = __webpack_require__(1);

var _mz = __webpack_require__(9);

var _sinon = __webpack_require__(6);

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = __webpack_require__(3);

var _watcher = __webpack_require__(50);

var _watcher2 = _interopRequireDefault(_watcher);

var _tempDir = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _mocha.describe)('watcher', function () {

  (0, _mocha.it)('watches for file changes', function () {
    return (0, _tempDir.withTempDir)(function (tmpDir) {
      var artifactsDir = _path2.default.join(tmpDir.path(), 'web-ext-artifacts');
      var someFile = _path2.default.join(tmpDir.path(), 'foo.txt');

      var resolveChange;
      var whenFilesChanged = new Promise(function (resolve) {
        resolveChange = resolve;
      });
      var onChange = _sinon2.default.spy(function () {
        resolveChange();
      });

      return _mz.fs.writeFile(someFile, '<contents>').then(function () {
        return (0, _watcher2.default)({
          sourceDir: tmpDir.path(),
          artifactsDir: artifactsDir,
          onChange: onChange,
          shouldWatchFile: function shouldWatchFile() {
            return true;
          }
        });
      }).then(function (watcher) {
        return _mz.fs.utimes(someFile, Date.now() / 1000, Date.now() / 1000).then(function () {
          return watcher;
        });
      }).then(function (watcher) {
        return whenFilesChanged.then(function () {
          watcher.close();
          _chai.assert.equal(onChange.callCount, 1);
          // This delay seems to avoid stat errors from the watcher
          // which can happen when the temp dir is deleted (presumably
          // before watcher.close() has removed all listeners).
          return new Promise(function (resolve) {
            return setTimeout(resolve, 2);
          });
        });
      });
    });
  });

  (0, _mocha.describe)('proxyFileChanges', function () {

    var defaults = {
      artifactsDir: '/some/artifacts/dir/',
      onChange: function onChange() {},
      shouldWatchFile: function shouldWatchFile() {
        return true;
      }
    };

    (0, _mocha.it)('proxies file changes', function () {
      var onChange = _sinon2.default.spy(function () {});
      (0, _watcher.proxyFileChanges)((0, _extends3.default)({}, defaults, {
        filePath: '/some/file.js',
        onChange: onChange
      }));
      _chai.assert.equal(onChange.called, true);
    });

    (0, _mocha.it)('ignores changes to artifacts', function () {
      var onChange = _sinon2.default.spy(function () {});
      (0, _watcher.proxyFileChanges)((0, _extends3.default)({}, defaults, {
        filePath: '/some/artifacts/dir/build.xpi',
        artifactsDir: '/some/artifacts/dir/',
        onChange: onChange
      }));
      _chai.assert.equal(onChange.called, false);
    });

    (0, _mocha.it)('provides a callback for ignoring files', function () {

      function shouldWatchFile(filePath) {
        if (filePath === '/somewhere/freaky') {
          return false;
        } else {
          return true;
        }
      }

      var conf = (0, _extends3.default)({}, defaults, {
        shouldWatchFile: shouldWatchFile,
        onChange: _sinon2.default.spy(function () {})
      });

      (0, _watcher.proxyFileChanges)((0, _extends3.default)({}, conf, { filePath: '/somewhere/freaky' }));
      _chai.assert.equal(conf.onChange.called, false);

      (0, _watcher.proxyFileChanges)((0, _extends3.default)({}, conf, { filePath: '/any/file/' }));
      _chai.assert.equal(conf.onChange.called, true);
    });
  });
});

/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(135), __esModule: true };

/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(136), __esModule: true };

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(137), __esModule: true };

/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(138), __esModule: true };

/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(139), __esModule: true };

/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(140), __esModule: true };

/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(141), __esModule: true };

/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(142), __esModule: true };

/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(143), __esModule: true };

/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45);
__webpack_require__(44);
module.exports = __webpack_require__(169);

/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45);
__webpack_require__(44);
module.exports = __webpack_require__(170);

/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(172);
module.exports = __webpack_require__(12).Object.assign;

/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(173);
var $Object = __webpack_require__(12).Object;
module.exports = function create(P, D){
  return $Object.create(P, D);
};

/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(174);
var $Object = __webpack_require__(12).Object;
module.exports = function defineProperty(it, key, desc){
  return $Object.defineProperty(it, key, desc);
};

/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(175);
module.exports = __webpack_require__(12).Object.setPrototypeOf;

/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(92);
__webpack_require__(44);
__webpack_require__(45);
__webpack_require__(176);
module.exports = __webpack_require__(12).Promise;

/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(177);
__webpack_require__(92);
__webpack_require__(178);
__webpack_require__(179);
module.exports = __webpack_require__(12).Symbol;

/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(44);
__webpack_require__(45);
module.exports = __webpack_require__(65).f('iterator');

/***/ }),
/* 144 */
/***/ (function(module, exports) {

module.exports = function(){ /* empty */ };

/***/ }),
/* 145 */
/***/ (function(module, exports) {

module.exports = function(it, Constructor, name, forbiddenField){
  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){
    throw TypeError(name + ': incorrect invocation!');
  } return it;
};

/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

// false -> Array#indexOf
// true  -> Array#includes
var toIObject = __webpack_require__(23)
  , toLength  = __webpack_require__(89)
  , toIndex   = __webpack_require__(168);
module.exports = function(IS_INCLUDES){
  return function($this, el, fromIndex){
    var O      = toIObject($this)
      , length = toLength(O.length)
      , index  = toIndex(fromIndex, length)
      , value;
    // Array#includes uses SameValueZero equality algorithm
    if(IS_INCLUDES && el != el)while(length > index){
      value = O[index++];
      if(value != value)return true;
    // Array#toIndex ignores holes, Array#includes - not
    } else for(;length > index; index++)if(IS_INCLUDES || index in O){
      if(O[index] === el)return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

// all enumerable object keys, includes symbols
var getKeys = __webpack_require__(34)
  , gOPS    = __webpack_require__(59)
  , pIE     = __webpack_require__(40);
module.exports = function(it){
  var result     = getKeys(it)
    , getSymbols = gOPS.f;
  if(getSymbols){
    var symbols = getSymbols(it)
      , isEnum  = pIE.f
      , i       = 0
      , key;
    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);
  } return result;
};

/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

var ctx         = __webpack_require__(32)
  , call        = __webpack_require__(152)
  , isArrayIter = __webpack_require__(150)
  , anObject    = __webpack_require__(17)
  , toLength    = __webpack_require__(89)
  , getIterFn   = __webpack_require__(91)
  , BREAK       = {}
  , RETURN      = {};
var exports = module.exports = function(iterable, entries, fn, that, ITERATOR){
  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)
    , f      = ctx(fn, that, entries ? 2 : 1)
    , index  = 0
    , length, step, iterator, result;
  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');
  // fast case for arrays with default iterator
  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){
    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);
    if(result === BREAK || result === RETURN)return result;
  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){
    result = call(iterator, f, step.value, entries);
    if(result === BREAK || result === RETURN)return result;
  }
};
exports.BREAK  = BREAK;
exports.RETURN = RETURN;

/***/ }),
/* 149 */
/***/ (function(module, exports) {

// fast apply, http://jsperf.lnkit.com/fast-apply/5
module.exports = function(fn, args, that){
  var un = that === undefined;
  switch(args.length){
    case 0: return un ? fn()
                      : fn.call(that);
    case 1: return un ? fn(args[0])
                      : fn.call(that, args[0]);
    case 2: return un ? fn(args[0], args[1])
                      : fn.call(that, args[0], args[1]);
    case 3: return un ? fn(args[0], args[1], args[2])
                      : fn.call(that, args[0], args[1], args[2]);
    case 4: return un ? fn(args[0], args[1], args[2], args[3])
                      : fn.call(that, args[0], args[1], args[2], args[3]);
  } return              fn.apply(that, args);
};

/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

// check on default Array iterator
var Iterators  = __webpack_require__(27)
  , ITERATOR   = __webpack_require__(11)('iterator')
  , ArrayProto = Array.prototype;

module.exports = function(it){
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
};

/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.2 IsArray(argument)
var cof = __webpack_require__(31);
module.exports = Array.isArray || function isArray(arg){
  return cof(arg) == 'Array';
};

/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

// call something on iterator step with safe closing on error
var anObject = __webpack_require__(17);
module.exports = function(iterator, fn, value, entries){
  try {
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch(e){
    var ret = iterator['return'];
    if(ret !== undefined)anObject(ret.call(iterator));
    throw e;
  }
};

/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var create         = __webpack_require__(58)
  , descriptor     = __webpack_require__(41)
  , setToStringTag = __webpack_require__(42)
  , IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
__webpack_require__(22)(IteratorPrototype, __webpack_require__(11)('iterator'), function(){ return this; });

module.exports = function(Constructor, NAME, next){
  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});
  setToStringTag(Constructor, NAME + ' Iterator');
};

/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

var ITERATOR     = __webpack_require__(11)('iterator')
  , SAFE_CLOSING = false;

try {
  var riter = [7][ITERATOR]();
  riter['return'] = function(){ SAFE_CLOSING = true; };
  Array.from(riter, function(){ throw 2; });
} catch(e){ /* empty */ }

module.exports = function(exec, skipClosing){
  if(!skipClosing && !SAFE_CLOSING)return false;
  var safe = false;
  try {
    var arr  = [7]
      , iter = arr[ITERATOR]();
    iter.next = function(){ return {done: safe = true}; };
    arr[ITERATOR] = function(){ return iter; };
    exec(arr);
  } catch(e){ /* empty */ }
  return safe;
};

/***/ }),
/* 155 */
/***/ (function(module, exports) {

module.exports = function(done, value){
  return {value: value, done: !!done};
};

/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

var getKeys   = __webpack_require__(34)
  , toIObject = __webpack_require__(23);
module.exports = function(object, el){
  var O      = toIObject(object)
    , keys   = getKeys(O)
    , length = keys.length
    , index  = 0
    , key;
  while(length > index)if(O[key = keys[index++]] === el)return key;
};

/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

var META     = __webpack_require__(43)('meta')
  , isObject = __webpack_require__(26)
  , has      = __webpack_require__(21)
  , setDesc  = __webpack_require__(19).f
  , id       = 0;
var isExtensible = Object.isExtensible || function(){
  return true;
};
var FREEZE = !__webpack_require__(33)(function(){
  return isExtensible(Object.preventExtensions({}));
});
var setMeta = function(it){
  setDesc(it, META, {value: {
    i: 'O' + ++id, // object ID
    w: {}          // weak collections IDs
  }});
};
var fastKey = function(it, create){
  // return primitive with prefix
  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if(!has(it, META)){
    // can't set metadata to uncaught frozen object
    if(!isExtensible(it))return 'F';
    // not necessary to add metadata
    if(!create)return 'E';
    // add missing metadata
    setMeta(it);
  // return object ID
  } return it[META].i;
};
var getWeak = function(it, create){
  if(!has(it, META)){
    // can't set metadata to uncaught frozen object
    if(!isExtensible(it))return true;
    // not necessary to add metadata
    if(!create)return false;
    // add missing metadata
    setMeta(it);
  // return hash weak collections IDs
  } return it[META].w;
};
// add metadata on freeze-family methods calling
var onFreeze = function(it){
  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);
  return it;
};
var meta = module.exports = {
  KEY:      META,
  NEED:     false,
  fastKey:  fastKey,
  getWeak:  getWeak,
  onFreeze: onFreeze
};

/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

var global    = __webpack_require__(13)
  , macrotask = __webpack_require__(88).set
  , Observer  = global.MutationObserver || global.WebKitMutationObserver
  , process   = global.process
  , Promise   = global.Promise
  , isNode    = __webpack_require__(31)(process) == 'process';

module.exports = function(){
  var head, last, notify;

  var flush = function(){
    var parent, fn;
    if(isNode && (parent = process.domain))parent.exit();
    while(head){
      fn   = head.fn;
      head = head.next;
      try {
        fn();
      } catch(e){
        if(head)notify();
        else last = undefined;
        throw e;
      }
    } last = undefined;
    if(parent)parent.enter();
  };

  // Node.js
  if(isNode){
    notify = function(){
      process.nextTick(flush);
    };
  // browsers with MutationObserver
  } else if(Observer){
    var toggle = true
      , node   = document.createTextNode('');
    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new
    notify = function(){
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if(Promise && Promise.resolve){
    var promise = Promise.resolve();
    notify = function(){
      promise.then(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    notify = function(){
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global, flush);
    };
  }

  return function(fn){
    var task = {fn: fn, next: undefined};
    if(last)last.next = task;
    if(!head){
      head = task;
      notify();
    } last = task;
  };
};

/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.2.1 Object.assign(target, source, ...)
var getKeys  = __webpack_require__(34)
  , gOPS     = __webpack_require__(59)
  , pIE      = __webpack_require__(40)
  , toObject = __webpack_require__(90)
  , IObject  = __webpack_require__(82)
  , $assign  = Object.assign;

// should work with symbols and should have deterministic property order (V8 bug)
module.exports = !$assign || __webpack_require__(33)(function(){
  var A = {}
    , B = {}
    , S = Symbol()
    , K = 'abcdefghijklmnopqrst';
  A[S] = 7;
  K.split('').forEach(function(k){ B[k] = k; });
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;
}) ? function assign(target, source){ // eslint-disable-line no-unused-vars
  var T     = toObject(target)
    , aLen  = arguments.length
    , index = 1
    , getSymbols = gOPS.f
    , isEnum     = pIE.f;
  while(aLen > index){
    var S      = IObject(arguments[index++])
      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)
      , length = keys.length
      , j      = 0
      , key;
    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];
  } return T;
} : $assign;

/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

var dP       = __webpack_require__(19)
  , anObject = __webpack_require__(17)
  , getKeys  = __webpack_require__(34);

module.exports = __webpack_require__(18) ? Object.defineProperties : function defineProperties(O, Properties){
  anObject(O);
  var keys   = getKeys(Properties)
    , length = keys.length
    , i = 0
    , P;
  while(length > i)dP.f(O, P = keys[i++], Properties[P]);
  return O;
};

/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
var toIObject = __webpack_require__(23)
  , gOPN      = __webpack_require__(85).f
  , toString  = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function(it){
  try {
    return gOPN(it);
  } catch(e){
    return windowNames.slice();
  }
};

module.exports.f = function getOwnPropertyNames(it){
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));
};


/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has         = __webpack_require__(21)
  , toObject    = __webpack_require__(90)
  , IE_PROTO    = __webpack_require__(60)('IE_PROTO')
  , ObjectProto = Object.prototype;

module.exports = Object.getPrototypeOf || function(O){
  O = toObject(O);
  if(has(O, IE_PROTO))return O[IE_PROTO];
  if(typeof O.constructor == 'function' && O instanceof O.constructor){
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectProto : null;
};

/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

var hide = __webpack_require__(22);
module.exports = function(target, src, safe){
  for(var key in src){
    if(safe && target[key])target[key] = src[key];
    else hide(target, key, src[key]);
  } return target;
};

/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
var isObject = __webpack_require__(26)
  , anObject = __webpack_require__(17);
var check = function(O, proto){
  anObject(O);
  if(!isObject(proto) && proto !== null)throw TypeError(proto + ": can't set as prototype!");
};
module.exports = {
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line
    function(test, buggy, set){
      try {
        set = __webpack_require__(32)(Function.call, __webpack_require__(84).f(Object.prototype, '__proto__').set, 2);
        set(test, []);
        buggy = !(test instanceof Array);
      } catch(e){ buggy = true; }
      return function setPrototypeOf(O, proto){
        check(O, proto);
        if(buggy)O.__proto__ = proto;
        else set(O, proto);
        return O;
      };
    }({}, false) : undefined),
  check: check
};

/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global      = __webpack_require__(13)
  , core        = __webpack_require__(12)
  , dP          = __webpack_require__(19)
  , DESCRIPTORS = __webpack_require__(18)
  , SPECIES     = __webpack_require__(11)('species');

module.exports = function(KEY){
  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];
  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {
    configurable: true,
    get: function(){ return this; }
  });
};

/***/ }),
/* 166 */
/***/ (function(module, exports, __webpack_require__) {

// 7.3.20 SpeciesConstructor(O, defaultConstructor)
var anObject  = __webpack_require__(17)
  , aFunction = __webpack_require__(53)
  , SPECIES   = __webpack_require__(11)('species');
module.exports = function(O, D){
  var C = anObject(O).constructor, S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);
};

/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(62)
  , defined   = __webpack_require__(55);
// true  -> String#at
// false -> String#codePointAt
module.exports = function(TO_STRING){
  return function(that, pos){
    var s = String(defined(that))
      , i = toInteger(pos)
      , l = s.length
      , a, b;
    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;
    a = s.charCodeAt(i);
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff
      ? TO_STRING ? s.charAt(i) : a
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
  };
};

/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(62)
  , max       = Math.max
  , min       = Math.min;
module.exports = function(index, length){
  index = toInteger(index);
  return index < 0 ? max(index + length, 0) : min(index, length);
};

/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(17)
  , get      = __webpack_require__(91);
module.exports = __webpack_require__(12).getIterator = function(it){
  var iterFn = get(it);
  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');
  return anObject(iterFn.call(it));
};

/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

var classof   = __webpack_require__(54)
  , ITERATOR  = __webpack_require__(11)('iterator')
  , Iterators = __webpack_require__(27);
module.exports = __webpack_require__(12).isIterable = function(it){
  var O = Object(it);
  return O[ITERATOR] !== undefined
    || '@@iterator' in O
    || Iterators.hasOwnProperty(classof(O));
};

/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var addToUnscopables = __webpack_require__(144)
  , step             = __webpack_require__(155)
  , Iterators        = __webpack_require__(27)
  , toIObject        = __webpack_require__(23);

// 22.1.3.4 Array.prototype.entries()
// 22.1.3.13 Array.prototype.keys()
// 22.1.3.29 Array.prototype.values()
// 22.1.3.30 Array.prototype[@@iterator]()
module.exports = __webpack_require__(83)(Array, 'Array', function(iterated, kind){
  this._t = toIObject(iterated); // target
  this._i = 0;                   // next index
  this._k = kind;                // kind
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()
}, function(){
  var O     = this._t
    , kind  = this._k
    , index = this._i++;
  if(!O || index >= O.length){
    this._t = undefined;
    return step(1);
  }
  if(kind == 'keys'  )return step(0, index);
  if(kind == 'values')return step(0, O[index]);
  return step(0, [index, O[index]]);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)
Iterators.Arguments = Iterators.Array;

addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');

/***/ }),
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.1 Object.assign(target, source)
var $export = __webpack_require__(20);

$export($export.S + $export.F, 'Object', {assign: __webpack_require__(159)});

/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(20)
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
$export($export.S, 'Object', {create: __webpack_require__(58)});

/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(20);
// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)
$export($export.S + $export.F * !__webpack_require__(18), 'Object', {defineProperty: __webpack_require__(19).f});

/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.19 Object.setPrototypeOf(O, proto)
var $export = __webpack_require__(20);
$export($export.S, 'Object', {setPrototypeOf: __webpack_require__(164).set});

/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY            = __webpack_require__(39)
  , global             = __webpack_require__(13)
  , ctx                = __webpack_require__(32)
  , classof            = __webpack_require__(54)
  , $export            = __webpack_require__(20)
  , isObject           = __webpack_require__(26)
  , aFunction          = __webpack_require__(53)
  , anInstance         = __webpack_require__(145)
  , forOf              = __webpack_require__(148)
  , speciesConstructor = __webpack_require__(166)
  , task               = __webpack_require__(88).set
  , microtask          = __webpack_require__(158)()
  , PROMISE            = 'Promise'
  , TypeError          = global.TypeError
  , process            = global.process
  , $Promise           = global[PROMISE]
  , process            = global.process
  , isNode             = classof(process) == 'process'
  , empty              = function(){ /* empty */ }
  , Internal, GenericPromiseCapability, Wrapper;

var USE_NATIVE = !!function(){
  try {
    // correct subclassing with @@species support
    var promise     = $Promise.resolve(1)
      , FakePromise = (promise.constructor = {})[__webpack_require__(11)('species')] = function(exec){ exec(empty, empty); };
    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test
    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;
  } catch(e){ /* empty */ }
}();

// helpers
var sameConstructor = function(a, b){
  // with library wrapper special case
  return a === b || a === $Promise && b === Wrapper;
};
var isThenable = function(it){
  var then;
  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
};
var newPromiseCapability = function(C){
  return sameConstructor($Promise, C)
    ? new PromiseCapability(C)
    : new GenericPromiseCapability(C);
};
var PromiseCapability = GenericPromiseCapability = function(C){
  var resolve, reject;
  this.promise = new C(function($$resolve, $$reject){
    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject  = $$reject;
  });
  this.resolve = aFunction(resolve);
  this.reject  = aFunction(reject);
};
var perform = function(exec){
  try {
    exec();
  } catch(e){
    return {error: e};
  }
};
var notify = function(promise, isReject){
  if(promise._n)return;
  promise._n = true;
  var chain = promise._c;
  microtask(function(){
    var value = promise._v
      , ok    = promise._s == 1
      , i     = 0;
    var run = function(reaction){
      var handler = ok ? reaction.ok : reaction.fail
        , resolve = reaction.resolve
        , reject  = reaction.reject
        , domain  = reaction.domain
        , result, then;
      try {
        if(handler){
          if(!ok){
            if(promise._h == 2)onHandleUnhandled(promise);
            promise._h = 1;
          }
          if(handler === true)result = value;
          else {
            if(domain)domain.enter();
            result = handler(value);
            if(domain)domain.exit();
          }
          if(result === reaction.promise){
            reject(TypeError('Promise-chain cycle'));
          } else if(then = isThenable(result)){
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch(e){
        reject(e);
      }
    };
    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach
    promise._c = [];
    promise._n = false;
    if(isReject && !promise._h)onUnhandled(promise);
  });
};
var onUnhandled = function(promise){
  task.call(global, function(){
    var value = promise._v
      , abrupt, handler, console;
    if(isUnhandled(promise)){
      abrupt = perform(function(){
        if(isNode){
          process.emit('unhandledRejection', value, promise);
        } else if(handler = global.onunhandledrejection){
          handler({promise: promise, reason: value});
        } else if((console = global.console) && console.error){
          console.error('Unhandled promise rejection', value);
        }
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      promise._h = isNode || isUnhandled(promise) ? 2 : 1;
    } promise._a = undefined;
    if(abrupt)throw abrupt.error;
  });
};
var isUnhandled = function(promise){
  if(promise._h == 1)return false;
  var chain = promise._a || promise._c
    , i     = 0
    , reaction;
  while(chain.length > i){
    reaction = chain[i++];
    if(reaction.fail || !isUnhandled(reaction.promise))return false;
  } return true;
};
var onHandleUnhandled = function(promise){
  task.call(global, function(){
    var handler;
    if(isNode){
      process.emit('rejectionHandled', promise);
    } else if(handler = global.onrejectionhandled){
      handler({promise: promise, reason: promise._v});
    }
  });
};
var $reject = function(value){
  var promise = this;
  if(promise._d)return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  promise._v = value;
  promise._s = 2;
  if(!promise._a)promise._a = promise._c.slice();
  notify(promise, true);
};
var $resolve = function(value){
  var promise = this
    , then;
  if(promise._d)return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  try {
    if(promise === value)throw TypeError("Promise can't be resolved itself");
    if(then = isThenable(value)){
      microtask(function(){
        var wrapper = {_w: promise, _d: false}; // wrap
        try {
          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));
        } catch(e){
          $reject.call(wrapper, e);
        }
      });
    } else {
      promise._v = value;
      promise._s = 1;
      notify(promise, false);
    }
  } catch(e){
    $reject.call({_w: promise, _d: false}, e); // wrap
  }
};

// constructor polyfill
if(!USE_NATIVE){
  // 25.4.3.1 Promise(executor)
  $Promise = function Promise(executor){
    anInstance(this, $Promise, PROMISE, '_h');
    aFunction(executor);
    Internal.call(this);
    try {
      executor(ctx($resolve, this, 1), ctx($reject, this, 1));
    } catch(err){
      $reject.call(this, err);
    }
  };
  Internal = function Promise(executor){
    this._c = [];             // <- awaiting reactions
    this._a = undefined;      // <- checked in isUnhandled reactions
    this._s = 0;              // <- state
    this._d = false;          // <- done
    this._v = undefined;      // <- value
    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled
    this._n = false;          // <- notify
  };
  Internal.prototype = __webpack_require__(163)($Promise.prototype, {
    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
    then: function then(onFulfilled, onRejected){
      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));
      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail   = typeof onRejected == 'function' && onRejected;
      reaction.domain = isNode ? process.domain : undefined;
      this._c.push(reaction);
      if(this._a)this._a.push(reaction);
      if(this._s)notify(this, false);
      return reaction.promise;
    },
    // 25.4.5.1 Promise.prototype.catch(onRejected)
    'catch': function(onRejected){
      return this.then(undefined, onRejected);
    }
  });
  PromiseCapability = function(){
    var promise  = new Internal;
    this.promise = promise;
    this.resolve = ctx($resolve, promise, 1);
    this.reject  = ctx($reject, promise, 1);
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});
__webpack_require__(42)($Promise, PROMISE);
__webpack_require__(165)(PROMISE);
Wrapper = __webpack_require__(12)[PROMISE];

// statics
$export($export.S + $export.F * !USE_NATIVE, PROMISE, {
  // 25.4.4.5 Promise.reject(r)
  reject: function reject(r){
    var capability = newPromiseCapability(this)
      , $$reject   = capability.reject;
    $$reject(r);
    return capability.promise;
  }
});
$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {
  // 25.4.4.6 Promise.resolve(x)
  resolve: function resolve(x){
    // instanceof instead of internal slot check because we should fix it without replacement native Promise core
    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;
    var capability = newPromiseCapability(this)
      , $$resolve  = capability.resolve;
    $$resolve(x);
    return capability.promise;
  }
});
$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(154)(function(iter){
  $Promise.all(iter)['catch'](empty);
})), PROMISE, {
  // 25.4.4.1 Promise.all(iterable)
  all: function all(iterable){
    var C          = this
      , capability = newPromiseCapability(C)
      , resolve    = capability.resolve
      , reject     = capability.reject;
    var abrupt = perform(function(){
      var values    = []
        , index     = 0
        , remaining = 1;
      forOf(iterable, false, function(promise){
        var $index        = index++
          , alreadyCalled = false;
        values.push(undefined);
        remaining++;
        C.resolve(promise).then(function(value){
          if(alreadyCalled)return;
          alreadyCalled  = true;
          values[$index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if(abrupt)reject(abrupt.error);
    return capability.promise;
  },
  // 25.4.4.4 Promise.race(iterable)
  race: function race(iterable){
    var C          = this
      , capability = newPromiseCapability(C)
      , reject     = capability.reject;
    var abrupt = perform(function(){
      forOf(iterable, false, function(promise){
        C.resolve(promise).then(capability.resolve, reject);
      });
    });
    if(abrupt)reject(abrupt.error);
    return capability.promise;
  }
});

/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// ECMAScript 6 symbols shim
var global         = __webpack_require__(13)
  , has            = __webpack_require__(21)
  , DESCRIPTORS    = __webpack_require__(18)
  , $export        = __webpack_require__(20)
  , redefine       = __webpack_require__(87)
  , META           = __webpack_require__(157).KEY
  , $fails         = __webpack_require__(33)
  , shared         = __webpack_require__(61)
  , setToStringTag = __webpack_require__(42)
  , uid            = __webpack_require__(43)
  , wks            = __webpack_require__(11)
  , wksExt         = __webpack_require__(65)
  , wksDefine      = __webpack_require__(64)
  , keyOf          = __webpack_require__(156)
  , enumKeys       = __webpack_require__(147)
  , isArray        = __webpack_require__(151)
  , anObject       = __webpack_require__(17)
  , toIObject      = __webpack_require__(23)
  , toPrimitive    = __webpack_require__(63)
  , createDesc     = __webpack_require__(41)
  , _create        = __webpack_require__(58)
  , gOPNExt        = __webpack_require__(161)
  , $GOPD          = __webpack_require__(84)
  , $DP            = __webpack_require__(19)
  , $keys          = __webpack_require__(34)
  , gOPD           = $GOPD.f
  , dP             = $DP.f
  , gOPN           = gOPNExt.f
  , $Symbol        = global.Symbol
  , $JSON          = global.JSON
  , _stringify     = $JSON && $JSON.stringify
  , PROTOTYPE      = 'prototype'
  , HIDDEN         = wks('_hidden')
  , TO_PRIMITIVE   = wks('toPrimitive')
  , isEnum         = {}.propertyIsEnumerable
  , SymbolRegistry = shared('symbol-registry')
  , AllSymbols     = shared('symbols')
  , OPSymbols      = shared('op-symbols')
  , ObjectProto    = Object[PROTOTYPE]
  , USE_NATIVE     = typeof $Symbol == 'function'
  , QObject        = global.QObject;
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDesc = DESCRIPTORS && $fails(function(){
  return _create(dP({}, 'a', {
    get: function(){ return dP(this, 'a', {value: 7}).a; }
  })).a != 7;
}) ? function(it, key, D){
  var protoDesc = gOPD(ObjectProto, key);
  if(protoDesc)delete ObjectProto[key];
  dP(it, key, D);
  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);
} : dP;

var wrap = function(tag){
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);
  sym._k = tag;
  return sym;
};

var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){
  return typeof it == 'symbol';
} : function(it){
  return it instanceof $Symbol;
};

var $defineProperty = function defineProperty(it, key, D){
  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);
  anObject(it);
  key = toPrimitive(key, true);
  anObject(D);
  if(has(AllSymbols, key)){
    if(!D.enumerable){
      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));
      it[HIDDEN][key] = true;
    } else {
      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;
      D = _create(D, {enumerable: createDesc(0, false)});
    } return setSymbolDesc(it, key, D);
  } return dP(it, key, D);
};
var $defineProperties = function defineProperties(it, P){
  anObject(it);
  var keys = enumKeys(P = toIObject(P))
    , i    = 0
    , l = keys.length
    , key;
  while(l > i)$defineProperty(it, key = keys[i++], P[key]);
  return it;
};
var $create = function create(it, P){
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);
};
var $propertyIsEnumerable = function propertyIsEnumerable(key){
  var E = isEnum.call(this, key = toPrimitive(key, true));
  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){
  it  = toIObject(it);
  key = toPrimitive(key, true);
  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;
  var D = gOPD(it, key);
  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;
  return D;
};
var $getOwnPropertyNames = function getOwnPropertyNames(it){
  var names  = gOPN(toIObject(it))
    , result = []
    , i      = 0
    , key;
  while(names.length > i){
    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);
  } return result;
};
var $getOwnPropertySymbols = function getOwnPropertySymbols(it){
  var IS_OP  = it === ObjectProto
    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))
    , result = []
    , i      = 0
    , key;
  while(names.length > i){
    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);
  } return result;
};

// 19.4.1.1 Symbol([description])
if(!USE_NATIVE){
  $Symbol = function Symbol(){
    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);
    var $set = function(value){
      if(this === ObjectProto)$set.call(OPSymbols, value);
      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;
      setSymbolDesc(this, tag, createDesc(1, value));
    };
    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});
    return wrap(tag);
  };
  redefine($Symbol[PROTOTYPE], 'toString', function toString(){
    return this._k;
  });

  $GOPD.f = $getOwnPropertyDescriptor;
  $DP.f   = $defineProperty;
  __webpack_require__(85).f = gOPNExt.f = $getOwnPropertyNames;
  __webpack_require__(40).f  = $propertyIsEnumerable;
  __webpack_require__(59).f = $getOwnPropertySymbols;

  if(DESCRIPTORS && !__webpack_require__(39)){
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);
  }

  wksExt.f = function(name){
    return wrap(wks(name));
  }
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});

for(var symbols = (
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'
).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);

for(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);

$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {
  // 19.4.2.1 Symbol.for(key)
  'for': function(key){
    return has(SymbolRegistry, key += '')
      ? SymbolRegistry[key]
      : SymbolRegistry[key] = $Symbol(key);
  },
  // 19.4.2.5 Symbol.keyFor(sym)
  keyFor: function keyFor(key){
    if(isSymbol(key))return keyOf(SymbolRegistry, key);
    throw TypeError(key + ' is not a symbol!');
  },
  useSetter: function(){ setter = true; },
  useSimple: function(){ setter = false; }
});

$export($export.S + $export.F * !USE_NATIVE, 'Object', {
  // 19.1.2.2 Object.create(O [, Properties])
  create: $create,
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)
  defineProperty: $defineProperty,
  // 19.1.2.3 Object.defineProperties(O, Properties)
  defineProperties: $defineProperties,
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
  // 19.1.2.7 Object.getOwnPropertyNames(O)
  getOwnPropertyNames: $getOwnPropertyNames,
  // 19.1.2.8 Object.getOwnPropertySymbols(O)
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// 24.3.2 JSON.stringify(value [, replacer [, space]])
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){
  var S = $Symbol();
  // MS Edge converts symbol values to JSON as {}
  // WebKit converts symbol values to JSON as null
  // V8 throws on boxed symbols
  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';
})), 'JSON', {
  stringify: function stringify(it){
    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined
    var args = [it]
      , i    = 1
      , replacer, $replacer;
    while(arguments.length > i)args.push(arguments[i++]);
    replacer = args[1];
    if(typeof replacer == 'function')$replacer = replacer;
    if($replacer || !isArray(replacer))replacer = function(key, value){
      if($replacer)value = $replacer.call(this, key, value);
      if(!isSymbol(value))return value;
    };
    args[1] = replacer;
    return _stringify.apply($JSON, args);
  }
});

// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)
$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(22)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
// 19.4.3.5 Symbol.prototype[@@toStringTag]
setToStringTag($Symbol, 'Symbol');
// 20.2.1.9 Math[@@toStringTag]
setToStringTag(Math, 'Math', true);
// 24.3.3 JSON[@@toStringTag]
setToStringTag(global.JSON, 'JSON', true);

/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(64)('asyncIterator');

/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(64)('observable');

/***/ }),
/* 180 */
/***/ (function(module, exports) {

module.exports = require("addons-linter");

/***/ }),
/* 181 */
/***/ (function(module, exports) {

module.exports = require("copy-dir");

/***/ }),
/* 182 */
/***/ (function(module, exports) {

module.exports = require("debounce");

/***/ }),
/* 183 */
/***/ (function(module, exports) {

module.exports = require("decamelize");

/***/ }),
/* 184 */
/***/ (function(module, exports) {

module.exports = require("events");

/***/ }),
/* 185 */
/***/ (function(module, exports) {

module.exports = require("fx-runner");

/***/ }),
/* 186 */
/***/ (function(module, exports) {

module.exports = require("minimatch");

/***/ }),
/* 187 */
/***/ (function(module, exports) {

module.exports = require("mkdirp");

/***/ }),
/* 188 */
/***/ (function(module, exports) {

module.exports = require("node-firefox-connect");

/***/ }),
/* 189 */
/***/ (function(module, exports) {

module.exports = require("node-notifier");

/***/ }),
/* 190 */
/***/ (function(module, exports) {

module.exports = require("open");

/***/ }),
/* 191 */
/***/ (function(module, exports) {

module.exports = require("readline");

/***/ }),
/* 192 */
/***/ (function(module, exports) {

module.exports = require("regenerator-runtime");

/***/ }),
/* 193 */
/***/ (function(module, exports) {

module.exports = require("require-uncached");

/***/ }),
/* 194 */
/***/ (function(module, exports) {

module.exports = require("sign-addon");

/***/ }),
/* 195 */
/***/ (function(module, exports) {

module.exports = require("stream");

/***/ }),
/* 196 */
/***/ (function(module, exports) {

module.exports = require("tmp");

/***/ }),
/* 197 */
/***/ (function(module, exports) {

module.exports = require("update-notifier");

/***/ }),
/* 198 */
/***/ (function(module, exports) {

module.exports = require("watchpack");

/***/ }),
/* 199 */
/***/ (function(module, exports) {

module.exports = require("yargs");

/***/ }),
/* 200 */
/***/ (function(module, exports) {

module.exports = require("yauzl");

/***/ }),
/* 201 */
/***/ (function(module, exports) {

module.exports = require("zip-dir");

/***/ })
/******/ ]);
//# sourceMappingURL=unit-tests.js.map